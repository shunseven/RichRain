var t;!function(t){t[t.No=0]="No",t[t.Yes=1]="Yes",t[t.NoAndSkip=2]="NoAndSkip",t[t.YesAndSkip=3]="YesAndSkip"}(t||(t={}));const e={};function s(t){return void 0===t}function r(t){return null==t}function i(t){return"string"==typeof t}const{isFinite:n}=Number;function o(t){return"number"==typeof t}const a=/^-?\d+(?:\.\d+)?$/;function h(t){return"string"==typeof t&&a.test(t)?+t:t}const{isArray:l}=Array;function d(t){return t&&"object"==typeof t}function c(t){return d(t)&&!l(t)}function u(t){return"{}"===JSON.stringify(t)}const _={default:(t,e)=>(p(e,t),p(t,e),t),assign(t,e,s){let r;Object.keys(e).forEach(i=>{var n,o;if(r=e[i],(null==r?void 0:r.constructor)===Object&&(null===(n=t[i])||void 0===n?void 0:n.constructor)===Object)return p(t[i],e[i],s&&s[i]);s&&i in s?(null===(o=s[i])||void 0===o?void 0:o.constructor)===Object&&p(t[i]={},e[i],s[i]):t[i]=e[i]})},copyAttrs:(t,e,r)=>(r.forEach(r=>{s(e[r])||(t[r]=e[r])}),t),clone:t=>JSON.parse(JSON.stringify(t)),toMap(t){const e={};for(let s=0,r=t.length;s<r;s++)e[t[s]]=!0;return e},stintSet(t,e,s){s||(s=void 0),t[e]!==s&&(t[e]=s)}},{assign:p}=_;class f{get __useNaturalRatio(){return!0}get __isLinePath(){const{path:t}=this;return t&&6===t.length&&1===t[0]}get __usePathBox(){return this.__pathInputed}get __blendMode(){if(this.eraser&&"path"!==this.eraser)return"destination-out";const{blendMode:t}=this;return"pass-through"===t?null:t}constructor(t){this.__leaf=t}__get(t){if(this.__input){const e=this.__input[t];if(!s(e))return e}return this[t]}__getData(){const t={tag:this.__leaf.tag},{__input:e}=this;let r;for(let i in this)"_"!==i[0]&&(r=e?e[i]:void 0,t[i]=s(r)?this[i]:r);return t}__setInput(t,e){this.__input||(this.__input={}),this.__input[t]=e}__getInput(t){if(this.__input){const e=this.__input[t];if(!s(e))return e}if("path"!==t||this.__pathInputed)return this["_"+t]}__removeInput(t){this.__input&&!s(this.__input[t])&&(this.__input[t]=void 0)}__getInputData(t,e){const r={};if(t)if(l(t))for(let e of t)r[e]=this.__getInput(e);else for(let e in t)r[e]=this.__getInput(e);else{let t,e,{__input:i}=this;r.tag=this.__leaf.tag;for(let n in this)if("_"!==n[0]&&(t=this["_"+n],!s(t))){if("path"===n&&!this.__pathInputed)continue;e=i?i[n]:void 0,r[n]=s(e)?t:e}}if(e&&e.matrix){const{a:t,b:e,c:s,d:i,e:n,f:o}=this.__leaf.__localMatrix;r.matrix={a:t,b:e,c:s,d:i,e:n,f:o}}return r}__setMiddle(t,e){this.__middle||(this.__middle={}),this.__middle[t]=e}__getMiddle(t){return this.__middle&&this.__middle[t]}__checkSingle(){const t=this;if("pass-through"===t.blendMode){const e=this.__leaf;t.opacity<1&&(e.isBranch||t.__hasMultiPaint)||e.__hasEraser||t.eraser||t.filter?t.__single=!0:t.__single&&(t.__single=!1)}else t.__single=!0}__removeNaturalSize(){this.__naturalWidth=this.__naturalHeight=void 0}destroy(){this.__input=this.__middle=null}}const g={RUNTIME:"runtime",LEAF:"leaf",TASK:"task",CNAVAS:"canvas",IMAGE:"image",types:{},create(t){const{types:e}=y;return e[t]?e[t]++:(e[t]=1,0)}},y=g;let m,x,w;const{max:b}=Math,B=[0,0,0,0],v={zero:[...B],tempFour:B,set:(t,e,s,r,i)=>(void 0===s&&(s=r=i=e),t[0]=e,t[1]=s,t[2]=r,t[3]=i,t),setTemp:(t,e,s,r)=>k(B,t,e,s,r),toTempAB(t,e,s){w=s?o(t)?e:t:[],o(t)?(m=O(t),x=e):o(e)?(m=t,x=O(e)):(m=t,x=e),4!==m.length&&(m=C(m)),4!==x.length&&(x=C(x))},get(t,e){let r;if(!o(t))switch(t.length){case 4:r=s(e)?t:[...t];break;case 2:r=[t[0],t[1],t[0],t[1]];break;case 3:r=[t[0],t[1],t[2],t[1]];break;case 1:t=t[0];break;default:t=0}if(r||(r=[t,t,t,t]),!s(e))for(let t=0;t<4;t++)r[t]>e&&(r[t]=e);return r},max:(t,e,s)=>o(t)&&o(e)?b(t,e):(T(t,e,s),k(w,b(m[0],x[0]),b(m[1],x[1]),b(m[2],x[2]),b(m[3],x[3]))),add:(t,e,s)=>o(t)&&o(e)?t+e:(T(t,e,s),k(w,m[0]+x[0],m[1]+x[1],m[2]+x[2],m[3]+x[3])),swapAndScale(t,e,s,r){if(o(t))return e===s?t*e:[t*s,t*e];const i=r?t:[],[n,a,h,l]=4===t.length?t:C(t);return k(i,h*s,l*e,n*s,a*e)}},{set:k,get:C,setTemp:O,toTempAB:T}=v,{round:P,pow:S,max:L,floor:R,PI:E}=Math,I={within:(t,e,r)=>(d(e)&&(r=e.max,e=e.min),!s(e)&&t<e&&(t=e),!s(r)&&t>r&&(t=r),t),fourNumber:v.get,formatRotation:(t,e)=>(t%=360,e?t<0&&(t+=360):(t>180&&(t-=360),t<-180&&(t+=360)),I.float(t)),getGapRotation(t,e,s=0){let r=t+s;if(e>1){const t=Math.abs(r%e);(t<1||t>e-1)&&(r=Math.round(r/e)*e)}return r-s},float(t,e){const r=s(e)?1e12:S(10,e);return-0===(t=P(t*r)/r)?0:t},sign:t=>t<0?-1:1,getScaleData(t,e,s,r){if(r||(r={}),e){const t=(o(e)?e:e.width||0)/s.width,i=(o(e)?e:e.height||0)/s.height;r.scaleX=t||i||1,r.scaleY=i||t||1}else t&&I.assignScale(r,t);return r},assignScale(t,e){o(e)?t.scaleX=t.scaleY=e:(t.scaleX=e.x,t.scaleY=e.y)},getFloorScale:(t,e=1)=>L(R(t),e)/t,randInt:M,randColor:t=>`rgba(${M(255)},${M(255)},${M(255)},${t||1})`};function M(t){return Math.round(Math.random()*t)}const A=E/180,W=2*E,N=E/2;function Y(){return{x:0,y:0}}function D(){return{x:0,y:0,width:0,height:0}}function X(){return{a:1,b:0,c:0,d:1,e:0,f:0}}const{sin:z,cos:F,acos:U,sqrt:j}=Math,{float:H}=I,V={};function G(){return Object.assign(Object.assign(Object.assign({},{a:1,b:0,c:0,d:1,e:0,f:0}),{x:0,y:0,width:0,height:0}),{scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0})}const q={defaultMatrix:{a:1,b:0,c:0,d:1,e:0,f:0},defaultWorld:G(),tempMatrix:{},set(t,e=1,s=0,r=0,i=1,n=0,o=0){t.a=e,t.b=s,t.c=r,t.d=i,t.e=n,t.f=o},get:X,getWorld:G,copy(t,e){t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f},translate(t,e,s){t.e+=e,t.f+=s},translateInner(t,e,s,r){t.e+=t.a*e+t.c*s,t.f+=t.b*e+t.d*s,r&&(t.e-=e,t.f-=s)},scale(t,e,s=e){t.a*=e,t.b*=e,t.c*=s,t.d*=s},pixelScale(t,e,s){s||(s=t),s.a=t.a*e,s.b=t.b*e,s.c=t.c*e,s.d=t.d*e,s.e=t.e*e,s.f=t.f*e},scaleOfOuter(t,e,s,r){Q.toInnerPoint(t,e,V),Q.scaleOfInner(t,V,s,r)},scaleOfInner(t,e,s,r=s){Q.translateInner(t,e.x,e.y),Q.scale(t,s,r),Q.translateInner(t,-e.x,-e.y)},rotate(t,e){const{a:s,b:r,c:i,d:n}=t,o=F(e*=A),a=z(e);t.a=s*o-r*a,t.b=s*a+r*o,t.c=i*o-n*a,t.d=i*a+n*o},rotateOfOuter(t,e,s){Q.toInnerPoint(t,e,V),Q.rotateOfInner(t,V,s)},rotateOfInner(t,e,s){Q.translateInner(t,e.x,e.y),Q.rotate(t,s),Q.translateInner(t,-e.x,-e.y)},skew(t,e,s){const{a:r,b:i,c:n,d:o}=t;s&&(s*=A,t.a=r+n*s,t.b=i+o*s),e&&(e*=A,t.c=n+r*e,t.d=o+i*e)},skewOfOuter(t,e,s,r){Q.toInnerPoint(t,e,V),Q.skewOfInner(t,V,s,r)},skewOfInner(t,e,s,r=0){Q.translateInner(t,e.x,e.y),Q.skew(t,s,r),Q.translateInner(t,-e.x,-e.y)},multiply(t,e){const{a:s,b:r,c:i,d:n,e:o,f:a}=t;t.a=e.a*s+e.b*i,t.b=e.a*r+e.b*n,t.c=e.c*s+e.d*i,t.d=e.c*r+e.d*n,t.e=e.e*s+e.f*i+o,t.f=e.e*r+e.f*n+a},multiplyParent(t,e,r,i,n){const{e:o,f:a}=t;if(r||(r=t),s(i)&&(i=1!==t.a||t.b||t.c||1!==t.d),i){const{a:s,b:i,c:o,d:a}=t;r.a=s*e.a+i*e.c,r.b=s*e.b+i*e.d,r.c=o*e.a+a*e.c,r.d=o*e.b+a*e.d,n&&(r.scaleX=e.scaleX*n.scaleX,r.scaleY=e.scaleY*n.scaleY)}else r.a=e.a,r.b=e.b,r.c=e.c,r.d=e.d,n&&(r.scaleX=e.scaleX,r.scaleY=e.scaleY);r.e=o*e.a+a*e.c+e.e,r.f=o*e.b+a*e.d+e.f},divide(t,e){Q.multiply(t,Q.tempInvert(e))},divideParent(t,e){Q.multiplyParent(t,Q.tempInvert(e))},tempInvert(t){const{tempMatrix:e}=Q;return Q.copy(e,t),Q.invert(e),e},invert(t){const{a:e,b:s,c:r,d:i,e:n,f:o}=t;if(s||r){const a=1/(e*i-s*r);t.a=i*a,t.b=-s*a,t.c=-r*a,t.d=e*a,t.e=-(n*i-o*r)*a,t.f=-(o*e-n*s)*a}else if(1===e&&1===i)t.e=-n,t.f=-o;else{const s=1/(e*i);t.a=i*s,t.d=e*s,t.e=-n*i*s,t.f=-o*e*s}},toOuterPoint(t,e,s,r){const{x:i,y:n}=e;s||(s=e),s.x=i*t.a+n*t.c,s.y=i*t.b+n*t.d,r||(s.x+=t.e,s.y+=t.f)},toInnerPoint(t,e,s,r){const{a:i,b:n,c:o,d:a}=t,h=1/(i*a-n*o),{x:l,y:d}=e;if(s||(s=e),s.x=(l*a-d*o)*h,s.y=(d*i-l*n)*h,!r){const{e:e,f:r}=t;s.x-=(e*a-r*o)*h,s.y-=(r*i-e*n)*h}},setLayout(t,e,r,i,n){const{x:o,y:a,scaleX:h,scaleY:l}=e;if(s(n)&&(n=e.rotation||e.skewX||e.skewY),n){const{rotation:s,skewX:r,skewY:i}=e,n=s*A,o=F(n),a=z(n);if(r||i){const e=r*A,s=i*A;t.a=(o+s*-a)*h,t.b=(a+s*o)*h,t.c=(e*o-a)*l,t.d=(o+e*a)*l}else t.a=o*h,t.b=a*h,t.c=-a*l,t.d=o*l}else t.a=h,t.b=0,t.c=0,t.d=l;t.e=o,t.f=a,(r=r||i)&&Q.translateInner(t,-r.x,-r.y,!i)},getLayout(t,e,s,r){const{a:i,b:n,c:o,d:a,e:h,f:l}=t;let d,c,u,_,p,f=h,g=l;if(n||o){const t=i*a-n*o;if(o&&!r){d=j(i*i+n*n),c=t/d;const e=i/d;u=n>0?U(e):-U(e)}else{c=j(o*o+a*a),d=t/c;const e=o/c;u=N-(a>0?U(-e):-U(e))}const e=H(F(u)),s=z(u);d=H(d),c=H(c),_=e?H((o/c+s)/e/A,9):0,p=e?H((n/d-s)/e/A,9):0,u=H(u/A)}else d=i,c=a,u=_=p=0;return(e=s||e)&&(f+=e.x*i+e.y*o,g+=e.x*n+e.y*a,s||(f-=e.x,g-=e.y)),{x:f,y:g,scaleX:d,scaleY:c,rotation:u,skewX:_,skewY:p}},withScale(t,e,s=e){const r=t;if(!e||!s){const{a:r,b:i,c:n,d:o}=t;i||n?s=(r*o-i*n)/(e=j(r*r+i*i)):(e=r,s=o)}return r.scaleX=e,r.scaleY=s,r},reset(t){Q.set(t)}},Q=q,{float:J}=I,{toInnerPoint:Z,toOuterPoint:$}=q,{sin:K,cos:tt,abs:et,sqrt:st,atan2:rt,min:it,round:nt}=Math,ot={defaultPoint:{x:0,y:0},tempPoint:{},tempRadiusPoint:{},set(t,e=0,s=0){t.x=e,t.y=s},setRadius(t,e,r){t.radiusX=e,t.radiusY=s(r)?e:r},copy(t,e){t.x=e.x,t.y=e.y},copyFrom(t,e,s){t.x=e,t.y=s},round(t,e){t.x=e?nt(t.x-.5)+.5:nt(t.x),t.y=e?nt(t.y-.5)+.5:nt(t.y)},move(t,e,s){d(e)?(t.x+=e.x,t.y+=e.y):(t.x+=e,t.y+=s)},scale(t,e,s=e){t.x&&(t.x*=e),t.y&&(t.y*=s)},scaleOf(t,e,s,r=s){t.x+=(t.x-e.x)*(s-1),t.y+=(t.y-e.y)*(r-1)},rotate(t,e,s){s||(s=at.defaultPoint);const r=tt(e*=A),i=K(e),n=t.x-s.x,o=t.y-s.y;t.x=s.x+n*r-o*i,t.y=s.y+n*i+o*r},tempToInnerOf(t,e){const{tempPoint:s}=at;return lt(s,t),Z(e,s,s),s},tempToOuterOf(t,e){const{tempPoint:s}=at;return lt(s,t),$(e,s,s),s},tempToInnerRadiusPointOf(t,e){const{tempRadiusPoint:s}=at;return lt(s,t),at.toInnerRadiusPointOf(t,e,s),s},copyRadiusPoint:(t,e,s,r)=>(lt(t,e),dt(t,s,r),t),toInnerRadiusPointOf(t,e,s){s||(s=t),Z(e,t,s),s.radiusX=Math.abs(t.radiusX/e.scaleX),s.radiusY=Math.abs(t.radiusY/e.scaleY)},toInnerOf(t,e,s){Z(e,t,s)},toOuterOf(t,e,s){$(e,t,s)},getCenter:(t,e)=>({x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}),getCenterX:(t,e)=>t+(e-t)/2,getCenterY:(t,e)=>t+(e-t)/2,getDistance:(t,e)=>ht(t.x,t.y,e.x,e.y),getDistanceFrom(t,e,s,r){const i=et(s-t),n=et(r-e);return st(i*i+n*n)},getMinDistanceFrom:(t,e,s,r,i,n)=>it(ht(t,e,s,r),ht(s,r,i,n)),getAngle:(t,e)=>ct(t,e)/A,getRotation:(t,e,s,r)=>(r||(r=e),at.getRadianFrom(t.x,t.y,e.x,e.y,s.x,s.y,r.x,r.y)/A),getRadianFrom(t,e,r,i,n,o,a,h){s(a)&&(a=r,h=i);const l=t-r,d=e-i,c=n-a,u=o-h;return Math.atan2(l*u-d*c,l*c+d*u)},getAtan2:(t,e)=>rt(e.y-t.y,e.x-t.x),getDistancePoint(t,e,s,r,i){const n=ct(t,e);return i&&(t=e),r||(e={}),e.x=t.x+tt(n)*s,e.y=t.y+K(n)*s,e},toNumberPoints(t){let e=t;return d(t[0])&&(e=[],t.forEach(t=>e.push(t.x,t.y))),e},isSame:(t,e)=>J(t.x)===J(e.x)&&J(t.y)===J(e.y),reset(t){at.reset(t)}},at=ot,{getDistanceFrom:ht,copy:lt,setRadius:dt,getAtan2:ct}=at;class ut{constructor(t,e){this.set(t,e)}set(t,e){return d(t)?ot.copy(this,t):ot.set(this,t,e),this}get(){const{x:t,y:e}=this;return{x:t,y:e}}clone(){return new ut(this)}move(t,e){return ot.move(this,t,e),this}scale(t,e){return ot.scale(this,t,e),this}scaleOf(t,e,s){return ot.scaleOf(this,t,e,s),this}rotate(t,e){return ot.rotate(this,t,e),this}rotateOf(t,e){return ot.rotate(this,e,t),this}getRotation(t,e,s){return ot.getRotation(this,t,e,s)}toInnerOf(t,e){return ot.toInnerOf(this,t,e),this}toOuterOf(t,e){return ot.toOuterOf(this,t,e),this}getCenter(t){return new ut(ot.getCenter(this,t))}getDistance(t){return ot.getDistance(this,t)}getDistancePoint(t,e,s,r){return new ut(ot.getDistancePoint(this,t,e,s,r))}getAngle(t){return ot.getAngle(this,t)}getAtan2(t){return ot.getAtan2(this,t)}isSame(t){return ot.isSame(this,t)}reset(){return ot.reset(this),this}}const _t=new ut;class pt{constructor(t,e,s,r,i,n){this.set(t,e,s,r,i,n)}set(t,e,s,r,i,n){return d(t)?q.copy(this,t):q.set(this,t,e,s,r,i,n),this}setWith(t){return q.copy(this,t),this.scaleX=t.scaleX,this.scaleY=t.scaleY,this}get(){const{a:t,b:e,c:s,d:r,e:i,f:n}=this;return{a:t,b:e,c:s,d:r,e:i,f:n}}clone(){return new pt(this)}translate(t,e){return q.translate(this,t,e),this}translateInner(t,e){return q.translateInner(this,t,e),this}scale(t,e){return q.scale(this,t,e),this}scaleWith(t,e){return q.scale(this,t,e),this.scaleX*=t,this.scaleY*=e||t,this}pixelScale(t){return q.pixelScale(this,t),this}scaleOfOuter(t,e,s){return q.scaleOfOuter(this,t,e,s),this}scaleOfInner(t,e,s){return q.scaleOfInner(this,t,e,s),this}rotate(t){return q.rotate(this,t),this}rotateOfOuter(t,e){return q.rotateOfOuter(this,t,e),this}rotateOfInner(t,e){return q.rotateOfInner(this,t,e),this}skew(t,e){return q.skew(this,t,e),this}skewOfOuter(t,e,s){return q.skewOfOuter(this,t,e,s),this}skewOfInner(t,e,s){return q.skewOfInner(this,t,e,s),this}multiply(t){return q.multiply(this,t),this}multiplyParent(t){return q.multiplyParent(this,t),this}divide(t){return q.divide(this,t),this}divideParent(t){return q.divideParent(this,t),this}invert(){return q.invert(this),this}invertWith(){return q.invert(this),this.scaleX=1/this.scaleX,this.scaleY=1/this.scaleY,this}toOuterPoint(t,e,s){q.toOuterPoint(this,t,e,s)}toInnerPoint(t,e,s){q.toInnerPoint(this,t,e,s)}setLayout(t,e,s){return q.setLayout(this,t,e,s),this}getLayout(t,e,s){return q.getLayout(this,t,e,s)}withScale(t,e){return q.withScale(this,t,e)}reset(){q.reset(this)}}const ft=new pt,gt={tempPointBounds:{},setPoint(t,e,s){t.minX=t.maxX=e,t.minY=t.maxY=s},addPoint(t,e,s){t.minX=e<t.minX?e:t.minX,t.minY=s<t.minY?s:t.minY,t.maxX=e>t.maxX?e:t.maxX,t.maxY=s>t.maxY?s:t.maxY},addBounds(t,e,s,r,i){yt(t,e,s),yt(t,e+r,s+i)},copy(t,e){t.minX=e.minX,t.minY=e.minY,t.maxX=e.maxX,t.maxY=e.maxY},addPointBounds(t,e){t.minX=e.minX<t.minX?e.minX:t.minX,t.minY=e.minY<t.minY?e.minY:t.minY,t.maxX=e.maxX>t.maxX?e.maxX:t.maxX,t.maxY=e.maxY>t.maxY?e.maxY:t.maxY},toBounds(t,e){e.x=t.minX,e.y=t.minY,e.width=t.maxX-t.minX,e.height=t.maxY-t.minY}},{addPoint:yt}=gt;var mt,xt;!function(t){t[t.top=0]="top",t[t.right=1]="right",t[t.bottom=2]="bottom",t[t.left=3]="left"}(mt||(mt={})),function(t){t[t.topLeft=0]="topLeft",t[t.top=1]="top",t[t.topRight=2]="topRight",t[t.right=3]="right",t[t.bottomRight=4]="bottomRight",t[t.bottom=5]="bottom",t[t.bottomLeft=6]="bottomLeft",t[t.left=7]="left",t[t.center=8]="center",t[t["top-left"]=0]="top-left",t[t["top-right"]=2]="top-right",t[t["bottom-right"]=4]="bottom-right",t[t["bottom-left"]=6]="bottom-left"}(xt||(xt={}));const wt=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:1,y:.5},{x:1,y:1},{x:.5,y:1},{x:0,y:1},{x:0,y:.5},{x:.5,y:.5}];wt.forEach(t=>t.type="percent");const bt={directionData:wt,tempPoint:{},get:Bt,toPoint(t,e,s,r,i,n){const o=Bt(t);s.x=o.x,s.y=o.y,"percent"===o.type&&(s.x*=e.width,s.y*=e.height,i&&(n||(s.x-=i.x,s.y-=i.y),o.x&&(s.x-=1===o.x?i.width:.5===o.x?o.x*i.width:0),o.y&&(s.y-=1===o.y?i.height:.5===o.y?o.y*i.height:0))),r||(s.x+=e.x,s.y+=e.y)},getPoint:(t,e,s)=>(s||(s={}),bt.toPoint(t,e,s,!0),s)};function Bt(t){return i(t)?wt[xt[t]]:t}const{toPoint:vt}=bt,kt={toPoint(t,e,s,r,i,n){vt(t,s,r,i,e,n)}},{tempPointBounds:Ct,setPoint:Ot,addPoint:Tt,toBounds:Pt}=gt,{toOuterPoint:St}=q,{float:Lt,fourNumber:Rt}=I,{floor:Et,ceil:It}=Math;let Mt,At,Wt,Nt;const Yt={},Dt={},Xt={},zt={tempBounds:Xt,set(t,e=0,s=0,r=0,i=0){t.x=e,t.y=s,t.width=r,t.height=i},copy(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},copyAndSpread(t,e,s,r,i){const{x:n,y:o,width:a,height:h}=e;if(l(s)){const e=Rt(s);r?Ft.set(t,n+e[3],o+e[0],a-e[1]-e[3],h-e[2]-e[0]):Ft.set(t,n-e[3],o-e[0],a+e[1]+e[3],h+e[2]+e[0])}else r&&(s=-s),Ft.set(t,n-s,o-s,a+2*s,h+2*s);i&&("width"===i?(t.y=o,t.height=h):(t.x=n,t.width=a))},minX:t=>t.width>0?t.x:t.x+t.width,minY:t=>t.height>0?t.y:t.y+t.height,maxX:t=>t.width>0?t.x+t.width:t.x,maxY:t=>t.height>0?t.y+t.height:t.y,move(t,e,s){t.x+=e,t.y+=s},scroll(t,e){t.x+=e.scrollX,t.y+=e.scrollY},getByMove:(t,e,s)=>(t=Object.assign({},t),Ft.move(t,e,s),t),toOffsetOutBounds(t,e,s){e?jt(e,t):e=t,s||(s=t),e.offsetX=Ft.maxX(s),e.offsetY=Ft.maxY(s),Ft.move(e,-e.offsetX,-e.offsetY)},scale(t,e,s=e,r){r||ot.scale(t,e,s),t.width*=e,t.height*=s},scaleOf(t,e,s,r=s){ot.scaleOf(t,e,s,r),t.width*=s,t.height*=r},tempToOuterOf:(t,e)=>(Ft.copy(Xt,t),Ft.toOuterOf(Xt,e),Xt),getOuterOf:(t,e)=>(t=Object.assign({},t),Ft.toOuterOf(t,e),t),toOuterOf(t,e,s){if(s||(s=t),0===e.b&&0===e.c){const{a:r,d:i,e:n,f:o}=e;r>0?(s.width=t.width*r,s.x=n+t.x*r):(s.width=t.width*-r,s.x=n+t.x*r-s.width),i>0?(s.height=t.height*i,s.y=o+t.y*i):(s.height=t.height*-i,s.y=o+t.y*i-s.height)}else Yt.x=t.x,Yt.y=t.y,St(e,Yt,Dt),Ot(Ct,Dt.x,Dt.y),Yt.x=t.x+t.width,St(e,Yt,Dt),Tt(Ct,Dt.x,Dt.y),Yt.y=t.y+t.height,St(e,Yt,Dt),Tt(Ct,Dt.x,Dt.y),Yt.x=t.x,St(e,Yt,Dt),Tt(Ct,Dt.x,Dt.y),Pt(Ct,s)},toInnerOf(t,e,s){s||(s=t),Ft.move(s,-e.e,-e.f),Ft.scale(s,1/e.a,1/e.d)},getFitMatrix(t,e,s=1){const r=Math.min(s,Ft.getFitScale(t,e));return new pt(r,0,0,r,-e.x*r,-e.y*r)},getFitScale(t,e,s){const r=t.width/e.width,i=t.height/e.height;return s?Math.max(r,i):Math.min(r,i)},put(t,e,s="center",r=1,n=!0,o){o||(o=e),i(r)&&(r=Ft.getFitScale(t,e,"cover"===r)),Xt.width=n?e.width*=r:e.width*r,Xt.height=n?e.height*=r:e.height*r,kt.toPoint(s,Xt,t,o,!0,!0)},getSpread(t,e,s){const r={};return Ft.copyAndSpread(r,t,e,!1,s),r},spread(t,e,s){Ft.copyAndSpread(t,t,e,!1,s)},shrink(t,e,s){Ft.copyAndSpread(t,t,e,!0,s)},ceil(t){const{x:e,y:s}=t;t.x=Et(t.x),t.y=Et(t.y),t.width=e>t.x?It(t.width+e-t.x):It(t.width),t.height=s>t.y?It(t.height+s-t.y):It(t.height)},unsign(t){t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height)},float(t,e){t.x=Lt(t.x,e),t.y=Lt(t.y,e),t.width=Lt(t.width,e),t.height=Lt(t.height,e)},add(t,e,s){Mt=t.x+t.width,At=t.y+t.height,Wt=e.x,Nt=e.y,s||(Wt+=e.width,Nt+=e.height),Mt=Mt>Wt?Mt:Wt,At=At>Nt?At:Nt,t.x=t.x<e.x?t.x:e.x,t.y=t.y<e.y?t.y:e.y,t.width=Mt-t.x,t.height=At-t.y},addList(t,e){Ft.setListWithFn(t,e,void 0,!0)},setList(t,e,s=!1){Ft.setListWithFn(t,e,void 0,s)},addListWithFn(t,e,s){Ft.setListWithFn(t,e,s,!0)},setListWithFn(t,e,s,r=!1){let i,n=!0;for(let o=0,a=e.length;o<a;o++)i=s?s(e[o],o):e[o],i&&(i.width||i.height)&&(n?(n=!1,r||jt(t,i)):Ut(t,i));n&&Ft.reset(t)},setPoints(t,e){e.forEach((t,e)=>0===e?Ot(Ct,t.x,t.y):Tt(Ct,t.x,t.y)),Pt(Ct,t)},setPoint(t,e){Ft.set(t,e.x,e.y)},addPoint(t,e){Ut(t,e,!0)},getPoints(t){const{x:e,y:s,width:r,height:i}=t;return[{x:e,y:s},{x:e+r,y:s},{x:e+r,y:s+i},{x:e,y:s+i}]},hitRadiusPoint:(t,e,s)=>(s&&(e=ot.tempToInnerRadiusPointOf(e,s)),e.x>=t.x-e.radiusX&&e.x<=t.x+t.width+e.radiusX&&e.y>=t.y-e.radiusY&&e.y<=t.y+t.height+e.radiusY),hitPoint:(t,e,s)=>(s&&(e=ot.tempToInnerOf(e,s)),e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height),hit:(t,e,s)=>(s&&(e=Ft.tempToOuterOf(e,s)),!(t.y+t.height<e.y||e.y+e.height<t.y||t.x+t.width<e.x||e.x+e.width<t.x)),includes:(t,e,s)=>(s&&(e=Ft.tempToOuterOf(e,s)),t.x<=e.x&&t.y<=e.y&&t.x+t.width>=e.x+e.width&&t.y+t.height>=e.y+e.height),getIntersectData(t,e,s){if(s&&(e=Ft.tempToOuterOf(e,s)),!Ft.hit(t,e))return{x:0,y:0,width:0,height:0};let{x:r,y:i,width:n,height:o}=e;return Mt=r+n,At=i+o,Wt=t.x+t.width,Nt=t.y+t.height,r=r>t.x?r:t.x,i=i>t.y?i:t.y,Mt=Mt<Wt?Mt:Wt,At=At<Nt?At:Nt,n=Mt-r,o=At-i,{x:r,y:i,width:n,height:o}},intersect(t,e,s){Ft.copy(t,Ft.getIntersectData(t,e,s))},isSame:(t,e)=>t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height,isEmpty:t=>0===t.x&&0===t.y&&0===t.width&&0===t.height,hasSize:t=>t.width&&t.height,reset(t){Ft.set(t)}},Ft=zt,{add:Ut,copy:jt}=Ft;class Ht{get minX(){return zt.minX(this)}get minY(){return zt.minY(this)}get maxX(){return zt.maxX(this)}get maxY(){return zt.maxY(this)}constructor(t,e,s,r){this.set(t,e,s,r)}set(t,e,s,r){return d(t)?zt.copy(this,t):zt.set(this,t,e,s,r),this}get(){const{x:t,y:e,width:s,height:r}=this;return{x:t,y:e,width:s,height:r}}clone(){return new Ht(this)}move(t,e){return zt.move(this,t,e),this}scale(t,e,s){return zt.scale(this,t,e,s),this}scaleOf(t,e,s){return zt.scaleOf(this,t,e,s),this}toOuterOf(t,e){return zt.toOuterOf(this,t,e),this}toInnerOf(t,e){return zt.toInnerOf(this,t,e),this}getFitMatrix(t,e){return zt.getFitMatrix(this,t,e)}put(t,e,s){zt.put(this,t,e,s)}spread(t,e){return zt.spread(this,t,e),this}shrink(t,e){return zt.shrink(this,t,e),this}ceil(){return zt.ceil(this),this}unsign(){return zt.unsign(this),this}float(t){return zt.float(this,t),this}add(t){return zt.add(this,t),this}addList(t){return zt.setList(this,t,!0),this}setList(t){return zt.setList(this,t),this}addListWithFn(t,e){return zt.setListWithFn(this,t,e,!0),this}setListWithFn(t,e){return zt.setListWithFn(this,t,e),this}setPoint(t){return zt.setPoint(this,t),this}setPoints(t){return zt.setPoints(this,t),this}addPoint(t){return zt.addPoint(this,t),this}getPoints(){return zt.getPoints(this)}hitPoint(t,e){return zt.hitPoint(this,t,e)}hitRadiusPoint(t,e){return zt.hitRadiusPoint(this,t,e)}hit(t,e){return zt.hit(this,t,e)}includes(t,e){return zt.includes(this,t,e)}intersect(t,e){return zt.intersect(this,t,e),this}getIntersect(t,e){return new Ht(zt.getIntersectData(this,t,e))}isSame(t){return zt.isSame(this,t)}isEmpty(){return zt.isEmpty(this)}reset(){zt.reset(this)}}const Vt=new Ht;class Gt{constructor(t,e,s,r,i,n){d(t)?this.copy(t):this.set(t,e,s,r,i,n)}set(t=0,e=0,s=0,r=0,i=0,n=0){this.top=t,this.right=e,this.bottom=s,this.left=r,this.width=i,this.height=n}copy(t){const{top:e,right:s,bottom:r,left:i,width:n,height:o}=t;this.set(e,s,r,i,n,o)}getBoundsFrom(t){const{top:e,right:s,bottom:r,left:i,width:n,height:o}=this;return new Ht(i,e,n||t.width-i-s,o||t.height-e-r)}}const qt={number:(t,e)=>d(t)?"percent"===t.type?t.value*e:t.value:t},Qt={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,".":1,e:1,E:1},{floor:Jt,max:Zt}=Math,$t={toURL(t,e){let s=encodeURIComponent(t);return"text"===e?s="data:text/plain;charset=utf-8,"+s:"svg"===e&&(s="data:image/svg+xml,"+s),s},image:{hitCanvasSize:100,maxCacheSize:4096e3,maxPatternSize:8847360,crossOrigin:"anonymous",isLarge:(t,e,s,r)=>t.width*t.height*(e?e*s:1)>(r||Kt.maxCacheSize),isSuperLarge:(t,e,s)=>Kt.isLarge(t,e,s,Kt.maxPatternSize),getRealURL(t){const{prefix:e,suffix:s}=Kt;return!s||t.startsWith("data:")||t.startsWith("blob:")||(t+=(t.includes("?")?"&":"?")+s),e&&"/"===t[0]&&(t=e+t),t},resize(t,e,s,r,i,n,o,a,h,l){const d=Zt(Jt(e+(r||0)),1),c=Zt(Jt(s+(i||0)),1);let u,_,p;l&&(p=qt.number(l.offset,(u="x"===l.type)?e:s))&&(u||(_=!0));const f=$t.origin.createCanvas(_?2*d:d,u?2*c:c),g=f.getContext("2d");if(a&&(g.globalAlpha=a),g.imageSmoothingEnabled=!1!==o,Kt.canUse(t)){if(n){const r=e/n.width,i=s/n.height;g.setTransform(r,0,0,i,-n.x*r,-n.y*i),g.drawImage(t,0,0,t.width,t.height)}else g.drawImage(t,0,0,e,s);p&&(g.drawImage(f,0,0,d,c,u?p-d:d,u?c:p-c,d,c),g.drawImage(f,0,0,d,c,u?p:d,u?c:p,d,c))}return f},canUse:t=>t&&t.width&&!t.__closed,setPatternTransform(t,e,s){try{e&&t.setTransform&&(t.setTransform(e),e=void 0)}catch(t){}s&&_.stintSet(s,"transform",e)}}},{image:Kt}=$t,{randColor:te}=I;class ee{constructor(t){this.repeatMap={},this.name=t}static get(t){return new ee(t)}static set filter(t){this.filterList=se(t)}static set exclude(t){this.excludeList=se(t)}static drawRepaint(t,e){const s=te();t.fillWorld(e,s.replace("1)",".1)")),t.strokeWorld(e,s)}static drawBounds(t,e,s){const r="hit"===ee.showBounds,i=t.__nowWorld,n=te();r&&(e.setWorld(i),t.__drawHitPath(e),e.fillStyle=n.replace("1)",".2)"),e.fill()),e.resetTransform(),e.setStroke(n,2),r?e.stroke():e.strokeWorld(i,n)}log(...t){if(re.enable){if(re.filterList.length&&re.filterList.every(t=>t!==this.name))return;if(re.excludeList.length&&re.excludeList.some(t=>t===this.name))return;console.log("%c"+this.name,"color:#21ae62",...t)}}tip(...t){re.enable&&this.warn(...t)}warn(...t){re.showWarn&&console.warn(this.name,...t)}repeat(t,...e){this.repeatMap[t]||(this.warn("repeat:"+t,...e),this.repeatMap[t]=!0)}error(...t){try{throw new Error}catch(e){console.error(this.name,...t,e)}}}function se(t){return t?i(t)&&(t=[t]):t=[],t}ee.filterList=[],ee.excludeList=[],ee.showWarn=!0;const re=ee,ie=ee.get("RunTime"),ne={currentId:0,currentName:"",idMap:{},nameMap:{},nameToIdMap:{},start(t,e){const s=g.create(g.RUNTIME);return oe.currentId=oe.idMap[s]=e?performance.now():Date.now(),oe.currentName=oe.nameMap[s]=t,oe.nameToIdMap[t]=s,s},end(t,e){const s=oe.idMap[t],r=oe.nameMap[t],i=e?(performance.now()-s)/1e3:Date.now()-s;oe.idMap[t]=oe.nameMap[t]=oe.nameToIdMap[r]=void 0,ie.log(r,i,"ms")},endOfName(t,e){const r=oe.nameToIdMap[t];s(r)||oe.end(r,e)}},oe=ne,ae=[],he={list:{},add(t,...e){this.list[t]=!0,ae.push(...e)},has(t,e){const s=this.list[t];return!s&&e&&this.need(t),s},need(t){console.error("please install and import plugin: "+(t.includes("-x")?"":"@leafer-in/")+t)}};setTimeout(()=>ae.forEach(t=>he.has(t,!0)));const le={editor:t=>he.need("editor")},de=ee.get("UICreator"),ce={list:{},register(t){const{__tag:e}=t.prototype;ue[e]&&de.repeat(e),ue[e]=t},get(t,e,r,i,n,o){ue[t]||de.error("not register "+t);const a=new ue[t](e);return s(r)||(a.x=r,i&&(a.y=i),n&&(a.width=n),o&&(a.height=o)),a}},{list:ue}=ce,_e=ee.get("EventCreator"),pe={nameList:{},register(t){let e;Object.keys(t).forEach(s=>{e=t[s],i(e)&&(fe[e]&&_e.repeat(e),fe[e]=t)})},changeName(t,e){const s=fe[t];if(s){const r=Object.keys(s).find(e=>s[e]===t);r&&(s[r]=e,fe[e]=s)}},has(t){return!!this.nameList[t]},get:(t,...e)=>new fe[t](...e)},{nameList:fe}=pe;class ge{constructor(){this.list=[]}add(t){t.manager=this,this.list.push(t)}get(t){let e;const{list:s}=this;for(let r=0,i=s.length;r<i;r++)if(e=s[r],e.recycled&&e.isSameSize(t))return e.recycled=!1,e.manager||(e.manager=this),e;const r=le.canvas(t);return this.add(r),r}recycle(t){t.recycled=!0}clearRecycled(){let t;const e=[];for(let s=0,r=this.list.length;s<r;s++)t=this.list[s],t.recycled?t.destroy():e.push(t);this.list=e}clear(){this.list.forEach(t=>{t.destroy()}),this.list.length=0}destroy(){this.clear()}}function ye(t,e,s,r){var i,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(n<3?i(o):n>3?i(e,s,o):i(e,s))||o);return n>3&&o&&Object.defineProperty(e,s,o),o}function me(t,e,s,r){return new(s||(s=Promise))(function(i,n){function o(t){try{h(r.next(t))}catch(t){n(t)}}function a(t){try{h(r.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(o,a)}h((r=r.apply(t,e||[])).next())})}function xe(t){return(e,s)=>{t||(t=s);const r={get(){return this.context[t]},set(e){this.context[t]=e}};"strokeCap"===s&&(r.set=function(e){this.context[t]="none"===e?"butt":e}),Object.defineProperty(e,s,r)}}"function"==typeof SuppressedError&&SuppressedError;const we=[];function be(){return(t,e)=>{we.push(e)}}const Be=[];class ve{set blendMode(t){"normal"===t&&(t="source-over"),this.context.globalCompositeOperation=t}get blendMode(){return this.context.globalCompositeOperation}set dashPattern(t){this.context.setLineDash(t||Be)}get dashPattern(){return this.context.getLineDash()}__bindContext(){let t;we.forEach(e=>{t=this.context[e],t&&(this[e]=t.bind(this.context))}),this.textBaseline="alphabetic"}setTransform(t,e,s,r,i,n){}resetTransform(){}getTransform(){}save(){}restore(){}transform(t,e,s,r,i,n){d(t)?this.context.transform(t.a,t.b,t.c,t.d,t.e,t.f):this.context.transform(t,e,s,r,i,n)}translate(t,e){}scale(t,e){}rotate(t){}fill(t,e){}stroke(t){}clip(t,e){}fillRect(t,e,s,r){}strokeRect(t,e,s,r){}clearRect(t,e,s,r){}drawImage(t,e,s,r,i,n,o,a,h){switch(arguments.length){case 9:if(e<0){const t=-e/r*a;r+=e,e=0,n+=t,a-=t}if(s<0){const t=-s/i*h;i+=s,s=0,o+=t,h-=t}this.context.drawImage(t,e,s,r,i,n,o,a,h);break;case 5:this.context.drawImage(t,e,s,r,i);break;case 3:this.context.drawImage(t,e,s)}}beginPath(){}moveTo(t,e){}lineTo(t,e){}bezierCurveTo(t,e,s,r,i,n){}quadraticCurveTo(t,e,s,r){}closePath(){}arc(t,e,s,r,i,n){}arcTo(t,e,s,r,i){}ellipse(t,e,s,r,i,n,o,a){}rect(t,e,s,r){}roundRect(t,e,s,r,i){}createConicGradient(t,e,s){}createLinearGradient(t,e,s,r){}createPattern(t,e){}createRadialGradient(t,e,s,r,i,n){}fillText(t,e,s,r){}measureText(t){}strokeText(t,e,s,r){}destroy(){this.context=null}}ye([xe("imageSmoothingEnabled")],ve.prototype,"smooth",void 0),ye([xe("imageSmoothingQuality")],ve.prototype,"smoothLevel",void 0),ye([xe("globalAlpha")],ve.prototype,"opacity",void 0),ye([xe()],ve.prototype,"fillStyle",void 0),ye([xe()],ve.prototype,"strokeStyle",void 0),ye([xe("lineWidth")],ve.prototype,"strokeWidth",void 0),ye([xe("lineCap")],ve.prototype,"strokeCap",void 0),ye([xe("lineJoin")],ve.prototype,"strokeJoin",void 0),ye([xe("lineDashOffset")],ve.prototype,"dashOffset",void 0),ye([xe()],ve.prototype,"miterLimit",void 0),ye([xe()],ve.prototype,"shadowBlur",void 0),ye([xe()],ve.prototype,"shadowColor",void 0),ye([xe()],ve.prototype,"shadowOffsetX",void 0),ye([xe()],ve.prototype,"shadowOffsetY",void 0),ye([xe()],ve.prototype,"filter",void 0),ye([xe()],ve.prototype,"font",void 0),ye([xe()],ve.prototype,"fontKerning",void 0),ye([xe()],ve.prototype,"fontStretch",void 0),ye([xe()],ve.prototype,"fontVariantCaps",void 0),ye([xe()],ve.prototype,"textAlign",void 0),ye([xe()],ve.prototype,"textBaseline",void 0),ye([xe()],ve.prototype,"textRendering",void 0),ye([xe()],ve.prototype,"wordSpacing",void 0),ye([xe()],ve.prototype,"letterSpacing",void 0),ye([xe()],ve.prototype,"direction",void 0),ye([be()],ve.prototype,"setTransform",null),ye([be()],ve.prototype,"resetTransform",null),ye([be()],ve.prototype,"getTransform",null),ye([be()],ve.prototype,"save",null),ye([be()],ve.prototype,"restore",null),ye([be()],ve.prototype,"translate",null),ye([be()],ve.prototype,"scale",null),ye([be()],ve.prototype,"rotate",null),ye([be()],ve.prototype,"fill",null),ye([be()],ve.prototype,"stroke",null),ye([be()],ve.prototype,"clip",null),ye([be()],ve.prototype,"fillRect",null),ye([be()],ve.prototype,"strokeRect",null),ye([be()],ve.prototype,"clearRect",null),ye([be()],ve.prototype,"beginPath",null),ye([be()],ve.prototype,"moveTo",null),ye([be()],ve.prototype,"lineTo",null),ye([be()],ve.prototype,"bezierCurveTo",null),ye([be()],ve.prototype,"quadraticCurveTo",null),ye([be()],ve.prototype,"closePath",null),ye([be()],ve.prototype,"arc",null),ye([be()],ve.prototype,"arcTo",null),ye([be()],ve.prototype,"ellipse",null),ye([be()],ve.prototype,"rect",null),ye([be()],ve.prototype,"roundRect",null),ye([be()],ve.prototype,"createConicGradient",null),ye([be()],ve.prototype,"createLinearGradient",null),ye([be()],ve.prototype,"createPattern",null),ye([be()],ve.prototype,"createRadialGradient",null),ye([be()],ve.prototype,"fillText",null),ye([be()],ve.prototype,"measureText",null),ye([be()],ve.prototype,"strokeText",null);const{copy:ke,multiplyParent:Ce,pixelScale:Oe}=q,{round:Te}=Math,Pe=new Ht,Se=new Ht,Le={width:1,height:1,pixelRatio:1},Re=["width","height","pixelRatio"];class Ee extends ve{get width(){return this.size.width}get height(){return this.size.height}get pixelRatio(){return this.size.pixelRatio}get pixelWidth(){return this.width*this.pixelRatio||0}get pixelHeight(){return this.height*this.pixelRatio||0}get pixelSnap(){return this.config.pixelSnap}set pixelSnap(t){this.config.pixelSnap=t}get allowBackgroundColor(){return this.view&&this.parentView}constructor(t,e){super(),this.size={},this.worldTransform={},t||(t=Le),this.manager=e,this.innerId=g.create(g.CNAVAS);const{width:s,height:r,pixelRatio:i}=t;this.autoLayout=!s||!r,this.size.pixelRatio=i||$t.devicePixelRatio,this.config=t,this.init()}init(){}__createContext(){const{view:t}=this,{contextSettings:e}=this.config;this.context=e?t.getContext("2d",e):t.getContext("2d"),this.__bindContext()}export(t,e){}toBlob(t,e){}toDataURL(t,e){}saveAs(t,e){}resize(t,e=!0){if(this.isSameSize(t))return;let s;this.context&&!this.unreal&&e&&this.width&&(s=this.getSameCanvas(),s.copyWorld(this));const r=this.size;_.copyAttrs(r,t,Re),Re.forEach(t=>r[t]||(r[t]=1)),this.bounds=new Ht(0,0,this.width,this.height),this.updateViewSize(),this.updateClientBounds(),this.context&&(this.smooth=this.config.smooth,!this.unreal&&s&&(this.clearWorld(s.bounds),this.copyWorld(s),s.recycle()))}updateViewSize(){}updateClientBounds(){}getClientBounds(t){return t&&this.updateClientBounds(),this.clientBounds||this.bounds}startAutoLayout(t,e){}stopAutoLayout(){}setCursor(t){}setWorld(t,e){const{pixelRatio:s,pixelSnap:r}=this,i=this.worldTransform;e&&Ce(t,e,i),Oe(t,s,i),r&&!t.ignorePixelSnap&&(t.half&&t.half*s%2?(i.e=Te(i.e-.5)+.5,i.f=Te(i.f-.5)+.5):(i.e=Te(i.e),i.f=Te(i.f))),this.setTransform(i.a,i.b,i.c,i.d,i.e,i.f)}useWorldTransform(t){t&&(this.worldTransform=t);const e=this.worldTransform;e&&this.setTransform(e.a,e.b,e.c,e.d,e.e,e.f)}setStroke(t,e,s,r){e&&(this.strokeWidth=e),t&&(this.strokeStyle=t),s&&this.setStrokeOptions(s,r)}setStrokeOptions(t,e){let{strokeCap:r,strokeJoin:i,dashPattern:n,dashOffset:o,miterLimit:a}=t;e&&(e.strokeCap&&(r=e.strokeCap),e.strokeJoin&&(i=e.strokeJoin),s(e.dashPattern)||(n=e.dashPattern),s(e.dashOffset)||(o=e.dashOffset),e.miterLimit&&(a=e.miterLimit)),this.strokeCap=r,this.strokeJoin=i,this.dashPattern=n,this.dashOffset=o,this.miterLimit=a}saveBlendMode(t){this.savedBlendMode=this.blendMode,this.blendMode=t}restoreBlendMode(){this.blendMode=this.savedBlendMode}hitFill(t,e){return!0}hitStroke(t,e){return!0}hitPixel(t,e,s=1){return!0}setWorldShadow(t,e,s,r){const{pixelRatio:i}=this;this.shadowOffsetX=t*i,this.shadowOffsetY=e*i,this.shadowBlur=s*i,this.shadowColor=r||"black"}setWorldBlur(t){const{pixelRatio:e}=this;this.filter=`blur(${t*e}px)`}copyWorld(t,e,s,r,i){r&&(this.blendMode=r),e?(this.setTempPixelBounds(e,i),s?(this.setTempPixelBounds2(s,i),s=Se):s=Pe,this.drawImage(t.view,Pe.x,Pe.y,Pe.width,Pe.height,s.x,s.y,s.width,s.height)):this.drawImage(t.view,0,0),r&&(this.blendMode="source-over")}copyWorldToInner(t,e,s,r,i){e.b||e.c?(this.save(),this.resetTransform(),this.copyWorld(t,e,zt.tempToOuterOf(s,e),r,i),this.restore()):(r&&(this.blendMode=r),this.setTempPixelBounds(e,i),this.drawImage(t.view,Pe.x,Pe.y,Pe.width,Pe.height,s.x,s.y,s.width,s.height),r&&(this.blendMode="source-over"))}copyWorldByReset(t,e,s,r,i,n){this.resetTransform(),this.copyWorld(t,e,s,r,n),i||this.useWorldTransform()}useGrayscaleAlpha(t){let e,s;this.setTempPixelBounds(t,!0,!0);const{context:r}=this,i=r.getImageData(Pe.x,Pe.y,Pe.width,Pe.height),{data:n}=i;for(let t=0,r=n.length;t<r;t+=4)s=.299*n[t]+.587*n[t+1]+.114*n[t+2],(e=n[t+3])&&(n[t+3]=255===e?s:e*(s/255));r.putImageData(i,Pe.x,Pe.y)}useMask(t,e,s){this.copyWorld(t,e,s,"destination-in")}useEraser(t,e,s){this.copyWorld(t,e,s,"destination-out")}fillWorld(t,e,s,r){s&&(this.blendMode=s),this.fillStyle=e,this.setTempPixelBounds(t,r),this.fillRect(Pe.x,Pe.y,Pe.width,Pe.height),s&&(this.blendMode="source-over")}strokeWorld(t,e,s,r){s&&(this.blendMode=s),this.strokeStyle=e,this.setTempPixelBounds(t,r),this.strokeRect(Pe.x,Pe.y,Pe.width,Pe.height),s&&(this.blendMode="source-over")}clipWorld(t,e=!0){this.beginPath(),this.setTempPixelBounds(t,e),this.rect(Pe.x,Pe.y,Pe.width,Pe.height),this.clip()}clipUI(t){t.windingRule?this.clip(t.windingRule):this.clip()}clearWorld(t,e=!0){this.setTempPixelBounds(t,e),this.clearRect(Pe.x,Pe.y,Pe.width,Pe.height)}clear(){const{pixelRatio:t}=this;this.clearRect(0,0,this.width*t+2,this.height*t+2)}setTempPixelBounds(t,e,s){this.copyToPixelBounds(Pe,t,e,s)}setTempPixelBounds2(t,e,s){this.copyToPixelBounds(Se,t,e,s)}copyToPixelBounds(t,e,s,r){t.set(e),r&&t.intersect(this.bounds),t.scale(this.pixelRatio),s&&t.ceil()}isSameSize(t){return this.width===t.width&&this.height===t.height&&(!t.pixelRatio||this.pixelRatio===t.pixelRatio)}getSameCanvas(t,e){const{size:s,pixelSnap:r}=this,i=this.manager?this.manager.get(s):le.canvas(Object.assign({},s));return i.save(),t&&(ke(i.worldTransform,this.worldTransform),i.useWorldTransform()),e&&(i.smooth=this.smooth),i.pixelSnap!==r&&(i.pixelSnap=r),i}recycle(t){this.recycled||(this.restore(),t?this.clearWorld(t):this.clear(),this.manager?this.manager.recycle(this):this.destroy())}updateRender(t){}unrealCanvas(){}destroy(){this.manager=this.view=this.parentView=null}}const Ie={creator:{},parse(t,e){},convertToCanvasData(t,e){}},Me={N:21,D:22,X:23,G:24,F:25,O:26,P:27,U:28},Ae=Object.assign({M:1,m:10,L:2,l:20,H:3,h:30,V:4,v:40,C:5,c:50,S:6,s:60,Q:7,q:70,T:8,t:80,A:9,a:90,Z:11,z:11,R:12},Me),We={M:3,m:3,L:3,l:3,H:2,h:2,V:2,v:2,C:7,c:7,S:5,s:5,Q:5,q:5,T:3,t:3,A:8,a:8,Z:1,z:1,N:5,D:9,X:6,G:9,F:5,O:7,P:4,U:6},Ne={m:10,l:20,H:3,h:30,V:4,v:40,c:50,S:6,s:60,q:70,T:8,t:80,A:9,a:90},Ye=Object.assign(Object.assign({},Ne),Me),De=Ae,Xe={};for(let t in De)Xe[De[t]]=t;const ze={};for(let t in De)ze[De[t]]=We[t];const Fe={drawRoundRect(t,e,s,r,i,n){const o=I.fourNumber(n,Math.min(r/2,i/2)),a=e+r,h=s+i;o[0]?t.moveTo(e+o[0],s):t.moveTo(e,s),o[1]?t.arcTo(a,s,a,h,o[1]):t.lineTo(a,s),o[2]?t.arcTo(a,h,e,h,o[2]):t.lineTo(a,h),o[3]?t.arcTo(e,h,e,s,o[3]):t.lineTo(e,h),o[0]?t.arcTo(e,s,a,s,o[0]):t.lineTo(e,s)}},{sin:Ue,cos:je,hypot:He,atan2:Ve,ceil:Ge,abs:qe,PI:Qe,sqrt:Je,pow:Ze}=Math,{setPoint:$e,addPoint:Ke}=gt,{set:ts,toNumberPoints:es}=ot,{M:ss,L:rs,C:is,Q:ns,Z:os}=Ae,as={},hs={points(t,e,s,r){let i=es(e);if(t.push(ss,i[0],i[1]),s&&i.length>5){let e,n,o,a,h,l,d,c,u,_,p,f,g,y,m,x=i.length;const w=!0===s?.5:s;r&&(i=[i[x-2],i[x-1],...i,i[0],i[1],i[2],i[3]],x=i.length);for(let s=2;s<x-2;s+=2)e=i[s-2],n=i[s-1],o=i[s],a=i[s+1],h=i[s+2],l=i[s+3],p=o-e,f=a-n,g=Je(Ze(p,2)+Ze(f,2)),y=Je(Ze(h-o,2)+Ze(l-a,2)),(g||y)&&(m=g+y,g=w*g/m,y=w*y/m,h-=e,l-=n,d=o-g*h,c=a-g*l,2===s?r||t.push(ns,d,c,o,a):(p||f)&&t.push(is,u,_,d,c,o,a),u=o+y*h,_=a+y*l);r||t.push(ns,u,_,i[x-2],i[x-1])}else for(let e=2,s=i.length;e<s;e+=2)t.push(rs,i[e],i[e+1]);r&&t.push(os)},rect(t,e,s,r,i){Ie.creator.path=t,Ie.creator.moveTo(e,s).lineTo(e+r,s).lineTo(e+r,s+i).lineTo(e,s+i).lineTo(e,s)},roundRect(t,e,s,r,i,n){Ie.creator.path=[],Fe.drawRoundRect(Ie.creator,e,s,r,i,n),t.push(...Ie.convertToCanvasData(Ie.creator.path,!0))},arcTo(t,e,s,r,i,n,o,a,h,l,d){const c=r-e,u=i-s,_=n-r,p=o-i;let f=Ve(u,c),g=Ve(p,_);const y=He(c,u),m=He(_,p);let x=g-f;if(x<0&&(x+=W),y<1e-12||m<1e-12||x<1e-12||qe(x-Qe)<1e-12)return t&&t.push(rs,r,i),h&&($e(h,e,s),Ke(h,r,i)),d&&ts(d,e,s),void(l&&ts(l,r,i));const w=c*p-_*u<0,b=w?-1:1,B=a/je(x/2),v=r+B*je(f+x/2+N*b),k=i+B*Ue(f+x/2+N*b);return f-=N*b,g-=N*b,cs(t,v,k,a,a,0,f/A,g/A,w,h,l,d)},arc:(t,e,s,r,i,n,o,a,h,l)=>cs(t,e,s,r,r,0,i,n,o,a,h,l),ellipse(t,e,s,r,i,n,o,a,h,l,d,c){const u=n*A,_=Ue(u),p=je(u);let f=o*A,g=a*A;f>Qe&&(f-=W),g<0&&(g+=W);let y=g-f;y<0?y+=W:y>W&&(y-=W),h&&(y-=W);const m=Ge(qe(y/N)),x=y/m,w=Ue(x/4),b=8/3*w*w/Ue(x/2);g=f+x;let B,v,k,C,O,T,P,S,L=je(f),R=Ue(f),E=k=p*r*L-_*i*R,I=C=_*r*L+p*i*R,M=e+k,Y=s+C;t&&t.push(t.length?rs:ss,M,Y),l&&$e(l,M,Y),c&&ts(c,M,Y);for(let n=0;n<m;n++)B=je(g),v=Ue(g),k=p*r*B-_*i*v,C=_*r*B+p*i*v,O=e+E-b*(p*r*R+_*i*L),T=s+I-b*(_*r*R-p*i*L),P=e+k+b*(p*r*v+_*i*B),S=s+C+b*(_*r*v-p*i*B),t&&t.push(is,O,T,P,S,e+k,s+C),l&&ds(e+E,s+I,O,T,P,S,e+k,s+C,l,!0),E=k,I=C,L=B,R=v,f=g,g+=x;d&&ts(d,e+k,s+C)},quadraticCurveTo(t,e,s,r,i,n,o){t.push(is,(e+2*r)/3,(s+2*i)/3,(n+2*r)/3,(o+2*i)/3,n,o)},toTwoPointBoundsByQuadraticCurve(t,e,s,r,i,n,o,a){ds(t,e,(t+2*s)/3,(e+2*r)/3,(i+2*s)/3,(n+2*r)/3,i,n,o,a)},toTwoPointBounds(t,e,s,r,i,n,o,a,h,l){const d=[];let c,u,_,p,f,g,y,m,x=t,w=s,b=i,B=o;for(let t=0;t<2;++t)if(1==t&&(x=e,w=r,b=n,B=a),c=-3*x+9*w-9*b+3*B,u=6*x-12*w+6*b,_=3*w-3*x,Math.abs(c)<1e-12){if(Math.abs(u)<1e-12)continue;p=-_/u,0<p&&p<1&&d.push(p)}else y=u*u-4*_*c,m=Math.sqrt(y),y<0||(f=(-u+m)/(2*c),0<f&&f<1&&d.push(f),g=(-u-m)/(2*c),0<g&&g<1&&d.push(g));l?Ke(h,t,e):$e(h,t,e),Ke(h,o,a);for(let l=0,c=d.length;l<c;l++)ls(d[l],t,e,s,r,i,n,o,a,as),Ke(h,as.x,as.y)},getPointAndSet(t,e,s,r,i,n,o,a,h,l){const d=1-t,c=d*d*d,u=3*d*d*t,_=3*d*t*t,p=t*t*t;l.x=c*e+u*r+_*n+p*a,l.y=c*s+u*i+_*o+p*h},getPoint(t,e,s,r,i,n,o,a,h){const l={};return ls(t,e,s,r,i,n,o,a,h,l),l},getDerivative(t,e,s,r,i){const n=1-t;return 3*n*n*(s-e)+6*n*t*(r-s)+3*t*t*(i-r)}},{getPointAndSet:ls,toTwoPointBounds:ds,ellipse:cs}=hs,{sin:us,cos:_s,sqrt:ps,atan2:fs}=Math,{ellipse:gs}=hs,ys={ellipticalArc(t,e,s,r,i,n,o,a,h,l,d){const c=(h-e)/2,u=(l-s)/2,_=n*A,p=us(_),f=_s(_),g=-f*c-p*u,y=-f*u+p*c,m=r*r,x=i*i,w=y*y,b=g*g,B=m*x-m*w-x*b;let v=0;if(B<0){const t=ps(1-B/(m*x));r*=t,i*=t}else v=(o===a?-1:1)*ps(B/(m*w+x*b));const k=v*r*y/i,C=-v*i*g/r,O=fs((y-C)/i,(g-k)/r),T=fs((-y-C)/i,(-g-k)/r);let P=T-O;0===a&&P>0?P-=W:1===a&&P<0&&(P+=W);const S=e+c+f*k-p*C,L=s+u+p*k+f*C,R=P<0?1:0;d||$t.ellipseToCurve?gs(t,S,L,r,i,n,O/A,T/A,R):r!==i||n?t.push(Ae.G,S,L,r,i,n,O/A,T/A,R):t.push(Ae.O,S,L,r,O/A,T/A,R)}},ms={toCommand:t=>[],toNode:t=>[]},{M:xs,m:ws,L:bs,l:Bs,H:vs,h:ks,V:Cs,v:Os,C:Ts,c:Ps,S:Ss,s:Ls,Q:Rs,q:Es,T:Is,t:Ms,A:As,a:Ws,Z:Ns,z:Ys,N:Ds,D:Xs,X:zs,G:Fs,F:Us,O:js,P:Hs,U:Vs}=Ae,{rect:Gs,roundRect:qs,arcTo:Qs,arc:Js,ellipse:Zs,quadraticCurveTo:$s}=hs,{ellipticalArc:Ks}=ys,tr=ee.get("PathConvert"),er={},sr={current:{dot:0},stringify(t,e){let s,r,i,n=0,o=t.length,a="";for(;n<o;){r=t[n],s=ze[r],a+=r===i?" ":Xe[r];for(let r=1;r<s;r++)a+=I.float(t[n+r],e),r===s-1||(a+=" ");i=r,n+=s}return a},parse(t,e){let s,r,i,n="";const o=[],a=e?Ye:Ne;for(let e=0,h=t.length;e<h;e++)r=t[e],Qt[r]?("."===r&&(rr.dot&&(ir(o,n),n=""),rr.dot++),"0"===n&&"."!==r&&(ir(o,n),n=""),n+=r):Ae[r]?(n&&(ir(o,n),n=""),rr.name=Ae[r],rr.length=We[r],rr.index=0,ir(o,rr.name),!s&&a[r]&&(s=!0)):"-"===r||"+"===r?"e"===i||"E"===i?n+=r:(n&&ir(o,n),n=r):n&&(ir(o,n),n=""),i=r;return n&&ir(o,n),s?sr.toCanvasData(o,e):o},toCanvasData(t,e){let s,r,i,n,o,a=0,h=0,l=0,d=0,c=0,u=t.length;const _=[];for(;c<u;){switch(i=t[c],i){case ws:t[c+1]+=a,t[c+2]+=h;case xs:a=t[c+1],h=t[c+2],_.push(xs,a,h),c+=3;break;case ks:t[c+1]+=a;case vs:a=t[c+1],_.push(bs,a,h),c+=2;break;case Os:t[c+1]+=h;case Cs:h=t[c+1],_.push(bs,a,h),c+=2;break;case Bs:t[c+1]+=a,t[c+2]+=h;case bs:a=t[c+1],h=t[c+2],_.push(bs,a,h),c+=3;break;case Ls:t[c+1]+=a,t[c+2]+=h,t[c+3]+=a,t[c+4]+=h,i=Ss;case Ss:o=n===Ts||n===Ss,l=o?2*a-s:t[c+1],d=o?2*h-r:t[c+2],s=t[c+1],r=t[c+2],a=t[c+3],h=t[c+4],_.push(Ts,l,d,s,r,a,h),c+=5;break;case Ps:t[c+1]+=a,t[c+2]+=h,t[c+3]+=a,t[c+4]+=h,t[c+5]+=a,t[c+6]+=h,i=Ts;case Ts:s=t[c+3],r=t[c+4],a=t[c+5],h=t[c+6],_.push(Ts,t[c+1],t[c+2],s,r,a,h),c+=7;break;case Ms:t[c+1]+=a,t[c+2]+=h,i=Is;case Is:o=n===Rs||n===Is,s=o?2*a-s:t[c+1],r=o?2*h-r:t[c+2],e?$s(_,a,h,s,r,t[c+1],t[c+2]):_.push(Rs,s,r,t[c+1],t[c+2]),a=t[c+1],h=t[c+2],c+=3;break;case Es:t[c+1]+=a,t[c+2]+=h,t[c+3]+=a,t[c+4]+=h,i=Rs;case Rs:s=t[c+1],r=t[c+2],e?$s(_,a,h,s,r,t[c+3],t[c+4]):_.push(Rs,s,r,t[c+3],t[c+4]),a=t[c+3],h=t[c+4],c+=5;break;case Ws:t[c+6]+=a,t[c+7]+=h;case As:Ks(_,a,h,t[c+1],t[c+2],t[c+3],t[c+4],t[c+5],t[c+6],t[c+7],e),a=t[c+6],h=t[c+7],c+=8;break;case Ys:case Ns:_.push(Ns),c++;break;case Ds:a=t[c+1],h=t[c+2],e?Gs(_,a,h,t[c+3],t[c+4]):nr(_,t,c,5),c+=5;break;case Xs:a=t[c+1],h=t[c+2],e?qs(_,a,h,t[c+3],t[c+4],[t[c+5],t[c+6],t[c+7],t[c+8]]):nr(_,t,c,9),c+=9;break;case zs:a=t[c+1],h=t[c+2],e?qs(_,a,h,t[c+3],t[c+4],t[c+5]):nr(_,t,c,6),c+=6;break;case Fs:Zs(e?_:nr(_,t,c,9),t[c+1],t[c+2],t[c+3],t[c+4],t[c+5],t[c+6],t[c+7],t[c+8],null,er),a=er.x,h=er.y,c+=9;break;case Us:e?Zs(_,t[c+1],t[c+2],t[c+3],t[c+4],0,0,360,!1):nr(_,t,c,5),a=t[c+1]+t[c+3],h=t[c+2],c+=5;break;case js:Js(e?_:nr(_,t,c,7),t[c+1],t[c+2],t[c+3],t[c+4],t[c+5],t[c+6],null,er),a=er.x,h=er.y,c+=7;break;case Hs:e?Js(_,t[c+1],t[c+2],t[c+3],0,360,!1):nr(_,t,c,4),a=t[c+1]+t[c+3],h=t[c+2],c+=4;break;case Vs:Qs(e?_:nr(_,t,c,6),a,h,t[c+1],t[c+2],t[c+3],t[c+4],t[c+5],null,er),a=er.x,h=er.y,c+=6;break;default:return tr.error(`command: ${i} [index:${c}]`,t),_}n=i}return _},objectToCanvasData(t){if(t[0].name.length>1)return ms.toCommand(t);{const e=[];return t.forEach(t=>{switch(t.name){case"M":e.push(xs,t.x,t.y);break;case"L":e.push(bs,t.x,t.y);break;case"C":e.push(Ts,t.x1,t.y1,t.x2,t.y2,t.x,t.y);break;case"Q":e.push(Rs,t.x1,t.y1,t.x,t.y);break;case"Z":e.push(Ns)}}),e}},copyData(t,e,s,r){for(let i=s,n=s+r;i<n;i++)t.push(e[i])},pushData(t,e){rr.index===rr.length&&(rr.index=1,t.push(rr.name)),t.push(Number(e)),rr.index++,rr.dot=0}},{current:rr,pushData:ir,copyData:nr}=sr,{M:or,L:ar,C:hr,Q:lr,Z:dr,N:cr,D:ur,X:_r,G:pr,F:fr,O:gr,P:yr,U:mr}=Ae,{getMinDistanceFrom:xr,getRadianFrom:wr}=ot,{tan:br,min:Br,abs:vr}=Math,kr={},Cr={beginPath(t){t.length=0},moveTo(t,e,s){t.push(or,e,s)},lineTo(t,e,s){t.push(ar,e,s)},bezierCurveTo(t,e,s,r,i,n,o){t.push(hr,e,s,r,i,n,o)},quadraticCurveTo(t,e,s,r,i){t.push(lr,e,s,r,i)},closePath(t){t.push(dr)},rect(t,e,s,r,i){t.push(cr,e,s,r,i)},roundRect(t,e,s,r,i,n){if(o(n))t.push(_r,e,s,r,i,n);else{const o=I.fourNumber(n);o?t.push(ur,e,s,r,i,...o):t.push(cr,e,s,r,i)}},ellipse(t,e,s,i,n,o,a,h,l){if(i===n)return Tr(t,e,s,i,a,h,l);r(o)?t.push(fr,e,s,i,n):(r(a)&&(a=0),r(h)&&(h=360),t.push(pr,e,s,i,n,o,a,h,l?1:0))},arc(t,e,s,i,n,o,a){r(n)?t.push(yr,e,s,i):(r(n)&&(n=0),r(o)&&(o=360),t.push(gr,e,s,i,n,o,a?1:0))},arcTo(t,e,r,i,n,o,a,h){if(!s(a)){const t=xr(a,h,e,r,i,n);o=Br(o,Br(t/2,t/2*vr(br(wr(a,h,e,r,i,n)/2))))}t.push(mr,e,r,i,n,o)},drawEllipse(t,e,s,i,n,o,a,h,l){hs.ellipse(null,e,s,i,n,r(o)?0:o,r(a)?0:a,r(h)?360:h,l,null,null,kr),t.push(or,kr.x,kr.y),Or(t,e,s,i,n,o,a,h,l)},drawArc(t,e,s,i,n,o,a){hs.arc(null,e,s,i,r(n)?0:n,r(o)?360:o,a,null,null,kr),t.push(or,kr.x,kr.y),Tr(t,e,s,i,n,o,a)},drawPoints(t,e,s,r){hs.points(t,e,s,r)}},{ellipse:Or,arc:Tr}=Cr,{moveTo:Pr,lineTo:Sr,quadraticCurveTo:Lr,bezierCurveTo:Rr,closePath:Er,beginPath:Ir,rect:Mr,roundRect:Ar,ellipse:Wr,arc:Nr,arcTo:Yr,drawEllipse:Dr,drawArc:Xr,drawPoints:zr}=Cr;class Fr{set path(t){this.__path=t}get path(){return this.__path}constructor(t){this.set(t)}set(t){return this.__path=t?i(t)?Ie.parse(t):t:[],this}beginPath(){return Ir(this.__path),this.paint(),this}moveTo(t,e){return Pr(this.__path,t,e),this.paint(),this}lineTo(t,e){return Sr(this.__path,t,e),this.paint(),this}bezierCurveTo(t,e,s,r,i,n){return Rr(this.__path,t,e,s,r,i,n),this.paint(),this}quadraticCurveTo(t,e,s,r){return Lr(this.__path,t,e,s,r),this.paint(),this}closePath(){return Er(this.__path),this.paint(),this}rect(t,e,s,r){return Mr(this.__path,t,e,s,r),this.paint(),this}roundRect(t,e,s,r,i){return Ar(this.__path,t,e,s,r,i),this.paint(),this}ellipse(t,e,s,r,i,n,o,a){return Wr(this.__path,t,e,s,r,i,n,o,a),this.paint(),this}arc(t,e,s,r,i,n){return Nr(this.__path,t,e,s,r,i,n),this.paint(),this}arcTo(t,e,s,r,i){return Yr(this.__path,t,e,s,r,i),this.paint(),this}drawEllipse(t,e,s,r,i,n,o,a){return Dr(this.__path,t,e,s,r,i,n,o,a),this.paint(),this}drawArc(t,e,s,r,i,n){return Xr(this.__path,t,e,s,r,i,n),this.paint(),this}drawPoints(t,e,s){return zr(this.__path,t,e,s),this.paint(),this}clearPath(){return this.beginPath()}paint(){}}const{M:Ur,L:jr,C:Hr,Q:Vr,Z:Gr,N:qr,D:Qr,X:Jr,G:Zr,F:$r,O:Kr,P:ti,U:ei}=Ae,si=ee.get("PathDrawer"),ri={drawPathByData(t,e){if(!e)return;let s,r=0,i=e.length;for(;r<i;)switch(s=e[r],s){case Ur:t.moveTo(e[r+1],e[r+2]),r+=3;break;case jr:t.lineTo(e[r+1],e[r+2]),r+=3;break;case Hr:t.bezierCurveTo(e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6]),r+=7;break;case Vr:t.quadraticCurveTo(e[r+1],e[r+2],e[r+3],e[r+4]),r+=5;break;case Gr:t.closePath(),r+=1;break;case qr:t.rect(e[r+1],e[r+2],e[r+3],e[r+4]),r+=5;break;case Qr:t.roundRect(e[r+1],e[r+2],e[r+3],e[r+4],[e[r+5],e[r+6],e[r+7],e[r+8]]),r+=9;break;case Jr:t.roundRect(e[r+1],e[r+2],e[r+3],e[r+4],e[r+5]),r+=6;break;case Zr:t.ellipse(e[r+1],e[r+2],e[r+3],e[r+4],e[r+5]*A,e[r+6]*A,e[r+7]*A,e[r+8]),r+=9;break;case $r:t.ellipse(e[r+1],e[r+2],e[r+3],e[r+4],0,0,W,!1),r+=5;break;case Kr:t.arc(e[r+1],e[r+2],e[r+3],e[r+4]*A,e[r+5]*A,e[r+6]),r+=7;break;case ti:t.arc(e[r+1],e[r+2],e[r+3],0,W,!1),r+=4;break;case ei:t.arcTo(e[r+1],e[r+2],e[r+3],e[r+4],e[r+5]),r+=6;break;default:return void si.error(`command: ${s} [index:${r}]`,e)}}},{M:ii,L:ni,C:oi,Q:ai,Z:hi,N:li,D:di,X:ci,G:ui,F:_i,O:pi,P:fi,U:gi}=Ae,{toTwoPointBounds:yi,toTwoPointBoundsByQuadraticCurve:mi,arcTo:xi,arc:wi,ellipse:bi}=hs,{addPointBounds:Bi,copy:vi,addPoint:ki,setPoint:Ci,addBounds:Oi,toBounds:Ti}=gt,Pi=ee.get("PathBounds");let Si,Li,Ri;const Ei={},Ii={},Mi={},Ai={toBounds(t,e){Ai.toTwoPointBounds(t,Ii),Ti(Ii,e)},toTwoPointBounds(t,e){if(!t||!t.length)return Ci(e,0,0);let s,r,i,n,o,a=0,h=0,l=0;const d=t.length;for(;a<d;)switch(o=t[a],0===a&&(o===hi||o===oi||o===ai?Ci(e,h,l):Ci(e,t[a+1],t[a+2])),o){case ii:case ni:h=t[a+1],l=t[a+2],ki(e,h,l),a+=3;break;case oi:i=t[a+5],n=t[a+6],yi(h,l,t[a+1],t[a+2],t[a+3],t[a+4],i,n,Ei),Bi(e,Ei),h=i,l=n,a+=7;break;case ai:s=t[a+1],r=t[a+2],i=t[a+3],n=t[a+4],mi(h,l,s,r,i,n,Ei),Bi(e,Ei),h=i,l=n,a+=5;break;case hi:a+=1;break;case li:h=t[a+1],l=t[a+2],Oi(e,h,l,t[a+3],t[a+4]),a+=5;break;case di:case ci:h=t[a+1],l=t[a+2],Oi(e,h,l,t[a+3],t[a+4]),a+=o===di?9:6;break;case ui:bi(null,t[a+1],t[a+2],t[a+3],t[a+4],t[a+5],t[a+6],t[a+7],t[a+8],Ei,Mi),0===a?vi(e,Ei):Bi(e,Ei),h=Mi.x,l=Mi.y,a+=9;break;case _i:h=t[a+1],l=t[a+2],Li=t[a+3],Ri=t[a+4],Oi(e,h-Li,l-Ri,2*Li,2*Ri),h+=Li,a+=5;break;case pi:wi(null,t[a+1],t[a+2],t[a+3],t[a+4],t[a+5],t[a+6],Ei,Mi),0===a?vi(e,Ei):Bi(e,Ei),h=Mi.x,l=Mi.y,a+=7;break;case fi:h=t[a+1],l=t[a+2],Si=t[a+3],Oi(e,h-Si,l-Si,2*Si,2*Si),h+=Si,a+=4;break;case gi:xi(null,h,l,t[a+1],t[a+2],t[a+3],t[a+4],t[a+5],Ei,Mi),0===a?vi(e,Ei):Bi(e,Ei),h=Mi.x,l=Mi.y,a+=6;break;default:return void Pi.error(`command: ${o} [index:${a}]`,t)}}},{M:Wi,L:Ni,Z:Yi}=Ae,{getCenterX:Di,getCenterY:Xi}=ot,{arcTo:zi}=Cr,Fi={smooth(t,e,s){let r,i,n,o=0,a=0,h=0,d=0,c=0,u=0,_=0,p=0,f=0;l(e)&&(e=e[0]||0);const g=t.length,y=[];for(;o<g;){switch(r=t[o],r){case Wi:d=p=t[o+1],c=f=t[o+2],o+=3,t[o]===Ni?(u=t[o+1],_=t[o+2],y.push(Wi,Di(d,u),Xi(c,_))):y.push(Wi,d,c);break;case Ni:switch(a=t[o+1],h=t[o+2],o+=3,t[o]){case Ni:zi(y,a,h,t[o+1],t[o+2],e,p,f);break;case Yi:zi(y,a,h,d,c,e,p,f);break;default:y.push(Ni,a,h)}p=a,f=h;break;case Yi:i!==Yi&&(zi(y,d,c,u,_,e,p,f),y.push(Yi)),o+=1;break;default:n=ze[r];for(let e=0;e<n;e++)y.push(t[o+e]);o+=n}i=r}return r!==Yi&&(y[1]=d,y[2]=c),y}};function Ui(t){return new Fr(t)}const ji=Ui();Ie.creator=Ui(),Ie.parse=sr.parse,Ie.convertToCanvasData=sr.toCanvasData;const{drawRoundRect:Hi}=Fe;function Vi(t){!function(t){t&&!t.roundRect&&(t.roundRect=function(t,e,s,r,i){Hi(this,t,e,s,r,i)})}(t)}const Gi={alphaPixelTypes:["png","webp","svg"],upperCaseTypeMap:{},mineType:t=>!t||t.startsWith("image")?t:("jpg"===t&&(t="jpeg"),"image/"+t),fileType(t){const e=t.split(".");return e[e.length-1]},isOpaqueImage(t){const e=qi.fileType(t);return["jpg","jpeg"].some(t=>t===e)},getExportOptions(t){switch(typeof t){case"object":return t;case"number":return{quality:t};case"boolean":return{blob:t};default:return{}}}},qi=Gi;qi.alphaPixelTypes.forEach(t=>qi.upperCaseTypeMap[t]=t.toUpperCase());const Qi=ee.get("TaskProcessor");class Ji{constructor(t){this.parallel=!0,this.time=1,this.id=g.create(g.TASK),this.task=t}run(){return me(this,void 0,void 0,function*(){try{if(this.isComplete||this.runing)return;if(this.runing=!0,this.canUse&&!this.canUse())return this.cancel();this.task&&(yield this.task())}catch(t){Qi.error(t)}})}complete(){this.isComplete=!0,this.parent=this.task=this.canUse=null}cancel(){this.isCancel=!0,this.complete()}}class Zi{get total(){return this.list.length+this.delayNumber}get finishedIndex(){return this.isComplete?0:this.index+this.parallelSuccessNumber}get remain(){return this.isComplete?this.total:this.total-this.finishedIndex}get percent(){const{total:t}=this;let e=0,s=0;for(let r=0;r<t;r++)r<=this.finishedIndex?(s+=this.list[r].time,r===this.finishedIndex&&(e=s)):e+=this.list[r].time;return this.isComplete?1:s/e}constructor(t){this.config={parallel:6},this.list=[],this.running=!1,this.isComplete=!0,this.index=0,this.delayNumber=0,t&&_.assign(this.config,t),this.empty()}add(t,e,r){let i,n,a,h;const l=new Ji(t);return l.parent=this,o(e)?h=e:e&&(n=e.parallel,i=e.start,a=e.time,h=e.delay,r||(r=e.canUse)),a&&(l.time=a),!1===n&&(l.parallel=!1),r&&(l.canUse=r),s(h)?this.push(l,i):(this.delayNumber++,setTimeout(()=>{this.delayNumber&&(this.delayNumber--,this.push(l,i))},h)),this.isComplete=!1,l}push(t,e){this.list.push(t),!1===e||this.timer||(this.timer=setTimeout(()=>this.start()))}empty(){this.index=0,this.parallelSuccessNumber=0,this.list=[],this.parallelList=[],this.delayNumber=0}start(){this.running||(this.running=!0,this.isComplete=!1,this.run())}pause(){clearTimeout(this.timer),this.timer=null,this.running=!1}resume(){this.start()}skip(){this.index++,this.resume()}stop(){this.isComplete=!0,this.list.forEach(t=>{t.isComplete||t.run()}),this.pause(),this.empty()}run(){this.running&&(this.setParallelList(),this.parallelList.length>1?this.runParallelTasks():this.remain?this.runTask():this.onComplete())}runTask(){const t=this.list[this.index];t?t.run().then(()=>{this.onTask(t),this.index++,t.isCancel?this.runTask():this.nextTask()}).catch(t=>{this.onError(t)}):this.timer=setTimeout(()=>this.nextTask())}runParallelTasks(){this.parallelList.forEach(t=>this.runParallelTask(t))}runParallelTask(t){t.run().then(()=>{this.onTask(t),this.fillParallelTask()}).catch(t=>{this.onParallelError(t)})}nextTask(){this.total===this.finishedIndex?this.onComplete():this.timer=setTimeout(()=>this.run())}setParallelList(){let t;const{config:e,list:s,index:r}=this;this.parallelList=[],this.parallelSuccessNumber=0;let i=r+e.parallel;if(i>s.length&&(i=s.length),e.parallel>1)for(let e=r;e<i&&(t=s[e],t.parallel);e++)this.parallelList.push(t)}fillParallelTask(){let t;const e=this.parallelList;this.parallelSuccessNumber++,e.pop();const s=e.length,r=this.finishedIndex+s;if(e.length){if(!this.running)return;r<this.total&&(t=this.list[r],t&&t.parallel&&(e.push(t),this.runParallelTask(t)))}else this.index+=this.parallelSuccessNumber,this.parallelSuccessNumber=0,this.nextTask()}onComplete(){this.stop(),this.config.onComplete&&this.config.onComplete()}onTask(t){t.complete(),this.config.onTask&&this.config.onTask()}onParallelError(t){this.parallelList.forEach(t=>{t.parallel=!1}),this.parallelList.length=0,this.parallelSuccessNumber=0,this.onError(t)}onError(t){this.pause(),this.config.onError&&this.config.onError(t)}destroy(){this.stop()}}const $i=ee.get("Resource"),Ki={tasker:new Zi,map:{},get isComplete(){return tn.tasker.isComplete},set(t,e){tn.map[t]&&$i.repeat(t),tn.map[t]=e},get:t=>tn.map[t],remove(t){const e=tn.map[t];e&&(e.destroy&&e.destroy(),delete tn.map[t])},loadImage(t,e){return new Promise((s,r)=>{const i=this.setImage(t,t,e);i.load(()=>s(i),t=>r(t))})},setImage(t,e,s){let r;return i(e)?r={url:e}:e.url||(r={url:t,view:e}),r&&(s&&(r.format=s),e=le.image(r)),tn.set(t,e),e},destroy(){tn.map={}}},tn=Ki,en={maxRecycled:10,recycledList:[],patternTasker:new Zi({parallel:1}),get(t){let e=Ki.get(t.url);return e||Ki.set(t.url,e=le.image(t)),e.use++,e},recycle(t){t.use--,setTimeout(()=>{t.use||($t.image.isLarge(t)?t.url&&Ki.remove(t.url):(t.clearLevels(),sn.recycledList.push(t)))})},recyclePaint(t){sn.recycle(t.image)},clearRecycled(t){const e=sn.recycledList;(e.length>sn.maxRecycled||t)&&(e.forEach(e=>(!e.use||t)&&e.url&&Ki.remove(e.url)),e.length=0)},clearLevels(){},hasAlphaPixel:t=>Gi.alphaPixelTypes.some(e=>sn.isFormat(e,t)),isFormat(t,e){if(e.format)return e.format===t;const{url:s}=e;if(s.startsWith("data:")){if(s.startsWith("data:"+Gi.mineType(t)))return!0}else{if(s.includes("."+t)||s.includes("."+Gi.upperCaseTypeMap[t]))return!0;if("png"===t&&!s.includes("."))return!0}return!1},destroy(){this.clearRecycled(!0)}},sn=en,{IMAGE:rn,create:nn}=g;class on{get url(){return this.config.url}get crossOrigin(){const{crossOrigin:t}=this.config;return s(t)?$t.image.crossOrigin:t}get completed(){return this.ready||!!this.error}constructor(t){if(this.use=0,this.waitComplete=[],this.innerId=nn(rn),this.config=t||(t={url:""}),t.view){const{view:e}=t;this.setView(e.config?e.view:e)}en.isFormat("svg",t)&&(this.isSVG=!0),en.hasAlphaPixel(t)&&(this.hasAlphaPixel=!0)}load(t,e,s){return this.loading||(this.loading=!0,Ki.tasker.add(()=>me(this,void 0,void 0,function*(){return yield $t.origin.loadImage(this.getLoadUrl(s),this.crossOrigin,this).then(t=>{s&&this.setThumbView(t),this.setView(t)}).catch(t=>{this.error=t,this.onComplete(!1)})}))),this.waitComplete.push(t,e),this.waitComplete.length-2}unload(t,e){const s=this.waitComplete;if(e){const e=s[t+1];e&&e({type:"stop"})}s[t]=s[t+1]=void 0}setView(t){this.ready=!0,this.width||(this.width=t.width,this.height=t.height,this.view=t),this.onComplete(!0)}onComplete(t){let e;this.waitComplete.forEach((s,r)=>{e=r%2,s&&(t?e||s(this):e&&s(this.error))}),this.waitComplete.length=0,this.loading=!1}getFull(t){return this.view}getCanvas(t,e,s,r,i,n,o,a){if(t||(t=this.width),e||(e=this.height),this.cache){let{params:t,data:e}=this.cache;for(let s in t)if(t[s]!==arguments[s]){e=null;break}if(e)return e}const h=$t.image.resize(this.view,t,e,i,n,void 0,o,s,r,a);return this.cache=this.use>1?{data:h,params:arguments}:null,h}getPattern(t,e,s,r){const i=$t.canvas.createPattern(t,e);return $t.image.setPatternTransform(i,s,r),i}getLoadUrl(t){return this.url}setThumbView(t){}getThumbSize(t){}getMinLevel(){}getLevelData(t,e,s){}clearLevels(t){}destroy(){this.clearLevels();const{view:t}=this;t&&t.close&&t.close(),this.config={url:""},this.cache=this.view=null,this.waitComplete.length=0}}function an(t,e,s,r){r||(s.configurable=s.enumerable=!0),Object.defineProperty(t,e,s)}function hn(t,e){return Object.getOwnPropertyDescriptor(t,e)}function ln(t,e){const s="_"+t;return{get(){const t=this[s];return null==t?e:t},set(t){this[s]=t}}}function dn(t,e){return(s,r)=>un(s,r,t,e&&e(r))}function cn(t){return t}function un(t,e,s,r){const i={get(){return this.__getAttr(e)},set(t){this.__setAttr(e,t)}};an(t,e,Object.assign(i,r||{})),zn(t,e,s)}function _n(t){return dn(t)}function pn(t,e){return dn(t,t=>({set(s){this.__setAttr(t,s,e)&&(this.__layout.matrixChanged||this.__layout.matrixChange())}}))}function fn(t,e){return dn(t,t=>({set(s){this.__setAttr(t,s,e)&&(this.__layout.matrixChanged||this.__layout.matrixChange(),this.__scrollWorld||(this.__scrollWorld={}))}}))}function gn(t){return dn(t,t=>({set(e){this.__setAttr(t,e)&&(this.__hasAutoLayout=!!(this.origin||this.around||this.flow),this.__local||this.__layout.createLocal(),bn(this))}}))}function yn(t,e){return dn(t,t=>({set(s){this.__setAttr(t,s,e)&&(this.__layout.scaleChanged||this.__layout.scaleChange())}}))}function mn(t,e){return dn(t,t=>({set(s){this.__setAttr(t,s,e)&&(this.__layout.rotationChanged||this.__layout.rotationChange())}}))}function xn(t,e){return dn(t,t=>({set(s){this.__setAttr(t,s,e)&&bn(this)}}))}function wn(t){return dn(t,t=>({set(e){this.__setAttr(t,e)&&(bn(this),this.__.__removeNaturalSize())}}))}function bn(t){t.__layout.boxChanged||t.__layout.boxChange(),t.__hasAutoLayout&&(t.__layout.matrixChanged||t.__layout.matrixChange())}function Bn(t){return dn(t,t=>({set(e){const s=this.__;2!==s.__pathInputed&&(s.__pathInputed=e?1:0),e||(s.__pathForRender=void 0),this.__setAttr(t,e),bn(this)}}))}const vn=xn;function kn(t,e){return dn(t,t=>({set(s){this.__setAttr(t,s)&&(Cn(this),e&&(this.__.__useStroke=!0))}}))}function Cn(t){t.__layout.strokeChanged||t.__layout.strokeChange(),t.__.__useArrow&&bn(t)}const On=kn;function Tn(t){return dn(t,t=>({set(e){this.__setAttr(t,e),this.__layout.renderChanged||this.__layout.renderChange()}}))}function Pn(t){return dn(t,t=>({set(e){this.__setAttr(t,e)&&(this.__layout.surfaceChanged||this.__layout.surfaceChange())}}))}function Sn(t){return dn(t,t=>({set(e){if(this.__setAttr(t,e)){const t=this.__;_.stintSet(t,"__useDim",t.dim||t.bright||t.dimskip),this.__layout.surfaceChange()}}}))}function Ln(t){return dn(t,t=>({set(e){this.__setAttr(t,e)&&(this.__layout.opacityChanged||this.__layout.opacityChange()),this.mask&&En(this)}}))}function Rn(t){return dn(t,t=>({set(e){const s=this.visible;if(!0===s&&0===e){if(this.animationOut)return this.__runAnimation("out",()=>In(this,t,e,s))}else 0===s&&!0===e&&this.animation&&this.__runAnimation("in");In(this,t,e,s),this.mask&&En(this)}}))}function En(t){const{parent:e}=t;if(e){const{__hasMask:t}=e;e.__updateMask(),t!==e.__hasMask&&e.forceUpdate()}}function In(t,e,s,r){t.__setAttr(e,s)&&(t.__layout.opacityChanged||t.__layout.opacityChange(),0!==r&&0!==s||bn(t))}function Mn(t){return dn(t,t=>({set(e){this.__setAttr(t,e)&&(this.__layout.surfaceChange(),this.waitParent(()=>{this.parent.__layout.childrenSortChange()}))}}))}function An(t){return dn(t,t=>({set(e){this.__setAttr(t,e)&&(this.__layout.boxChanged||this.__layout.boxChange(),this.waitParent(()=>{this.parent.__updateMask(e)}))}}))}function Wn(t){return dn(t,t=>({set(e){this.__setAttr(t,e)&&this.waitParent(()=>{this.parent.__updateEraser(e)})}}))}function Nn(t){return dn(t,t=>({set(e){this.__setAttr(t,e)&&(this.__layout.hitCanvasChanged=!0,"hit"===ee.showBounds&&this.__layout.surfaceChange(),this.leafer&&this.leafer.updateCursor())}}))}function Yn(t){return dn(t,t=>({set(e){this.__setAttr(t,e),this.leafer&&this.leafer.updateCursor()}}))}function Dn(t){return(e,s)=>{an(e,"__DataProcessor",{get:()=>t})}}function Xn(t){return(e,s)=>{an(e,"__LayoutProcessor",{get:()=>t})}}function zn(t,e,r){const i=t.__DataProcessor.prototype,n="_"+e,o=function(t){return"set"+t.charAt(0).toUpperCase()+t.slice(1)}(e),a=ln(e,r);if(s(r))a.get=function(){return this[n]};else if("function"==typeof r)a.get=function(){const t=this[n];return null==t?r(this.__leaf):t};else if(d(r)){const t=u(r);a.get=function(){const e=this[n];return null==e?this[n]=t?{}:_.clone(r):e}}const h=t.isBranchLeaf;"width"===e?a.get=function(){const t=this[n];if(null==t){const t=this,e=t.__naturalWidth,s=t.__leaf;return!r||s.pathInputed?s.boxBounds.width:e?t._height&&t.__useNaturalRatio?t._height*e/t.__naturalHeight:e:h&&s.children.length?s.boxBounds.width:r}return t}:"height"===e&&(a.get=function(){const t=this[n];if(null==t){const t=this,e=t.__naturalHeight,s=t.__leaf;return!r||s.pathInputed?s.boxBounds.height:e?t._width&&t.__useNaturalRatio?t._width*e/t.__naturalWidth:e:h&&s.children.length?s.boxBounds.height:r}return t});let l,c=i;for(;!l&&c;)l=hn(c,e),c=c.__proto__;l&&l.set&&(a.set=l.set),i[o]&&(a.set=i[o],delete i[o]),an(i,e,a)}const Fn=new ee("rewrite"),Un=[],jn=["destroy","constructor"];function Hn(t){return(e,s)=>{Un.push({name:e.constructor.name+"."+s,run:()=>{e[s]=t}})}}function Vn(){return t=>{Gn()}}function Gn(t){Un.length&&(Un.forEach(e=>{t&&Fn.error(e.name,"Class@rewriteAble()"),e.run()}),Un.length=0)}function qn(t,e){return s=>{var r;(t.prototype?(r=t.prototype,Object.getOwnPropertyNames(r)):Object.keys(t)).forEach(r=>{if(!(jn.includes(r)||e&&e.includes(r)))if(t.prototype){hn(t.prototype,r).writable&&(s.prototype[r]=t.prototype[r])}else s.prototype[r]=t[r]})}}function Qn(){return t=>{ce.register(t)}}function Jn(){return t=>{pe.register(t)}}setTimeout(()=>Gn(!0));const{copy:Zn,toInnerPoint:$n,toOuterPoint:Kn,scaleOfOuter:to,rotateOfOuter:eo,skewOfOuter:so,multiplyParent:ro,divideParent:io,getLayout:no}=q,oo={},{round:ao}=Math,ho={updateAllMatrix(t,e,s){if(e&&t.__hasAutoLayout&&t.__layout.matrixChanged&&(s=!0),uo(t,e,s),t.isBranch){const{children:r}=t;for(let t=0,i=r.length;t<i;t++)co(r[t],e,s)}},updateMatrix(t,e,s){const r=t.__layout;e?s&&(r.waitAutoLayout=!0,t.__hasAutoLayout&&(r.matrixChanged=!1)):r.waitAutoLayout&&(r.waitAutoLayout=!1),r.matrixChanged&&t.__updateLocalMatrix(),r.waitAutoLayout||t.__updateWorldMatrix()},updateBounds(t){const e=t.__layout;e.boundsChanged&&t.__updateLocalBounds(),e.waitAutoLayout||t.__updateWorldBounds()},updateAllWorldOpacity(t){if(t.__updateWorldOpacity(),t.isBranch){const{children:e}=t;for(let t=0,s=e.length;t<s;t++)_o(e[t])}},updateChange(t){const e=t.__layout;e.stateStyleChanged&&t.updateState(),e.opacityChanged&&_o(t),t.__updateChange()},updateAllChange(t){if(fo(t),t.isBranch){const{children:e}=t;for(let t=0,s=e.length;t<s;t++)po(e[t])}},worldHittable(t){for(;t;){if(!t.__.hittable)return!1;t=t.parent}return!0},draggable:t=>(t.draggable||t.editable)&&t.hitSelf&&!t.locked,copyCanvasByWorld(t,e,s,r,i,n){r||(r=t.__nowWorld),t.__worldFlipped||$t.fullImageShadow?e.copyWorldByReset(s,r,t.__nowWorld,i,n):e.copyWorldToInner(s,r,t.__layout.renderBounds,i)},moveWorld(t,e,s=0,r,i){const n=d(e)?Object.assign({},e):{x:e,y:s};r?Kn(t.localTransform,n,n,!0):t.parent&&$n(t.parent.scrollWorldTransform,n,n,!0),lo.moveLocal(t,n.x,n.y,i)},moveLocal(t,e,s=0,r){d(e)&&(s=e.y,e=e.x),e+=t.x,s+=t.y,t.leafer&&t.leafer.config.pointSnap&&(e=ao(e),s=ao(s)),r?t.animate({x:e,y:s},r):(t.x=e,t.y=s)},zoomOfWorld(t,e,s,r,i,n){lo.zoomOfLocal(t,go(t,e),s,r,i,n)},zoomOfLocal(t,e,s,r=s,i,n){const a=t.__localMatrix;if(o(r)||(r&&(n=r),r=s),Zn(oo,a),to(oo,e,s,r),lo.hasHighPosition(t))lo.setTransform(t,oo,i,n);else{const e=t.x+oo.e-a.e,o=t.y+oo.f-a.f;n&&!i?t.animate({x:e,y:o,scaleX:t.scaleX*s,scaleY:t.scaleY*r},n):(t.x=e,t.y=o,t.scaleResize(s,r,!0!==i))}},rotateOfWorld(t,e,s,r){lo.rotateOfLocal(t,go(t,e),s,r)},rotateOfLocal(t,e,s,r){const i=t.__localMatrix;Zn(oo,i),eo(oo,e,s),lo.hasHighPosition(t)?lo.setTransform(t,oo,!1,r):t.set({x:t.x+oo.e-i.e,y:t.y+oo.f-i.f,rotation:I.formatRotation(t.rotation+s)},r)},skewOfWorld(t,e,s,r,i,n){lo.skewOfLocal(t,go(t,e),s,r,i,n)},skewOfLocal(t,e,s,r=0,i,n){Zn(oo,t.__localMatrix),so(oo,e,s,r),lo.setTransform(t,oo,i,n)},transformWorld(t,e,s,r){Zn(oo,t.worldTransform),ro(oo,e),t.parent&&io(oo,t.parent.scrollWorldTransform),lo.setTransform(t,oo,s,r)},transform(t,e,s,r){Zn(oo,t.localTransform),ro(oo,e),lo.setTransform(t,oo,s,r)},setTransform(t,e,s,r){const i=t.__,n=i.origin&&lo.getInnerOrigin(t,i.origin),o=no(e,n,i.around&&lo.getInnerOrigin(t,i.around));if(lo.hasOffset(t)&&(o.x-=i.offsetX,o.y-=i.offsetY),s){const e=o.scaleX/t.scaleX,s=o.scaleY/t.scaleY;if(delete o.scaleX,delete o.scaleY,n){zt.scale(t.boxBounds,Math.abs(e),Math.abs(s));const r=lo.getInnerOrigin(t,i.origin);ot.move(o,n.x-r.x,n.y-r.y)}t.set(o),t.scaleResize(e,s,!1)}else t.set(o,r)},getFlipTransform(t,e){const s={a:1,b:0,c:0,d:1,e:0,f:0},r="x"===e?1:-1;return to(s,lo.getLocalOrigin(t,"center"),-1*r,1*r),s},getLocalOrigin:(t,e)=>ot.tempToOuterOf(lo.getInnerOrigin(t,e),t.localTransform),getInnerOrigin(t,e){const s={};return bt.toPoint(e,t.boxBounds,s),s},getRelativeWorld:(t,e,s)=>(Zn(oo,t.worldTransform),io(oo,e.scrollWorldTransform),s?oo:Object.assign({},oo)),drop(t,e,s,r){t.setTransform(lo.getRelativeWorld(t,e,!0),r),e.add(t,s)},hasHighPosition:t=>t.origin||t.around||lo.hasOffset(t),hasOffset:t=>t.offsetX||t.offsetY,hasParent(t,e){if(!e)return!1;for(;t;){if(e===t)return!0;t=t.parent}},animateMove(t,e,s=.3){if(e.x||e.y)if(Math.abs(e.x)<1&&Math.abs(e.y)<1)t.move(e);else{const r=e.x*s,i=e.y*s;e.x-=r,e.y-=i,t.move(r,i),$t.requestRender(()=>lo.animateMove(t,e,s))}}},lo=ho,{updateAllMatrix:co,updateMatrix:uo,updateAllWorldOpacity:_o,updateAllChange:po,updateChange:fo}=lo;function go(t,e){return t.updateLayout(),t.parent?ot.tempToInnerOf(e,t.parent.scrollWorldTransform):e}const yo={worldBounds:t=>t.__world,localBoxBounds:t=>t.__.eraser||0===t.__.visible?null:t.__local||t.__layout,localStrokeBounds:t=>t.__.eraser||0===t.__.visible?null:t.__layout.localStrokeBounds,localRenderBounds:t=>t.__.eraser||0===t.__.visible?null:t.__layout.localRenderBounds,maskLocalBoxBounds:(t,e)=>xo(t,e)&&t.__localBoxBounds,maskLocalStrokeBounds:(t,e)=>xo(t,e)&&t.__layout.localStrokeBounds,maskLocalRenderBounds:(t,e)=>xo(t,e)&&t.__layout.localRenderBounds,excludeRenderBounds:(t,e)=>!(!e.bounds||e.bounds.hit(t.__world,e.matrix))||!(!e.hideBounds||!e.hideBounds.includes(t.__world,e.matrix))};let mo;function xo(t,e){return e||(mo=0),t.__.mask&&(mo=1),mo<0?null:(mo&&(mo=-1),!0)}const{updateBounds:wo}=ho,bo={sort:(t,e)=>t.__.zIndex===e.__.zIndex?t.__tempNumber-e.__tempNumber:t.__.zIndex-e.__.zIndex,pushAllChildBranch(t,e){if(t.__tempNumber=1,t.__.__childBranchNumber){const{children:s}=t;for(let r=0,i=s.length;r<i;r++)(t=s[r]).isBranch&&(t.__tempNumber=1,e.add(t),Bo(t,e))}},pushAllParent(t,e){const{keys:r}=e;if(r)for(;t.parent&&s(r[t.parent.innerId]);)e.add(t.parent),t=t.parent;else for(;t.parent;)e.add(t.parent),t=t.parent},pushAllBranchStack(t,e){let s=e.length;const{children:r}=t;for(let t=0,s=r.length;t<s;t++)r[t].isBranch&&e.push(r[t]);for(let t=s,r=e.length;t<r;t++)vo(e[t],e)},updateBounds(t,e){const s=[t];vo(t,s),ko(s,e)},updateBoundsByBranchStack(t,e){let s,r;for(let i=t.length-1;i>-1;i--){s=t[i],r=s.children;for(let t=0,e=r.length;t<e;t++)wo(r[t]);e&&e===s||wo(s)}},move(t,e,s){let r;const{children:i}=t;for(let n=0,o=i.length;n<o;n++)r=(t=i[n]).__world,r.e+=e,r.f+=s,r.x+=e,r.y+=s,t.isBranch&&Co(t,e,s)},scale(t,e,s,r,i,n,o){let a;const{children:h}=t,l=r-1,d=i-1;for(let c=0,u=h.length;c<u;c++)a=(t=h[c]).__world,a.a*=r,a.d*=i,(a.b||a.c)&&(a.b*=r,a.c*=i),a.e===a.x&&a.f===a.y?(a.x=a.e+=(a.e-n)*l+e,a.y=a.f+=(a.f-o)*d+s):(a.e+=(a.e-n)*l+e,a.f+=(a.f-o)*d+s,a.x+=(a.x-n)*l+e,a.y+=(a.y-o)*d+s),a.width*=r,a.height*=i,a.scaleX*=r,a.scaleY*=i,t.isBranch&&Oo(t,e,s,r,i,n,o)}},{pushAllChildBranch:Bo,pushAllBranchStack:vo,updateBoundsByBranchStack:ko,move:Co,scale:Oo}=bo,To={run(t){if(t&&t.length){const e=t.length;for(let s=0;s<e;s++)t[s]();t.length===e?t.length=0:t.splice(0,e)}}},{getRelativeWorld:Po,updateBounds:So}=ho,{toOuterOf:Lo,getPoints:Ro,copy:Eo}=zt,Io="_localContentBounds",Mo="_worldContentBounds",Ao="_worldBoxBounds",Wo="_worldStrokeBounds";class No{get contentBounds(){return this._contentBounds||this.boxBounds}set contentBounds(t){this._contentBounds=t}get strokeBounds(){return this._strokeBounds||this.boxBounds}get renderBounds(){return this._renderBounds||this.boxBounds}set renderBounds(t){this._renderBounds=t}get localContentBounds(){return Lo(this.contentBounds,this.leaf.__localMatrix,this[Io]||(this[Io]={})),this[Io]}get localStrokeBounds(){return this._localStrokeBounds||this}get localRenderBounds(){return this._localRenderBounds||this}get worldContentBounds(){return Lo(this.contentBounds,this.leaf.__world,this[Mo]||(this[Mo]={})),this[Mo]}get worldBoxBounds(){return Lo(this.boxBounds,this.leaf.__world,this[Ao]||(this[Ao]={})),this[Ao]}get worldStrokeBounds(){return Lo(this.strokeBounds,this.leaf.__world,this[Wo]||(this[Wo]={})),this[Wo]}get a(){return 1}get b(){return 0}get c(){return 0}get d(){return 1}get e(){return this.leaf.__.x}get f(){return this.leaf.__.y}get x(){return this.e+this.boxBounds.x}get y(){return this.f+this.boxBounds.y}get width(){return this.boxBounds.width}get height(){return this.boxBounds.height}constructor(t){this.leaf=t,this.leaf.__local&&(this._localRenderBounds=this._localStrokeBounds=this.leaf.__local),t.__world&&(this.boxBounds={x:0,y:0,width:0,height:0},this.boxChange(),this.matrixChange())}createLocal(){const t=this.leaf.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0};this._localStrokeBounds||(this._localStrokeBounds=t),this._localRenderBounds||(this._localRenderBounds=t)}update(){const{leaf:t}=this,{leafer:e}=t;if(t.isApp)return So(t);if(e)e.ready?e.watcher.changed&&e.layouter.layout():e.start();else{let e=t;for(;e.parent&&!e.parent.leafer;)e=e.parent;const s=e;if(s.__fullLayouting)return;s.__fullLayouting=!0,$t.layout(s),delete s.__fullLayouting}}getTransform(t="world"){this.update();const{leaf:e}=this;switch(t){case"world":return e.__world;case"local":return e.__localMatrix;case"inner":return q.defaultMatrix;case"page":t=e.zoomLayer;default:return Po(e,t)}}getBounds(t,e="world"){switch(this.update(),e){case"world":return this.getWorldBounds(t);case"local":return this.getLocalBounds(t);case"inner":return this.getInnerBounds(t);case"page":e=this.leaf.zoomLayer;default:return new Ht(this.getInnerBounds(t)).toOuterOf(this.getTransform(e))}}getInnerBounds(t="box"){switch(t){case"render":return this.renderBounds;case"content":if(this.contentBounds)return this.contentBounds;case"box":return this.boxBounds;case"stroke":return this.strokeBounds}}getLocalBounds(t="box"){switch(t){case"render":return this.localRenderBounds;case"stroke":return this.localStrokeBounds;case"content":if(this.contentBounds)return this.localContentBounds;case"box":return this.leaf.__localBoxBounds}}getWorldBounds(t="box"){switch(t){case"render":return this.leaf.__world;case"stroke":return this.worldStrokeBounds;case"content":if(this.contentBounds)return this.worldContentBounds;case"box":return this.worldBoxBounds}}getLayoutBounds(t,e="world",s){const{leaf:r}=this;let i,n,o,a=this.getInnerBounds(t);switch(e){case"world":i=r.getWorldPoint(a),n=r.__world;break;case"local":const{scaleX:t,scaleY:s,rotation:h,skewX:l,skewY:d}=r.__;o={scaleX:t,scaleY:s,rotation:h,skewX:l,skewY:d},i=r.getLocalPointByInner(a);break;case"inner":i=a,n=q.defaultMatrix;break;case"page":e=r.zoomLayer;default:i=r.getWorldPoint(a,e),n=Po(r,e,!0)}if(o||(o=q.getLayout(n)),Eo(o,a),ot.copy(o,i),s){const{scaleX:t,scaleY:e}=o,s=Math.abs(t),r=Math.abs(e);1===s&&1===r||(o.scaleX/=s,o.scaleY/=r,o.width*=s,o.height*=r)}return o}getLayoutPoints(t,e="world"){const{leaf:r}=this,i=Ro(this.getInnerBounds(t));let n;switch(e){case"world":n=null;break;case"local":n=r.parent;break;case"inner":break;case"page":e=r.zoomLayer;default:n=e}return s(n)||i.forEach(t=>r.innerToWorld(t,null,!1,n)),i}shrinkContent(){const{x:t,y:e,width:s,height:r}=this.boxBounds;this._contentBounds={x:t,y:e,width:s,height:r}}spreadStroke(){const{x:t,y:e,width:s,height:r}=this.strokeBounds;this._strokeBounds={x:t,y:e,width:s,height:r},this._localStrokeBounds={x:t,y:e,width:s,height:r},this.renderSpread||this.spreadRenderCancel()}spreadRender(){const{x:t,y:e,width:s,height:r}=this.renderBounds;this._renderBounds={x:t,y:e,width:s,height:r},this._localRenderBounds={x:t,y:e,width:s,height:r}}shrinkContentCancel(){this._contentBounds=void 0}spreadStrokeCancel(){const t=this.renderBounds===this.strokeBounds;this._strokeBounds=this.boxBounds,this._localStrokeBounds=this.leaf.__localBoxBounds,t&&this.spreadRenderCancel()}spreadRenderCancel(){this._renderBounds=this._strokeBounds,this._localRenderBounds=this._localStrokeBounds}boxChange(){this.boxChanged=!0,this.localBoxChanged?this.boundsChanged||(this.boundsChanged=!0):this.localBoxChange(),this.hitCanvasChanged=!0}localBoxChange(){this.localBoxChanged=!0,this.boundsChanged=!0}strokeChange(){this.strokeChanged=!0,this.strokeSpread||(this.strokeSpread=1),this.boundsChanged=!0,this.hitCanvasChanged=!0}renderChange(){this.renderChanged=!0,this.renderSpread||(this.renderSpread=1),this.boundsChanged=!0}scaleChange(){this.scaleChanged=!0,this._scaleOrRotationChange()}rotationChange(){this.rotationChanged=!0,this.affectRotation=!0,this._scaleOrRotationChange()}_scaleOrRotationChange(){this.affectScaleOrRotation=!0,this.matrixChange(),this.leaf.__local||this.createLocal()}matrixChange(){this.matrixChanged=!0,this.localBoxChanged?this.boundsChanged||(this.boundsChanged=!0):this.localBoxChange()}surfaceChange(){this.surfaceChanged=!0}opacityChange(){this.opacityChanged=!0,this.surfaceChanged||this.surfaceChange()}childrenSortChange(){this.childrenSortChanged||(this.childrenSortChanged=this.affectChildrenSort=!0,this.leaf.forceUpdate("surface"))}destroy(){}}class Yo{constructor(t,e){this.bubbles=!1,this.type=t,e&&(this.target=e)}stopDefault(){this.isStopDefault=!0,this.origin&&$t.event.stopDefault(this.origin)}stopNow(){this.isStopNow=!0,this.isStop=!0,this.origin&&$t.event.stopNow(this.origin)}stop(){this.isStop=!0,this.origin&&$t.event.stop(this.origin)}}class Do extends Yo{constructor(t,e,s){super(t,e),this.parent=s,this.child=e}}Do.ADD="child.add",Do.REMOVE="child.remove",Do.CREATED="created",Do.MOUNTED="mounted",Do.UNMOUNTED="unmounted",Do.DESTROY="destroy";const Xo="property.scroll";class zo extends Yo{constructor(t,e,s,r,i){super(t,e),this.attrName=s,this.oldValue=r,this.newValue=i}}zo.CHANGE="property.change",zo.LEAFER_CHANGE="property.leafer_change",zo.SCROLL=Xo;const Fo={scrollX:Xo,scrollY:Xo};class Uo extends Yo{constructor(t,e){super(t),Object.assign(this,e)}}Uo.LOAD="image.load",Uo.LOADED="image.loaded",Uo.ERROR="image.error";class jo extends Yo{static checkHas(t,e,s){"on"===s?e===qo?t.__hasWorldEvent=!0:t.__hasLocalEvent=!0:(t.__hasLocalEvent=t.hasEvent(Ho)||t.hasEvent(Vo)||t.hasEvent(Go),t.__hasWorldEvent=t.hasEvent(qo))}static emitLocal(t){if(t.leaferIsReady){const{resized:e}=t.__layout;"local"!==e&&(t.emit(Ho,t),"inner"===e&&t.emit(Vo,t)),t.emit(Go,t)}}static emitWorld(t){t.leaferIsReady&&t.emit(qo,this)}}jo.RESIZE="bounds.resize",jo.INNER="bounds.inner",jo.LOCAL="bounds.local",jo.WORLD="bounds.world";const{RESIZE:Ho,INNER:Vo,LOCAL:Go,WORLD:qo}=jo,Qo={};[Ho,Vo,Go,qo].forEach(t=>Qo[t]=1);class Jo extends Yo{get bigger(){if(!this.old)return!0;const{width:t,height:e}=this.old;return this.width>=t&&this.height>=e}get smaller(){return!this.bigger}get samePixelRatio(){return!this.old||this.pixelRatio===this.old.pixelRatio}constructor(t,e){d(t)?(super(Jo.RESIZE),Object.assign(this,t)):super(t),this.old=e}static isResizing(t){return this.resizingKeys&&!s(this.resizingKeys[t.innerId])}}Jo.RESIZE="resize";class Zo extends Yo{constructor(t,e){super(t),this.data=e}}Zo.REQUEST="watch.request",Zo.DATA="watch.data";class $o extends Yo{constructor(t,e,s){super(t),e&&(this.data=e,this.times=s)}}$o.REQUEST="layout.request",$o.START="layout.start",$o.BEFORE="layout.before",$o.LAYOUT="layout",$o.AFTER="layout.after",$o.AGAIN="layout.again",$o.END="layout.end";class Ko extends Yo{constructor(t,e,s,r){super(t),e&&(this.times=e),s&&(this.renderBounds=s,this.renderOptions=r)}}Ko.REQUEST="render.request",Ko.CHILD_START="render.child_start",Ko.CHILD_END="render.child_end",Ko.START="render.start",Ko.BEFORE="render.before",Ko.RENDER="render",Ko.AFTER="render.after",Ko.AGAIN="render.again",Ko.END="render.end",Ko.NEXT="render.next";class ta extends Yo{}ta.START="leafer.start",ta.BEFORE_READY="leafer.before_ready",ta.READY="leafer.ready",ta.AFTER_READY="leafer.after_ready",ta.VIEW_READY="leafer.view_ready",ta.VIEW_COMPLETED="leafer.view_completed",ta.STOP="leafer.stop",ta.RESTART="leafer.restart",ta.END="leafer.end",ta.UPDATE_MODE="leafer.update_mode",ta.TRANSFORM="leafer.transform",ta.MOVE="leafer.move",ta.SCALE="leafer.scale",ta.ROTATE="leafer.rotate",ta.SKEW="leafer.skew";const{MOVE:ea,SCALE:sa,ROTATE:ra,SKEW:ia}=ta,na={x:ea,y:ea,scaleX:sa,scaleY:sa,rotation:ra,skewX:ia,skewY:ia},oa={};class aa{set event(t){this.on(t)}on(t,e,s){if(!e){let e;if(l(t))t.forEach(t=>this.on(t[0],t[1],t[2]));else for(let s in t)l(e=t[s])?this.on(s,e[0],e[1]):this.on(s,e);return}let r,n,o;s&&("once"===s?n=!0:"boolean"==typeof s?r=s:(r=s.capture,n=s.once));const a=ha(this,r,!0),h=i(t)?t.split(" "):t,d=n?{listener:e,once:n}:{listener:e};h.forEach(t=>{t&&(o=a[t],o?-1===o.findIndex(t=>t.listener===e)&&o.push(d):a[t]=[d],Qo[t]&&jo.checkHas(this,t,"on"))})}off(t,e,s){if(t){const r=i(t)?t.split(" "):t;if(e){let t,i,n;s&&(t="boolean"==typeof s?s:"once"!==s&&s.capture);const o=ha(this,t);r.forEach(t=>{t&&(i=o[t],i&&(n=i.findIndex(t=>t.listener===e),n>-1&&i.splice(n,1),i.length||delete o[t],Qo[t]&&jo.checkHas(this,t,"off")))})}else{const{__bubbleMap:t,__captureMap:e}=this;r.forEach(s=>{t&&delete t[s],e&&delete e[s]})}}else this.__bubbleMap=this.__captureMap=void 0}on_(t,e,s,r){return e?this.on(t,s?e=e.bind(s):e,r):l(t)&&t.forEach(t=>this.on(t[0],t[2]?t[1]=t[1].bind(t[2]):t[1],t[3])),{type:t,current:this,listener:e,options:r}}off_(t){if(!t)return;const e=l(t)?t:[t];e.forEach(t=>{t&&(t.listener?t.current.off(t.type,t.listener,t.options):l(t.type)&&t.type.forEach(e=>t.current.off(e[0],e[1],e[3])))}),e.length=0}once(t,e,s,r){if(!e)return l(t)&&t.forEach(t=>this.once(t[0],t[1],t[2],t[3]));d(s)?e=e.bind(s):r=s,this.on(t,e,{once:!0,capture:r})}emit(t,e,s){!e&&pe.has(t)&&(e=pe.get(t,{type:t,target:this,current:this}));const r=ha(this,s)[t];if(r){let i;for(let n=0,o=r.length;n<o&&!((i=r[n])&&(i.listener(e),i.once&&(this.off(t,i.listener,s),n--,o--),e&&e.isStopNow));n++);}this.syncEventer&&this.syncEventer.emitEvent(e,s)}emitEvent(t,e){t.current=this,this.emit(t.type,t,e)}hasEvent(t,e){if(this.syncEventer&&this.syncEventer.hasEvent(t,e))return!0;const{__bubbleMap:r,__captureMap:i}=this,n=r&&r[t],o=i&&i[t];return!!(s(e)?n||o:e?o:n)}destroy(){this.__captureMap=this.__bubbleMap=this.syncEventer=null}}function ha(t,e,s){if(e){const{__captureMap:e}=t;return e||(s?t.__captureMap={}:oa)}{const{__bubbleMap:e}=t;return e||(s?t.__bubbleMap={}:oa)}}const{on:la,on_:da,off:ca,off_:ua,once:_a,emit:pa,emitEvent:fa,hasEvent:ga,destroy:ya}=aa.prototype,ma={on:la,on_:da,off:ca,off_:ua,once:_a,emit:pa,emitEvent:fa,hasEvent:ga,destroyEventer:ya},xa=ee.get("setAttr"),wa={__setAttr(t,e,r){if(this.leaferIsCreated){const i=this.__.__getInput(t);if(!r||n(e)||s(e)||(xa.warn(this.innerName,t,e),e=void 0),d(e)||i!==e){if(this.__realSetAttr(t,e),this.isLeafer){this.emitEvent(new zo(zo.LEAFER_CHANGE,this,t,i,e));const s=na[t];s&&(this.emitEvent(new ta(s,this)),this.emitEvent(new ta(ta.TRANSFORM,this)))}this.emitPropertyEvent(zo.CHANGE,t,i,e);const s=Fo[t];return s&&this.emitPropertyEvent(s,t,i,e),!0}return!1}return this.__realSetAttr(t,e),!0},emitPropertyEvent(t,e,s,r){const i=new zo(t,this,e,s,r);this.isLeafer||this.hasEvent(t)&&this.emitEvent(i),this.leafer.emitEvent(i)},__realSetAttr(t,e){const r=this.__;r[t]=e,this.__proxyData&&this.setProxyAttr(t,e),r.normalStyle&&(this.lockNormalStyle||s(r.normalStyle[t])||(r.normalStyle[t]=e))},__getAttr(t){return this.__proxyData?this.getProxyAttr(t):this.__.__get(t)}},{setLayout:ba,multiplyParent:Ba,translateInner:va,defaultWorld:ka}=q,{toPoint:Ca,tempPoint:Oa}=bt,Ta={__updateWorldMatrix(){const{parent:t,__layout:e,__world:s,__scrollWorld:r,__:i}=this;Ba(this.__local||e,t?t.__scrollWorld||t.__world:ka,s,!!e.affectScaleOrRotation,i),r&&va(Object.assign(r,s),i.scrollX,i.scrollY)},__updateLocalMatrix(){if(this.__local){const t=this.__layout,e=this.__local,s=this.__;t.affectScaleOrRotation&&(t.scaleChanged&&(t.resized||(t.resized="scale"))||t.rotationChanged)&&(ba(e,s,null,null,t.affectRotation),t.scaleChanged=t.rotationChanged=void 0),e.e=s.x+s.offsetX,e.f=s.y+s.offsetY,(s.around||s.origin)&&(Ca(s.around||s.origin,t.boxBounds,Oa),va(e,-Oa.x,-Oa.y,!s.around))}this.__layout.matrixChanged=void 0}},{updateMatrix:Pa,updateAllMatrix:Sa}=ho,{updateBounds:La}=bo,{toOuterOf:Ra,copyAndSpread:Ea,copy:Ia}=zt,{toBounds:Ma}=Ai,Aa={__updateWorldBounds(){const{__layout:t,__world:e}=this;Ra(t.renderBounds,e,e),t.resized&&("inner"===t.resized&&this.__onUpdateSize(),this.__hasLocalEvent&&jo.emitLocal(this),t.resized=void 0),this.__hasWorldEvent&&jo.emitWorld(this)},__updateLocalBounds(){const t=this.__layout;t.boxChanged&&(this.__.__pathInputed||this.__updatePath(),this.__updateRenderPath(),this.__updateBoxBounds(),t.resized="inner"),t.localBoxChanged&&(this.__local&&this.__updateLocalBoxBounds(),t.localBoxChanged=void 0,t.strokeSpread&&(t.strokeChanged=!0),t.renderSpread&&(t.renderChanged=!0),this.parent&&this.parent.__layout.boxChange()),t.boxChanged=void 0,t.strokeChanged&&(t.strokeSpread=this.__updateStrokeSpread(),t.strokeSpread?(t.strokeBounds===t.boxBounds&&t.spreadStroke(),this.__updateStrokeBounds(),this.__updateLocalStrokeBounds()):t.spreadStrokeCancel(),t.strokeChanged=void 0,(t.renderSpread||t.strokeSpread!==t.strokeBoxSpread)&&(t.renderChanged=!0),this.parent&&this.parent.__layout.strokeChange(),t.resized="inner"),t.renderChanged&&(t.renderSpread=this.__updateRenderSpread(),t.renderSpread?(t.renderBounds!==t.boxBounds&&t.renderBounds!==t.strokeBounds||t.spreadRender(),this.__updateRenderBounds(),this.__updateLocalRenderBounds()):t.spreadRenderCancel(),t.renderChanged=void 0,this.parent&&this.parent.__layout.renderChange()),t.resized||(t.resized="local"),t.boundsChanged=void 0},__updateLocalBoxBounds(){this.__hasMotionPath&&this.__updateMotionPath(),this.__hasAutoLayout&&this.__updateAutoLayout(),Ra(this.__layout.boxBounds,this.__local,this.__local)},__updateLocalStrokeBounds(){Ra(this.__layout.strokeBounds,this.__localMatrix,this.__layout.localStrokeBounds)},__updateLocalRenderBounds(){Ra(this.__layout.renderBounds,this.__localMatrix,this.__layout.localRenderBounds)},__updateBoxBounds(t,e){const s=this.__layout.boxBounds,r=this.__;r.__usePathBox?Ma(r.path,s):(s.x=0,s.y=0,s.width=r.width,s.height=r.height)},__updateAutoLayout(){this.__layout.matrixChanged=!0,this.isBranch?(this.__extraUpdate(),this.__.flow?(this.__layout.boxChanged&&this.__updateFlowLayout(),Sa(this),La(this,this),this.__.__autoSide&&this.__updateBoxBounds(!0)):(Sa(this),La(this,this))):Pa(this)},__updateNaturalSize(){const{__:t,__layout:e}=this;t.__naturalWidth=e.boxBounds.width,t.__naturalHeight=e.boxBounds.height},__updateStrokeBounds(t){const e=this.__layout;Ea(e.strokeBounds,e.boxBounds,e.strokeBoxSpread)},__updateRenderBounds(t){const e=this.__layout,{renderSpread:s}=e;o(s)&&s<=0?Ia(e.renderBounds,e.strokeBounds):Ea(e.renderBounds,e.boxBounds,s)}},Wa={__render(t,e){if(e.shape)return this.__renderShape(t,e);if((!e.cellList||e.cellList.has(this))&&this.__worldOpacity){const s=this.__;if(s.bright&&!e.topRendering)return e.topList.add(this);if(t.setWorld(this.__nowWorld=this.__getNowWorld(e)),t.opacity=e.dimOpacity&&!s.dimskip?s.opacity*e.dimOpacity:s.opacity,this.__.__single){if("path"===s.eraser)return this.__renderEraser(t,e);const r=t.getSameCanvas(!0,!0);this.__draw(r,e,t),ho.copyCanvasByWorld(this,t,r,this.__nowWorld,s.__blendMode,!0),r.recycle(this.__nowWorld)}else this.__draw(t,e);ee.showBounds&&ee.drawBounds(this,t,e)}},__renderShape(t,e){this.__worldOpacity&&(t.setWorld(this.__nowWorld=this.__getNowWorld(e)),this.__drawShape(t,e))},__clip(t,e){this.__worldOpacity&&(t.setWorld(this.__nowWorld=this.__getNowWorld(e)),this.__drawRenderPath(t),t.clipUI(this))},__updateWorldOpacity(){this.__worldOpacity=this.__.visible?this.parent?this.parent.__worldOpacity*this.__.opacity:this.__.opacity:0,this.__layout.opacityChanged&&(this.__layout.opacityChanged=!1)}},{excludeRenderBounds:Na}=yo,{hasSize:Ya}=zt,Da={__updateChange(){const{__layout:t}=this;t.childrenSortChanged&&(this.__updateSortChildren(),t.childrenSortChanged=!1),this.__.__checkSingle()},__render(t,e){const s=this.__nowWorld=this.__getNowWorld(e);if(this.__worldOpacity&&Ya(s)){const r=this.__;if(r.__useDim)if(r.dim)e.dimOpacity=!0===r.dim?.2:r.dim;else{if(r.bright&&!e.topRendering)return e.topList.add(this);r.dimskip&&e.dimOpacity&&(e.dimOpacity=0)}if(r.__single&&!this.isBranchLeaf){if("path"===r.eraser)return this.__renderEraser(t,e);const i=t.getSameCanvas(!1,!0);this.__renderBranch(i,e),t.opacity=e.dimOpacity?r.opacity*e.dimOpacity:r.opacity,t.copyWorldByReset(i,s,s,r.__blendMode,!0),i.recycle(s)}else this.__renderBranch(t,e)}},__renderBranch(t,e){if(this.__hasMask)this.__renderMask(t,e);else{const{children:s}=this;for(let r=0,i=s.length;r<i;r++)Na(s[r],e)||s[r].__render(t,e)}},__clip(t,e){if(this.__worldOpacity){const{children:s}=this;for(let r=0,i=s.length;r<i;r++)Na(s[r],e)||s[r].__clip(t,e)}}},Xa={},{LEAF:za,create:Fa}=g,{stintSet:Ua}=_,{toInnerPoint:ja,toOuterPoint:Ha,multiplyParent:Va}=q,{toOuterOf:Ga}=zt,{copy:qa,move:Qa}=ot,{moveLocal:Ja,zoomOfLocal:Za,rotateOfLocal:$a,skewOfLocal:Ka,moveWorld:th,zoomOfWorld:eh,rotateOfWorld:sh,skewOfWorld:rh,transform:ih,transformWorld:nh,setTransform:oh,getFlipTransform:ah,getLocalOrigin:hh,getRelativeWorld:lh,drop:dh}=ho;let ch=class{get tag(){return this.__tag}set tag(t){}get __tag(){return"Leaf"}get innerName(){return this.__.name||this.tag+this.innerId}get __DataProcessor(){return f}get __LayoutProcessor(){return No}get leaferIsCreated(){return this.leafer&&this.leafer.created}get leaferIsReady(){return this.leafer&&this.leafer.ready}get isLeafer(){return!1}get isBranch(){return!1}get isBranchLeaf(){return!1}get __localMatrix(){return this.__local||this.__layout}get __localBoxBounds(){return this.__local||this.__layout}get worldTransform(){return this.__layout.getTransform("world")}get localTransform(){return this.__layout.getTransform("local")}get scrollWorldTransform(){return this.updateLayout(),this.__scrollWorld||this.__world}get boxBounds(){return this.getBounds("box","inner")}get renderBounds(){return this.getBounds("render","inner")}get worldBoxBounds(){return this.getBounds("box")}get worldStrokeBounds(){return this.getBounds("stroke")}get worldRenderBounds(){return this.getBounds("render")}get worldOpacity(){return this.updateLayout(),this.__worldOpacity}get __worldFlipped(){return this.__world.scaleX<0||this.__world.scaleY<0}get __onlyHitMask(){return this.__hasMask&&!this.__.hitChildren}get __ignoreHitWorld(){return(this.__hasMask||this.__hasEraser)&&this.__.hitChildren}get __inLazyBounds(){return this.leaferIsCreated&&this.leafer.lazyBounds.hit(this.__world)}get pathInputed(){return this.__.__pathInputed}set event(t){this.on(t)}constructor(t){this.innerId=Fa(za),this.reset(t),this.__bubbleMap&&this.__emitLifeEvent(Do.CREATED)}reset(t){this.leafer&&this.leafer.forceRender(this.__world),0!==t&&(this.__world={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0,scaleX:1,scaleY:1},null!==t&&(this.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0})),this.__worldOpacity=1,this.__=new this.__DataProcessor(this),this.__layout=new this.__LayoutProcessor(this),this.__level&&this.resetCustom(),t&&(t.__&&(t=t.toJSON()),t.children?this.set(t):Object.assign(this,t))}resetCustom(){this.__hasMask=this.__hasEraser=null,this.forceUpdate()}waitParent(t,e){e&&(t=t.bind(e)),this.parent?t():this.on(Do.ADD,t,"once")}waitLeafer(t,e){e&&(t=t.bind(e)),this.leafer?t():this.on(Do.MOUNTED,t,"once")}nextRender(t,e,s){this.leafer?this.leafer.nextRender(t,e,s):this.waitLeafer(()=>this.leafer.nextRender(t,e,s))}removeNextRender(t){this.nextRender(t,null,"off")}__bindLeafer(t){if(this.isLeafer&&null!==t&&(t=this),this.leafer&&!t&&this.leafer.leafs--,this.leafer=t,t?(t.leafs++,this.__level=this.parent?this.parent.__level+1:1,this.animation&&this.__runAnimation("in"),this.__bubbleMap&&this.__emitLifeEvent(Do.MOUNTED)):this.__emitLifeEvent(Do.UNMOUNTED),this.isBranch){const{children:e}=this;for(let s=0,r=e.length;s<r;s++)e[s].__bindLeafer(t)}}set(t,e){}get(t){}setAttr(t,e){this[t]=e}getAttr(t){return this[t]}getComputedAttr(t){return this.__[t]}toJSON(t){return t&&this.__layout.update(),this.__.__getInputData(null,t)}toString(t){return JSON.stringify(this.toJSON(t))}toSVG(){}__SVG(t){}toHTML(){}__setAttr(t,e){return!0}__getAttr(t){}setProxyAttr(t,e){}getProxyAttr(t){}find(t,e){}findTag(t){}findOne(t,e){}findId(t){}focus(t){}updateState(){}updateLayout(){this.__layout.update()}forceUpdate(t){s(t)?t="width":"surface"===t&&(t="blendMode");const e=this.__.__getInput(t);this.__[t]=s(e)?null:void 0,this[t]=e}forceRender(t,e){this.forceUpdate("surface")}__extraUpdate(){this.leaferIsReady&&this.leafer.layouter.addExtra(this)}__updateWorldMatrix(){}__updateLocalMatrix(){}__updateWorldBounds(){}__updateLocalBounds(){}__updateLocalBoxBounds(){}__updateLocalStrokeBounds(){}__updateLocalRenderBounds(){}__updateBoxBounds(t,e){}__updateContentBounds(){}__updateStrokeBounds(t){}__updateRenderBounds(t){}__updateAutoLayout(){}__updateFlowLayout(){}__updateNaturalSize(){}__updateStrokeSpread(){return 0}__updateRenderSpread(){return 0}__onUpdateSize(){}__updateEraser(t){this.__hasEraser=!!t||this.children.some(t=>t.__.eraser)}__renderEraser(t,e){t.save(),this.__clip(t,e);const{renderBounds:s}=this.__layout;t.clearRect(s.x,s.y,s.width,s.height),t.restore()}__updateMask(t){this.__hasMask=this.children.some(t=>t.__.mask&&t.__.visible&&t.__.opacity)}__renderMask(t,e){}__getNowWorld(t){if(t.matrix){this.__cameraWorld||(this.__cameraWorld={});const e=this.__cameraWorld,s=this.__world;return Va(s,t.matrix,e,void 0,s),Ga(this.__layout.renderBounds,e,e),Ua(e,"half",s.half),Ua(e,"ignorePixelSnap",s.ignorePixelSnap),e}return this.__world}getClampRenderScale(){let{scaleX:t}=this.__nowWorld||this.__world;return t<0&&(t=-t),t>1?t:1}getRenderScaleData(t,e){let{scaleX:s,scaleY:r}=en.patternLocked?this.__world:this.__nowWorld;return t&&(s<0&&(s=-s),r<0&&(r=-r)),(!0===e||"zoom-in"===e&&s>1&&r>1)&&(s=r=1),Xa.scaleX=s,Xa.scaleY=r,Xa}getTransform(t){return this.__layout.getTransform(t||"local")}getBounds(t,e){return this.__layout.getBounds(t,e)}getLayoutBounds(t,e,s){return this.__layout.getLayoutBounds(t,e,s)}getLayoutPoints(t,e){return this.__layout.getLayoutPoints(t,e)}getWorldBounds(t,e,s){const r=e?lh(this,e):this.worldTransform,i=s?t:{};return Ga(t,r,i),i}worldToLocal(t,e,s,r){this.parent?this.parent.worldToInner(t,e,s,r):e&&qa(e,t)}localToWorld(t,e,s,r){this.parent?this.parent.innerToWorld(t,e,s,r):e&&qa(e,t)}worldToInner(t,e,s,r){r&&(r.innerToWorld(t,e,s),t=e||t),ja(this.scrollWorldTransform,t,e,s)}innerToWorld(t,e,s,r){Ha(this.scrollWorldTransform,t,e,s),r&&r.worldToInner(e||t,null,s)}getBoxPoint(t,e,s,r){return this.getBoxPointByInner(this.getInnerPoint(t,e,s,r),null,null,!0)}getBoxPointByInner(t,e,s,r){const i=r?t:Object.assign({},t),{x:n,y:o}=this.boxBounds;return Qa(i,-n,-o),i}getInnerPoint(t,e,s,r){const i=r?t:{};return this.worldToInner(t,i,s,e),i}getInnerPointByBox(t,e,s,r){const i=r?t:Object.assign({},t),{x:n,y:o}=this.boxBounds;return Qa(i,n,o),i}getInnerPointByLocal(t,e,s,r){return this.getInnerPoint(t,this.parent,s,r)}getLocalPoint(t,e,s,r){const i=r?t:{};return this.worldToLocal(t,i,s,e),i}getLocalPointByInner(t,e,s,r){return this.getWorldPoint(t,this.parent,s,r)}getPagePoint(t,e,s,r){return(this.leafer?this.leafer.zoomLayer:this).getInnerPoint(t,e,s,r)}getWorldPoint(t,e,s,r){const i=r?t:{};return this.innerToWorld(t,i,s,e),i}getWorldPointByBox(t,e,s,r){return this.getWorldPoint(this.getInnerPointByBox(t,null,null,r),e,s,!0)}getWorldPointByLocal(t,e,s,r){const i=r?t:{};return this.localToWorld(t,i,s,e),i}getWorldPointByPage(t,e,s,r){return(this.leafer?this.leafer.zoomLayer:this).getWorldPoint(t,e,s,r)}setTransform(t,e,s){oh(this,t,e,s)}transform(t,e,s){ih(this,t,e,s)}move(t,e,s){Ja(this,t,e,s)}moveInner(t,e,s){th(this,t,e,!0,s)}scaleOf(t,e,s,r,i){Za(this,hh(this,t),e,s,r,i)}rotateOf(t,e,s){$a(this,hh(this,t),e,s)}skewOf(t,e,s,r,i){Ka(this,hh(this,t),e,s,r,i)}transformWorld(t,e,s){nh(this,t,e,s)}moveWorld(t,e,s){th(this,t,e,!1,s)}scaleOfWorld(t,e,s,r,i){eh(this,t,e,s,r,i)}rotateOfWorld(t,e){sh(this,t,e)}skewOfWorld(t,e,s,r,i){rh(this,t,e,s,r,i)}flip(t,e){ih(this,ah(this,t),!1,e)}scaleResize(t,e=t,s){this.scaleX*=t,this.scaleY*=e}__scaleResize(t,e){}resizeWidth(t){}resizeHeight(t){}hit(t,e){return!0}__hitWorld(t,e){return!0}__hit(t,e){return!0}__hitFill(t){return!0}__hitStroke(t,e){return!0}__hitPixel(t){return!0}__drawHitPath(t){}__updateHitCanvas(){}__render(t,e){}__drawFast(t,e){}__draw(t,e,s){}__clip(t,e){}__renderShape(t,e){}__drawShape(t,e){}__updateWorldOpacity(){}__updateChange(){}__drawPath(t){}__drawRenderPath(t){}__updatePath(){}__updateRenderPath(){}getMotionPathData(){return he.need("path")}getMotionPoint(t){return he.need("path")}getMotionTotal(){return 0}__updateMotionPath(){}__runAnimation(t,e){}__updateSortChildren(){}add(t,e){}remove(t,e){this.parent&&this.parent.remove(this,e)}dropTo(t,e,s){dh(this,t,e,s)}on(t,e,s){}off(t,e,s){}on_(t,e,s,r){}off_(t){}once(t,e,s,r){}emit(t,e,s){}emitEvent(t,e){}hasEvent(t,e){return!1}static changeAttr(t,e,s){s?this.addAttr(t,e,s):zn(this.prototype,t,e)}static addAttr(t,e,s,r){s||(s=xn),s(e,r)(this.prototype,t)}__emitLifeEvent(t){this.hasEvent(t)&&this.emitEvent(new Do(t,this,this.parent))}destroy(){this.destroyed||(this.parent&&this.remove(),this.children&&this.clear(),this.__emitLifeEvent(Do.DESTROY),this.__.destroy(),this.__layout.destroy(),this.destroyEventer(),this.destroyed=!0)}};ch=ye([qn(wa),qn(Ta),qn(Aa),qn(ma),qn(Wa)],ch);const{setListWithFn:uh}=zt,{sort:_h}=bo,{localBoxBounds:ph,localStrokeBounds:fh,localRenderBounds:gh,maskLocalBoxBounds:yh,maskLocalStrokeBounds:mh,maskLocalRenderBounds:xh}=yo,wh=new ee("Branch");let bh=class extends ch{__updateStrokeSpread(){const{children:t}=this;for(let e=0,s=t.length;e<s;e++)if(t[e].__layout.strokeSpread)return 1;return 0}__updateRenderSpread(){const{children:t}=this;for(let e=0,s=t.length;e<s;e++)if(t[e].__layout.renderSpread)return 1;return 0}__updateBoxBounds(t,e){uh(e||this.__layout.boxBounds,this.children,this.__hasMask?yh:ph)}__updateStrokeBounds(t){uh(t||this.__layout.strokeBounds,this.children,this.__hasMask?mh:fh)}__updateRenderBounds(t){uh(t||this.__layout.renderBounds,this.children,this.__hasMask?xh:gh)}__updateSortChildren(){let t;const{children:e}=this;if(e.length>1){for(let s=0,r=e.length;s<r;s++)e[s].__tempNumber=s,e[s].__.zIndex&&(t=!0);e.sort(_h),this.__layout.affectChildrenSort=t}}add(t,e){if(t===this||t.destroyed)return wh.warn("add self or destroyed");const r=s(e);if(!t.__){if(l(t))return t.forEach(t=>{this.add(t,e),r||e++});t=ce.get(t.tag,t)}t.parent&&t.parent.remove(t),t.parent=this,r?this.children.push(t):this.children.splice(e,0,t),t.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||0)+1);const i=t.__layout;i.boxChanged||i.boxChange(),i.matrixChanged||i.matrixChange(),t.__bubbleMap&&t.__emitLifeEvent(Do.ADD),this.leafer&&(t.__bindLeafer(this.leafer),this.leafer.created&&this.__emitChildEvent(Do.ADD,t)),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}addMany(...t){this.add(t)}remove(t,e){t?t.__?t.animationOut?t.__runAnimation("out",()=>this.__remove(t,e)):this.__remove(t,e):this.find(t).forEach(t=>this.remove(t,e)):s(t)&&super.remove(null,e)}removeAll(t){const{children:e}=this;e.length&&(this.children=[],this.__preRemove(),this.__.__childBranchNumber=0,e.forEach(e=>{this.__realRemoveChild(e),t&&e.destroy()}))}clear(){this.removeAll(!0)}__remove(t,e){const s=this.children.indexOf(t);s>-1&&(this.children.splice(s,1),t.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||1)-1),this.__preRemove(),this.__realRemoveChild(t),e&&t.destroy())}__preRemove(){this.__hasMask&&this.__updateMask(),this.__hasEraser&&this.__updateEraser(),this.__layout.boxChange(),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}__realRemoveChild(t){t.__emitLifeEvent(Do.REMOVE),t.parent=null,this.leafer&&(t.__bindLeafer(null),this.leafer.created&&(this.__emitChildEvent(Do.REMOVE,t),this.leafer.hitCanvasManager&&this.leafer.hitCanvasManager.clear()))}__emitChildEvent(t,e){const s=new Do(t,e,this);this.hasEvent(t)&&!this.isLeafer&&this.emitEvent(s),this.leafer.emitEvent(s)}};bh=ye([qn(Da)],bh);class Bh{get length(){return this.list.length}constructor(t){this.reset(),t&&(l(t)?this.addList(t):this.add(t))}has(t){return t&&!s(this.keys[t.innerId])}indexAt(t){return this.list[t]}indexOf(t){const e=this.keys[t.innerId];return s(e)?-1:e}add(t){const{list:e,keys:r}=this;s(r[t.innerId])&&(e.push(t),r[t.innerId]=e.length-1)}addAt(t,e=0){const{keys:r}=this;if(s(r[t.innerId])){const{list:s}=this;for(let t=e,i=s.length;t<i;t++)r[s[t].innerId]++;0===e?s.unshift(t):(e>s.length&&(e=s.length),s.splice(e,0,t)),r[t.innerId]=e}}addList(t){for(let e=0;e<t.length;e++)this.add(t[e])}remove(t){const{list:e}=this;let r;for(let i=0,n=e.length;i<n;i++)s(r)?e[i].innerId===t.innerId&&(r=i,delete this.keys[t.innerId]):this.keys[e[i].innerId]=i-1;s(r)||e.splice(r,1)}sort(t){const{list:e}=this;t?e.sort((t,e)=>e.__level-t.__level):e.sort((t,e)=>t.__level-e.__level)}forEach(t){this.list.forEach(t)}clone(){const t=new Bh;return t.list=[...this.list],t.keys=Object.assign({},this.keys),t}update(){this.keys={};const{list:t,keys:e}=this;for(let s=0,r=t.length;s<r;s++)e[t[s].innerId]=s}reset(){this.list=[],this.keys={}}destroy(){this.reset()}}class vh{get length(){return this._length}constructor(t){this._length=0,this.reset(),t&&(l(t)?this.addList(t):this.add(t))}has(t){return!s(this.keys[t.innerId])}without(t){return s(this.keys[t.innerId])}sort(t){const{levels:e}=this;t?e.sort((t,e)=>e-t):e.sort((t,e)=>t-e)}addList(t){t.forEach(t=>{this.add(t)})}add(t){const{keys:e,levelMap:s}=this;e[t.innerId]||(e[t.innerId]=1,s[t.__level]?s[t.__level].push(t):(s[t.__level]=[t],this.levels.push(t.__level)),this._length++)}forEach(t){let e;this.levels.forEach(s=>{e=this.levelMap[s];for(let s=0,r=e.length;s<r;s++)t(e[s])})}reset(){this.levelMap={},this.keys={},this.levels=[],this._length=0}destroy(){this.levelMap=null}}const kh="2.0.0";export{kt as AlignHelper,t as Answer,bt as AroundHelper,Gt as AutoBounds,hs as BezierHelper,Ht as Bounds,jo as BoundsEvent,zt as BoundsHelper,bh as Branch,bo as BranchHelper,Da as BranchRender,ge as CanvasManager,Do as ChildEvent,le as Creator,_ as DataHelper,ee as Debug,mt as Direction4,xt as Direction9,ys as EllipseHelper,Yo as Event,pe as EventCreator,aa as Eventer,Gi as FileHelper,v as FourNumberHelper,Uo as ImageEvent,en as ImageManager,g as IncrementId,$o as LayoutEvent,ch as Leaf,Aa as LeafBounds,yo as LeafBoundsHelper,f as LeafData,wa as LeafDataProxy,ma as LeafEventer,ho as LeafHelper,No as LeafLayout,vh as LeafLevelList,Bh as LeafList,Ta as LeafMatrix,Wa as LeafRender,Ee as LeaferCanvasBase,ta as LeaferEvent,on as LeaferImage,I as MathHelper,pt as Matrix,q as MatrixHelper,Ne as NeedConvertToCanvasCommandMap,A as OneRadian,W as PI2,N as PI_2,Ai as PathBounds,Cr as PathCommandDataHelper,Ae as PathCommandMap,ms as PathCommandNodeHelper,sr as PathConvert,Fi as PathCorner,Fr as PathCreator,ri as PathDrawer,Ie as PathHelper,ze as PathNumberCommandLengthMap,Xe as PathNumberCommandMap,$t as Platform,he as Plugin,ut as Point,ot as PointHelper,zo as PropertyEvent,Fe as RectHelper,Ko as RenderEvent,Jo as ResizeEvent,Ki as Resource,ne as Run,Qt as StringNumberMap,Ji as TaskItem,Zi as TaskProcessor,gt as TwoPointBoundsHelper,ce as UICreator,qt as UnitConvertHelper,To as WaitHelper,Zo as WatchEvent,Tn as affectRenderBoundsType,kn as affectStrokeBoundsType,cn as attr,gn as autoLayoutType,xn as boundsType,Vi as canvasPatch,Re as canvasSizeAttrs,ln as createDescriptor,Yn as cursorType,Dn as dataProcessor,_n as dataType,dn as decorateLeafAttr,zn as defineDataProcessor,an as defineKey,un as defineLeafAttr,Sn as dimType,bn as doBoundsType,Cn as doStrokeType,e as emptyData,Wn as eraserType,Fo as extraPropertyEventMap,D as getBoundsData,hn as getDescriptor,X as getMatrixData,Y as getPointData,Nn as hitType,l as isArray,c as isData,u as isEmptyData,n as isFinite,r as isNull,o as isNumber,d as isObject,i as isString,s as isUndefined,Xn as layoutProcessor,na as leaferTransformAttrMap,An as maskType,wn as naturalBoundsType,Ln as opacityType,Ui as path,Bn as pathInputType,vn as pathType,ji as pen,pn as positionType,Qn as registerUI,Jn as registerUIEvent,Hn as rewrite,Vn as rewriteAble,mn as rotationType,yn as scaleType,fn as scrollType,Mn as sortType,On as strokeType,Pn as surfaceType,Vt as tempBounds,ft as tempMatrix,_t as tempPoint,h as tryToNumber,qn as useModule,kh as version,Rn as visibleType};
//# sourceMappingURL=core.esm.min.js.map
