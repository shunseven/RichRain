{"version":3,"file":"core.esm.min.js","sources":["../../../../../../src/leafer/packages/display-module/data/src/data.ts","../../../../../../src/leafer/packages/display-module/data/src/DataHelper.ts","../../../../../../src/leafer/packages/display-module/data/src/LeafData.ts","../../../../../../src/leafer/packages/math/src/IncrementId.ts","../../../../../../src/leafer/packages/math/src/FourNumberHelper.ts","../../../../../../src/leafer/packages/math/src/MathHelper.ts","../../../../../../src/leafer/packages/math/src/MatrixHelper.ts","../../../../../../src/leafer/packages/math/src/PointHelper.ts","../../../../../../src/leafer/packages/math/src/Point.ts","../../../../../../src/leafer/packages/math/src/Matrix.ts","../../../../../../src/leafer/packages/math/src/TwoPointBoundsHelper.ts","../../../../../../src/leafer/packages/math/src/Direction.ts","../../../../../../src/leafer/packages/math/src/AroundHelper.ts","../../../../../../src/leafer/packages/math/src/AlignHelper.ts","../../../../../../src/leafer/packages/math/src/BoundsHelper.ts","../../../../../../src/leafer/packages/math/src/Bounds.ts","../../../../../../src/leafer/packages/math/src/AutoBounds.ts","../../../../../../src/leafer/packages/math/src/UnitHelper.ts","../../../../../../src/leafer/packages/math/src/StringNumber.ts","../../../../../../src/leafer/packages/platform/platform/src/Platform.ts","../../../../../../src/leafer/packages/debug/src/Debug.ts","../../../../../../src/leafer/packages/debug/src/Run.ts","../../../../../../src/leafer/packages/debug/src/Plugin.ts","../../../../../../src/leafer/packages/platform/platform/src/creator/Creator.ts","../../../../../../src/leafer/packages/platform/platform/src/creator/UICreator.ts","../../../../../../src/leafer/packages/platform/platform/src/creator/EventCreator.ts","../../../../../../src/leafer/packages/canvas/canvas/src/CanvasManager.ts","../../../../../node_modules/.pnpm/@rollup+plugin-typescript@11.1.6_rollup@4.44.2_tslib@2.8.1_typescript@5.8.3/node_modules/tslib/tslib.es6.js","../../../../../../src/leafer/packages/canvas/canvas/src/Canvas.ts","../../../../../../src/leafer/packages/canvas/canvas/src/LeaferCanvasBase.ts","../../../../../../src/leafer/packages/path/src/PathHelper.ts","../../../../../../src/leafer/packages/path/src/PathCommandMap.ts","../../../../../../src/leafer/packages/path/src/RectHelper.ts","../../../../../../src/leafer/packages/path/src/BezierHelper.ts","../../../../../../src/leafer/packages/path/src/EllipseHelper.ts","../../../../../../src/leafer/packages/path/src/PathCommandNodeHelper.ts","../../../../../../src/leafer/packages/path/src/PathConvert.ts","../../../../../../src/leafer/packages/path/src/PathCommandDataHelper.ts","../../../../../../src/leafer/packages/path/src/PathCreator.ts","../../../../../../src/leafer/packages/path/src/PathDrawer.ts","../../../../../../src/leafer/packages/path/src/PathBounds.ts","../../../../../../src/leafer/packages/path/src/PathCorner.ts","../../../../../../src/leafer/packages/path/src/index.ts","../../../../../../src/leafer/packages/canvas/canvas/src/patch/roundRect.ts","../../../../../../src/leafer/packages/canvas/canvas/src/patch/index.ts","../../../../../../src/leafer/packages/file/src/FileHelper.ts","../../../../../../src/leafer/packages/task/src/TaskItem.ts","../../../../../../src/leafer/packages/task/src/TaskProcessor.ts","../../../../../../src/leafer/packages/file/src/Resource.ts","../../../../../../src/leafer/packages/image/image/src/ImageManager.ts","../../../../../../src/leafer/packages/image/image/src/LeaferImage.ts","../../../../../../src/leafer/packages/decorator/src/object.ts","../../../../../../src/leafer/packages/decorator/src/data.ts","../../../../../../src/leafer/packages/decorator/src/rewrite.ts","../../../../../../src/leafer/packages/decorator/src/class.ts","../../../../../../src/leafer/packages/display-module/helper/src/LeafHelper.ts","../../../../../../src/leafer/packages/display-module/helper/src/LeafBoundsHelper.ts","../../../../../../src/leafer/packages/display-module/helper/src/BranchHelper.ts","../../../../../../src/leafer/packages/display-module/helper/src/WaitHelper.ts","../../../../../../src/leafer/packages/display-module/layout/src/LeafLayout.ts","../../../../../../src/leafer/packages/event/src/Event.ts","../../../../../../src/leafer/packages/event/src/ChildEvent.ts","../../../../../../src/leafer/packages/event/src/PropertyEvent.ts","../../../../../../src/leafer/packages/event/src/ImageEvent.ts","../../../../../../src/leafer/packages/event/src/BoundsEvent.ts","../../../../../../src/leafer/packages/event/src/ResizeEvent.ts","../../../../../../src/leafer/packages/event/src/WatchEvent.ts","../../../../../../src/leafer/packages/event/src/LayoutEvent.ts","../../../../../../src/leafer/packages/event/src/RenderEvent.ts","../../../../../../src/leafer/packages/event/src/LeaferEvent.ts","../../../../../../src/leafer/packages/event/src/Eventer.ts","../../../../../../src/leafer/packages/display-module/display-module/src/LeafEventer.ts","../../../../../../src/leafer/packages/display-module/display-module/src/LeafDataProxy.ts","../../../../../../src/leafer/packages/display-module/display-module/src/LeafMatrix.ts","../../../../../../src/leafer/packages/display-module/display-module/src/LeafBounds.ts","../../../../../../src/leafer/packages/display-module/display-module/src/LeafRender.ts","../../../../../../src/leafer/packages/display-module/display-module/src/BranchRender.ts","../../../../../../src/leafer/packages/display/src/Leaf.ts","../../../../../../src/leafer/packages/display/src/Branch.ts","../../../../../../src/leafer/packages/list/src/LeafList.ts","../../../../../../src/leafer/packages/list/src/LeafLevelList.ts","../../../../../../src/leafer/packages/core/src/index.ts"],"sourcesContent":["import { IObject } from '@leafer/interface'\n\nexport enum Answer {\n    No = 0,\n    Yes = 1,\n    NoAndSkip = 2,\n    YesAndSkip = 3\n}\n\nexport const emptyData: IObject = {}\n\nexport function isUndefined(value: any): boolean {\n    return value === undefined\n}\n\nexport function isNull(value: any): boolean {\n    return value == null // = value === undefined || value === null\n}\n\nexport function isString<T extends string>(value: any): value is T {\n    return typeof value === 'string'\n}\n\nexport const { isFinite } = Number\n\nexport function isNumber<T extends number>(value: any): value is T {\n    return typeof value === 'number'\n}\n\nconst numberReg = /^-?\\d+(?:\\.\\d+)?$/\n\nexport function tryToNumber(value: any): number {\n    return (typeof value === 'string' && numberReg.test(value)) ? +value : value\n}\n\nexport const { isArray } = Array\n\nexport function isObject<T extends object>(value: any): value is T {\n    return value && typeof value === 'object' // fix: null is object\n}\n\nexport function isData<T extends object>(value: any): value is T { // 检测 {} 对象\n    return isObject(value) && !isArray(value) // 排除数组\n}\n\nexport function isEmptyData(value: any): boolean {\n    return JSON.stringify(value) === '{}'\n}","import { IBooleanMap, IObject } from '@leafer/interface'\nimport { isUndefined } from './data'\n\nexport const DataHelper = {\n\n    default<T>(t: T, defaultData: IObject): T {\n        assign(defaultData, t)\n        assign(t, defaultData)\n        return t\n    },\n\n    assign(t: IObject, merge: IObject, exclude?: IObject): void {\n        let value: unknown\n        Object.keys(merge).forEach(key => {\n            value = merge[key]\n            if (value?.constructor === Object && t[key]?.constructor === Object) return assign(t[key], merge[key], exclude && exclude[key])\n            if (exclude && (key in exclude)) {\n                if (exclude[key]?.constructor === Object) assign(t[key] = {}, merge[key], exclude[key])\n                return\n            }\n            t[key] = merge[key]\n        })\n    },\n\n    copyAttrs(t: IObject, from: IObject, include: string[]): IObject {\n        include.forEach(key => {\n            if (!isUndefined(from[key])) t[key] = from[key]\n        })\n        return t\n    },\n\n    clone(data: unknown): IObject {\n        return JSON.parse(JSON.stringify(data))\n    },\n\n    toMap(list: string[]): IBooleanMap {\n        const map = {} as IBooleanMap\n        for (let i = 0, len = list.length; i < len; i++)  map[list[i]] = true\n        return map\n    },\n\n    stintSet<T extends object, K extends keyof T>(data: T, attrName: K, value: T[K]): void {\n        value || (value = undefined)\n        data[attrName] !== value && (data[attrName] = value) // 只有值不一样时才设置，节省内存开销\n    }\n\n}\n\nconst { assign } = DataHelper","import { ILeafData, ILeaf, IObject, IValue, IPathCommandData, IJSONOptions } from '@leafer/interface'\nimport { isArray, isUndefined } from './data'\n\n\nexport class LeafData implements ILeafData {\n\n    public __leaf: ILeaf\n    public __input: IObject\n    public __middle: IObject\n\n    public __single: boolean\n\n    public __naturalWidth?: number\n    public __naturalHeight?: number\n\n    public __pathForRender?: IPathCommandData\n\n    public __useStroke?: boolean\n    public get __useNaturalRatio() { return true }\n\n    public get __isLinePath(): boolean {\n        const { path } = this as ILeafData\n        return path && path.length === 6 && path[0] === 1 // M = 1\n    }\n\n    public get __usePathBox(): boolean {\n        return (this as ILeafData).__pathInputed as any as boolean\n    }\n\n    public get __blendMode(): string {\n        if ((this as ILeafData).eraser && (this as ILeafData).eraser !== 'path') return 'destination-out'\n        const { blendMode } = (this as ILeafData)\n        return blendMode === 'pass-through' ? null : blendMode\n    }\n\n    constructor(leaf: ILeaf) {\n        this.__leaf = leaf\n    }\n\n    public __get(name: string): any {\n        if (this.__input) {\n            const value = this.__input[name]\n            if (!isUndefined(value)) return value\n        }\n        return (this as IObject)[name]\n    }\n\n    public __getData(): IObject {\n        const data: IObject = { tag: this.__leaf.tag }, { __input } = this\n        let inputValue: IValue\n        for (let key in this) {\n            if (key[0] !== '_') {\n                inputValue = __input ? __input[key] : undefined\n                data[key] = isUndefined(inputValue) ? this[key] : inputValue\n            }\n        }\n        return data\n    }\n\n    public __setInput(name: string, value: any): void {\n        this.__input || (this.__input = {})\n        this.__input[name] = value\n    }\n\n    public __getInput(name: string): any {\n        if (this.__input) {\n            const value = this.__input[name]\n            if (!isUndefined(value)) return value\n        }\n\n        if (name === 'path' && !(this as ILeafData).__pathInputed) return // no path mode\n\n        return (this as IObject)['_' + name]\n    }\n\n    public __removeInput(name: string): void {\n        if (this.__input && !isUndefined(this.__input[name])) this.__input[name] = undefined\n    }\n\n    public __getInputData(names?: string[] | IObject, options?: IJSONOptions): IObject {\n        const data: IObject = {}\n\n        if (names) {\n\n            if (isArray(names)) {\n                for (let name of names) data[name] = this.__getInput(name)\n            } else {\n                for (let name in names) data[name] = this.__getInput(name)\n            }\n\n        } else {\n\n            let value: IValue, inputValue: IValue, { __input } = this\n            data.tag = this.__leaf.tag\n            for (let key in this) {\n                if (key[0] !== '_') {\n                    value = (this as IObject)['_' + key]\n                    if (!isUndefined(value)) {\n\n                        if (key === 'path' && !(this as ILeafData).__pathInputed) continue // no path mode\n\n                        inputValue = __input ? __input[key] : undefined\n                        data[key] = isUndefined(inputValue) ? value : inputValue\n                    }\n                }\n            }\n\n        }\n\n        if (options) {\n            if (options.matrix) {\n                const { a, b, c, d, e, f } = this.__leaf.__localMatrix\n                data.matrix = { a, b, c, d, e, f }\n            }\n        }\n\n        return data\n    }\n\n    public __setMiddle(name: string, value: any): void {\n        this.__middle || (this.__middle = {})\n        this.__middle[name] = value\n    }\n\n    public __getMiddle(name: string): any {\n        return this.__middle && this.__middle[name]\n    }\n\n    public __checkSingle(): void {\n        const t = this as ILeafData\n        if (t.blendMode === 'pass-through') {\n            const leaf = this.__leaf\n            if ((t.opacity < 1 && (leaf.isBranch || t.__hasMultiPaint)) || leaf.__hasEraser || t.eraser || t.filter) {\n                t.__single = true\n            } else if (t.__single) {\n                t.__single = false\n            }\n        } else {\n            t.__single = true\n        }\n    }\n\n    public __removeNaturalSize(): void {\n        this.__naturalWidth = this.__naturalHeight = undefined\n    }\n\n    public destroy(): void {\n        this.__input = this.__middle = null\n    }\n}","import { INumberMap } from '@leafer/interface'\n\n\nexport const IncrementId = {\n\n    RUNTIME: 'runtime',\n    LEAF: 'leaf',\n    TASK: 'task',\n    CNAVAS: 'canvas',\n    IMAGE: 'image',\n\n    types: {} as INumberMap,\n\n    create(typeName: string): number {\n        const { types } = I\n        if (types[typeName]) {\n            return types[typeName]++\n        } else {\n            types[typeName] = 1\n            return 0\n        }\n    }\n}\n\nconst I = IncrementId","import { IFourNumber } from '@leafer/interface'\nimport { isNumber, isUndefined } from '@leafer/data'\n\n\nlet tempA: number[], tempB: number[], tempTo: number[]\nconst { max } = Math, tempFour = [0, 0, 0, 0]\n\nexport const FourNumberHelper = {\n\n    zero: [...tempFour],\n\n    tempFour,\n\n    set(to: number[], top: number, right?: number, bottom?: number, left?: number): number[] {\n        if (right === undefined) right = bottom = left = top\n        to[0] = top\n        to[1] = right\n        to[2] = bottom\n        to[3] = left\n        return to\n    },\n\n    setTemp(top: number, right?: number, bottom?: number, left?: number) {\n        return set(tempFour, top, right, bottom, left)\n    },\n\n    toTempAB(a: IFourNumber, b: IFourNumber, change?: boolean): void {\n        tempTo = change ? (isNumber(a) ? b : a) as number[] : []\n        if (isNumber(a)) tempA = setTemp(a), tempB = b as number[]\n        else if (isNumber(b)) tempA = a, tempB = setTemp(b)\n        else tempA = a, tempB = b\n\n        if (tempA.length !== 4) tempA = get(tempA)\n        if (tempB.length !== 4) tempB = get(tempB)\n    },\n\n    get(num: IFourNumber, maxValue?: number): number[] { // top right bottom left || topLeft, topRight, bottomRight, bottomLeft\n        let data: number[]\n        if (!isNumber(num)) {\n            switch (num.length) {\n                case 4:\n                    data = isUndefined(maxValue) ? num : [...num]\n                    break\n                case 2:\n                    data = [num[0], num[1], num[0], num[1]]\n                    break\n                case 3:\n                    data = [num[0], num[1], num[2], num[1]]\n                    break\n                case 1:\n                    num = num[0]\n                    break\n                default:\n                    num = 0\n            }\n        }\n        if (!data) data = [num as number, num as number, num as number, num as number]\n        if (!isUndefined(maxValue)) for (let i = 0; i < 4; i++)  if (data[i] > maxValue) data[i] = maxValue\n        return data\n    },\n\n    max(t: IFourNumber, other: IFourNumber, change?: boolean): IFourNumber {\n        if (isNumber(t) && isNumber(other)) return max(t, other)\n\n        toTempAB(t, other, change)\n\n        return set(\n            tempTo,\n            max(tempA[0], tempB[0]),\n            max(tempA[1], tempB[1]),\n            max(tempA[2], tempB[2]),\n            max(tempA[3], tempB[3])\n        )\n    },\n\n    add(t: IFourNumber, other: IFourNumber, change?: boolean): IFourNumber {\n        if (isNumber(t) && isNumber(other)) return t + other\n\n        toTempAB(t, other, change)\n\n        return set(\n            tempTo,\n            tempA[0] + tempB[0],\n            tempA[1] + tempB[1],\n            tempA[2] + tempB[2],\n            tempA[3] + tempB[3]\n        )\n    },\n\n    swapAndScale(t: IFourNumber, scaleX: number, scaleY: number, change?: boolean): IFourNumber { // 反向交换并缩放\n        if (isNumber(t)) return scaleX === scaleY ? t * scaleX : [t * scaleY, t * scaleX]\n\n        const to = change ? t : []\n        const [top, right, bottom, left] = t.length === 4 ? t : get(t)\n\n        return set(\n            to,\n            bottom * scaleY,\n            left * scaleX,\n            top * scaleY,\n            right * scaleX\n        )\n    }\n\n}\n\nconst { set, get, setTemp, toTempAB } = FourNumberHelper","import { IPointData, IBoundsData, IMatrixData, IRangeSize, IScaleData, ISizeData, IOptionSizeData } from '@leafer/interface'\nimport { isObject, isNumber, isUndefined } from '@leafer/data'\nimport { FourNumberHelper } from './FourNumberHelper'\n\n\nconst { round, pow, max, floor, PI } = Math\n\nexport const MathHelper = {\n\n    within(value: number, min: number | IRangeSize, max?: number): number {\n        if (isObject(min)) max = min.max, min = min.min\n        if (!isUndefined(min) && value < min) value = min\n        if (!isUndefined(max) && value > max) value = max\n        return value\n    },\n\n    fourNumber: FourNumberHelper.get,\n\n    formatRotation(rotation: number, unsign?: boolean): number {\n        rotation %= 360\n        if (unsign) {\n            if (rotation < 0) rotation += 360\n        } else {\n            if (rotation > 180) rotation -= 360\n            if (rotation < -180) rotation += 360\n        }\n        return MathHelper.float(rotation)\n    },\n\n    getGapRotation(addRotation: number, gap: number, oldRotation: number = 0): number {\n        let rotation = addRotation + oldRotation\n        if (gap > 1) {\n            const r = Math.abs(rotation % gap)\n            if (r < 1 || r > gap - 1) rotation = Math.round(rotation / gap) * gap\n        }\n        return rotation - oldRotation\n    },\n\n    float(num: number, maxLength?: number): number {\n        const a = !isUndefined(maxLength) ? pow(10, maxLength) : 1000000000000 // default\n        num = round(num * a) / a\n        return num === -0 ? 0 : num\n    },\n\n    sign(num: number): number {\n        return num < 0 ? -1 : 1\n    },\n\n    getScaleData(scale: number | IPointData, size: number | IOptionSizeData, originSize: ISizeData, scaleData?: IScaleData): IScaleData {\n        if (!scaleData) scaleData = {} as IScaleData\n        if (size) {\n            const scaleX = (isNumber(size) ? size : size.width || 0) / originSize.width, scaleY = (isNumber(size) ? size : size.height || 0) / originSize.height\n            scaleData.scaleX = scaleX || scaleY || 1\n            scaleData.scaleY = scaleY || scaleX || 1\n        } else if (scale) MathHelper.assignScale(scaleData, scale)\n        return scaleData\n    },\n\n    assignScale(scaleData: IScaleData, scale: number | IPointData): void {\n        if (isNumber(scale)) {\n            scaleData.scaleX = scaleData.scaleY = scale\n        } else {\n            scaleData.scaleX = scale.x\n            scaleData.scaleY = scale.y\n        }\n    },\n\n    getFloorScale(num: number, min = 1): number {\n        return max(floor(num), min) / num\n    },\n\n    randInt,\n\n    randColor(opacity?: number): string {\n        return `rgba(${randInt(255)},${randInt(255)},${randInt(255)},${opacity || 1})`\n    }\n}\n\nfunction randInt(num: number): number {\n    return Math.round(Math.random() * num)\n}\n\nexport const OneRadian = PI / 180\nexport const PI2 = PI * 2\nexport const PI_2 = PI / 2\n\nexport function getPointData(): IPointData { return { x: 0, y: 0 } }\nexport function getBoundsData(): IBoundsData { return { x: 0, y: 0, width: 0, height: 0 } }\nexport function getMatrixData(): IMatrixData { return { a: 1, b: 0, c: 0, d: 1, e: 0, f: 0 } }","import { IMatrixData, IPointData, ILayoutData, IMatrixWithLayoutData, IMatrixWithOptionScaleData, IScaleData, IMatrixWithScaleData } from '@leafer/interface'\nimport { isUndefined } from '@leafer/data'\n\nimport { MathHelper, OneRadian, PI_2, getBoundsData, getMatrixData } from './MathHelper'\n\n\nconst { sin, cos, acos, sqrt } = Math\nconst { float } = MathHelper\nconst tempPoint = {} as IPointData\n\nfunction getWorld(): IMatrixWithLayoutData {\n    return { ...getMatrixData(), ...getBoundsData(), scaleX: 1, scaleY: 1, rotation: 0, skewX: 0, skewY: 0 }\n}\n\nexport const MatrixHelper = {\n\n    defaultMatrix: getMatrixData(),\n\n    defaultWorld: getWorld(),\n\n    tempMatrix: {} as IMatrixData,\n\n    set(t: IMatrixData, a = 1, b = 0, c = 0, d = 1, e = 0, f = 0): void {\n        t.a = a\n        t.b = b\n        t.c = c\n        t.d = d\n        t.e = e\n        t.f = f\n    },\n\n    get: getMatrixData,\n\n    getWorld,\n\n    copy(t: IMatrixData, matrix: IMatrixData): void {\n        t.a = matrix.a\n        t.b = matrix.b\n        t.c = matrix.c\n        t.d = matrix.d\n        t.e = matrix.e\n        t.f = matrix.f\n    },\n\n    translate(t: IMatrixData, x: number, y: number): void {\n        t.e += x\n        t.f += y\n    },\n\n    translateInner(t: IMatrixData, x: number, y: number, hasOrigin?: boolean): void {\n        t.e += t.a * x + t.c * y\n        t.f += t.b * x + t.d * y\n        if (hasOrigin) t.e -= x, t.f -= y\n    },\n\n    scale(t: IMatrixData, scaleX: number, scaleY: number = scaleX): void {\n        t.a *= scaleX\n        t.b *= scaleX\n        t.c *= scaleY\n        t.d *= scaleY\n    },\n\n    pixelScale(t: IMatrixData, pixelRatio: number, to?: IMatrixData): void {\n        to || (to = t)\n        to.a = t.a * pixelRatio\n        to.b = t.b * pixelRatio\n        to.c = t.c * pixelRatio\n        to.d = t.d * pixelRatio\n        to.e = t.e * pixelRatio\n        to.f = t.f * pixelRatio\n    },\n\n    scaleOfOuter(t: IMatrixData, origin: IPointData, scaleX: number, scaleY?: number): void {\n        M.toInnerPoint(t, origin, tempPoint)\n        M.scaleOfInner(t, tempPoint, scaleX, scaleY)\n    },\n\n    scaleOfInner(t: IMatrixData, origin: IPointData, scaleX: number, scaleY: number = scaleX): void {\n        M.translateInner(t, origin.x, origin.y)\n        M.scale(t, scaleX, scaleY)\n        M.translateInner(t, -origin.x, -origin.y)\n    },\n\n\n    rotate(t: IMatrixData, rotation: number): void {\n        const { a, b, c, d } = t\n\n        rotation *= OneRadian\n        const cosR = cos(rotation)\n        const sinR = sin(rotation)\n\n        t.a = a * cosR - b * sinR\n        t.b = a * sinR + b * cosR\n        t.c = c * cosR - d * sinR\n        t.d = c * sinR + d * cosR\n    },\n\n    rotateOfOuter(t: IMatrixData, origin: IPointData, rotation: number): void {\n        M.toInnerPoint(t, origin, tempPoint)\n        M.rotateOfInner(t, tempPoint, rotation)\n    },\n\n    rotateOfInner(t: IMatrixData, origin: IPointData, rotation: number): void {\n        M.translateInner(t, origin.x, origin.y)\n        M.rotate(t, rotation)\n        M.translateInner(t, -origin.x, -origin.y)\n    },\n\n\n    skew(t: IMatrixData, skewX: number, skewY?: number): void {\n        const { a, b, c, d } = t\n\n        if (skewY) {\n            skewY *= OneRadian\n            t.a = a + c * skewY\n            t.b = b + d * skewY\n        }\n\n        if (skewX) {\n            skewX *= OneRadian\n            t.c = c + a * skewX\n            t.d = d + b * skewX\n        }\n    },\n\n    skewOfOuter(t: IMatrixData, origin: IPointData, skewX: number, skewY?: number): void {\n        M.toInnerPoint(t, origin, tempPoint)\n        M.skewOfInner(t, tempPoint, skewX, skewY)\n    },\n\n    skewOfInner(t: IMatrixData, origin: IPointData, skewX: number, skewY: number = 0): void {\n        M.translateInner(t, origin.x, origin.y)\n        M.skew(t, skewX, skewY)\n        M.translateInner(t, -origin.x, -origin.y)\n    },\n\n\n    multiply(t: IMatrixData, child: IMatrixData): void {\n        const { a, b, c, d, e, f } = t\n\n        t.a = child.a * a + child.b * c\n        t.b = child.a * b + child.b * d\n        t.c = child.c * a + child.d * c\n        t.d = child.c * b + child.d * d\n        t.e = child.e * a + child.f * c + e\n        t.f = child.e * b + child.f * d + f\n    },\n\n    multiplyParent(t: IMatrixWithOptionScaleData, parent: IMatrixWithOptionScaleData, to?: IMatrixWithOptionScaleData, abcdChanged?: boolean | number, childScaleData?: IScaleData): void { // = transform\n        const { e, f } = t\n\n        to || (to = t)\n\n        if (isUndefined(abcdChanged)) abcdChanged = t.a !== 1 || t.b || t.c || t.d !== 1\n\n        if (abcdChanged) {\n            const { a, b, c, d } = t\n\n            to.a = a * parent.a + b * parent.c\n            to.b = a * parent.b + b * parent.d\n            to.c = c * parent.a + d * parent.c\n            to.d = c * parent.b + d * parent.d\n\n            if (childScaleData) {\n                to.scaleX = parent.scaleX * childScaleData.scaleX\n                to.scaleY = parent.scaleY * childScaleData.scaleY\n            }\n\n        } else {\n            to.a = parent.a\n            to.b = parent.b\n            to.c = parent.c\n            to.d = parent.d\n\n            if (childScaleData) {\n                to.scaleX = parent.scaleX\n                to.scaleY = parent.scaleY\n            }\n        }\n\n        to.e = e * parent.a + f * parent.c + parent.e\n        to.f = e * parent.b + f * parent.d + parent.f\n    },\n\n\n    divide(t: IMatrixData, child: IMatrixData): void {\n        M.multiply(t, M.tempInvert(child))\n    },\n\n    divideParent(t: IMatrixData, parent: IMatrixData): void {\n        M.multiplyParent(t, M.tempInvert(parent))\n    },\n\n    tempInvert(t: IMatrixData): IMatrixData {\n        const { tempMatrix } = M\n        M.copy(tempMatrix, t)\n        M.invert(tempMatrix)\n        return tempMatrix\n    },\n\n    invert(t: IMatrixData): void {\n        const { a, b, c, d, e, f } = t\n        if (!b && !c) {\n            if (a === 1 && d === 1) {\n                t.e = -e\n                t.f = -f\n            } else {\n                const s = 1 / (a * d)\n                t.a = d * s\n                t.d = a * s\n                t.e = -e * d * s\n                t.f = -f * a * s\n            }\n        } else {\n            const s = 1 / (a * d - b * c)\n            t.a = d * s\n            t.b = -b * s\n            t.c = -c * s\n            t.d = a * s\n            t.e = -(e * d - f * c) * s\n            t.f = -(f * a - e * b) * s\n        }\n\n    },\n\n\n    toOuterPoint(t: IMatrixData, inner: IPointData, to?: IPointData, distance?: boolean): void {\n        const { x, y } = inner\n\n        // outer\n        to || (to = inner)\n        to.x = x * t.a + y * t.c\n        to.y = x * t.b + y * t.d\n\n        if (!distance) {\n            to.x += t.e\n            to.y += t.f\n        }\n    },\n\n    toInnerPoint(t: IMatrixData, outer: IPointData, to?: IPointData, distance?: boolean): void {\n        const { a, b, c, d } = t\n        const s = 1 / (a * d - b * c)\n\n        const { x, y } = outer\n\n        // inner\n        to || (to = outer)\n        to.x = (x * d - y * c) * s\n        to.y = (y * a - x * b) * s\n\n        if (!distance) {\n            const { e, f } = t\n            to.x -= (e * d - f * c) * s\n            to.y -= (f * a - e * b) * s\n        }\n    },\n\n    setLayout(t: IMatrixData, layout: ILayoutData, origin?: IPointData, around?: IPointData, bcChanged?: boolean | number): void {\n        const { x, y, scaleX, scaleY } = layout\n\n        if (isUndefined(bcChanged)) bcChanged = layout.rotation || layout.skewX || layout.skewY\n\n        if (bcChanged) {\n\n            const { rotation, skewX, skewY } = layout\n            const r = rotation * OneRadian\n            const cosR = cos(r)\n            const sinR = sin(r)\n\n            if (skewX || skewY) {\n\n                // rotate -> skew -> scale\n                const sx = skewX * OneRadian\n                const sy = skewY * OneRadian\n\n                t.a = (cosR + sy * -sinR) * scaleX\n                t.b = (sinR + sy * cosR) * scaleX\n                t.c = (-sinR + sx * cosR) * scaleY\n                t.d = (cosR + sx * sinR) * scaleY\n\n            } else {\n\n                // rotate -> scale\n                t.a = cosR * scaleX\n                t.b = sinR * scaleX\n                t.c = -sinR * scaleY\n                t.d = cosR * scaleY\n\n            }\n\n        } else {\n            t.a = scaleX\n            t.b = 0\n            t.c = 0\n            t.d = scaleY\n        }\n\n        // translate\n\n        t.e = x\n        t.f = y\n\n        if (origin = origin || around) M.translateInner(t, -origin.x, -origin.y, !around)\n\n    },\n\n    getLayout(t: IMatrixData, origin?: IPointData, around?: IPointData, firstSkewY?: boolean): ILayoutData {\n        const { a, b, c, d, e, f } = t\n\n        let x = e, y = f, scaleX: number, scaleY: number, rotation: number, skewX: number, skewY: number\n\n        if (b || c) {\n\n            const s = a * d - b * c\n\n            if (c && !firstSkewY) {\n                scaleX = sqrt(a * a + b * b)\n                scaleY = s / scaleX\n\n                const cosR = a / scaleX\n                rotation = b > 0 ? acos(cosR) : -acos(cosR)\n\n            } else {\n                scaleY = sqrt(c * c + d * d)\n                scaleX = s / scaleY\n\n                const cosR = c / scaleY\n                rotation = PI_2 - (d > 0 ? acos(-cosR) : -acos(cosR))\n            }\n\n            const cosR = float(cos(rotation)) // when -90 / 90 is 0\n            const sinR = sin(rotation)\n\n            scaleX = float(scaleX), scaleY = float(scaleY)\n            skewX = cosR ? float((c / scaleY + sinR) / cosR / OneRadian, 9) : 0\n            skewY = cosR ? float((b / scaleX - sinR) / cosR / OneRadian, 9) : 0\n            rotation = float(rotation / OneRadian)\n\n        } else {\n            scaleX = a\n            scaleY = d\n            rotation = skewX = skewY = 0\n        }\n\n        if (origin = around || origin) {\n            x += origin.x * a + origin.y * c\n            y += origin.x * b + origin.y * d\n            if (!around) x -= origin.x, y -= origin.y\n        }\n\n        return { x, y, scaleX, scaleY, rotation, skewX, skewY }\n    },\n\n    withScale(t: IMatrixData, scaleX?: number, scaleY = scaleX): IMatrixWithScaleData {\n        const world = t as unknown as IMatrixWithScaleData\n        if (!scaleX || !scaleY) {\n            const { a, b, c, d } = t\n            if (b || c) {\n                scaleX = sqrt(a * a + b * b)\n                scaleY = (a * d - b * c) / scaleX\n            } else {\n                scaleX = a\n                scaleY = d\n            }\n        }\n        world.scaleX = scaleX\n        world.scaleY = scaleY\n        return world\n    },\n\n    reset(t: IMatrixData): void {\n        M.set(t)\n    }\n}\n\nconst M = MatrixHelper","import { IPointData, IMatrixData, IRadiusPointData, IMatrixWithScaleData } from '@leafer/interface'\nimport { isObject, isUndefined } from '@leafer/data'\n\nimport { MathHelper, OneRadian, getPointData } from './MathHelper'\nimport { MatrixHelper as M } from './MatrixHelper'\n\nconst { float } = MathHelper\nconst { toInnerPoint, toOuterPoint } = M\nconst { sin, cos, abs, sqrt, atan2, min, round } = Math\n\n\nexport const PointHelper = {\n\n    defaultPoint: getPointData(),\n\n    tempPoint: {} as IPointData,\n    tempRadiusPoint: {} as IRadiusPointData,\n\n    set(t: IPointData, x = 0, y = 0): void {\n        t.x = x\n        t.y = y\n    },\n\n    setRadius(t: IRadiusPointData, x: number, y?: number): void {\n        t.radiusX = x\n        t.radiusY = isUndefined(y) ? x : y\n    },\n\n    copy(t: IPointData, point: IPointData): void {\n        t.x = point.x\n        t.y = point.y\n    },\n\n    copyFrom(t: IPointData, x: number, y: number): void {\n        t.x = x\n        t.y = y\n    },\n\n    round(t: IPointData, halfPixel?: boolean): void {\n        t.x = halfPixel ? round(t.x - 0.5) + 0.5 : round(t.x)\n        t.y = halfPixel ? round(t.y - 0.5) + 0.5 : round(t.y)\n    },\n\n    move(t: IPointData, x: number | IPointData, y?: number): void {\n        if (isObject(x)) t.x += x.x, t.y += x.y\n        else t.x += x, t.y += y\n    },\n\n\n    scale(t: IPointData, scaleX: number, scaleY = scaleX): void {\n        if (t.x) t.x *= scaleX\n        if (t.y) t.y *= scaleY\n    },\n\n    scaleOf(t: IPointData, origin: IPointData, scaleX: number, scaleY = scaleX): void {\n        t.x += (t.x - origin.x) * (scaleX - 1)\n        t.y += (t.y - origin.y) * (scaleY - 1)\n    },\n\n    rotate(t: IPointData, rotation: number, origin?: IPointData): void {\n        if (!origin) origin = P.defaultPoint\n        rotation *= OneRadian\n        const cosR = cos(rotation)\n        const sinR = sin(rotation)\n        const rx = t.x - origin.x\n        const ry = t.y - origin.y\n        t.x = origin.x + rx * cosR - ry * sinR\n        t.y = origin.y + rx * sinR + ry * cosR\n    },\n\n\n    tempToInnerOf(t: IPointData, matrix: IMatrixData): IPointData {\n        const { tempPoint: temp } = P\n        copy(temp, t)\n        toInnerPoint(matrix, temp, temp)\n        return temp\n    },\n\n    tempToOuterOf(t: IPointData, matrix: IMatrixData): IPointData {\n        const { tempPoint: temp } = P\n        copy(temp, t)\n        toOuterPoint(matrix, temp, temp)\n        return temp\n    },\n\n    tempToInnerRadiusPointOf(t: IRadiusPointData, matrix: IMatrixWithScaleData): IRadiusPointData {\n        const { tempRadiusPoint: temp } = P\n        copy(temp, t)\n        P.toInnerRadiusPointOf(t, matrix, temp)\n        return temp\n    },\n\n    copyRadiusPoint(t: IRadiusPointData, point: IPointData, x: number, y?: number,): IRadiusPointData {\n        copy(t, point)\n        setRadius(t, x, y)\n        return t\n    },\n\n    toInnerRadiusPointOf(t: IRadiusPointData, matrix: IMatrixWithScaleData, to?: IRadiusPointData): void {\n        to || (to = t)\n        toInnerPoint(matrix, t, to)\n        to.radiusX = Math.abs(t.radiusX / matrix.scaleX)\n        to.radiusY = Math.abs(t.radiusY / matrix.scaleY)\n    },\n\n\n    toInnerOf(t: IPointData, matrix: IMatrixData, to?: IPointData): void {\n        toInnerPoint(matrix, t, to)\n    },\n\n    toOuterOf(t: IPointData, matrix: IMatrixData, to?: IPointData): void {\n        toOuterPoint(matrix, t, to)\n    },\n\n\n    getCenter(t: IPointData, to: IPointData): IPointData {\n        return { x: t.x + (to.x - t.x) / 2, y: t.y + (to.y - t.y) / 2 }\n    },\n\n    getCenterX(x1: number, x2: number): number {\n        return x1 + (x2 - x1) / 2\n    },\n\n    getCenterY(y1: number, y2: number): number {\n        return y1 + (y2 - y1) / 2\n    },\n\n    getDistance(t: IPointData, point: IPointData): number {\n        return getDistanceFrom(t.x, t.y, point.x, point.y)\n    },\n\n    getDistanceFrom(x1: number, y1: number, x2: number, y2: number): number {\n        const x = abs(x2 - x1)\n        const y = abs(y2 - y1)\n        return sqrt(x * x + y * y)\n    },\n\n    getMinDistanceFrom(x1: number, y1: number, x2: number, y2: number, x3: number, y3: number): number {\n        return min(getDistanceFrom(x1, y1, x2, y2), getDistanceFrom(x2, y2, x3, y3))\n    },\n\n    getAngle(t: IPointData, to: IPointData): number {\n        return getAtan2(t, to) / OneRadian\n    },\n\n    getRotation(t: IPointData, origin: IPointData, to: IPointData, toOrigin?: IPointData): number {\n        if (!toOrigin) toOrigin = origin\n        return P.getRadianFrom(t.x, t.y, origin.x, origin.y, to.x, to.y, toOrigin.x, toOrigin.y) / OneRadian\n    },\n\n    getRadianFrom(fromX: number, fromY: number, originX: number, originY: number, toX: number, toY: number, toOriginX?: number, toOriginY?: number): number {\n        if (isUndefined(toOriginX)) toOriginX = originX, toOriginY = originY\n        const a = fromX - originX\n        const b = fromY - originY\n        const c = toX - toOriginX\n        const d = toY - toOriginY\n        return Math.atan2(a * d - b * c, a * c + b * d)\n    },\n\n    getAtan2(t: IPointData, to: IPointData): number {\n        return atan2(to.y - t.y, to.x - t.x)\n    },\n\n\n    getDistancePoint(t: IPointData, to: IPointData, distance: number, changeTo?: boolean, fromTo?: boolean): IPointData {\n        const r = getAtan2(t, to)\n        fromTo && (t = to)\n        changeTo || (to = {} as IPointData)\n        to.x = t.x + cos(r) * distance\n        to.y = t.y + sin(r) * distance\n        return to\n    },\n\n    toNumberPoints(originPoints: number[] | IPointData[]): number[] {\n        let points = originPoints as number[]\n        if (isObject(originPoints[0])) points = [], (originPoints as IPointData[]).forEach(p => points.push(p.x, p.y))\n        return points\n    },\n\n    isSame(t: IPointData, point: IPointData): boolean {\n        return float(t.x) === float(point.x) && float(t.y) === float(point.y)\n    },\n\n    reset(t: IPointData): void {\n        P.reset(t)\n    }\n}\n\nconst P = PointHelper\nconst { getDistanceFrom, copy, setRadius, getAtan2 } = P","import { IPoint, IPointData, IMatrixData } from '@leafer/interface'\nimport { isObject } from '@leafer/data'\n\nimport { PointHelper as P } from './PointHelper'\n\nexport class Point implements IPoint {\n\n    public x: number\n    public y: number\n\n    constructor(x?: number | IPointData, y?: number) {\n        this.set(x, y)\n    }\n\n    public set(x?: number | IPointData, y?: number): IPoint {\n        isObject(x) ? P.copy(this, x) : P.set(this, x, y)\n        return this\n    }\n\n    public get(): IPointData {\n        const { x, y } = this\n        return { x, y }\n    }\n\n\n    public clone(): IPoint {\n        return new Point(this)\n    }\n\n\n    public move(x: number | IPointData, y?: number): IPoint {\n        P.move(this, x, y)\n        return this\n    }\n\n    public scale(scaleX: number, scaleY?: number): IPoint {\n        P.scale(this, scaleX, scaleY)\n        return this\n    }\n\n    public scaleOf(origin: IPointData, scaleX: number, scaleY?: number): IPoint {\n        P.scaleOf(this, origin, scaleX, scaleY)\n        return this\n    }\n\n    public rotate(rotation: number, origin?: IPointData): IPoint {\n        P.rotate(this, rotation, origin)\n        return this\n    }\n\n    public rotateOf(origin: IPointData, rotation: number): IPoint {\n        P.rotate(this, rotation, origin)\n        return this\n    }\n\n    public getRotation(origin: IPointData, to: IPointData, toOrigin?: IPointData): number {\n        return P.getRotation(this, origin, to, toOrigin)\n    }\n\n\n    public toInnerOf(matrix: IMatrixData, to?: IPointData): IPoint {\n        P.toInnerOf(this, matrix, to)\n        return this\n    }\n\n    public toOuterOf(matrix: IMatrixData, to?: IPointData): IPoint {\n        P.toOuterOf(this, matrix, to)\n        return this\n    }\n\n\n    public getCenter(to: IPointData): IPoint {\n        return new Point(P.getCenter(this, to))\n    }\n\n    public getDistance(to: IPointData): number {\n        return P.getDistance(this, to)\n    }\n\n    public getDistancePoint(to: IPointData, distance: number, changeTo?: boolean, fromTo?: boolean): IPoint {\n        return new Point(P.getDistancePoint(this, to, distance, changeTo, fromTo))\n    }\n\n    public getAngle(to: IPointData): number {\n        return P.getAngle(this, to)\n    }\n\n    public getAtan2(to: IPointData): number {\n        return P.getAtan2(this, to)\n    }\n\n    public isSame(point: IPointData): boolean {\n        return P.isSame(this, point)\n    }\n\n    public reset(): IPoint {\n        P.reset(this)\n        return this\n    }\n\n}\n\nexport const tempPoint = new Point()","import { IMatrix, IMatrixData, IPointData, ILayoutData, IMatrixWithScaleData } from '@leafer/interface'\nimport { isObject } from '@leafer/data'\n\nimport { MatrixHelper as M } from './MatrixHelper'\n\n\nexport class Matrix implements IMatrix {\n\n    public a: number\n    public b: number\n    public c: number\n    public d: number\n    public e: number\n    public f: number\n\n    public scaleX: number\n    public scaleY: number\n\n    constructor(a?: number | IMatrixData, b?: number, c?: number, d?: number, e?: number, f?: number) {\n        this.set(a, b, c, d, e, f)\n    }\n\n    public set(a?: number | IMatrixData, b?: number, c?: number, d?: number, e?: number, f?: number): IMatrix {\n        isObject(a) ? M.copy(this, a) : M.set(this, a, b, c, d, e, f)\n        return this\n    }\n\n    public setWith(dataWithScale: IMatrixWithScaleData): IMatrix {\n        M.copy(this, dataWithScale)\n        this.scaleX = dataWithScale.scaleX\n        this.scaleY = dataWithScale.scaleY\n        return this\n    }\n\n    public get(): IMatrixData {\n        const { a, b, c, d, e, f } = this\n        return { a, b, c, d, e, f }\n    }\n\n    public clone(): IMatrix {\n        return new Matrix(this)\n    }\n\n\n    public translate(x: number, y: number): IMatrix {\n        M.translate(this, x, y)\n        return this\n    }\n\n    public translateInner(x: number, y: number): IMatrix {\n        M.translateInner(this, x, y)\n        return this\n    }\n\n    public scale(x: number, y?: number): IMatrix {\n        M.scale(this, x, y)\n        return this\n    }\n\n    public scaleWith(x: number, y?: number): IMatrix {\n        M.scale(this, x, y)\n        this.scaleX *= x\n        this.scaleY *= y || x\n        return this\n    }\n\n    public pixelScale(pixelRatio: number): IMatrix {\n        M.pixelScale(this, pixelRatio)\n        return this\n    }\n\n    public scaleOfOuter(origin: IPointData, x: number, y?: number): IMatrix {\n        M.scaleOfOuter(this, origin, x, y)\n        return this\n    }\n    public scaleOfInner(origin: IPointData, x: number, y?: number): IMatrix {\n        M.scaleOfInner(this, origin, x, y)\n        return this\n    }\n\n    public rotate(angle: number): IMatrix {\n        M.rotate(this, angle)\n        return this\n    }\n\n    public rotateOfOuter(origin: IPointData, angle: number): IMatrix {\n        M.rotateOfOuter(this, origin, angle)\n        return this\n    }\n\n    public rotateOfInner(origin: IPointData, angle: number): IMatrix {\n        M.rotateOfInner(this, origin, angle)\n        return this\n    }\n\n\n    public skew(x: number, y?: number): IMatrix {\n        M.skew(this, x, y)\n        return this\n    }\n\n    public skewOfOuter(origin: IPointData, x: number, y?: number): IMatrix {\n        M.skewOfOuter(this, origin, x, y)\n        return this\n    }\n\n    public skewOfInner(origin: IPointData, x: number, y?: number): IMatrix {\n        M.skewOfInner(this, origin, x, y)\n        return this\n    }\n\n\n    public multiply(child: IMatrixData): IMatrix {\n        M.multiply(this, child)\n        return this\n    }\n\n    public multiplyParent(parent: IMatrixData): IMatrix {\n        M.multiplyParent(this, parent)\n        return this\n    }\n\n\n    public divide(child: IMatrixData): IMatrix {\n        M.divide(this, child)\n        return this\n    }\n\n    public divideParent(parent: IMatrixData): IMatrix {\n        M.divideParent(this, parent)\n        return this\n    }\n\n    public invert(): IMatrix {\n        M.invert(this)\n        return this\n    }\n\n    public invertWith(): IMatrix {\n        M.invert(this)\n        this.scaleX = 1 / this.scaleX\n        this.scaleY = 1 / this.scaleY\n        return this\n    }\n\n\n    public toOuterPoint(inner: IPointData, to?: IPointData, distance?: boolean): void {\n        M.toOuterPoint(this, inner, to, distance)\n    }\n\n    public toInnerPoint(outer: IPointData, to?: IPointData, distance?: boolean): void {\n        M.toInnerPoint(this, outer, to, distance)\n    }\n\n\n    public setLayout(data: ILayoutData, origin?: IPointData, around?: IPointData,): IMatrix {\n        M.setLayout(this, data, origin, around)\n        return this\n    }\n\n    public getLayout(origin?: IPointData, around?: IPointData, firstSkewY?: boolean): ILayoutData {\n        return M.getLayout(this, origin, around, firstSkewY)\n    }\n\n    public withScale(scaleX?: number, scaleY?: number): IMatrixWithScaleData {\n        return M.withScale(this, scaleX, scaleY)\n    }\n\n    public reset(): void {\n        M.reset(this)\n    }\n\n}\n\nexport const tempMatrix = new Matrix()","import { ITwoPointBoundsData, IBoundsData } from '@leafer/interface'\n\nexport const TwoPointBoundsHelper = {\n\n    tempPointBounds: {} as ITwoPointBoundsData,\n\n    setPoint(t: ITwoPointBoundsData, minX: number, minY: number): void {\n        t.minX = t.maxX = minX\n        t.minY = t.maxY = minY\n    },\n\n    addPoint(t: ITwoPointBoundsData, x: number, y: number): void {\n        t.minX = x < t.minX ? x : t.minX\n        t.minY = y < t.minY ? y : t.minY\n        t.maxX = x > t.maxX ? x : t.maxX\n        t.maxY = y > t.maxY ? y : t.maxY\n    },\n\n    addBounds(t: ITwoPointBoundsData, x: number, y: number, width: number, height: number): void {\n        addPoint(t, x, y)\n        addPoint(t, x + width, y + height)\n    },\n\n    copy(t: ITwoPointBoundsData, pb: ITwoPointBoundsData): void {\n        t.minX = pb.minX\n        t.minY = pb.minY\n        t.maxX = pb.maxX\n        t.maxY = pb.maxY\n    },\n\n    addPointBounds(t: ITwoPointBoundsData, pb: ITwoPointBoundsData): void {\n        t.minX = pb.minX < t.minX ? pb.minX : t.minX\n        t.minY = pb.minY < t.minY ? pb.minY : t.minY\n        t.maxX = pb.maxX > t.maxX ? pb.maxX : t.maxX\n        t.maxY = pb.maxY > t.maxY ? pb.maxY : t.maxY\n    },\n\n    toBounds(t: ITwoPointBoundsData, setBounds: IBoundsData): void {\n        setBounds.x = t.minX\n        setBounds.y = t.minY\n        setBounds.width = t.maxX - t.minX\n        setBounds.height = t.maxY - t.minY\n    }\n\n}\n\nconst { addPoint } = TwoPointBoundsHelper","export enum Direction4 {\n    top,\n    right,\n    bottom,\n    left\n}\n\nexport enum Direction9 {\n    topLeft,\n    top,\n    topRight,\n    right,\n    bottomRight,\n    bottom,\n    bottomLeft,\n    left,\n    center,\n    'top-left' = 0,\n    'top-right' = 2,\n    'bottom-right' = 4,\n    'bottom-left' = 6\n}","import { IAround, IPointData, IBoundsData, IUnitPointData } from '@leafer/interface'\nimport { isString } from '@leafer/data'\n\nimport { Direction9 } from './Direction'\n\n\nconst directionData: IUnitPointData[] = [\n    { x: 0, y: 0 },  //topLeft\n    { x: 0.5, y: 0 },//top\n    { x: 1, y: 0 },  //topRight\n    { x: 1, y: 0.5 },// right\n    { x: 1, y: 1 },  //bottomRight\n    { x: 0.5, y: 1 },//bottom\n    { x: 0, y: 1 },  //bottomLeft\n    { x: 0, y: 0.5 },//left\n    { x: 0.5, y: 0.5 } // center\n]\ndirectionData.forEach(item => item.type = 'percent')\n\nexport const AroundHelper = {\n\n    directionData, // index Direction9\n\n    tempPoint: {} as IPointData,\n\n    get,\n\n    toPoint(around: IAround, box: IBoundsData, to: IPointData, onlyBoxSize?: boolean, content?: IBoundsData, onlyContentSize?: boolean) {\n        const point = get(around)\n\n        to.x = point.x\n        to.y = point.y\n\n\n        if (point.type === 'percent') {\n            to.x *= box.width\n            to.y *= box.height\n\n            if (content) { // align\n                if (!onlyContentSize) to.x -= content.x, to.y -= content.y\n                if (point.x) to.x -= (point.x === 1) ? content.width : (point.x === 0.5 ? point.x * content.width : 0)\n                if (point.y) to.y -= (point.y === 1) ? content.height : (point.y === 0.5 ? point.y * content.height : 0)\n            }\n        }\n\n        if (!onlyBoxSize) to.x += box.x, to.y += box.y\n    },\n\n    getPoint(around: IAround, box: IBoundsData, to?: IPointData): IPointData {\n        if (!to) to = {} as IPointData\n        AroundHelper.toPoint(around, box, to, true)\n        return to\n    }\n}\n\nfunction get(around: IAround): IUnitPointData {\n    return isString(around) ? directionData[Direction9[around]] : around\n}","import { IPointData, IBoundsData, IAlign } from '@leafer/interface'\nimport { AroundHelper } from './AroundHelper'\n\nconst { toPoint } = AroundHelper\n\nexport const AlignHelper = {\n    toPoint(align: IAlign, content: IBoundsData, box: IBoundsData, to: IPointData, onlyBoxSize?: boolean, onlyContentSize?: boolean): void {\n        toPoint(align, box, to, onlyBoxSize, content, onlyContentSize)\n    }\n}","import { IPointData, IBoundsData, IMatrixData, IFourNumber, IBoundsDataFn, IObject, IMatrix, IOffsetBoundsData, IRadiusPointData, IMatrixWithScaleData, ISide, IAlign, ISizeData, IScrollPointData } from '@leafer/interface'\nimport { isArray, isString } from '@leafer/data'\n\nimport { Matrix } from './Matrix'\nimport { MatrixHelper as M } from './MatrixHelper'\nimport { TwoPointBoundsHelper as TB } from './TwoPointBoundsHelper'\nimport { PointHelper as P } from './PointHelper'\nimport { MathHelper, getBoundsData } from './MathHelper'\nimport { AlignHelper } from './AlignHelper'\n\n\nconst { tempPointBounds, setPoint, addPoint, toBounds } = TB\nconst { toOuterPoint } = M\nconst { float, fourNumber } = MathHelper\nconst { floor, ceil } = Math\n\nlet right: number, bottom: number, boundsRight: number, boundsBottom: number\nconst point = {} as IPointData\nconst toPoint = {} as IPointData\nconst tempBounds = {} as IBoundsData\n\nexport const BoundsHelper = {\n\n    tempBounds,\n\n    set(t: IBoundsData, x = 0, y = 0, width = 0, height = 0): void {\n        t.x = x\n        t.y = y\n        t.width = width\n        t.height = height\n    },\n\n    copy(t: IBoundsData, bounds: IBoundsData): void {\n        t.x = bounds.x\n        t.y = bounds.y\n        t.width = bounds.width\n        t.height = bounds.height\n    },\n\n    copyAndSpread(t: IBoundsData, bounds: IBoundsData, spread: IFourNumber, isShrink?: boolean, side?: ISide): void {\n        const { x, y, width, height } = bounds\n        if (isArray(spread)) {\n            const four = fourNumber(spread)\n            isShrink\n                ? B.set(t, x + four[3], y + four[0], width - four[1] - four[3], height - four[2] - four[0])\n                : B.set(t, x - four[3], y - four[0], width + four[1] + four[3], height + four[2] + four[0])\n        } else {\n            if (isShrink) spread = -spread\n            B.set(t, x - spread, y - spread, width + spread * 2, height + spread * 2)\n        }\n\n        if (side) { // 只扩展/收缩一边\n            if (side === 'width') t.y = y, t.height = height\n            else t.x = x, t.width = width\n        }\n    },\n\n\n    minX(t: IBoundsData): number { return t.width > 0 ? t.x : t.x + t.width },\n\n    minY(t: IBoundsData): number { return t.height > 0 ? t.y : t.y + t.height },\n\n    maxX(t: IBoundsData): number { return t.width > 0 ? t.x + t.width : t.x },\n\n    maxY(t: IBoundsData): number { return t.height > 0 ? t.y + t.height : t.y },\n\n\n    move(t: IBoundsData, x: number, y: number): void {\n        t.x += x\n        t.y += y\n    },\n\n    scroll(t: IBoundsData, data: IScrollPointData): void {\n        t.x += data.scrollX\n        t.y += data.scrollY\n    },\n\n    getByMove(t: IBoundsData, x: number, y: number): IBoundsData {\n        t = { ...t }\n        B.move(t, x, y)\n        return t\n    },\n\n    toOffsetOutBounds(t: IBoundsData, to?: IOffsetBoundsData, offsetBounds?: IBoundsData): void {\n        if (!to) to = t as IOffsetBoundsData\n        else copy(to, t)\n\n        if (!offsetBounds) offsetBounds = t\n        to.offsetX = B.maxX(offsetBounds)\n        to.offsetY = B.maxY(offsetBounds)\n        B.move(to, -to.offsetX, -to.offsetY)\n    },\n\n\n    scale(t: IBoundsData, scaleX: number, scaleY = scaleX, onlySize?: boolean): void {\n        onlySize || P.scale(t, scaleX, scaleY)\n        t.width *= scaleX\n        t.height *= scaleY\n    },\n\n    scaleOf(t: IBoundsData, origin: IPointData, scaleX: number, scaleY = scaleX): void {\n        P.scaleOf(t, origin, scaleX, scaleY)\n        t.width *= scaleX\n        t.height *= scaleY\n    },\n\n    tempToOuterOf(t: IBoundsData, matrix: IMatrixData): IBoundsData {\n        B.copy(tempBounds, t)\n        B.toOuterOf(tempBounds, matrix)\n        return tempBounds\n    },\n\n    getOuterOf(t: IBoundsData, matrix: IMatrixData): IBoundsData {\n        t = { ...t }\n        B.toOuterOf(t, matrix)\n        return t\n    },\n\n    toOuterOf(t: IBoundsData, matrix: IMatrixData, to?: IBoundsData): void {\n\n        to || (to = t)\n\n        if (matrix.b === 0 && matrix.c === 0) {\n\n            const { a, d, e, f } = matrix\n            if (a > 0) {\n                to.width = t.width * a\n                to.x = e + t.x * a\n            } else {\n                to.width = t.width * -a\n                to.x = e + t.x * a - to.width\n            }\n\n            if (d > 0) {\n                to.height = t.height * d\n                to.y = f + t.y * d\n            } else {\n                to.height = t.height * -d\n                to.y = f + t.y * d - to.height\n            }\n\n        } else {\n\n            point.x = t.x\n            point.y = t.y\n\n            toOuterPoint(matrix, point, toPoint)\n            setPoint(tempPointBounds, toPoint.x, toPoint.y)\n\n            point.x = t.x + t.width\n\n            toOuterPoint(matrix, point, toPoint)\n            addPoint(tempPointBounds, toPoint.x, toPoint.y)\n\n            point.y = t.y + t.height\n\n            toOuterPoint(matrix, point, toPoint)\n            addPoint(tempPointBounds, toPoint.x, toPoint.y)\n\n            point.x = t.x\n\n            toOuterPoint(matrix, point, toPoint)\n            addPoint(tempPointBounds, toPoint.x, toPoint.y)\n\n            toBounds(tempPointBounds, to)\n        }\n    },\n\n    toInnerOf(t: IBoundsData, matrix: IMatrixData, to?: IBoundsData): void {\n        to || (to = t)\n        B.move(to, -matrix.e, -matrix.f)\n        B.scale(to, 1 / matrix.a, 1 / matrix.d)\n    },\n\n    getFitMatrix(t: IBoundsData, put: IBoundsData, baseScale = 1): IMatrix {\n        const scale = Math.min(baseScale, B.getFitScale(t, put))\n        return new Matrix(scale, 0, 0, scale, -put.x * scale, -put.y * scale)\n    },\n\n    getFitScale(t: ISizeData, put: ISizeData, isCoverMode?: boolean): number {\n        const sw = t.width / put.width, sh = t.height / put.height\n        return isCoverMode ? Math.max(sw, sh) : Math.min(sw, sh)\n    },\n\n    put(t: ISizeData, put: ISizeData, align: IAlign = 'center', putScale: number | 'fit' | 'cover' = 1, changeSize = true, to?: IPointData): void {\n        to || (to = put as unknown as IPointData)\n        if (isString(putScale)) putScale = B.getFitScale(t, put, putScale === 'cover')\n        tempBounds.width = changeSize ? put.width *= putScale : put.width * putScale\n        tempBounds.height = changeSize ? put.height *= putScale : put.height * putScale\n        AlignHelper.toPoint(align, tempBounds, t as IBoundsData, to, true, true)\n    },\n\n    getSpread(t: IBoundsData, spread: IFourNumber, side?: ISide): IBoundsData {\n        const n = {} as IBoundsData\n        B.copyAndSpread(n, t, spread, false, side)\n        return n\n    },\n\n    spread(t: IBoundsData, spread: IFourNumber, side?: ISide): void {\n        B.copyAndSpread(t, t, spread, false, side)\n    },\n\n    shrink(t: IBoundsData, shrink: IFourNumber, side?: ISide): void {\n        B.copyAndSpread(t, t, shrink, true, side)\n    },\n\n    ceil(t: IBoundsData): void {\n        const { x, y } = t\n        t.x = floor(t.x)\n        t.y = floor(t.y)\n        t.width = x > t.x ? ceil(t.width + x - t.x) : ceil(t.width)\n        t.height = y > t.y ? ceil(t.height + y - t.y) : ceil(t.height)\n    },\n\n    unsign(t: IBoundsData): void {\n        if (t.width < 0) {\n            t.x += t.width\n            t.width = -t.width\n        }\n        if (t.height < 0) {\n            t.y += t.height\n            t.height = -t.height\n        }\n    },\n\n    float(t: IBoundsData, maxLength?: number): void {\n        t.x = float(t.x, maxLength)\n        t.y = float(t.y, maxLength)\n        t.width = float(t.width, maxLength)\n        t.height = float(t.height, maxLength)\n    },\n\n    add(t: IBoundsData, bounds: IBoundsData, isPoint?: boolean): void {\n        right = t.x + t.width\n        bottom = t.y + t.height\n        boundsRight = bounds.x\n        boundsBottom = bounds.y\n\n        if (!isPoint) {\n            boundsRight += bounds.width\n            boundsBottom += bounds.height\n        }\n\n        right = right > boundsRight ? right : boundsRight\n        bottom = bottom > boundsBottom ? bottom : boundsBottom\n\n        t.x = t.x < bounds.x ? t.x : bounds.x\n        t.y = t.y < bounds.y ? t.y : bounds.y\n        t.width = right - t.x\n        t.height = bottom - t.y\n    },\n\n    addList(t: IBoundsData, list: IBoundsData[]): void {\n        B.setListWithFn(t, list, undefined, true)\n    },\n\n    setList(t: IBoundsData, list: IBoundsData[], addMode = false): void {\n        B.setListWithFn(t, list, undefined, addMode)\n    },\n\n    addListWithFn(t: IBoundsData, list: IObject[], boundsDataFn: IBoundsDataFn): void {\n        B.setListWithFn(t, list, boundsDataFn, true)\n    },\n\n    setListWithFn(t: IBoundsData, list: IObject[], boundsDataFn: IBoundsDataFn, addMode = false): void {\n        let bounds: IBoundsData, first = true\n        for (let i = 0, len = list.length; i < len; i++) {\n            bounds = boundsDataFn ? boundsDataFn(list[i], i) : list[i] as IBoundsData\n            if (bounds && (bounds.width || bounds.height)) {\n                if (first) {\n                    first = false\n                    if (!addMode) copy(t, bounds)\n                } else {\n                    add(t, bounds)\n                }\n            }\n        }\n\n        if (first) B.reset(t)\n    },\n\n\n    setPoints(t: IBoundsData, points: IPointData[]): void {\n        points.forEach((point, index) => index === 0 ? setPoint(tempPointBounds, point.x, point.y) : addPoint(tempPointBounds, point.x, point.y))\n        toBounds(tempPointBounds, t)\n    },\n\n    setPoint(t: IBoundsData, point: IPointData): void {\n        B.set(t, point.x, point.y)\n    },\n\n    addPoint(t: IBoundsData, point: IPointData): void {\n        add(t, point as IBoundsData, true)\n    },\n\n    getPoints(t: IBoundsData): IPointData[] {\n        const { x, y, width, height } = t\n        return [\n            { x, y }, // topLeft\n            { x: x + width, y }, // topRight\n            { x: x + width, y: y + height }, // bottomRight\n            { x, y: y + height } // bottomLeft\n        ]\n    },\n\n\n    hitRadiusPoint(t: IBoundsData, point: IRadiusPointData, pointMatrix?: IMatrixWithScaleData): boolean {\n        if (pointMatrix) point = P.tempToInnerRadiusPointOf(point, pointMatrix)\n        return (point.x >= t.x - point.radiusX && point.x <= t.x + t.width + point.radiusX) && (point.y >= t.y - point.radiusY && point.y <= t.y + t.height + point.radiusY)\n    },\n\n    hitPoint(t: IBoundsData, point: IPointData, pointMatrix?: IMatrixData): boolean {\n        if (pointMatrix) point = P.tempToInnerOf(point, pointMatrix)\n        return (point.x >= t.x && point.x <= t.x + t.width) && (point.y >= t.y && point.y <= t.y + t.height)\n    },\n\n\n    hit(t: IBoundsData, other: IBoundsData, otherMatrix?: IMatrixData): boolean {\n        if (otherMatrix) other = B.tempToOuterOf(other, otherMatrix)\n        return !((t.y + t.height < other.y) || (other.y + other.height < t.y) || (t.x + t.width < other.x) || (other.x + other.width < t.x))\n    },\n\n    includes(t: IBoundsData, other: IBoundsData, otherMatrix?: IMatrixData): boolean {\n        if (otherMatrix) other = B.tempToOuterOf(other, otherMatrix)\n        return (t.x <= other.x) && (t.y <= other.y) && (t.x + t.width >= other.x + other.width) && (t.y + t.height >= other.y + other.height)\n    },\n\n    getIntersectData(t: IBoundsData, other: IBoundsData, otherMatrix?: IMatrixData): IBoundsData {\n        if (otherMatrix) other = B.tempToOuterOf(other, otherMatrix)\n        if (!B.hit(t, other)) return getBoundsData()\n\n        let { x, y, width, height } = other\n\n        right = x + width\n        bottom = y + height\n        boundsRight = t.x + t.width\n        boundsBottom = t.y + t.height\n\n        x = x > t.x ? x : t.x\n        y = y > t.y ? y : t.y\n        right = right < boundsRight ? right : boundsRight\n        bottom = bottom < boundsBottom ? bottom : boundsBottom\n\n        width = right - x\n        height = bottom - y\n\n        return { x, y, width, height }\n    },\n\n    intersect(t: IBoundsData, other: IBoundsData, otherMatrix?: IMatrixData): void {\n        B.copy(t, B.getIntersectData(t, other, otherMatrix))\n    },\n\n\n    isSame(t: IBoundsData, bounds: IBoundsData): boolean {\n        return t.x === bounds.x && t.y === bounds.y && t.width === bounds.width && t.height === bounds.height\n    },\n\n    isEmpty(t: IBoundsData): boolean {\n        return t.x === 0 && t.y === 0 && t.width === 0 && t.height === 0\n    },\n\n    hasSize(t: IBoundsData): boolean {\n        return (t.width && t.height) as any as boolean\n    },\n\n    reset(t: IBoundsData): void {\n        B.set(t)\n    }\n}\n\nconst B = BoundsHelper\nconst { add, copy } = B","import { IBounds, IBoundsData, IMatrixData, IPointData, IBoundsDataFn, IObject, IMatrix, IRadiusPointData, IMatrixWithLayoutData, IFourNumber, ISide, IAlign } from '@leafer/interface'\nimport { isObject } from '@leafer/data'\n\nimport { BoundsHelper as B } from './BoundsHelper'\n\n\nexport class Bounds implements IBounds {\n\n    public x: number\n    public y: number\n    public width: number\n    public height: number\n\n    public get minX(): number { return B.minX(this) }\n    public get minY(): number { return B.minY(this) }\n    public get maxX(): number { return B.maxX(this) }\n    public get maxY(): number { return B.maxY(this) }\n\n    constructor(x?: number | IBoundsData, y?: number, width?: number, height?: number) {\n        this.set(x, y, width, height)\n    }\n\n    public set(x?: number | IBoundsData, y?: number, width?: number, height?: number): IBounds {\n        isObject(x) ? B.copy(this, x) : B.set(this, x, y, width, height)\n        return this\n    }\n\n    public get(): IBoundsData {\n        const { x, y, width, height } = this\n        return { x, y, width, height }\n    }\n\n    public clone(): IBounds {\n        return new Bounds(this)\n    }\n\n\n    public move(x: number, y: number): IBounds {\n        B.move(this, x, y)\n        return this\n    }\n\n    public scale(scaleX: number, scaleY?: number, onlySize?: boolean): IBounds {\n        B.scale(this, scaleX, scaleY, onlySize)\n        return this\n    }\n\n    public scaleOf(origin: IPointData, scaleX: number, scaleY?: number): IBounds {\n        B.scaleOf(this, origin, scaleX, scaleY)\n        return this\n    }\n\n    public toOuterOf(matrix: IMatrixData, to?: IBoundsData): IBounds {\n        B.toOuterOf(this, matrix, to)\n        return this\n    }\n\n    public toInnerOf(matrix: IMatrixData, to?: IBoundsData): IBounds {\n        B.toInnerOf(this, matrix, to)\n        return this\n    }\n\n    public getFitMatrix(put: IBoundsData, baseScale?: number): IMatrix {\n        return B.getFitMatrix(this, put, baseScale)\n    }\n\n    public put(put: IBoundsData, align?: IAlign, putScale?: number | 'fit' | 'cover'): void {\n        B.put(this, put, align, putScale)\n    }\n\n    public spread(fourNumber: IFourNumber, side?: ISide): IBounds {\n        B.spread(this, fourNumber, side)\n        return this\n    }\n\n    public shrink(fourNumber: IFourNumber, side?: ISide): IBounds {\n        B.shrink(this, fourNumber, side)\n        return this\n    }\n\n    public ceil(): IBounds {\n        B.ceil(this)\n        return this\n    }\n\n    public unsign(): IBounds {\n        B.unsign(this)\n        return this\n    }\n\n    public float(maxLength?: number): IBounds {\n        B.float(this, maxLength)\n        return this\n    }\n\n\n    public add(bounds: IBoundsData): IBounds {\n        B.add(this, bounds)\n        return this\n    }\n\n    public addList(boundsList: IBoundsData[]): IBounds {\n        B.setList(this, boundsList, true)\n        return this\n    }\n\n    public setList(boundsList: IBoundsData[]): IBounds {\n        B.setList(this, boundsList)\n        return this\n    }\n\n    public addListWithFn(list: IObject[], boundsDataFn: IBoundsDataFn): IBounds {\n        B.setListWithFn(this, list, boundsDataFn, true)\n        return this\n    }\n\n    public setListWithFn(list: IObject[], boundsDataFn: IBoundsDataFn): IBounds {\n        B.setListWithFn(this, list, boundsDataFn)\n        return this\n    }\n\n\n    public setPoint(point: IPointData): IBounds {\n        B.setPoint(this, point)\n        return this\n    }\n\n    public setPoints(points: IPointData[]): IBounds {\n        B.setPoints(this, points)\n        return this\n    }\n\n    public addPoint(point: IPointData): IBounds {\n        B.addPoint(this, point)\n        return this\n    }\n\n    public getPoints(): IPointData[] {\n        return B.getPoints(this)\n    }\n\n\n\n    public hitPoint(point: IPointData, pointMatrix?: IMatrixData): boolean {\n        return B.hitPoint(this, point, pointMatrix)\n    }\n\n    public hitRadiusPoint(point: IRadiusPointData, pointMatrix?: IMatrixWithLayoutData): boolean {\n        return B.hitRadiusPoint(this, point, pointMatrix)\n    }\n\n    public hit(bounds: IBoundsData, boundsMatrix?: IMatrixData): boolean {\n        return B.hit(this, bounds, boundsMatrix)\n    }\n\n    public includes(bounds: IBoundsData, boundsMatrix?: IMatrixData): boolean {\n        return B.includes(this, bounds, boundsMatrix)\n    }\n\n\n    public intersect(bounds: IBoundsData, boundsMatrix?: IMatrixData): IBounds {\n        B.intersect(this, bounds, boundsMatrix)\n        return this\n    }\n\n    public getIntersect(bounds: IBoundsData, boundsMatrix?: IMatrixData): IBounds {\n        return new Bounds(B.getIntersectData(this, bounds, boundsMatrix))\n    }\n\n\n    public isSame(bounds: IBoundsData): boolean {\n        return B.isSame(this, bounds)\n    }\n\n    public isEmpty(): boolean {\n        return B.isEmpty(this)\n    }\n\n    public reset(): void {\n        B.reset(this)\n    }\n\n}\n\nexport const tempBounds = new Bounds()","import { IAutoBounds, IAutoBoundsData, IBounds, ISizeData } from '@leafer/interface'\nimport { isObject } from '@leafer/data'\n\nimport { Bounds } from './Bounds'\n\n\nexport class AutoBounds implements IAutoBounds {\n\n    public top: number\n    public right: number\n    public bottom: number\n    public left: number\n\n    public width: number\n    public height: number\n\n    constructor(top?: number | IAutoBoundsData, right?: number, bottom?: number, left?: number, width?: number, height?: number) {\n        isObject(top) ? this.copy(top) : this.set(top, right, bottom, left, width, height)\n    }\n\n    set(top = 0, right = 0, bottom = 0, left = 0, width = 0, height = 0): void {\n        this.top = top\n        this.right = right\n        this.bottom = bottom\n        this.left = left\n        this.width = width\n        this.height = height\n    }\n\n    copy(autoSize: IAutoBoundsData): void {\n        const { top, right, bottom, left, width, height } = autoSize\n        this.set(top, right, bottom, left, width, height)\n    }\n\n    getBoundsFrom(parent: ISizeData): IBounds {\n        const { top, right, bottom, left, width, height } = this\n        return new Bounds(left, top, width ? width : parent.width - left - right, height ? height : parent.height - top - bottom)\n    }\n\n}","import { IUnitData } from '@leafer/interface'\nimport { isObject } from '@leafer/data'\n\nexport const UnitConvertHelper = {\n    number(value: number | IUnitData, percentRefer?: number): number {\n        return isObject(value) ? (value.type === 'percent' ? value.value * percentRefer : value.value) : value\n    }\n}","import { INumberMap } from '@leafer/interface'\n\n\nexport const StringNumberMap: INumberMap = {\n    '0': 1,\n    '1': 1,\n    '2': 1,\n    '3': 1,\n    '4': 1,\n    '5': 1,\n    '6': 1,\n    '7': 1,\n    '8': 1,\n    '9': 1,\n    '.': 1,\n    'e': 1,\n    'E': 1\n}","import { IPlatform, IObject, IBoundsData, ICanvasPattern, IMatrixData, ILeaferImagePatternPaint, ISizeData, ICanvasContext2D, IInterlace } from '@leafer/interface'\nimport { DataHelper } from '@leafer/data'\nimport { UnitConvertHelper } from '@leafer/math'\n\n\nconst { floor, max } = Math\n\nexport const Platform: IPlatform = {\n    toURL(text: string, fileType?: 'text' | 'svg'): string {\n        let url = encodeURIComponent(text)\n        if (fileType === 'text') url = 'data:text/plain;charset=utf-8,' + url\n        else if (fileType === 'svg') url = 'data:image/svg+xml,' + url\n        return url\n    },\n    image: {\n        hitCanvasSize: 100,\n        maxCacheSize: 2560 * 1600,  // 2k\n        maxPatternSize: 4096 * 2160, // 4k\n        crossOrigin: 'anonymous',\n        isLarge(size: ISizeData, scaleX?: number, scaleY?: number, largeSize?: number): boolean {\n            return size.width * size.height * (scaleX ? scaleX * scaleY : 1) > (largeSize || image.maxCacheSize)\n        },\n        isSuperLarge(size: ISizeData, scaleX?: number, scaleY?: number): boolean {\n            return image.isLarge(size, scaleX, scaleY, image.maxPatternSize)\n        },\n        getRealURL(url: string): string {\n            const { prefix, suffix } = image\n            if (suffix && !url.startsWith('data:') && !url.startsWith('blob:')) url += (url.includes(\"?\") ? \"&\" : \"?\") + suffix\n            if (prefix && url[0] === '/') url = prefix + url\n            return url\n        },\n        resize(view: any, width: number, height: number, xGap?: number, yGap?: number, clip?: IBoundsData, smooth?: boolean, opacity?: number, _filters?: IObject, interlace?: IInterlace): any {\n            const realWidth = max(floor(width + (xGap || 0)), 1), realHeight = max(floor(height + (yGap || 0)), 1)\n\n            let interlaceX: boolean, interlaceY: boolean, interlaceOffset: number\n            if (interlace && (interlaceOffset = UnitConvertHelper.number(interlace.offset, (interlaceX = interlace.type === 'x') ? width : height))) interlaceX || (interlaceY = true)\n\n            const canvas = Platform.origin.createCanvas(interlaceY ? realWidth * 2 : realWidth, interlaceX ? realHeight * 2 : realHeight)\n            const ctx: ICanvasContext2D = canvas.getContext('2d')\n            if (opacity) ctx.globalAlpha = opacity\n            ctx.imageSmoothingEnabled = smooth === false ? false : true // 平滑绘制\n\n            if (image.canUse(view)) {\n                if (clip) {\n                    const scaleX = width / clip.width, scaleY = height / clip.height\n                    ctx.setTransform(scaleX, 0, 0, scaleY, -clip.x * scaleX, -clip.y * scaleY)\n                    ctx.drawImage(view, 0, 0, view.width, view.height)\n                } else ctx.drawImage(view, 0, 0, width, height)\n\n                if (interlaceOffset) {\n                    ctx.drawImage(canvas, 0, 0, realWidth, realHeight, interlaceX ? interlaceOffset - realWidth : realWidth, interlaceX ? realHeight : interlaceOffset - realHeight, realWidth, realHeight)\n                    ctx.drawImage(canvas, 0, 0, realWidth, realHeight, interlaceX ? interlaceOffset : realWidth, interlaceX ? realHeight : interlaceOffset, realWidth, realHeight)\n                }\n            }\n\n            return canvas\n        },\n        canUse(view: any): boolean {\n            return view && view.width && !view.__closed // __closed 为内部标记已销毁\n        },\n        setPatternTransform(pattern: ICanvasPattern, transform?: IMatrixData, paint?: ILeaferImagePatternPaint): void {\n            try {\n                if (transform && pattern.setTransform) {\n                    pattern.setTransform(transform) // maybe error \n                    transform = undefined\n                }\n            } catch { }\n            if (paint) DataHelper.stintSet(paint, 'transform', transform)\n        }\n    }\n}\n\nconst { image } = Platform","import { IBooleanMap, IBoundsData, ILeaferCanvas, IRenderOptions, ILeaf } from '@leafer/interface'\nimport { isString } from '@leafer/data'\nimport { MathHelper } from '@leafer/math'\n\n\nconst { randColor } = MathHelper\nexport class Debug {\n\n    static enable: boolean\n\n    static filterList: string[] = []\n    static excludeList: string[] = []\n\n    // other\n    static showWarn = true\n    static showRepaint: boolean | string\n    static showBounds: boolean | string | 'hit'\n\n    public name: string\n\n    public repeatMap: IBooleanMap = {}\n\n    constructor(name: string) {\n        this.name = name\n    }\n\n    static get(name: string): Debug {\n        return new Debug(name)\n    }\n\n    static set filter(name: string | string[]) {\n        this.filterList = getNameList(name)\n    }\n\n    static set exclude(name: string | string[]) {\n        this.excludeList = getNameList(name)\n    }\n\n    static drawRepaint(canvas: ILeaferCanvas, bounds: IBoundsData): void {\n        const color = randColor()\n        canvas.fillWorld(bounds, color.replace('1)', '.1)'))\n        canvas.strokeWorld(bounds, color)\n    }\n\n    static drawBounds(leaf: ILeaf, canvas: ILeaferCanvas, _options: IRenderOptions): void {\n        const showHit = Debug.showBounds === 'hit', w = leaf.__nowWorld, color = randColor()\n        if (showHit) canvas.setWorld(w), leaf.__drawHitPath(canvas), canvas.fillStyle = color.replace('1)', '.2)'), canvas.fill()\n\n        canvas.resetTransform()\n        canvas.setStroke(color, 2)\n        showHit ? canvas.stroke() : canvas.strokeWorld(w, color)\n    }\n\n\n    log(...messages: unknown[]): void {\n        if (D.enable) {\n            if (D.filterList.length && D.filterList.every(name => name !== this.name)) return\n            if (D.excludeList.length && D.excludeList.some(name => name === this.name)) return\n            console.log('%c' + this.name, 'color:#21ae62', ...messages)\n        }\n    }\n\n    tip(...messages: unknown[]): void {\n        if (D.enable) this.warn(...messages)\n    }\n\n    warn(...messages: unknown[]): void {\n        if (D.showWarn) console.warn(this.name, ...messages)\n    }\n\n    repeat(name: string, ...messages: unknown[]) {\n        if (!this.repeatMap[name]) {\n            this.warn('repeat:' + name, ...messages)\n            this.repeatMap[name] = true\n        }\n    }\n\n    error(...messages: unknown[]): void {\n        try {\n            throw new Error()\n        } catch (e) {\n            console.error(this.name, ...messages, e)\n        }\n    }\n}\n\nfunction getNameList(name: string | string[]): string[] {\n    if (!name) name = []\n    else if (isString(name)) name = [name]\n    return name\n}\n\nconst D = Debug","import { IncrementId } from '@leafer/math'\nimport { isUndefined } from '@leafer/data'\n\nimport { Debug } from './Debug'\n\n\ninterface ids {\n    [name: string]: number\n}\ninterface names {\n    [name: string]: string\n}\n\n\nconst debug = Debug.get('RunTime')\n\nexport const Run = {\n\n    currentId: 0,\n    currentName: '',\n\n    idMap: {} as ids,\n    nameMap: {} as names,\n    nameToIdMap: {} as ids,\n\n    start(name: string, microsecond?: boolean): number {\n        const id = IncrementId.create(IncrementId.RUNTIME)\n        R.currentId = R.idMap[id] = microsecond ? performance.now() : Date.now()\n        R.currentName = R.nameMap[id] = name\n        R.nameToIdMap[name] = id\n        return id\n    },\n\n    end(id: number, microsecond?: boolean): void {\n        const time = R.idMap[id], name = R.nameMap[id]\n        const duration = microsecond ? (performance.now() - time) / 1000 : Date.now() - time\n        R.idMap[id] = R.nameMap[id] = R.nameToIdMap[name] = undefined\n        debug.log(name, duration, 'ms')\n    },\n\n    endOfName(name: string, microsecond?: boolean): void {\n        const id = R.nameToIdMap[name]\n        if (!isUndefined(id)) R.end(id, microsecond)\n    }\n}\n\nconst R = Run","import { IBooleanMap } from '@leafer/interface'\n\n\nconst check = [] as string[]\n\nexport const Plugin = {\n\n    list: {} as IBooleanMap,\n\n    add(name: string, ...needPlugins: string[]) {\n        this.list[name] = true\n        check.push(...needPlugins)\n    },\n\n    has(name: string, tip?: boolean): boolean {\n        const rs = this.list[name]\n        if (!rs && tip) this.need(name)\n        return rs\n    },\n\n    need(name: string): any {\n        console.error('please install and import plugin: ' + (name.includes('-x') ? '' : '@leafer-in/') + name)\n    }\n\n}\n\nsetTimeout(() => check.forEach(name => Plugin.has(name, true)))","import { ICreator, IObject, ILeaf } from '@leafer/interface'\nimport { Plugin } from '@leafer/debug'\n\n\nexport const Creator: ICreator = {\n    editor(_options?: IObject): ILeaf {\n        return Plugin.need('editor')\n    }\n}","import { ILeaf, IObject } from '@leafer/interface'\nimport { isUndefined } from '@leafer/data'\nimport { Debug } from '@leafer/debug'\n\n\nconst debug = Debug.get('UICreator')\n\nexport const UICreator = {\n\n    list: {} as IObject,\n\n    register(UI: IObject): void {\n        const { __tag: tag } = UI.prototype as ILeaf\n        if (list[tag]) debug.repeat(tag)\n        list[tag] = UI\n    },\n\n    get(tag: string, data?: IObject, x?: number, y?: number, width?: number, height?: number): ILeaf {\n        if (!list[tag]) debug.error('not register ' + tag)\n        const ui = new list[tag](data)\n        if (!isUndefined(x)) {\n            ui.x = x\n            if (y) ui.y = y\n            if (width) ui.width = width\n            if (height) ui.height = height\n        }\n        return ui\n    }\n\n}\n\nconst { list } = UICreator","import { IEvent, IObject } from '@leafer/interface'\nimport { isString } from '@leafer/data'\nimport { Debug } from '@leafer/debug'\n\n\nconst debug = Debug.get('EventCreator')\n\nexport const EventCreator = {\n\n    nameList: {} as IObject,\n\n    register(Event: IObject): void {\n        let name: string\n        Object.keys(Event).forEach(key => {\n            name = Event[key]\n            if (isString(name)) nameList[name] && debug.repeat(name), nameList[name] = Event\n        })\n    },\n\n    changeName(oldName: string, newName: string): void {\n        const Event = nameList[oldName]\n        if (Event) {\n            const constName = Object.keys(Event).find(key => Event[key] === oldName)\n            if (constName) {\n                Event[constName] = newName\n                nameList[newName] = Event\n            }\n        }\n    },\n\n    has(type: string): boolean {\n        return !!this.nameList[type]\n    },\n\n    get(type: string, ...params: unknown[]): IEvent {\n        return new nameList[type](...params)\n    }\n\n}\n\nconst { nameList } = EventCreator","import { ILeaferCanvas, IScreenSizeData, ICanvasManager } from '@leafer/interface'\nimport { Creator } from '@leafer/platform'\n\nexport class CanvasManager implements ICanvasManager {\n\n    public list: ILeaferCanvas[] = []\n\n    public add(canvas: ILeaferCanvas): void {\n        canvas.manager = this\n        this.list.push(canvas)\n    }\n\n    public get(size: IScreenSizeData): ILeaferCanvas {\n        let old: ILeaferCanvas\n        const { list } = this\n        for (let i = 0, len = list.length; i < len; i++) {\n            old = list[i]\n            if (old.recycled && old.isSameSize(size)) {\n                old.recycled = false\n                old.manager || (old.manager = this)\n                return old\n            }\n        }\n\n        const canvas = Creator.canvas(size)\n        this.add(canvas)\n        return canvas\n    }\n\n    public recycle(old: ILeaferCanvas): void {\n        old.recycled = true\n    }\n\n    public clearRecycled(): void {\n        let canvas: ILeaferCanvas\n        const filter: ILeaferCanvas[] = []\n        for (let i = 0, len = this.list.length; i < len; i++) {\n            canvas = this.list[i]\n            canvas.recycled ? canvas.destroy() : filter.push(canvas)\n        }\n        this.list = filter\n    }\n\n    public clear(): void {\n        this.list.forEach(item => { item.destroy() })\n        this.list.length = 0\n    }\n\n    public destroy(): void {\n        this.clear()\n    }\n\n}","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","import { ICanvasAttr, ITextMetrics, ICanvasContext2D, IPath2D, IObject, InnerId, IMatrixData, IFunction, IWindingRule, IBlendMode } from '@leafer/interface'\nimport { isObject } from '@leafer/data'\n\n\nfunction contextAttr(realName?: string) {\n    return (target: Canvas, key: string) => {\n        if (!realName) realName = key\n        const property = {\n            get() { return ((this as unknown as Canvas).context as IObject)[realName] },\n            set(value: unknown) { ((this as unknown as Canvas).context as IObject)[realName] = value }\n        }\n        if (key === 'strokeCap') (property as any).set = function (value: unknown) { ((this as unknown as Canvas).context as IObject)[realName] = value === 'none' ? 'butt' : value }\n        Object.defineProperty(target, key, property)\n    }\n}\n\nconst contextMethodNameList: string[] = []\nfunction contextMethod() {\n    return (_target: Canvas, key: string) => {\n        contextMethodNameList.push(key)\n    }\n}\n\nconst emptyArray: number[] = []\n\n\nexport class Canvas implements ICanvasAttr {\n\n    public readonly innerId: InnerId\n\n    public context: ICanvasContext2D\n\n    // canvas attr\n\n    @contextAttr('imageSmoothingEnabled')\n    public smooth: boolean\n\n    @contextAttr('imageSmoothingQuality')\n    public smoothLevel: ImageSmoothingQuality\n\n    @contextAttr('globalAlpha')\n    public opacity: number\n\n    public set blendMode(value: IBlendMode) {\n        if (value === 'normal') value = 'source-over'\n        this.context.globalCompositeOperation = value as any\n    }\n\n    public get blendMode(): IBlendMode {\n        return this.context.globalCompositeOperation as IBlendMode\n    }\n\n    @contextAttr()\n    public fillStyle: string | object\n\n    @contextAttr()\n    public strokeStyle: string | object\n\n\n    @contextAttr('lineWidth')\n    public strokeWidth: number\n\n    @contextAttr('lineCap')\n    public strokeCap: string\n\n    @contextAttr('lineJoin')\n    public strokeJoin: string\n\n    public set dashPattern(value: number[]) {\n        this.context.setLineDash(value || emptyArray)\n    }\n    public get dashPattern(): number[] {\n        return this.context.getLineDash()\n    }\n\n    @contextAttr('lineDashOffset')\n    public dashOffset: number\n\n    @contextAttr()\n    public miterLimit: number\n\n\n    @contextAttr()\n    public shadowBlur: number\n\n    @contextAttr()\n    public shadowColor: string\n\n    @contextAttr()\n    public shadowOffsetX: number\n\n    @contextAttr()\n    public shadowOffsetY: number\n\n    @contextAttr()\n    public filter: string\n\n\n    @contextAttr()\n    public font: string\n\n    @contextAttr()\n    public fontKerning: string\n\n    @contextAttr()\n    public fontStretch: string\n\n    @contextAttr()\n    public fontVariantCaps: string\n\n\n    @contextAttr()\n    public textAlign: string\n\n    @contextAttr()\n    public textBaseline: string\n\n    @contextAttr()\n    public textRendering: string\n\n    @contextAttr()\n    public wordSpacing: string\n\n    @contextAttr()\n    public letterSpacing: string\n\n\n    @contextAttr()\n    public direction: string\n\n    // end\n\n    public __bindContext(): void {\n        let method: IFunction\n        contextMethodNameList.forEach(name => {\n            method = (this.context as IObject)[name]\n            if (method) (this as IObject)[name] = method.bind(this.context)\n        })\n        this.textBaseline = \"alphabetic\"\n    }\n\n    // canvas method\n\n    @contextMethod()\n    public setTransform(_a: number | IMatrixData, _b?: number, _c?: number, _d?: number, _e?: number, _f?: number): void { }\n\n    @contextMethod()\n    public resetTransform(): void { }\n\n    @contextMethod()\n    public getTransform(): IMatrixData { return void 0 }\n\n    @contextMethod()\n    public save(): void { }\n\n    @contextMethod()\n    public restore(): void { }\n\n    public transform(a: number | IMatrixData, b?: number, c?: number, d?: number, e?: number, f?: number): void {\n        if (isObject(a)) {\n            this.context.transform(a.a, a.b, a.c, a.d, a.e, a.f)\n        } else {\n            this.context.transform(a, b, c, d, e, f)\n        }\n    }\n\n    @contextMethod()\n    public translate(_x: number, _y: number): void { }\n\n    @contextMethod()\n    public scale(_x: number, _y: number): void { }\n\n    @contextMethod()\n    public rotate(_angle: number): void { }\n\n    @contextMethod()\n    public fill(_path2d?: IPath2D | IWindingRule, _rule?: IWindingRule): void { }\n\n    @contextMethod()\n    public stroke(_path2d?: IPath2D): void { }\n\n    @contextMethod()\n    public clip(_path2d?: IPath2D | IWindingRule, _rule?: IWindingRule): void { }\n\n    @contextMethod()\n    public fillRect(_x: number, _y: number, _width: number, _height: number): void { }\n\n    @contextMethod()\n    public strokeRect(_x: number, _y: number, _width: number, _height: number): void { }\n\n    @contextMethod()\n    public clearRect(_x: number, _y: number, _width: number, _height: number): void { }\n\n    public drawImage(image: CanvasImageSource, sx: number, sy: number, sw?: number, sh?: number, dx?: number, dy?: number, dw?: number, dh?: number): void {\n        switch (arguments.length) {\n            case 9:\n\n                // safari: drawimage裁剪画布外的坐标会有问题, 必须是不小于0的坐标点\n                if (sx < 0) {\n                    const d = (-sx / sw) * dw\n                    sw += sx\n                    sx = 0\n                    dx += d\n                    dw -= d\n                }\n\n                if (sy < 0) {\n                    const d = (-sy / sh) * dh\n                    sh += sy\n                    sy = 0\n                    dy += d\n                    dh -= d\n                }\n\n                this.context.drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh)\n                break\n            case 5:\n                this.context.drawImage(image, sx, sy, sw, sh) // = dx, dy, dw, dh\n                break\n            case 3:\n                this.context.drawImage(image, sx, sy)\n        }\n    }\n\n\n    // canvas draw\n    @contextMethod()\n    public beginPath(): void { }\n\n    @contextMethod()\n    public moveTo(_x: number, _y: number): void { }\n\n    @contextMethod()\n    public lineTo(_x: number, _y: number): void { }\n\n    @contextMethod()\n    public bezierCurveTo(_cp1x: number, _cp1y: number, _cp2x: number, _cp2y: number, _x: number, _y: number): void { }\n\n    @contextMethod()\n    public quadraticCurveTo(_cpx: number, _cpy: number, _x: number, _y: number): void { }\n\n    @contextMethod()\n    public closePath(): void { }\n\n    @contextMethod()\n    public arc(_x: number, _y: number, _radius: number, _startAngle: number, _endAngle: number, _anticlockwise?: boolean): void { }\n\n    @contextMethod()\n    public arcTo(_x1: number, _y1: number, _x2: number, _y2: number, _radius: number): void { }\n\n    @contextMethod()\n    public ellipse(_x: number, _y: number, _radiusX: number, _radiusY: number, _rotation: number, _startAngle: number, _endAngle: number, _anticlockwise?: boolean): void { }\n\n    @contextMethod()\n    public rect(_x: number, _y: number, _width: number, _height: number): void { }\n\n    @contextMethod()\n    public roundRect(_x: number, _y: number, _width: number, _height: number, _radius?: number | number[]): void { }\n\n    // end canvas draw\n\n    // paint\n\n    @contextMethod()\n    public createConicGradient(_startAngle: number, _x: number, _y: number): CanvasGradient { return void 0 }\n\n    @contextMethod()\n    public createLinearGradient(_x0: number, _y0: number, _x1: number, _y1: number): CanvasGradient { return void 0 }\n\n    @contextMethod()\n    public createPattern(_image: CanvasImageSource, _repetition: string | null): CanvasPattern | null { return void 0 }\n\n    @contextMethod()\n    public createRadialGradient(_x0: number, _y0: number, _r0: number, _x1: number, _y1: number, _r1: number): CanvasGradient { return void 0 }\n\n    // text\n    @contextMethod()\n    public fillText(_text: string, _x: number, _y: number, _maxWidth?: number): void { }\n\n    @contextMethod()\n    public measureText(_text: string): ITextMetrics { return void 0 }\n\n    @contextMethod()\n    public strokeText(_text: string, _x: number, _y: number, _maxWidth?: number): void { }\n\n    public destroy(): void {\n        this.context = null\n    }\n}","import { IBounds, ILeaferCanvas, ICanvasStrokeOptions, ILeaferCanvasConfig, IWindingRuleData, IExportOptions, IMatrixData, IBoundsData, IAutoBounds, IScreenSizeData, IResizeEventListener, IMatrixWithBoundsData, IPointData, InnerId, ICanvasManager, IWindingRule, IBlendMode, IExportImageType, IExportFileType, IBlob, ICursorType, ILeaferCanvasView, IRadiusPointData, IObject, IMatrixWithOptionHalfData } from '@leafer/interface'\nimport { Bounds, BoundsHelper, MatrixHelper, IncrementId } from '@leafer/math'\nimport { Creator, Platform } from '@leafer/platform'\nimport { DataHelper, isUndefined } from '@leafer/data'\n\nimport { Canvas } from './Canvas'\n\n\nconst { copy, multiplyParent, pixelScale } = MatrixHelper, { round } = Math, tempPixelBounds = new Bounds(), tempPixelBounds2 = new Bounds()\nconst minSize: IScreenSizeData = { width: 1, height: 1, pixelRatio: 1 }\n\nexport const canvasSizeAttrs = ['width', 'height', 'pixelRatio']\n\nexport class LeaferCanvasBase extends Canvas implements ILeaferCanvas {\n\n    declare public readonly innerId: InnerId\n\n    public name: string\n\n    public manager: ICanvasManager\n\n    public size: IScreenSizeData = {} as IScreenSizeData\n\n    public get width(): number { return this.size.width }\n    public get height(): number { return this.size.height }\n\n    public get pixelRatio(): number { return this.size.pixelRatio }\n    public get pixelWidth(): number { return this.width * this.pixelRatio || 0 } // 防止出现 NaN\n    public get pixelHeight(): number { return this.height * this.pixelRatio || 0 }\n\n    public get pixelSnap(): boolean { return this.config.pixelSnap }\n    public set pixelSnap(value: boolean) { this.config.pixelSnap = value }\n\n    public get allowBackgroundColor(): boolean { return this.view && this.parentView }\n\n    public bounds: IBounds\n    public clientBounds: IBoundsData\n\n    public config: ILeaferCanvasConfig\n\n    public autoLayout: boolean\n\n    public view: ILeaferCanvasView\n    public parentView: any\n\n    public unreal?: boolean\n\n    public recycled?: boolean\n\n    public worldTransform: IMatrixData = {} as IMatrixData\n\n    protected savedBlendMode: IBlendMode\n\n    constructor(config?: ILeaferCanvasConfig, manager?: ICanvasManager) {\n        super()\n        if (!config) config = minSize\n\n        this.manager = manager\n        this.innerId = IncrementId.create(IncrementId.CNAVAS)\n\n        const { width, height, pixelRatio } = config\n        this.autoLayout = !width || !height\n\n        this.size.pixelRatio = pixelRatio || Platform.devicePixelRatio\n        this.config = config\n\n        this.init()\n    }\n\n    public init(): void { }\n\n    public __createContext(): void {\n        const { view } = this\n        const { contextSettings } = this.config\n        this.context = contextSettings ? view.getContext('2d', contextSettings) : view.getContext('2d')\n        this.__bindContext()\n    }\n\n    // @leafer-in/export rewrite\n\n    public export(_filename: IExportFileType | string, _options?: IExportOptions | number | boolean): string | Promise<any> { return undefined }\n\n    public toBlob(_type?: IExportFileType, _quality?: number): Promise<IBlob> { return undefined }\n\n    public toDataURL(_type?: IExportImageType, _quality?: number): string | Promise<string> { return undefined }\n\n    public saveAs(_filename: string, _quality?: number): Promise<boolean> { return undefined }\n\n    // ---\n\n    public resize(size: IScreenSizeData, safeResize = true): void {\n        if (this.isSameSize(size)) return\n\n        let takeCanvas: ILeaferCanvas\n        if (this.context && !this.unreal && safeResize && this.width) {\n            takeCanvas = this.getSameCanvas()\n            takeCanvas.copyWorld(this)\n        }\n\n        const s = this.size as IObject\n        DataHelper.copyAttrs(s, size, canvasSizeAttrs)\n        canvasSizeAttrs.forEach(key => s[key] || (s[key] = 1)) // fix: width = 0 or height = 0\n\n        this.bounds = new Bounds(0, 0, this.width, this.height)\n\n        this.updateViewSize()\n        this.updateClientBounds()\n\n        if (this.context) {\n\n            this.smooth = this.config.smooth\n\n            if (!this.unreal && takeCanvas) {\n                this.clearWorld(takeCanvas.bounds)\n                this.copyWorld(takeCanvas)\n                takeCanvas.recycle()\n            }\n\n        }\n\n    }\n\n    public updateViewSize(): void { }\n    public updateClientBounds(): void { }\n    public getClientBounds(update?: boolean): IBoundsData {\n        if (update) this.updateClientBounds()\n        return this.clientBounds || this.bounds\n    }\n\n    public startAutoLayout(_autoBounds: IAutoBounds, _listener: IResizeEventListener): void { }\n    public stopAutoLayout(): void { }\n\n    public setCursor(_cursor: ICursorType | ICursorType[]): void { }\n\n    public setWorld(matrix: IMatrixWithOptionHalfData, parentMatrix?: IMatrixData): void {\n        const { pixelRatio, pixelSnap } = this, w = this.worldTransform\n\n        if (parentMatrix) multiplyParent(matrix, parentMatrix, w)\n        pixelScale(matrix, pixelRatio, w)\n\n        if (pixelSnap && !matrix.ignorePixelSnap) {\n            if (matrix.half && (matrix.half * pixelRatio) % 2) w.e = round(w.e - 0.5) + 0.5, w.f = round(w.f - 0.5) + 0.5\n            else w.e = round(w.e), w.f = round(w.f)\n        }\n\n        this.setTransform(w.a, w.b, w.c, w.d, w.e, w.f)\n    }\n\n    public useWorldTransform(worldTransform?: IMatrixData): void {\n        if (worldTransform) this.worldTransform = worldTransform\n        const w = this.worldTransform\n        if (w) this.setTransform(w.a, w.b, w.c, w.d, w.e, w.f)\n    }\n\n    public setStroke(color: string | object, strokeWidth: number, options?: ICanvasStrokeOptions, childOptions?: ICanvasStrokeOptions): void {\n        if (strokeWidth) this.strokeWidth = strokeWidth\n        if (color) this.strokeStyle = color\n        if (options) this.setStrokeOptions(options, childOptions)\n    }\n\n    public setStrokeOptions(options: ICanvasStrokeOptions, childOptions?: ICanvasStrokeOptions): void {\n        let { strokeCap, strokeJoin, dashPattern, dashOffset, miterLimit } = options\n        if (childOptions) {\n            if (childOptions.strokeCap) strokeCap = childOptions.strokeCap\n            if (childOptions.strokeJoin) strokeJoin = childOptions.strokeJoin\n            if (!isUndefined(childOptions.dashPattern)) dashPattern = childOptions.dashPattern\n            if (!isUndefined(childOptions.dashOffset)) dashOffset = childOptions.dashOffset\n            if (childOptions.miterLimit) miterLimit = childOptions.miterLimit\n        }\n        this.strokeCap = strokeCap\n        this.strokeJoin = strokeJoin\n        this.dashPattern = dashPattern\n        this.dashOffset = dashOffset\n        this.miterLimit = miterLimit\n    }\n\n    public saveBlendMode(blendMode: IBlendMode): void {\n        this.savedBlendMode = this.blendMode\n        this.blendMode = blendMode\n    }\n\n    public restoreBlendMode(): void {\n        this.blendMode = this.savedBlendMode\n    }\n\n    // @leafer-ui/interaction rewrite\n\n    public hitFill(_point: IPointData, _fillRule?: IWindingRule): boolean { return true }\n\n    public hitStroke(_point: IPointData, _strokeWidth?: number): boolean { return true }\n\n    public hitPixel(_radiusPoint: IRadiusPointData, _offset?: IPointData, _scale = 1): boolean { return true }\n\n    // ---\n\n    public setWorldShadow(x: number, y: number, blur: number, color?: string): void {\n        const { pixelRatio } = this\n        this.shadowOffsetX = x * pixelRatio\n        this.shadowOffsetY = y * pixelRatio\n        this.shadowBlur = blur * pixelRatio\n        this.shadowColor = color || 'black'\n    }\n\n    public setWorldBlur(blur: number): void {\n        const { pixelRatio } = this\n        this.filter = `blur(${blur * pixelRatio}px)`\n    }\n\n\n    public copyWorld(canvas: ILeaferCanvas, from?: IBoundsData, to?: IBoundsData, blendMode?: IBlendMode, ceilPixel?: boolean): void {\n        if (blendMode) this.blendMode = blendMode\n        if (from) {\n            this.setTempPixelBounds(from, ceilPixel)\n            if (!to) to = tempPixelBounds // to = from\n            else this.setTempPixelBounds2(to, ceilPixel), to = tempPixelBounds2\n\n            this.drawImage(canvas.view as HTMLCanvasElement, tempPixelBounds.x, tempPixelBounds.y, tempPixelBounds.width, tempPixelBounds.height, to.x, to.y, to.width, to.height)\n        } else {\n            this.drawImage(canvas.view as HTMLCanvasElement, 0, 0)\n        }\n        if (blendMode) this.blendMode = 'source-over'\n    }\n\n    public copyWorldToInner(canvas: ILeaferCanvas, fromWorld: IMatrixWithBoundsData, toInnerBounds: IBoundsData, blendMode?: IBlendMode, ceilPixel?: boolean): void {\n        if (fromWorld.b || fromWorld.c) {\n            this.save()\n            this.resetTransform()\n            this.copyWorld(canvas, fromWorld, BoundsHelper.tempToOuterOf(toInnerBounds, fromWorld), blendMode, ceilPixel)\n            this.restore()\n        } else {\n            if (blendMode) this.blendMode = blendMode\n            this.setTempPixelBounds(fromWorld, ceilPixel)\n            this.drawImage(canvas.view as HTMLCanvasElement, tempPixelBounds.x, tempPixelBounds.y, tempPixelBounds.width, tempPixelBounds.height, toInnerBounds.x, toInnerBounds.y, toInnerBounds.width, toInnerBounds.height)\n            if (blendMode) this.blendMode = 'source-over'\n        }\n    }\n\n    public copyWorldByReset(canvas: ILeaferCanvas, from?: IBoundsData, to?: IBoundsData, blendMode?: IBlendMode, onlyResetTransform?: boolean, ceilPixel?: boolean): void {\n        this.resetTransform()\n        this.copyWorld(canvas, from, to, blendMode, ceilPixel)\n        if (!onlyResetTransform) this.useWorldTransform() // restore world transform\n    }\n\n    public useGrayscaleAlpha(bounds: IBoundsData): void { // 先实现功能，后期需通过 shader 优化性能\n        this.setTempPixelBounds(bounds, true, true)\n\n        let alpha: number, pixel: number\n        const { context } = this, imageData = context.getImageData(tempPixelBounds.x, tempPixelBounds.y, tempPixelBounds.width, tempPixelBounds.height), { data } = imageData\n\n        for (let i = 0, len = data.length; i < len; i += 4) {\n            pixel = data[i] * 0.299 + data[i + 1] * 0.587 + data[i + 2] * 0.114\n            if (alpha = data[i + 3]) data[i + 3] = alpha === 255 ? pixel : alpha * (pixel / 255)\n        }\n\n        context.putImageData(imageData, tempPixelBounds.x, tempPixelBounds.y)\n    }\n\n    public useMask(maskCanvas: ILeaferCanvas, fromBounds?: IBoundsData, toBounds?: IBoundsData): void {\n        this.copyWorld(maskCanvas, fromBounds, toBounds, 'destination-in')\n    }\n\n    public useEraser(eraserCanvas: ILeaferCanvas, fromBounds?: IBoundsData, toBounds?: IBoundsData): void {\n        this.copyWorld(eraserCanvas, fromBounds, toBounds, 'destination-out')\n    }\n\n    public fillWorld(bounds: IBoundsData, color: string | object, blendMode?: IBlendMode, ceilPixel?: boolean): void {\n        if (blendMode) this.blendMode = blendMode\n        this.fillStyle = color\n        this.setTempPixelBounds(bounds, ceilPixel)\n        this.fillRect(tempPixelBounds.x, tempPixelBounds.y, tempPixelBounds.width, tempPixelBounds.height)\n        if (blendMode) this.blendMode = 'source-over'\n    }\n\n    public strokeWorld(bounds: IBoundsData, color: string | object, blendMode?: IBlendMode, ceilPixel?: boolean): void {\n        if (blendMode) this.blendMode = blendMode\n        this.strokeStyle = color\n        this.setTempPixelBounds(bounds, ceilPixel)\n        this.strokeRect(tempPixelBounds.x, tempPixelBounds.y, tempPixelBounds.width, tempPixelBounds.height)\n        if (blendMode) this.blendMode = 'source-over'\n    }\n\n    public clipWorld(bounds: IBoundsData, ceilPixel: boolean = true): void {\n        this.beginPath()\n        this.setTempPixelBounds(bounds, ceilPixel)\n        this.rect(tempPixelBounds.x, tempPixelBounds.y, tempPixelBounds.width, tempPixelBounds.height)\n        this.clip()\n\n    }\n\n    public clipUI(ruleData: IWindingRuleData): void {\n        ruleData.windingRule ? this.clip(ruleData.windingRule) : this.clip()\n    }\n\n    public clearWorld(bounds: IBoundsData, ceilPixel: boolean = true): void {\n        this.setTempPixelBounds(bounds, ceilPixel)\n        this.clearRect(tempPixelBounds.x, tempPixelBounds.y, tempPixelBounds.width, tempPixelBounds.height)\n    }\n\n    public clear(): void {\n        const { pixelRatio } = this\n        this.clearRect(0, 0, this.width * pixelRatio + 2, this.height * pixelRatio + 2)\n    }\n\n\n    // other\n\n    protected setTempPixelBounds(bounds: IBoundsData, ceil?: boolean, intersect?: boolean): void {\n        this.copyToPixelBounds(tempPixelBounds, bounds, ceil, intersect)\n    }\n\n    protected setTempPixelBounds2(bounds: IBoundsData, ceil?: boolean, intersect?: boolean): void {\n        this.copyToPixelBounds(tempPixelBounds2, bounds, ceil, intersect)\n    }\n\n    protected copyToPixelBounds(pixelBounds: IBounds, bounds: IBoundsData, ceil?: boolean, intersect?: boolean): void {\n        pixelBounds.set(bounds)\n        if (intersect) pixelBounds.intersect(this.bounds)\n        pixelBounds.scale(this.pixelRatio)\n        if (ceil) pixelBounds.ceil()\n    }\n\n    public isSameSize(size: IScreenSizeData): boolean {\n        return this.width === size.width && this.height === size.height && (!size.pixelRatio || this.pixelRatio === size.pixelRatio)\n    }\n\n    // 需要有 manager变量\n    public getSameCanvas(useSameWorldTransform?: boolean, useSameSmooth?: boolean): ILeaferCanvas {\n        const { size, pixelSnap } = this, canvas = this.manager ? this.manager.get(size) : Creator.canvas({ ...size })\n        canvas.save()\n\n        if (useSameWorldTransform) copy(canvas.worldTransform, this.worldTransform), canvas.useWorldTransform()\n        if (useSameSmooth) canvas.smooth = this.smooth\n        canvas.pixelSnap !== pixelSnap && (canvas.pixelSnap = pixelSnap)\n\n        return canvas\n    }\n\n    public recycle(clearBounds?: IBoundsData): void {\n        if (!this.recycled) {\n            this.restore()\n            clearBounds ? this.clearWorld(clearBounds) : this.clear()\n            this.manager ? this.manager.recycle(this) : this.destroy()\n        }\n    }\n\n    public updateRender(_bounds?: IBoundsData): void { }\n\n    public unrealCanvas(): void { }\n\n    public destroy(): void {\n        this.manager = this.view = this.parentView = null\n    }\n}","import { IPathCommandData, IPathCreator } from '@leafer/interface'\n\nexport const PathHelper = {\n    // index.ts rewrite\n    creator: {} as IPathCreator,\n    parse(_pathString: string, _curveMode?: boolean): IPathCommandData { return undefined },\n    convertToCanvasData(_old: IPathCommandData, _curveMode?: boolean): IPathCommandData { return undefined }\n}","import { INumberMap, IStringMap } from '@leafer/interface'\n\nexport const CanvasCommandOnlyMap: INumberMap = {\n\n    N: 21, // rect\n    D: 22, // roundRect\n    X: 23, // simple roundRect\n    G: 24, // ellipse\n    F: 25, // simple ellipse\n    O: 26, // arc\n    P: 27, // simple arc\n    U: 28 // arcTo\n\n}\n\nexport const PathCommandMap: INumberMap = {\n\n    // svg and canvas\n\n    M: 1, // moveto\n    m: 10,\n    L: 2, // lineto\n    l: 20,\n    H: 3, // horizontal lineto\n    h: 30,\n    V: 4, // vertical lineto\n    v: 40,\n    C: 5, // curveto\n    c: 50,\n    S: 6, // smooth curveto\n    s: 60,\n    Q: 7, // quadratic Belzier curve\n    q: 70,\n    T: 8, // smooth quadratic Belzier curveto\n    t: 80,\n    A: 9, //e lliptical Arc\n    a: 90,\n    Z: 11, // closepath\n    z: 11,\n\n    R: 12,  // Catmull Rom\n\n    // canvas\n    ...CanvasCommandOnlyMap\n}\n\nexport const PathCommandLengthMap: INumberMap = {\n\n    M: 3, //moveto\n    m: 3,\n    L: 3, //lineto\n    l: 3,\n    H: 2, //horizontal lineto\n    h: 2,\n    V: 2, //vertical lineto\n    v: 2,\n    C: 7, //curveto\n    c: 7,\n    S: 5, //smooth curveto\n    s: 5,\n    Q: 5, //quadratic Belzier curve\n    q: 5,\n    T: 3, //smooth quadratic Belzier curveto\n    t: 3,\n    A: 8, //elliptical Arc\n    a: 8,\n    Z: 1, //closepath\n    z: 1,\n\n    // canvas\n\n    N: 5, // rect\n    D: 9, // roundRect\n    X: 6, // simple roundRect\n    G: 9, // ellipse\n    F: 5, // simple ellipse\n    O: 7, // arc\n    P: 4, // simple arc\n    U: 6 // arcTo\n\n}\n\nexport const NeedConvertToCanvasCommandMap: INumberMap = { // convert to:  M L C Q Z\n\n    // M: 1, //moveto\n    m: 10,\n    // L: 2, //lineto\n    l: 20,\n    H: 3, //horizontal lineto\n    h: 30,\n    V: 4, //vertical lineto\n    v: 40,\n    // C: 5, //curveto\n    c: 50,\n    S: 6, //smooth curveto\n    s: 60,\n    // Q: 7, //quadratic Belzier curve\n    q: 70,\n    T: 8, //smooth quadratic Belzier curveto\n    t: 80,\n    A: 9, //elliptical Arc\n    a: 90,\n    // Z: 11, //closepath\n    // z: 11\n\n}\n\n\nexport const NeedConvertToCurveCommandMap: INumberMap = {\n    ...NeedConvertToCanvasCommandMap,\n    ...CanvasCommandOnlyMap\n}\n\nconst P = PathCommandMap\n\nexport const PathNumberCommandMap: IStringMap = {}\nfor (let key in P) {\n    PathNumberCommandMap[P[key]] = key\n}\n// {1: 'M'}\n\nexport const PathNumberCommandLengthMap: INumberMap = {}\nfor (let key in P) {\n    PathNumberCommandLengthMap[P[key]] = PathCommandLengthMap[key]\n}\n// {1: 3}","import { IPathDrawer } from '@leafer/interface'\nimport { MathHelper } from '@leafer/math'\n\nexport const RectHelper = {\n\n    drawRoundRect(drawer: IPathDrawer, x: number, y: number, width: number, height: number, cornerRadius: number | number[]): void {\n        const data = MathHelper.fourNumber(cornerRadius, Math.min(width / 2, height / 2))\n\n        const right = x + width\n        const bottom = y + height\n\n        data[0] ? drawer.moveTo(x + data[0], y) : drawer.moveTo(x, y)\n        data[1] ? drawer.arcTo(right, y, right, bottom, data[1]) : drawer.lineTo(right, y)\n        data[2] ? drawer.arcTo(right, bottom, x, bottom, data[2]) : drawer.lineTo(right, bottom)\n        data[3] ? drawer.arcTo(x, bottom, x, y, data[3]) : drawer.lineTo(x, bottom)\n        data[0] ? drawer.arcTo(x, y, right, y, data[0]) : drawer.lineTo(x, y)\n    }\n\n}","import { IPointData, ITwoPointBoundsData, IPathCommandData } from '@leafer/interface'\nimport { OneRadian, PI2, PI_2, PointHelper, TwoPointBoundsHelper } from '@leafer/math'\n\nimport { PathCommandMap } from './PathCommandMap'\nimport { RectHelper } from './RectHelper'\nimport { PathHelper } from './PathHelper'\n\n\nconst { sin, cos, hypot, atan2, ceil, abs, PI, sqrt, pow } = Math\nconst { setPoint, addPoint } = TwoPointBoundsHelper\nconst { set, toNumberPoints } = PointHelper\nconst { M, L, C, Q, Z } = PathCommandMap\nconst tempPoint = {} as IPointData\n\nexport const BezierHelper = {\n\n    points(data: IPathCommandData, originPoints: number[] | IPointData[], curve?: boolean | number, close?: boolean): void {\n\n        let points = toNumberPoints(originPoints)\n\n        data.push(M, points[0], points[1])\n\n        if (curve && points.length > 5) {\n\n            let aX: number, aY: number, bX: number, bY: number, cX: number, cY: number, c1X: number, c1Y: number, c2X: number, c2Y: number\n            let baX: number, baY: number, ba: number, cb: number, d: number, len = points.length\n            const t = curve === true ? 0.5 : curve as number\n\n            if (close) {\n                points = [points[len - 2], points[len - 1], ...points, points[0], points[1], points[2], points[3]]\n                len = points.length\n            }\n\n            for (let i = 2; i < len - 2; i += 2) {\n                aX = points[i - 2]\n                aY = points[i - 1]\n\n                bX = points[i]\n                bY = points[i + 1]\n\n                cX = points[i + 2]\n                cY = points[i + 3]\n\n                baX = bX - aX\n                baY = bY - aY\n\n                ba = sqrt(pow(baX, 2) + pow(baY, 2))\n                cb = sqrt(pow(cX - bX, 2) + pow(cY - bY, 2))\n\n                if (!ba && !cb) continue\n\n                d = ba + cb\n                ba = (t * ba) / d\n                cb = (t * cb) / d\n\n                cX -= aX\n                cY -= aY\n\n                c1X = bX - ba * cX\n                c1Y = bY - ba * cY\n\n                if (i === 2) {\n                    if (!close) data.push(Q, c1X, c1Y, bX, bY)\n                } else {\n                    if (baX || baY) data.push(C, c2X, c2Y, c1X, c1Y, bX, bY) // 当前点与上一个点距离为0时，需要过滤\n                }\n\n                c2X = bX + cb * cX\n                c2Y = bY + cb * cY\n            }\n\n            if (!close) data.push(Q, c2X, c2Y, points[len - 2], points[len - 1])\n\n        } else {\n\n            for (let i = 2, len = points.length; i < len; i += 2) {\n                data.push(L, points[i], points[i + 1])\n            }\n\n        }\n\n        if (close) data.push(Z)\n    },\n\n    rect(data: IPathCommandData, x: number, y: number, width: number, height: number) {\n        PathHelper.creator.path = data\n        PathHelper.creator.moveTo(x, y).lineTo(x + width, y).lineTo(x + width, y + height).lineTo(x, y + height).lineTo(x, y)\n    },\n\n    roundRect(data: IPathCommandData, x: number, y: number, width: number, height: number, radius: number | number[]): void {\n        PathHelper.creator.path = []\n        RectHelper.drawRoundRect(PathHelper.creator, x, y, width, height, radius)\n        data.push(...PathHelper.convertToCanvasData(PathHelper.creator.path, true))\n    },\n\n    arcTo(data: IPathCommandData | null | void, fromX: number, fromY: number, x1: number, y1: number, toX: number, toY: number, radius: number, setPointBounds?: ITwoPointBoundsData, setEndPoint?: IPointData, setStartPoint?: IPointData): void {\n        const BAx = x1 - fromX\n        const BAy = y1 - fromY\n        const CBx = toX - x1\n        const CBy = toY - y1\n\n        let startRadian = atan2(BAy, BAx)\n        let endRadian = atan2(CBy, CBx)\n\n        const lenBA = hypot(BAx, BAy)\n        const lenCB = hypot(CBx, CBy)\n\n        let totalRadian = endRadian - startRadian\n        if (totalRadian < 0) totalRadian += PI2\n\n        if (lenBA < 1e-12 || lenCB < 1e-12 || totalRadian < 1e-12 || abs(totalRadian - PI) < 1e-12) {\n            if (data) data.push(L, x1, y1)\n            if (setPointBounds) {\n                setPoint(setPointBounds, fromX, fromY)\n                addPoint(setPointBounds, x1, y1)\n            }\n            if (setStartPoint) set(setStartPoint, fromX, fromY)\n            if (setEndPoint) set(setEndPoint, x1, y1)\n            return\n        }\n\n        const anticlockwise = BAx * CBy - CBx * BAy < 0\n        const sign = anticlockwise ? -1 : 1\n        const c = radius / cos(totalRadian / 2)\n\n        const centerX = x1 + c * cos(startRadian + totalRadian / 2 + PI_2 * sign)\n        const centerY = y1 + c * sin(startRadian + totalRadian / 2 + PI_2 * sign)\n        startRadian -= PI_2 * sign\n        endRadian -= PI_2 * sign\n\n        return ellipse(data, centerX, centerY, radius, radius, 0, startRadian / OneRadian, endRadian / OneRadian, anticlockwise, setPointBounds, setEndPoint, setStartPoint)\n    },\n\n    arc(data: IPathCommandData | null | void, x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise?: boolean, setPointBounds?: ITwoPointBoundsData, setEndPoint?: IPointData, setStartPoint?: IPointData): void {\n        return ellipse(data, x, y, radius, radius, 0, startAngle, endAngle, anticlockwise, setPointBounds, setEndPoint, setStartPoint)\n    },\n\n    ellipse(data: IPathCommandData | null | void, cx: number, cy: number, radiusX: number, radiusY: number, rotation: number, startAngle: number, endAngle: number, anticlockwise?: boolean, setPointBounds?: ITwoPointBoundsData, setEndPoint?: IPointData, setStartPoint?: IPointData): void {\n        const rotationRadian = rotation * OneRadian\n        const rotationSin = sin(rotationRadian)\n        const rotationCos = cos(rotationRadian)\n\n        let startRadian = startAngle * OneRadian\n        let endRadian = endAngle * OneRadian\n\n        if (startRadian > PI) startRadian -= PI2\n        if (endRadian < 0) endRadian += PI2\n\n        let totalRadian = endRadian - startRadian\n        if (totalRadian < 0) totalRadian += PI2\n        else if (totalRadian > PI2) totalRadian -= PI2\n\n        if (anticlockwise) totalRadian -= PI2\n\n\n        const parts = ceil(abs(totalRadian / PI_2))\n        const partRadian = totalRadian / parts\n        const partRadian4Sin = sin(partRadian / 4)\n        const control = 8 / 3 * partRadian4Sin * partRadian4Sin / sin(partRadian / 2)\n\n        endRadian = startRadian + partRadian\n\n        let startCos = cos(startRadian)\n        let startSin = sin(startRadian)\n        let endCos: number, endSin: number\n\n        let x: number, y: number, x1: number, y1: number, x2: number, y2: number\n\n        let startX = x = rotationCos * radiusX * startCos - rotationSin * radiusY * startSin\n        let startY = y = rotationSin * radiusX * startCos + rotationCos * radiusY * startSin\n\n        let fromX = cx + x, fromY = cy + y\n\n        if (data) data.push(data.length ? L : M, fromX, fromY)\n        if (setPointBounds) setPoint(setPointBounds, fromX, fromY)\n        if (setStartPoint) set(setStartPoint, fromX, fromY)\n\n        for (let i = 0; i < parts; i++) {\n\n            endCos = cos(endRadian)\n            endSin = sin(endRadian)\n\n            x = rotationCos * radiusX * endCos - rotationSin * radiusY * endSin\n            y = rotationSin * radiusX * endCos + rotationCos * radiusY * endSin\n            x1 = cx + startX - control * (rotationCos * radiusX * startSin + rotationSin * radiusY * startCos)\n            y1 = cy + startY - control * (rotationSin * radiusX * startSin - rotationCos * radiusY * startCos)\n            x2 = cx + x + control * (rotationCos * radiusX * endSin + rotationSin * radiusY * endCos)\n            y2 = cy + y + control * (rotationSin * radiusX * endSin - rotationCos * radiusY * endCos)\n\n            if (data) data.push(C, x1, y1, x2, y2, cx + x, cy + y)\n            if (setPointBounds) toTwoPointBounds(cx + startX, cy + startY, x1, y1, x2, y2, cx + x, cy + y, setPointBounds, true)\n\n            startX = x\n            startY = y\n            startCos = endCos\n            startSin = endSin\n            startRadian = endRadian\n            endRadian += partRadian\n        }\n\n        if (setEndPoint) set(setEndPoint, cx + x, cy + y)\n\n    },\n\n    quadraticCurveTo(data: IPathCommandData, fromX: number, fromY: number, x1: number, y1: number, toX: number, toY: number): void {\n        data.push(C, (fromX + 2 * x1) / 3, (fromY + 2 * y1) / 3, (toX + 2 * x1) / 3, (toY + 2 * y1) / 3, toX, toY)\n    },\n\n    toTwoPointBoundsByQuadraticCurve(fromX: number, fromY: number, x1: number, y1: number, toX: number, toY: number, pointBounds: ITwoPointBoundsData, addMode?: boolean): void {\n        toTwoPointBounds(fromX, fromY, (fromX + 2 * x1) / 3, (fromY + 2 * y1) / 3, (toX + 2 * x1) / 3, (toY + 2 * y1) / 3, toX, toY, pointBounds, addMode)\n    },\n\n    toTwoPointBounds(fromX: number, fromY: number, x1: number, y1: number, x2: number, y2: number, toX: number, toY: number, pointBounds: ITwoPointBoundsData, addMode?: boolean): void {\n\n        const tList = []\n        let a, b, c, t, t1, t2, v, sqrtV\n        let f = fromX, z1 = x1, z2 = x2, o = toX\n\n        for (let i = 0; i < 2; ++i) {\n\n            if (i == 1) {\n                f = fromY, z1 = y1, z2 = y2, o = toY\n            }\n\n            a = -3 * f + 9 * z1 - 9 * z2 + 3 * o\n            b = 6 * f - 12 * z1 + 6 * z2\n            c = 3 * z1 - 3 * f\n\n            if (Math.abs(a) < 1e-12) {\n                if (Math.abs(b) < 1e-12) continue\n                t = -c / b\n                if (0 < t && t < 1) tList.push(t)\n                continue\n            }\n\n            v = b * b - 4 * c * a\n            sqrtV = Math.sqrt(v)\n            if (v < 0) continue\n\n            t1 = (-b + sqrtV) / (2 * a)\n            if (0 < t1 && t1 < 1) tList.push(t1)\n            t2 = (-b - sqrtV) / (2 * a)\n            if (0 < t2 && t2 < 1) tList.push(t2)\n        }\n\n        addMode ? addPoint(pointBounds, fromX, fromY) : setPoint(pointBounds, fromX, fromY)\n        addPoint(pointBounds, toX, toY)\n\n        for (let i = 0, len = tList.length; i < len; i++) {\n            getPointAndSet(tList[i], fromX, fromY, x1, y1, x2, y2, toX, toY, tempPoint)\n            addPoint(pointBounds, tempPoint.x, tempPoint.y)\n        }\n\n    },\n\n    getPointAndSet(t: number, fromX: number, fromY: number, x1: number, y1: number, x2: number, y2: number, toX: number, toY: number, setPoint: IPointData): void {\n        const o = 1 - t, a = o * o * o, b = 3 * o * o * t, c = 3 * o * t * t, d = t * t * t\n        setPoint.x = a * fromX + b * x1 + c * x2 + d * toX\n        setPoint.y = a * fromY + b * y1 + c * y2 + d * toY\n    },\n\n    getPoint(t: number, fromX: number, fromY: number, x1: number, y1: number, x2: number, y2: number, toX: number, toY: number): IPointData {\n        const point = {} as IPointData\n        getPointAndSet(t, fromX, fromY, x1, y1, x2, y2, toX, toY, point)\n        return point\n    },\n\n    getDerivative(t: number, fromV: number, v1: number, v2: number, toV: number): number { // 导数\n        const o = 1 - t\n        return 3 * o * o * (v1 - fromV) + 6 * o * t * (v2 - v1) + 3 * t * t * (toV - v2)\n    },\n\n}\n\nconst { getPointAndSet, toTwoPointBounds, ellipse } = BezierHelper","import { IPathCommandData } from '@leafer/interface'\nimport { OneRadian, PI2 } from '@leafer/math'\nimport { Platform } from '@leafer/platform'\n\nimport { PathCommandMap } from './PathCommandMap'\nimport { BezierHelper } from './BezierHelper'\n\n\nconst { sin, cos, sqrt, atan2 } = Math\nconst { ellipse } = BezierHelper\n\nexport const EllipseHelper = {\n\n    // svg \n    ellipticalArc(data: IPathCommandData, fromX: number, fromY: number, radiusX: number, radiusY: number, rotation: number, largeFlag: number, sweepFlag: number, toX: number, toY: number, curveMode?: boolean): void {\n\n        const halfX = (toX - fromX) / 2\n        const halfY = (toY - fromY) / 2\n\n        const rotationRadian = rotation * OneRadian\n        const rotationSin = sin(rotationRadian)\n        const rotationCos = cos(rotationRadian)\n\n        const px = -rotationCos * halfX - rotationSin * halfY\n        const py = -rotationCos * halfY + rotationSin * halfX\n        const rxSquare = radiusX * radiusX\n        const rySquare = radiusY * radiusY\n        const pySquare = py * py\n        const pxSquare = px * px\n\n        const a = rxSquare * rySquare - rxSquare * pySquare - rySquare * pxSquare\n        let s = 0\n\n        if (a < 0) {\n            const t = sqrt(1 - a / (rxSquare * rySquare))\n            radiusX *= t\n            radiusY *= t\n        } else {\n            s = (largeFlag === sweepFlag ? -1 : 1) * sqrt(a / (rxSquare * pySquare + rySquare * pxSquare))\n        }\n\n        const cx = s * radiusX * py / radiusY\n        const cy = -s * radiusY * px / radiusX\n\n        const startRadian = atan2((py - cy) / radiusY, (px - cx) / radiusX)\n        const endRadian = atan2((-py - cy) / radiusY, (-px - cx) / radiusX)\n\n        let totalRadian = endRadian - startRadian\n\n        if (sweepFlag === 0 && totalRadian > 0) {\n            totalRadian -= PI2\n        } else if (sweepFlag === 1 && totalRadian < 0) {\n            totalRadian += PI2\n        }\n\n        const centerX = fromX + halfX + rotationCos * cx - rotationSin * cy\n        const centerY = fromY + halfY + rotationSin * cx + rotationCos * cy\n\n        const anticlockwise = totalRadian < 0 ? 1 : 0\n\n        if (curveMode || Platform.ellipseToCurve) {\n            ellipse(data, centerX, centerY, radiusX, radiusY, rotation, startRadian / OneRadian, endRadian / OneRadian, anticlockwise as unknown as boolean)\n        } else {\n            if (radiusX === radiusY && !rotation) {\n                data.push(PathCommandMap.O, centerX, centerY, radiusX, startRadian / OneRadian, endRadian / OneRadian, anticlockwise)\n            } else {\n                data.push(PathCommandMap.G, centerX, centerY, radiusX, radiusY, rotation, startRadian / OneRadian, endRadian / OneRadian, anticlockwise)\n            }\n        }\n    }\n\n}\n","import { IPathCommandNode, IPathCommandData, IPathNodeBase } from '@leafer/interface'\n\n// 路径节点辅助(适合可视化编辑)，提供接口（需重写）\nexport const PathCommandNodeHelper = {\n    toCommand(_nodes: IPathCommandNode[] | IPathNodeBase[]): IPathCommandData {\n        return []\n    },\n    toNode(_data: IPathCommandData): IPathCommandNode[] {\n        return []\n    }\n}","import { IPathCommandData, IPathCommandNode, IPathCommandObject, IPointData } from '@leafer/interface'\nimport { MathHelper, StringNumberMap } from '@leafer/math'\nimport { Debug } from '@leafer/debug'\n\nimport { PathCommandMap as Command, NeedConvertToCanvasCommandMap, NeedConvertToCurveCommandMap, PathCommandLengthMap, PathNumberCommandMap, PathNumberCommandLengthMap } from './PathCommandMap'\nimport { BezierHelper } from './BezierHelper'\nimport { EllipseHelper } from './EllipseHelper'\nimport { PathCommandNodeHelper } from './PathCommandNodeHelper'\n\n\ninterface ICurrentCommand {\n    name?: number\n    length?: number\n    index?: number\n    dot?: number\n}\n\n\nconst { M, m, L, l, H, h, V, v, C, c, S, s, Q, q, T, t, A, a, Z, z, N, D, X, G, F, O, P, U } = Command\nconst { rect, roundRect, arcTo, arc, ellipse, quadraticCurveTo } = BezierHelper\nconst { ellipticalArc } = EllipseHelper\nconst debug = Debug.get('PathConvert')\n\nconst setEndPoint = {} as IPointData\n\nexport const PathConvert = {\n\n    current: { dot: 0 } as ICurrentCommand,\n\n    stringify(data: IPathCommandData, floatLength?: number): string {\n        let i = 0, len = data.length, count: number, str: string = '', command: number, lastCommand: number\n        while (i < len) {\n            command = data[i]\n            count = PathNumberCommandLengthMap[command]\n            if (command === lastCommand) {\n                str += ' ' // 重复的命令可以省略\n            } else {\n                str += PathNumberCommandMap[command]\n            }\n\n            for (let j = 1; j < count; j++) {\n                str += MathHelper.float(data[i + j], floatLength);\n                (j === count - 1) || (str += ' ')\n            }\n\n            lastCommand = command\n            i += count\n        }\n        return str\n    },\n\n    parse(pathString: string, curveMode?: boolean): IPathCommandData {\n\n        let needConvert: boolean, char: string, lastChar: string, num = ''\n        const data: IPathCommandData = []\n        const convertCommand = curveMode ? NeedConvertToCurveCommandMap : NeedConvertToCanvasCommandMap\n\n        for (let i = 0, len = pathString.length; i < len; i++) {\n\n            char = pathString[i]\n\n            if (StringNumberMap[char]) {\n\n                if (char === '.') {\n                    if (current.dot) { pushData(data, num); num = '' } //  .375.375\n                    current.dot++\n                }\n\n                if (num === '0' && char !== '.') { pushData(data, num); num = '' } //  00 01\n\n                num += char\n\n            } else if (Command[char]) {\n\n                if (num) { pushData(data, num); num = '' }\n\n                current.name = Command[char]\n                current.length = PathCommandLengthMap[char]\n                current.index = 0\n                pushData(data, current.name)\n\n                if (!needConvert && convertCommand[char]) needConvert = true\n\n            } else {\n\n                if (char === '-' || char === '+') {\n\n                    if (lastChar === 'e' || lastChar === 'E') { // L45e-12  21e+22\n                        num += char\n                    } else {\n                        if (num) pushData(data, num) // L-34-35 L+12+28\n                        num = char\n                    }\n\n                } else {\n                    if (num) { pushData(data, num); num = '' }\n                }\n\n            }\n\n            lastChar = char\n\n        }\n\n        if (num) pushData(data, num)\n\n        return needConvert ? PathConvert.toCanvasData(data, curveMode) : data\n    },\n\n    toCanvasData(old: IPathCommandData, curveMode?: boolean): IPathCommandData {\n\n        let x = 0, y = 0, x1 = 0, y1 = 0, i = 0, len = old.length, controlX: number, controlY: number, command: number, lastCommand: number, smooth: boolean\n        const data: IPathCommandData = []\n\n        while (i < len) {\n\n            command = old[i]\n\n            switch (command) {\n                //moveto(x, y)\n                case m:\n                    old[i + 1] += x\n                    old[i + 2] += y\n                case M:\n                    x = old[i + 1]\n                    y = old[i + 2]\n                    data.push(M, x, y)\n                    i += 3\n                    break\n\n                //horizontal lineto(x)\n                case h:\n                    old[i + 1] += x\n                case H:\n                    x = old[i + 1]\n                    data.push(L, x, y)\n                    i += 2\n                    break\n\n                //vertical lineto(y)\n                case v:\n                    old[i + 1] += y\n                case V:\n                    y = old[i + 1]\n                    data.push(L, x, y)\n                    i += 2\n                    break\n\n                //lineto(x,y)\n                case l:\n                    old[i + 1] += x\n                    old[i + 2] += y\n                case L:\n                    x = old[i + 1]\n                    y = old[i + 2]\n                    data.push(L, x, y)\n                    i += 3\n                    break\n\n                //smooth bezierCurveTo(x2, y2, x, y)\n                case s:  //smooth\n                    old[i + 1] += x\n                    old[i + 2] += y\n                    old[i + 3] += x\n                    old[i + 4] += y\n                    command = S\n                case S:\n                    smooth = (lastCommand === C) || (lastCommand === S)\n                    x1 = smooth ? (x * 2 - controlX) : old[i + 1]\n                    y1 = smooth ? (y * 2 - controlY) : old[i + 2]\n                    controlX = old[i + 1]\n                    controlY = old[i + 2]\n                    x = old[i + 3]\n                    y = old[i + 4]\n                    data.push(C, x1, y1, controlX, controlY, x, y)\n                    i += 5\n                    break\n\n                //bezierCurveTo(x1, y1, x2, y2, x, y)\n                case c:\n                    old[i + 1] += x\n                    old[i + 2] += y\n                    old[i + 3] += x\n                    old[i + 4] += y\n                    old[i + 5] += x\n                    old[i + 6] += y\n                    command = C\n                case C:\n                    controlX = old[i + 3]\n                    controlY = old[i + 4]\n                    x = old[i + 5]\n                    y = old[i + 6]\n                    data.push(C, old[i + 1], old[i + 2], controlX, controlY, x, y)\n                    i += 7\n                    break\n\n                //smooth quadraticCurveTo(x, y)\n                case t:\n                    old[i + 1] += x\n                    old[i + 2] += y\n                    command = T\n                case T:  //smooth\n                    smooth = (lastCommand === Q) || (lastCommand === T)\n                    controlX = smooth ? (x * 2 - controlX) : old[i + 1]\n                    controlY = smooth ? (y * 2 - controlY) : old[i + 2]\n                    curveMode ? quadraticCurveTo(data, x, y, controlX, controlY, old[i + 1], old[i + 2]) : data.push(Q, controlX, controlY, old[i + 1], old[i + 2])\n                    x = old[i + 1]\n                    y = old[i + 2]\n                    i += 3\n                    break\n\n                //quadraticCurveTo(x1, y1, x, y)\n                case q:\n                    old[i + 1] += x\n                    old[i + 2] += y\n                    old[i + 3] += x\n                    old[i + 4] += y\n                    command = Q\n                case Q:\n                    controlX = old[i + 1]\n                    controlY = old[i + 2]\n                    curveMode ? quadraticCurveTo(data, x, y, controlX, controlY, old[i + 3], old[i + 4]) : data.push(Q, controlX, controlY, old[i + 3], old[i + 4])\n                    x = old[i + 3]\n                    y = old[i + 4]\n                    i += 5\n                    break\n\n                //ellipticalArc(rx, ry, x-axis-rotation, large-arc-flag, sweep-flag, x, y)\n                case a:\n                    old[i + 6] += x\n                    old[i + 7] += y\n                case A:\n                    ellipticalArc(data, x, y, old[i + 1], old[i + 2], old[i + 3], old[i + 4], old[i + 5], old[i + 6], old[i + 7], curveMode) // convert to canvas ellipse or curve\n                    x = old[i + 6]\n                    y = old[i + 7]\n                    i += 8\n                    break\n                case z:\n                case Z:\n                    data.push(Z)\n                    i++\n                    break\n\n\n                // canvas command\n\n                case N: // rect(x, y, width, height)\n                    x = old[i + 1]\n                    y = old[i + 2]\n                    curveMode ? rect(data, x, y, old[i + 3], old[i + 4]) : copyData(data, old, i, 5)\n                    i += 5\n                    break\n                case D: // roundRect(x, y, width, height, radius1, radius2, radius3, radius4)\n                    x = old[i + 1]\n                    y = old[i + 2]\n                    curveMode ? roundRect(data, x, y, old[i + 3], old[i + 4], [old[i + 5], old[i + 6], old[i + 7], old[i + 8]]) : copyData(data, old, i, 9)\n                    i += 9\n                    break\n                case X: // simple roundRect(x, y, width, height, radius)\n                    x = old[i + 1]\n                    y = old[i + 2]\n                    curveMode ? roundRect(data, x, y, old[i + 3], old[i + 4], old[i + 5]) : copyData(data, old, i, 6)\n                    i += 6\n                    break\n                case G: // ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise)\n                    ellipse(curveMode ? data : copyData(data, old, i, 9), old[i + 1], old[i + 2], old[i + 3], old[i + 4], old[i + 5], old[i + 6], old[i + 7], old[i + 8] as unknown as boolean, null, setEndPoint)\n                    x = setEndPoint.x\n                    y = setEndPoint.y\n                    i += 9\n                    break\n                case F: // simple ellipse(x, y, radiusX, radiusY)\n                    curveMode ? ellipse(data, old[i + 1], old[i + 2], old[i + 3], old[i + 4], 0, 0, 360, false) : copyData(data, old, i, 5)\n                    x = old[i + 1] + old[i + 3]\n                    y = old[i + 2]\n                    i += 5\n                    break\n                case O: // arc(x, y, radius, startAngle, endAngle, anticlockwise)\n                    arc(curveMode ? data : copyData(data, old, i, 7), old[i + 1], old[i + 2], old[i + 3], old[i + 4], old[i + 5], old[i + 6] as unknown as boolean, null, setEndPoint)\n                    x = setEndPoint.x\n                    y = setEndPoint.y\n                    i += 7\n                    break\n                case P: //  simple arc(x, y, radius)\n                    curveMode ? arc(data, old[i + 1], old[i + 2], old[i + 3], 0, 360, false) : copyData(data, old, i, 4)\n                    x = old[i + 1] + old[i + 3]\n                    y = old[i + 2]\n                    i += 4\n                    break\n                case U: // arcTo(x1, y1, x2, y2, radius)\n                    arcTo(curveMode ? data : copyData(data, old, i, 6), x, y, old[i + 1], old[i + 2], old[i + 3], old[i + 4], old[i + 5], null, setEndPoint)\n                    x = setEndPoint.x\n                    y = setEndPoint.y\n                    i += 6\n                    break\n                default:\n                    debug.error(`command: ${command} [index:${i}]`, old)\n                    return data\n            }\n\n            lastCommand = command\n        }\n\n        return data\n\n    },\n\n    objectToCanvasData(list: IPathCommandNode[] | IPathCommandObject[]): IPathCommandData {\n        if (list[0].name.length > 1) { // nodes\n            return PathCommandNodeHelper.toCommand(list as IPathCommandNode[])\n        } else {\n            const data: IPathCommandData = []\n            list.forEach(item => {\n                switch (item.name) {\n                    case 'M': data.push(M, item.x, item.y); break\n                    case 'L': data.push(L, item.x, item.y); break\n                    case 'C': data.push(C, item.x1, item.y1, item.x2, item.y2, item.x, item.y); break\n                    case 'Q': data.push(Q, item.x1, item.y1, item.x, item.y); break\n                    case 'Z': data.push(Z)\n                }\n            })\n            return data\n        }\n    },\n\n    copyData(data: IPathCommandData, old: IPathCommandData, index: number, count: number): void {\n        for (let i = index, end = index + count; i < end; i++) {\n            data.push(old[i])\n        }\n    },\n\n    pushData(data: IPathCommandData, strNum: string | number) {\n        if (current.index === current.length) { // 单个命令，多个数据的情况\n            current.index = 1\n            data.push(current.name)\n        }\n\n        data.push(Number(strNum))\n        current.index++\n        current.dot = 0\n    }\n\n}\n\nconst { current, pushData, copyData } = PathConvert","import { IPathCommandData, IPointData } from '@leafer/interface'\nimport { MathHelper, PointHelper } from '@leafer/math'\nimport { isNumber, isUndefined, isNull } from '@leafer/data'\n\nimport { PathCommandMap } from './PathCommandMap'\nimport { BezierHelper } from './BezierHelper'\n\n\nconst { M, L, C, Q, Z, N, D, X, G, F, O, P, U } = PathCommandMap\nconst { getMinDistanceFrom, getRadianFrom } = PointHelper\nconst { tan, min, abs } = Math\nconst startPoint = {} as IPointData\n\nexport const PathCommandDataHelper = {\n\n    beginPath(data: IPathCommandData): void {\n        data.length = 0\n    },\n\n    // svg and canvas\n\n    moveTo(data: IPathCommandData, x: number, y: number): void {\n        data.push(M, x, y)\n    },\n\n    lineTo(data: IPathCommandData, x: number, y: number): void {\n        data.push(L, x, y)\n    },\n\n    bezierCurveTo(data: IPathCommandData, x1: number, y1: number, x2: number, y2: number, x: number, y: number): void {\n        data.push(C, x1, y1, x2, y2, x, y)\n    },\n\n    quadraticCurveTo(data: IPathCommandData, x1: number, y1: number, x: number, y: number): void {\n        data.push(Q, x1, y1, x, y)\n    },\n\n    closePath(data: IPathCommandData): void {\n        data.push(Z)\n    },\n\n    // canvas\n\n    rect(data: IPathCommandData, x: number, y: number, width: number, height: number): void {\n        data.push(N, x, y, width, height)\n    },\n\n    roundRect(data: IPathCommandData, x: number, y: number, width: number, height: number, cornerRadius: number | number[]): void {\n        if (isNumber(cornerRadius)) {\n            data.push(X, x, y, width, height, cornerRadius)\n        } else {\n            const fourCorners = MathHelper.fourNumber(cornerRadius)\n            if (fourCorners) {\n                data.push(D, x, y, width, height, ...fourCorners)\n            } else {\n                data.push(N, x, y, width, height)\n            }\n        }\n    },\n\n    ellipse(data: IPathCommandData, x: number, y: number, radiusX: number, radiusY: number, rotation?: number, startAngle?: number, endAngle?: number, anticlockwise?: boolean): void {\n        if (radiusX === radiusY) return arc(data, x, y, radiusX, startAngle, endAngle, anticlockwise)\n        if (isNull(rotation)) {\n            data.push(F, x, y, radiusX, radiusY)\n        } else {\n            if (isNull(startAngle)) startAngle = 0\n            if (isNull(endAngle)) endAngle = 360\n            data.push(G, x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise ? 1 : 0)\n        }\n    },\n\n    arc(data: IPathCommandData, x: number, y: number, radius: number, startAngle?: number, endAngle?: number, anticlockwise?: boolean): void {\n        if (isNull(startAngle)) {\n            data.push(P, x, y, radius)\n        } else {\n            if (isNull(startAngle)) startAngle = 0\n            if (isNull(endAngle)) endAngle = 360\n            data.push(O, x, y, radius, startAngle, endAngle, anticlockwise ? 1 : 0)\n        }\n    },\n\n    arcTo(data: IPathCommandData, x1: number, y1: number, x2: number, y2: number, radius: number, lastX?: number, lastY?: number): void {\n        if (!isUndefined(lastX)) {\n            const d = getMinDistanceFrom(lastX, lastY, x1, y1, x2, y2)\n            radius = min(radius, min(d / 2, d / 2 * abs(tan(getRadianFrom(lastX, lastY, x1, y1, x2, y2) / 2))))\n        }\n        data.push(U, x1, y1, x2, y2, radius)\n    },\n\n    // new\n\n    drawEllipse(data: IPathCommandData, x: number, y: number, radiusX: number, radiusY: number, rotation?: number, startAngle?: number, endAngle?: number, anticlockwise?: boolean): void {\n        BezierHelper.ellipse(null, x, y, radiusX, radiusY, isNull(rotation) ? 0 : rotation, isNull(startAngle) ? 0 : startAngle, isNull(endAngle) ? 360 : endAngle, anticlockwise, null, null, startPoint)\n        data.push(M, startPoint.x, startPoint.y)\n        ellipse(data, x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise)\n    },\n\n    drawArc(data: IPathCommandData, x: number, y: number, radius: number, startAngle?: number, endAngle?: number, anticlockwise?: boolean): void {\n        BezierHelper.arc(null, x, y, radius, isNull(startAngle) ? 0 : startAngle, isNull(endAngle) ? 360 : endAngle, anticlockwise, null, null, startPoint)\n        data.push(M, startPoint.x, startPoint.y)\n        arc(data, x, y, radius, startAngle, endAngle, anticlockwise)\n    },\n\n    drawPoints(data: IPathCommandData, points: number[] | IPointData[], curve?: boolean | number, close?: boolean): void {\n        BezierHelper.points(data, points, curve, close)\n    }\n\n}\n\nconst { ellipse, arc } = PathCommandDataHelper\n","import { IPathCommandData, IPathCreator, IPathString, IPointData } from '@leafer/interface'\nimport { isString } from '@leafer/data'\n\nimport { PathCommandDataHelper } from './PathCommandDataHelper'\nimport { PathHelper } from './PathHelper'\n\n\nconst { moveTo, lineTo, quadraticCurveTo, bezierCurveTo, closePath, beginPath, rect, roundRect, ellipse, arc, arcTo, drawEllipse, drawArc, drawPoints } = PathCommandDataHelper\n\nexport class PathCreator implements IPathCreator { //  tip: rewrited Pen\n\n    public set path(value: IPathCommandData) { this.__path = value }\n    public get path() { return this.__path }\n\n    public __path: IPathCommandData // 提供一个更安全的内部变量（比如覆盖给Pen时需要用到，避免与原有属性冲突）\n\n    constructor(path?: IPathCommandData | IPathString) {\n        this.set(path)\n    }\n\n    public set(path?: IPathCommandData | IPathString): PathCreator {\n        this.__path = path ? (isString(path) ? PathHelper.parse(path) : path) : []\n        return this\n    }\n\n    public beginPath(): PathCreator {\n        beginPath(this.__path)\n        this.paint()\n        return this\n    }\n\n    // svg and canvas\n\n    public moveTo(x: number, y: number): PathCreator {\n        moveTo(this.__path, x, y)\n        this.paint()\n        return this\n    }\n\n    public lineTo(x: number, y: number): PathCreator {\n        lineTo(this.__path, x, y)\n        this.paint()\n        return this\n    }\n\n    public bezierCurveTo(x1: number, y1: number, x2: number, y2: number, x: number, y: number): PathCreator {\n        bezierCurveTo(this.__path, x1, y1, x2, y2, x, y)\n        this.paint()\n        return this\n    }\n\n    public quadraticCurveTo(x1: number, y1: number, x: number, y: number): PathCreator {\n        quadraticCurveTo(this.__path, x1, y1, x, y)\n        this.paint()\n        return this\n    }\n\n    public closePath(): PathCreator {\n        closePath(this.__path)\n        this.paint()\n        return this\n    }\n\n    // canvas\n\n    public rect(x: number, y: number, width: number, height: number): PathCreator {\n        rect(this.__path, x, y, width, height)\n        this.paint()\n        return this\n    }\n\n    public roundRect(x: number, y: number, width: number, height: number, cornerRadius: number | number[]): PathCreator {\n        roundRect(this.__path, x, y, width, height, cornerRadius)\n        this.paint()\n        return this\n    }\n\n    public ellipse(x: number, y: number, radiusX: number, radiusY: number, rotation?: number, startAngle?: number, endAngle?: number, anticlockwise?: boolean): PathCreator {\n        ellipse(this.__path, x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise)\n        this.paint()\n        return this\n    }\n\n    public arc(x: number, y: number, radius: number, startAngle?: number, endAngle?: number, anticlockwise?: boolean): PathCreator {\n        arc(this.__path, x, y, radius, startAngle, endAngle, anticlockwise)\n        this.paint()\n        return this\n    }\n\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): PathCreator {\n        arcTo(this.__path, x1, y1, x2, y2, radius)\n        this.paint()\n        return this\n    }\n\n    // moveTo, then draw\n\n    public drawEllipse(x: number, y: number, radiusX: number, radiusY: number, rotation?: number, startAngle?: number, endAngle?: number, anticlockwise?: boolean): PathCreator {\n        drawEllipse(this.__path, x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise)\n        this.paint()\n        return this\n    }\n\n    public drawArc(x: number, y: number, radius: number, startAngle?: number, endAngle?: number, anticlockwise?: boolean): PathCreator {\n        drawArc(this.__path, x, y, radius, startAngle, endAngle, anticlockwise)\n        this.paint()\n        return this\n    }\n\n    public drawPoints(points: number[] | IPointData[], curve?: boolean | number, close?: boolean): PathCreator {\n        drawPoints(this.__path, points, curve, close)\n        this.paint()\n        return this\n    }\n\n    public clearPath(): PathCreator {\n        return this.beginPath()\n    }\n\n    public paint(): void { }\n\n}\n","import { IPathDrawer, IPathCommandData } from '@leafer/interface'\nimport { OneRadian, PI2 } from '@leafer/math'\nimport { Debug } from '@leafer/debug'\n\nimport { PathCommandMap as Command } from './PathCommandMap'\n\n\nconst { M, L, C, Q, Z, N, D, X, G, F, O, P, U } = Command\nconst debug = Debug.get('PathDrawer')\n\nexport const PathDrawer = {\n\n    drawPathByData(drawer: IPathDrawer, data: IPathCommandData): void {\n        if (!data) return\n\n        let command: number\n        let i = 0, len = data.length\n\n        while (i < len) {\n            command = data[i]\n            switch (command) {\n                case M:  //moveto(x, y)\n                    drawer.moveTo(data[i + 1], data[i + 2])\n                    i += 3\n                    break\n                case L:  //lineto(x, y)\n                    drawer.lineTo(data[i + 1], data[i + 2])\n                    i += 3\n                    break\n                case C:  //bezierCurveTo(x1, y1, x2, y2, x, y)\n                    drawer.bezierCurveTo(data[i + 1], data[i + 2], data[i + 3], data[i + 4], data[i + 5], data[i + 6])\n                    i += 7\n                    break\n                case Q:  //quadraticCurveTo(x1, y1, x, y)\n                    drawer.quadraticCurveTo(data[i + 1], data[i + 2], data[i + 3], data[i + 4])\n                    i += 5\n                    break\n                case Z:  //closepath()\n                    drawer.closePath()\n                    i += 1\n                    break\n\n                // canvas command\n\n                case N: // rect(x, y, width, height)\n                    drawer.rect(data[i + 1], data[i + 2], data[i + 3], data[i + 4])\n                    i += 5\n                    break\n                case D: // roundRect(x, y, width, height, radius1, radius2, radius3, radius4)\n                    drawer.roundRect(data[i + 1], data[i + 2], data[i + 3], data[i + 4], [data[i + 5], data[i + 6], data[i + 7], data[i + 8]])\n                    i += 9\n                    break\n                case X: // simple roundRect(x, y, width, height, radius)\n                    drawer.roundRect(data[i + 1], data[i + 2], data[i + 3], data[i + 4], data[i + 5])\n                    i += 6\n                    break\n                case G: // ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise)\n                    drawer.ellipse(data[i + 1], data[i + 2], data[i + 3], data[i + 4], data[i + 5] * OneRadian, data[i + 6] * OneRadian, data[i + 7] * OneRadian, data[i + 8] as unknown as boolean)\n                    i += 9\n                    break\n                case F: // simple ellipse(x, y, radiusX, radiusY)\n                    drawer.ellipse(data[i + 1], data[i + 2], data[i + 3], data[i + 4], 0, 0, PI2, false)\n                    i += 5\n                    break\n                case O: // arc(x, y, radius, startAngle, endAngle, anticlockwise)\n                    drawer.arc(data[i + 1], data[i + 2], data[i + 3], data[i + 4] * OneRadian, data[i + 5] * OneRadian, data[i + 6] as unknown as boolean)\n                    i += 7\n                    break\n                case P: // simple arc(x, y, radius)\n                    drawer.arc(data[i + 1], data[i + 2], data[i + 3], 0, PI2, false)\n                    i += 4\n                    break\n                case U: // arcTo(x1, y1, x2, y2, radius)\n                    drawer.arcTo(data[i + 1], data[i + 2], data[i + 3], data[i + 4], data[i + 5])\n                    i += 6\n                    break\n                default:\n                    debug.error(`command: ${command} [index:${i}]`, data)\n                    return\n            }\n        }\n\n    }\n\n}","import { ITwoPointBoundsData, IPathCommandData, IBoundsData, IPointData } from '@leafer/interface'\nimport { TwoPointBoundsHelper } from '@leafer/math'\nimport { Debug } from '@leafer/debug'\n\nimport { BezierHelper } from './BezierHelper'\nimport { PathCommandMap as Command } from './PathCommandMap'\n\n\nconst { M, L, C, Q, Z, N, D, X, G, F, O, P, U } = Command\nconst { toTwoPointBounds, toTwoPointBoundsByQuadraticCurve, arcTo, arc, ellipse } = BezierHelper\nconst { addPointBounds, copy, addPoint, setPoint, addBounds, toBounds } = TwoPointBoundsHelper\nconst debug = Debug.get('PathBounds')\n\nlet radius: number, radiusX: number, radiusY: number\nconst tempPointBounds = {} as ITwoPointBoundsData\nconst setPointBounds = {} as ITwoPointBoundsData\nconst setEndPoint = {} as IPointData\n\nexport const PathBounds = {\n\n    toBounds(data: IPathCommandData, setBounds: IBoundsData): void {\n        PathBounds.toTwoPointBounds(data, setPointBounds)\n        toBounds(setPointBounds, setBounds)\n    },\n\n    toTwoPointBounds(data: IPathCommandData, setPointBounds: ITwoPointBoundsData): void {\n        if (!data || !data.length) return setPoint(setPointBounds, 0, 0)\n\n        let i = 0, x = 0, y = 0, x1: number, y1: number, toX: number, toY: number, command: number\n\n        const len = data.length\n\n        while (i < len) {\n            command = data[i]\n\n            if (i === 0) {\n                if (command === Z || command === C || command === Q) {\n                    setPoint(setPointBounds, x, y)\n                } else {\n                    setPoint(setPointBounds, data[i + 1], data[i + 2])\n                }\n            }\n\n            switch (command) {\n                case M: //moveto(x, y)\n                case L: //lineto(x, y)\n                    x = data[i + 1]\n                    y = data[i + 2]\n                    addPoint(setPointBounds, x, y)\n                    i += 3\n                    break\n                case C: //bezierCurveTo(x1, y1, x2, y2, x,y)\n                    toX = data[i + 5]\n                    toY = data[i + 6]\n                    toTwoPointBounds(x, y, data[i + 1], data[i + 2], data[i + 3], data[i + 4], toX, toY, tempPointBounds)\n                    addPointBounds(setPointBounds, tempPointBounds)\n                    x = toX\n                    y = toY\n                    i += 7\n                    break\n                case Q: //quadraticCurveTo(x1, y1, x, y)\n                    x1 = data[i + 1]\n                    y1 = data[i + 2]\n                    toX = data[i + 3]\n                    toY = data[i + 4]\n                    toTwoPointBoundsByQuadraticCurve(x, y, x1, y1, toX, toY, tempPointBounds)\n                    addPointBounds(setPointBounds, tempPointBounds)\n                    x = toX\n                    y = toY\n                    i += 5\n                    break\n                case Z: //closepath()\n                    i += 1\n                    break\n\n                // canvas command\n\n                case N: // rect(x, y, width, height)\n                    x = data[i + 1]\n                    y = data[i + 2]\n                    addBounds(setPointBounds, x, y, data[i + 3], data[i + 4])\n                    i += 5\n                    break\n                case D: // roundRect(x, y, width, height, radius1, radius2, radius3, radius4)\n                case X: // simple roundRect(x, y, width, height, radius)\n                    x = data[i + 1]\n                    y = data[i + 2]\n                    addBounds(setPointBounds, x, y, data[i + 3], data[i + 4])\n                    i += (command === D ? 9 : 6)\n                    break\n                case G: // ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise)\n                    ellipse(null, data[i + 1], data[i + 2], data[i + 3], data[i + 4], data[i + 5], data[i + 6], data[i + 7], data[i + 8] as unknown as boolean, tempPointBounds, setEndPoint)\n                    i === 0 ? copy(setPointBounds, tempPointBounds) : addPointBounds(setPointBounds, tempPointBounds)\n                    x = setEndPoint.x\n                    y = setEndPoint.y\n                    i += 9\n                    break\n                case F: // simple ellipse(x, y, radiusX, radiusY)\n                    x = data[i + 1]\n                    y = data[i + 2]\n                    radiusX = data[i + 3]\n                    radiusY = data[i + 4]\n                    addBounds(setPointBounds, x - radiusX, y - radiusY, radiusX * 2, radiusY * 2)\n                    x += radiusX\n                    i += 5\n                    break\n                case O: // arc(x, y, radius, startAngle, endAngle, anticlockwise)\n                    arc(null, data[i + 1], data[i + 2], data[i + 3], data[i + 4], data[i + 5], data[i + 6] as unknown as boolean, tempPointBounds, setEndPoint)\n                    i === 0 ? copy(setPointBounds, tempPointBounds) : addPointBounds(setPointBounds, tempPointBounds)\n                    x = setEndPoint.x\n                    y = setEndPoint.y\n                    i += 7\n                    break\n                case P: // simple arc(x, y, radius)\n                    x = data[i + 1]\n                    y = data[i + 2]\n                    radius = data[i + 3]\n                    addBounds(setPointBounds, x - radius, y - radius, radius * 2, radius * 2)\n                    x += radius\n                    i += 4\n                    break\n                case U: // arcTo(x1, y1, x2, y2, radius)\n                    arcTo(null, x, y, data[i + 1], data[i + 2], data[i + 3], data[i + 4], data[i + 5], tempPointBounds, setEndPoint)\n                    i === 0 ? copy(setPointBounds, tempPointBounds) : addPointBounds(setPointBounds, tempPointBounds)\n                    x = setEndPoint.x\n                    y = setEndPoint.y\n                    i += 6\n                    break\n                default:\n                    debug.error(`command: ${command} [index:${i}]`, data)\n                    return\n            }\n        }\n\n    }\n\n}","import { IPathCommandData } from '@leafer/interface'\nimport { PointHelper } from '@leafer/math'\nimport { isArray } from '@leafer/data'\n\nimport { PathCommandMap as Command, PathNumberCommandLengthMap } from './PathCommandMap'\nimport { PathCommandDataHelper } from './PathCommandDataHelper'\n\n\nconst { M, L, Z } = Command\nconst { getCenterX, getCenterY } = PointHelper\nconst { arcTo } = PathCommandDataHelper\n\nexport const PathCorner = {\n\n    smooth(data: IPathCommandData, cornerRadius: number, _cornerSmoothing?: number): IPathCommandData {\n\n        let command: number, lastCommand: number, commandLen\n        let i = 0, x = 0, y = 0, startX = 0, startY = 0, secondX = 0, secondY = 0, lastX = 0, lastY = 0\n        if (isArray(cornerRadius)) cornerRadius = cornerRadius[0] || 0\n\n        const len = data.length\n        const smooth: IPathCommandData = []\n\n        while (i < len) {\n            command = data[i]\n            switch (command) {\n                case M:  //moveto(x, y)\n                    startX = lastX = data[i + 1]\n                    startY = lastY = data[i + 2]\n                    i += 3\n                    if (data[i] === L) { // next lineTo\n                        secondX = data[i + 1]\n                        secondY = data[i + 2]\n                        smooth.push(M, getCenterX(startX, secondX), getCenterY(startY, secondY))\n                    } else {\n                        smooth.push(M, startX, startY)\n                    }\n                    break\n                case L:  //lineto(x, y)\n                    x = data[i + 1]\n                    y = data[i + 2]\n                    i += 3\n                    switch (data[i]) { // next command\n                        case L: // lineTo()\n                            arcTo(smooth, x, y, data[i + 1], data[i + 2], cornerRadius, lastX, lastY) // use arcTo(x1, y1, x2, y2, radius)\n                            break\n                        case Z: // closePath()\n                            arcTo(smooth, x, y, startX, startY, cornerRadius, lastX, lastY) // use arcTo(x1, y1, x2, y2, radius)\n                            break\n                        default:\n                            smooth.push(L, x, y)\n                    }\n                    lastX = x\n                    lastY = y\n                    break\n                case Z:  //closepath()\n                    if (lastCommand !== Z) { // fix: 重复的 Z 导致的问题\n                        arcTo(smooth, startX, startY, secondX, secondY, cornerRadius, lastX, lastY) // use arcTo(x1, y1, x2, y2, radius)\n                        smooth.push(Z)\n                    }\n                    i += 1\n                    break\n                default:\n                    commandLen = PathNumberCommandLengthMap[command]\n                    for (let j = 0; j < commandLen; j++) smooth.push(data[i + j])\n                    i += commandLen\n            }\n            lastCommand = command\n        }\n\n        if (command !== Z) {\n            smooth[1] = startX\n            smooth[2] = startY\n        }\n\n        return smooth\n    }\n\n}","export { PathHelper } from './PathHelper'\nexport { PathConvert } from './PathConvert'\nexport { PathCreator } from './PathCreator'\nexport { PathCommandDataHelper } from './PathCommandDataHelper'\nexport { PathCommandNodeHelper } from './PathCommandNodeHelper'\nexport { PathDrawer } from './PathDrawer'\nexport { PathBounds } from './PathBounds'\nexport { PathCorner } from './PathCorner'\nexport { BezierHelper } from './BezierHelper'\nexport { EllipseHelper } from './EllipseHelper'\nexport { RectHelper } from './RectHelper'\nexport { PathCommandMap, NeedConvertToCanvasCommandMap, PathNumberCommandMap, PathNumberCommandLengthMap } from './PathCommandMap'\n\n// rewrite, prevent circular references\n\nimport { PathConvert } from './PathConvert'\nimport { PathCreator } from './PathCreator'\nimport { PathHelper } from './PathHelper'\n\nimport { IPathCommandData, IPathString } from '@leafer/interface'\n\n\nexport function path(path?: IPathCommandData | IPathString): PathCreator {\n    return new PathCreator(path)\n}\n\nexport const pen = path()\n\nPathHelper.creator = path()\nPathHelper.parse = PathConvert.parse\nPathHelper.convertToCanvasData = PathConvert.toCanvasData","import { IPathDrawer } from '@leafer/interface'\nimport { RectHelper } from '@leafer/path'\n\n\nconst { drawRoundRect } = RectHelper\n\nexport function roundRect(drawer: IPathDrawer): void {\n\n    if (drawer && !drawer.roundRect) {\n\n        drawer.roundRect = function (x: number, y: number, width: number, height: number, cornerRadius: number | number[]): void {\n\n            drawRoundRect(this as IPathDrawer, x, y, width, height, cornerRadius)\n        }\n    }\n\n}\n\n","import { IPathDrawer } from '@leafer/interface'\n\nimport { roundRect } from './roundRect'\n\nexport function canvasPatch(drawer: IPathDrawer): void {\n    roundRect(drawer)\n}","import { IExportFileType, IStringMap, IExportOptions } from '@leafer/interface'\n\nexport const FileHelper = {\n\n    alphaPixelTypes: ['png', 'webp', 'svg'] as IExportFileType[],\n\n    upperCaseTypeMap: {} as IStringMap,\n\n    mineType(type: string): string {\n        if (!type || type.startsWith('image')) return type\n        if (type === 'jpg') type = 'jpeg'\n        return 'image/' + type\n    },\n\n    fileType(filename: string): string {\n        const l = filename.split('.')\n        return l[l.length - 1]\n    },\n\n    isOpaqueImage(filename: string): boolean {\n        const type = F.fileType(filename)\n        return ['jpg', 'jpeg'].some(item => item === type)\n    },\n\n    getExportOptions(options?: IExportOptions | number | boolean): IExportOptions {\n        switch (typeof options) {\n            case 'object': return options\n            case 'number': return { quality: options }\n            case 'boolean': return { blob: options }\n            default: return {}\n        }\n    }\n\n}\n\nconst F = FileHelper\n\nF.alphaPixelTypes.forEach(type => F.upperCaseTypeMap[type] = type.toUpperCase())","import { IFunction, ITaskItem } from '@leafer/interface'\nimport { IncrementId } from '@leafer/math'\nimport { Debug } from '@leafer/debug'\n\nimport { TaskProcessor } from './TaskProcessor'\n\n\nconst debug = Debug.get('TaskProcessor')\nexport class TaskItem implements ITaskItem {\n\n    readonly id: number\n\n    public parent: TaskProcessor\n\n    public parallel = true\n    public time = 1 // 预估任务需要运行的时间， 毫秒为单位\n\n    public isComplete: boolean\n    public isCancel: boolean\n    public runing: boolean\n\n    public canUse?: IFunction\n\n    public task: IFunction\n\n    constructor(task?: IFunction) {\n        this.id = IncrementId.create(IncrementId.TASK)\n        this.task = task\n    }\n\n    async run(): Promise<void> {\n        try {\n            if (this.isComplete || this.runing) return\n            this.runing = true\n            if (this.canUse && !this.canUse()) return this.cancel()\n            if (this.task) await this.task()\n        } catch (error) {\n            debug.error(error)\n        }\n    }\n\n    public complete(): void {\n        this.isComplete = true\n        this.parent = this.task = this.canUse = null\n    }\n\n    public cancel(): void {\n        this.isCancel = true\n        this.complete()\n    }\n\n}","import { IFunction, ITaskProcessor, ITaskProcessorConfig, ITaskOptions, ITaskItem } from '@leafer/interface'\nimport { DataHelper, isNumber, isUndefined } from '@leafer/data'\n\nimport { TaskItem } from './TaskItem'\n\n\nexport class TaskProcessor implements ITaskProcessor {\n\n    public config: ITaskProcessorConfig = { parallel: 6 }\n\n    protected list: ITaskItem[] = []\n\n    protected parallelList: ITaskItem[]\n    protected parallelSuccessNumber: number\n\n    public running = false\n    public isComplete = true\n\n    protected timer: any\n\n    public get total(): number { return this.list.length + this.delayNumber }\n\n    public index = 0\n\n    public delayNumber = 0 // 延迟执行任务\n\n    public get finishedIndex(): number {\n        return this.isComplete ? 0 : this.index + this.parallelSuccessNumber\n    }\n\n    public get remain(): number {\n        return this.isComplete ? this.total : this.total - this.finishedIndex\n    }\n\n    public get percent(): number {\n        const { total } = this\n        let totalTime = 0, runTime = 0\n\n        for (let i = 0; i < total; i++) {\n            if (i <= this.finishedIndex) {\n                runTime += this.list[i].time\n                if (i === this.finishedIndex) totalTime = runTime\n            } else {\n                totalTime += this.list[i].time\n            }\n        }\n\n        return this.isComplete ? 1 : (runTime / totalTime)\n    }\n\n\n    constructor(config?: ITaskProcessorConfig) {\n        if (config) DataHelper.assign(this.config, config)\n        this.empty()\n    }\n\n    // list\n\n    public add(taskCallback: IFunction, options?: ITaskOptions | number, canUse?: IFunction): ITaskItem {\n        let start: boolean, parallel: boolean, time: number, delay: number\n\n        const task = new TaskItem(taskCallback)\n        task.parent = this\n\n        if (isNumber(options)) {\n            delay = options\n        } else if (options) {\n            parallel = options.parallel\n            start = options.start\n            time = options.time\n            delay = options.delay\n            if (!canUse) canUse = options.canUse\n        }\n\n        if (time) task.time = time\n        if (parallel === false) task.parallel = false\n        if (canUse) task.canUse = canUse\n\n        if (isUndefined(delay)) {\n            this.push(task, start)\n        } else {\n            this.delayNumber++\n            setTimeout(() => {\n                if (this.delayNumber) {\n                    this.delayNumber--\n                    this.push(task, start)\n                }\n            }, delay)\n        }\n\n        this.isComplete = false\n\n        return task\n    }\n\n    protected push(task: ITaskItem, start?: boolean): void {\n        this.list.push(task)\n        if (start !== false && !this.timer) {\n            this.timer = setTimeout(() => this.start())\n        }\n    }\n\n    protected empty(): void {\n        this.index = 0\n        this.parallelSuccessNumber = 0\n        this.list = []\n        this.parallelList = []\n        this.delayNumber = 0\n    }\n\n    // control\n\n    public start(): void {\n        if (!this.running) {\n            this.running = true\n            this.isComplete = false\n            this.run()\n        }\n    }\n\n    public pause(): void {\n        clearTimeout(this.timer)\n        this.timer = null\n        this.running = false\n    }\n\n    public resume(): void {\n        this.start()\n    }\n\n    public skip(): void {\n        this.index++\n        this.resume()\n    }\n\n    public stop(): void {\n        this.isComplete = true\n        this.list.forEach(task => { if (!task.isComplete) task.run() })\n        this.pause()\n        this.empty()\n    }\n\n    // run \n\n    protected run(): void {\n        if (!this.running) return\n\n        this.setParallelList()\n\n        if (this.parallelList.length > 1) {\n\n            this.runParallelTasks()\n\n        } else {\n\n            this.remain ? this.runTask() : this.onComplete()\n\n        }\n    }\n\n    protected runTask(): void {\n        const task = this.list[this.index]\n        if (!task) {\n            this.timer = setTimeout(() => this.nextTask())  // 存在延时任务\n            return\n        }\n\n        task.run().then(() => {\n\n            this.onTask(task)\n\n            this.index++\n            task.isCancel ? this.runTask() : this.nextTask()\n\n        }).catch(error => {\n            this.onError(error)\n        })\n    }\n\n    protected runParallelTasks(): void {\n        this.parallelList.forEach(task => this.runParallelTask(task))\n    }\n\n    protected runParallelTask(task: ITaskItem): void {\n        task.run().then(() => {\n\n            this.onTask(task)\n            this.fillParallelTask()\n\n        }).catch(error => {\n            this.onParallelError(error)\n        })\n    }\n\n    private nextTask(): void {\n        if (this.total === this.finishedIndex) {\n            this.onComplete()\n        } else {\n            this.timer = setTimeout(() => this.run())\n        }\n    }\n\n    protected setParallelList(): void {\n        let task: ITaskItem\n        const { config, list, index } = this\n\n        this.parallelList = []\n        this.parallelSuccessNumber = 0\n        let end = index + config.parallel\n\n        if (end > list.length) end = list.length\n\n        if (config.parallel > 1) {\n            for (let i = index; i < end; i++) {\n                task = list[i]\n                if (task.parallel) this.parallelList.push(task)\n                else break\n            }\n        }\n    }\n\n\n    protected fillParallelTask(): void {\n        let task: ITaskItem\n        const parallelList = this.parallelList\n\n        // 完成一个任务\n        this.parallelSuccessNumber++\n        parallelList.pop()\n\n        // 找到下一个可以并行的任务\n        const parallelWaitNumber = parallelList.length\n        const nextIndex = this.finishedIndex + parallelWaitNumber\n\n        if (parallelList.length) {\n\n            if (!this.running) return\n\n            if (nextIndex < this.total) {\n\n                task = this.list[nextIndex]\n\n                if (task && task.parallel) {\n                    parallelList.push(task)\n                    this.runParallelTask(task)\n                }\n\n            }\n\n        } else {\n\n            this.index += this.parallelSuccessNumber\n            this.parallelSuccessNumber = 0\n            this.nextTask()\n\n        }\n    }\n\n    // event\n\n    protected onComplete(): void {\n        this.stop()\n        if (this.config.onComplete) this.config.onComplete()\n    }\n\n    protected onTask(task: ITaskItem): void {\n        task.complete()\n        if (this.config.onTask) this.config.onTask()\n    }\n\n    protected onParallelError(error: unknown): void {\n        // 并行变串行, 以便下次重试\n        this.parallelList.forEach(task => {\n            task.parallel = false\n        })\n        this.parallelList.length = 0\n        this.parallelSuccessNumber = 0\n\n        this.onError(error)\n    }\n\n    protected onError(error: unknown): void {\n        this.pause()\n        if (this.config.onError) this.config.onError(error)\n    }\n\n    public destroy(): void {\n        this.stop()\n    }\n}","import { ILeaferImage, IResource, IObject, ILeaferCanvas, IExportFileType, ILeaferImageConfig } from '@leafer/interface'\n\nimport { Creator } from '@leafer/platform'\nimport { TaskProcessor } from '@leafer/task'\nimport { isString } from '@leafer/data'\nimport { Debug } from '@leafer/debug'\n\n\nconst debug = Debug.get('Resource')\n\nexport const Resource: IResource = {\n\n    tasker: new TaskProcessor(),\n\n    map: {},\n\n    get isComplete() { return R.tasker.isComplete },\n\n    // 通用\n\n    set(key: string, value: any): void {\n        if (R.map[key]) debug.repeat(key)\n        R.map[key] = value\n    },\n\n    get(key: string): any {\n        return R.map[key]\n    },\n\n    remove(key: string) {\n        const r = R.map[key]\n        if (r) {\n            if (r.destroy) r.destroy()\n            delete R.map[key]\n        }\n    },\n\n    // image\n\n    loadImage(key: string, format?: IExportFileType): Promise<ILeaferImage> {\n        return new Promise((resolve, reject) => {\n            const image = this.setImage(key, key, format)\n            image.load(() => resolve(image), (e: any) => reject(e))\n        })\n    },\n\n    setImage(key: string, value: string | IObject | ILeaferImage | ILeaferCanvas, format?: IExportFileType): ILeaferImage {\n        let config: ILeaferImageConfig\n        if (isString(value)) config = { url: value }\n        else if (!value.url) config = { url: key, view: value }\n        if (config) format && (config.format = format), value = Creator.image(config)\n        R.set(key, value)\n        return value as ILeaferImage\n    },\n\n\n    destroy(): void {\n        R.map = {}\n    }\n\n}\n\nconst R = Resource","import { IImageManager, ILeaferImageConfig, ILeaferImage, IExportFileType } from '@leafer/interface'\nimport { Creator, Platform } from '@leafer/platform'\nimport { FileHelper, Resource } from '@leafer/file'\nimport { TaskProcessor } from '@leafer/task'\n\n\nexport const ImageManager: IImageManager = {\n\n    maxRecycled: 10,\n\n    recycledList: [],\n\n    patternTasker: new TaskProcessor({ parallel: 1 }),\n\n    get(config: ILeaferImageConfig): ILeaferImage {\n        let image: ILeaferImage = Resource.get(config.url)\n        if (!image) Resource.set(config.url, image = Creator.image(config))\n        image.use++\n        return image\n    },\n\n    recycle(image: ILeaferImage): void {\n        image.use--\n        setTimeout(() => {\n            if (!image.use) {\n                if (Platform.image.isLarge(image)) {\n                    if (image.url) Resource.remove(image.url)\n                } else {\n                    image.clearLevels()\n                    I.recycledList.push(image)\n                }\n            }\n        })\n    },\n\n    // maybe rewrite\n    recyclePaint(paint: any): void {\n        I.recycle(paint.image)\n    },\n\n    clearRecycled(force?: boolean): void {\n        const list = I.recycledList\n        if (list.length > I.maxRecycled || force) {\n            list.forEach(image => ((!image.use || force) && image.url) && Resource.remove(image.url))\n            list.length = 0\n        }\n    },\n\n    // need rewrite\n    clearLevels(): void { },\n\n    hasAlphaPixel(config: ILeaferImageConfig): boolean {\n        return FileHelper.alphaPixelTypes.some(item => I.isFormat(item, config))\n    },\n\n    isFormat(format: IExportFileType, config: ILeaferImageConfig): boolean {\n        if (config.format) return config.format === format\n        const { url } = config\n        if (url.startsWith('data:')) {\n            if (url.startsWith('data:' + FileHelper.mineType(format))) return true\n        } else {\n            if (url.includes('.' + format) || url.includes('.' + FileHelper.upperCaseTypeMap[format])) return true\n            else if (format === 'png' && !url.includes('.')) return true // blob: 等无后缀名协议的图片无法分析类型，直接当透明图片处理\n        }\n        return false\n    },\n\n    destroy(): void {\n        this.clearRecycled(true)\n    }\n\n}\n\nconst I = ImageManager","import { ILeaferImage, ILeaferImageConfig, IFunction, IObject, InnerId, IMatrixData, ICanvasPattern, ILeaferImageCacheCanvas, ILeaferImagePatternPaint, ILeaferImageLevel, ISizeData, IImageCrossOrigin, IImageLOD, IInterlace } from '@leafer/interface'\nimport { Platform } from '@leafer/platform'\nimport { Resource } from '@leafer/file'\nimport { IncrementId } from '@leafer/math'\nimport { isUndefined } from '@leafer/data'\n\nimport { ImageManager } from './ImageManager'\n\n\nconst { IMAGE, create } = IncrementId\n\nexport class LeaferImage implements ILeaferImage {\n\n    public readonly innerId: InnerId\n    public get url() { return this.config.url }\n    public lod?: IImageLOD\n    public get crossOrigin(): IImageCrossOrigin { const { crossOrigin } = this.config; return isUndefined(crossOrigin) ? Platform.image.crossOrigin : crossOrigin }\n\n    public view: any\n\n    public width: number\n    public height: number\n\n    public isSVG: boolean\n    public hasAlphaPixel: boolean // check png / svg / webp\n\n    public get completed() { return this.ready || !!this.error }\n\n    public ready: boolean\n    public error: IObject\n    public loading: boolean\n\n    public use = 0\n\n    public config: ILeaferImageConfig\n\n    protected waitComplete: IFunction[] = []\n\n    protected cache: ILeaferImageCacheCanvas\n\n    constructor(config: ILeaferImageConfig) {\n        this.innerId = create(IMAGE)\n        this.config = config || (config = { url: '' })\n        if (config.view) {\n            const { view } = config\n            this.setView(view.config ? view.view : view)\n        }\n\n        ImageManager.isFormat('svg', config) && (this.isSVG = true)\n        ImageManager.hasAlphaPixel(config) && (this.hasAlphaPixel = true)\n    }\n\n    public load(onSuccess?: IFunction, onError?: IFunction, thumbSize?: ISizeData): number {\n        if (!this.loading) {\n            this.loading = true\n            Resource.tasker.add(async () => await Platform.origin.loadImage(this.getLoadUrl(thumbSize), this.crossOrigin, this).then(img => {\n                if (thumbSize) this.setThumbView(img)\n                this.setView(img)\n            }).catch((e) => {\n                this.error = e\n                this.onComplete(false)\n            }))\n        }\n        this.waitComplete.push(onSuccess, onError)\n        return this.waitComplete.length - 2\n    }\n\n    public unload(index: number, stopEvent?: boolean): void {\n        const l = this.waitComplete\n        if (stopEvent) {\n            const error = l[index + 1]\n            if (error) error({ type: 'stop' })\n        }\n        l[index] = l[index + 1] = undefined\n    }\n\n    protected setView(img: any): void {\n        this.ready = true\n        if (!this.width) {\n            this.width = img.width\n            this.height = img.height\n            this.view = img\n        }\n        this.onComplete(true)\n    }\n\n    protected onComplete(isSuccess: boolean): void {\n        let odd: number\n        this.waitComplete.forEach((item, index) => {\n            odd = index % 2\n            if (item) {\n                if (isSuccess) {\n                    if (!odd) item(this)\n                } else {\n                    if (odd) item(this.error)\n                }\n            }\n        })\n        this.waitComplete.length = 0\n        this.loading = false\n    }\n\n    public getFull(_filters?: IObject): any {\n        return this.view\n    }\n\n    public getCanvas(width: number, height: number, opacity?: number, filters?: IObject, xGap?: number, yGap?: number, smooth?: boolean, interlace?: IInterlace): any {\n        width || (width = this.width)\n        height || (height = this.height)\n\n        if (this.cache) { // when use > 1, check cache\n            let { params, data } = this.cache\n            for (let i in params) { if (params[i] !== arguments[i]) { data = null; break } }\n            if (data) return data\n        }\n\n        const canvas = Platform.image.resize(this.view, width, height, xGap, yGap, undefined, smooth, opacity, filters, interlace)\n\n        this.cache = this.use > 1 ? { data: canvas, params: arguments } : null\n\n        return canvas\n    }\n\n    public getPattern(canvas: any, repeat: string | null, transform?: IMatrixData, paint?: ILeaferImagePatternPaint): ICanvasPattern {\n        const pattern = Platform.canvas.createPattern(canvas, repeat)\n        Platform.image.setPatternTransform(pattern, transform, paint)\n        return pattern\n    }\n\n    // need rewrite\n    public getLoadUrl(_thumbSize?: ISizeData): string { return this.url }\n    public setThumbView(_view: number): void { }\n    public getThumbSize(_lod?: IImageLOD): ISizeData { return undefined }\n\n    public getMinLevel(): number { return undefined }\n    public getLevelData(_level: number, _width?: number, _height?: number,): ILeaferImageLevel { return undefined }\n    public clearLevels(_checkUse?: boolean): void { }\n\n    public destroy(): void {\n        this.clearLevels()\n\n        const { view } = this\n        if (view && view.close) view.close() // 可能为 ImageBitmap\n        this.config = { url: '' }\n        this.cache = this.view = null\n        this.waitComplete.length = 0\n    }\n\n}","import { IObject, IValue } from '@leafer/interface'\n\nexport function defineKey<T>(target: T, key: string, descriptor: IObject & ThisType<T>, noConfigurable?: boolean): void {\n    if (!noConfigurable) descriptor.configurable = descriptor.enumerable = true\n    Object.defineProperty(target, key, descriptor)\n}\n\nexport function getDescriptor(object: IObject, name: string) {\n    return Object.getOwnPropertyDescriptor(object, name)\n}\n\nexport function createDescriptor(key: string, defaultValue?: IValue) {\n    const privateKey = '_' + key\n    return {\n        get() { const v = (this as IObject)[privateKey]; return v == null ? defaultValue : v },\n        set(value: IValue) { (this as IObject)[privateKey] = value }\n    }\n}\n\nexport function getNames(object: IObject): string[] {\n    return Object.getOwnPropertyNames(object)\n}\n\n","import { ILeafData, ILeaf, IObject, IValue, ILeafAttrDescriptor, ILeafAttrDescriptorFn, IValueFunction, IMatrixWithBoundsScaleData } from '@leafer/interface'\nimport { DataHelper, isEmptyData, isObject, isUndefined } from '@leafer/data'\nimport { Debug } from '@leafer/debug'\n\nimport { defineKey, getDescriptor, createDescriptor } from './object'\n\n\n// name\n\nexport function decorateLeafAttr(defaultValue?: IValue, descriptorFn?: ILeafAttrDescriptorFn) {\n    return (target: ILeaf, key: string) => defineLeafAttr(target, key, defaultValue, descriptorFn && descriptorFn(key))\n}\n\nexport function attr(partDescriptor?: ILeafAttrDescriptor): ILeafAttrDescriptor {\n    return partDescriptor\n}\n\n\nexport function defineLeafAttr(target: ILeaf, key: string, defaultValue?: IValue, partDescriptor?: ILeafAttrDescriptor): void {\n    const defaultDescriptor: ILeafAttrDescriptor = {\n        get() { return this.__getAttr(key) },\n        set(value: IValue) { this.__setAttr(key, value) }\n    }\n    defineKey(target, key, Object.assign(defaultDescriptor, partDescriptor || {}))\n    defineDataProcessor(target, key, defaultValue)\n}\n\n\nexport function dataType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue)\n}\n\nexport function positionType(defaultValue?: IValue, checkFiniteNumber?: boolean) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            this.__setAttr(key, value, checkFiniteNumber) && (this.__layout.matrixChanged || this.__layout.matrixChange())\n        }\n    }))\n}\n\nexport function scrollType(defaultValue?: IValue, checkFiniteNumber?: boolean) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            if (this.__setAttr(key, value, checkFiniteNumber)) {\n                this.__layout.matrixChanged || this.__layout.matrixChange()\n                this.__scrollWorld || (this.__scrollWorld = {} as IMatrixWithBoundsScaleData)\n            }\n        }\n    }))\n}\n\nexport function autoLayoutType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            if (this.__setAttr(key, value)) {\n                this.__hasAutoLayout = !!(this.origin || this.around || this.flow)\n                if (!this.__local) this.__layout.createLocal()\n                doBoundsType(this)\n            }\n        }\n    }))\n}\n\nexport function scaleType(defaultValue?: IValue, checkFiniteNumber?: boolean) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            this.__setAttr(key, value, checkFiniteNumber) && (this.__layout.scaleChanged || this.__layout.scaleChange())\n\n        }\n    }))\n}\n\nexport function rotationType(defaultValue?: IValue, checkFiniteNumber?: boolean) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            this.__setAttr(key, value, checkFiniteNumber) && (this.__layout.rotationChanged || this.__layout.rotationChange())\n        }\n\n    }))\n}\n\nexport function boundsType(defaultValue?: IValue, checkFiniteNumber?: boolean) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            this.__setAttr(key, value, checkFiniteNumber) && doBoundsType(this)\n        }\n    }))\n}\n\nexport function naturalBoundsType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            this.__setAttr(key, value) && (doBoundsType(this), this.__.__removeNaturalSize())\n        }\n    }))\n}\n\nexport function doBoundsType(leaf: ILeaf): void {\n    leaf.__layout.boxChanged || leaf.__layout.boxChange()\n    if (leaf.__hasAutoLayout) leaf.__layout.matrixChanged || leaf.__layout.matrixChange()\n}\n\nexport function pathInputType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            const data = this.__\n            if (data.__pathInputed !== 2) data.__pathInputed = value ? 1 : 0\n            if (!value) data.__pathForRender = undefined\n            this.__setAttr(key, value)\n            doBoundsType(this)\n        }\n    }))\n}\n\nexport const pathType = boundsType\n\n\nexport function affectStrokeBoundsType(defaultValue?: IValue, useStroke?: boolean) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            if (this.__setAttr(key, value)) {\n                doStrokeType(this)\n                if (useStroke) this.__.__useStroke = true\n            }\n        }\n    }))\n}\n\nexport function doStrokeType(leaf: ILeaf): void {\n    leaf.__layout.strokeChanged || leaf.__layout.strokeChange()\n    if (leaf.__.__useArrow) doBoundsType(leaf)\n}\n\nexport const strokeType = affectStrokeBoundsType\n\nexport function affectRenderBoundsType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            this.__setAttr(key, value)\n            this.__layout.renderChanged || this.__layout.renderChange()\n        }\n    }))\n}\n\nexport function surfaceType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            this.__setAttr(key, value) && (this.__layout.surfaceChanged || this.__layout.surfaceChange())\n        }\n    }))\n}\n\nexport function dimType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            if (this.__setAttr(key, value)) {\n                const data = this.__\n                DataHelper.stintSet(data, '__useDim', (data.dim || data.bright || data.dimskip) as boolean)\n                this.__layout.surfaceChange()\n            }\n        }\n    }))\n}\n\nexport function opacityType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            this.__setAttr(key, value) && (this.__layout.opacityChanged || this.__layout.opacityChange())\n            if (this.mask) checkMask(this)\n        }\n    }))\n}\n\nexport function visibleType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            const oldValue = this.visible\n            if (oldValue === true && value === 0) {\n                if (this.animationOut) return this.__runAnimation('out', () => doVisible(this, key, value, oldValue)) // hide\n            } else if (oldValue === 0 && value === true) {\n                if (this.animation) this.__runAnimation('in') // show\n            }\n            doVisible(this, key, value, oldValue)\n            if (this.mask) checkMask(this)\n        }\n    }))\n}\n\nfunction checkMask(leaf: ILeaf): void { // mask 的透明度和可见性变更，会影响parent\n    const { parent } = leaf\n    if (parent) {\n        const { __hasMask } = parent\n        parent.__updateMask()\n        if (__hasMask !== parent.__hasMask) parent.forceUpdate()\n    }\n}\n\nfunction doVisible(leaf: ILeaf, key: string, value: IValue, oldValue: IValue): void {\n    if (leaf.__setAttr(key, value)) {\n        leaf.__layout.opacityChanged || leaf.__layout.opacityChange()\n        if (oldValue === 0 || value === 0) doBoundsType(leaf) // 0 = display: none\n    }\n}\n\nexport function sortType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            if (this.__setAttr(key, value)) {\n                this.__layout.surfaceChange()\n                this.waitParent(() => { this.parent.__layout.childrenSortChange() })\n            }\n        }\n    }))\n}\n\nexport function maskType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: boolean) {\n            if (this.__setAttr(key, value)) {\n                this.__layout.boxChanged || this.__layout.boxChange()\n                this.waitParent(() => { this.parent.__updateMask(value) })\n            }\n        }\n    }))\n}\n\nexport function eraserType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: boolean) {\n            this.__setAttr(key, value) && this.waitParent(() => { this.parent.__updateEraser(value) })\n        }\n    }))\n}\n\nexport function hitType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            if (this.__setAttr(key, value)) {\n                this.__layout.hitCanvasChanged = true\n                if (Debug.showBounds === 'hit') this.__layout.surfaceChange()\n                if (this.leafer) this.leafer.updateCursor()\n            }\n        }\n    }))\n}\n\nexport function cursorType(defaultValue?: IValue) {\n    return decorateLeafAttr(defaultValue, (key: string) => attr({\n        set(value: IValue) {\n            this.__setAttr(key, value)\n            if (this.leafer) this.leafer.updateCursor()\n        }\n    }))\n}\n\n\n// get\n\nexport function dataProcessor(processor: IObject) {\n    return (target: IObject, _key?: string) => {\n        defineKey(target, '__DataProcessor', {\n            get() { return processor }\n        })\n    }\n}\n\nexport function layoutProcessor(processor: IObject) {\n    return (target: IObject, _key?: string) => {\n        defineKey(target, '__LayoutProcessor', {\n            get() { return processor }\n        })\n    }\n}\n\n\n// other \n\nfunction getSetMethodName(key: string): string {\n    return 'set' + key.charAt(0).toUpperCase() + key.slice(1)\n}\n\n\n// define leaf.__[key] getter/setter\nexport function defineDataProcessor(target: ILeaf, key: string, defaultValue?: IValue | IValueFunction): void {\n\n    const data = target.__DataProcessor.prototype\n    const computedKey = '_' + key\n    const setMethodName = getSetMethodName(key)\n\n    const property: IObject & ThisType<ILeafData> = createDescriptor(key, defaultValue)\n\n    if (isUndefined(defaultValue)) {\n        property.get = function () { return this[computedKey] }\n    } else if (typeof defaultValue === 'function') {\n        property.get = function () {\n            const v = this[computedKey]\n            return v == null ? defaultValue((this as ILeafData).__leaf) : v\n        }\n    } else if (isObject(defaultValue)) {\n        const isEmpty = isEmptyData(defaultValue)\n        property.get = function () {\n            const v = this[computedKey]\n            return v == null ? this[computedKey] = isEmpty ? {} : DataHelper.clone(defaultValue) : v\n        }\n    }\n\n    const isBox = target.isBranchLeaf // 仅用于 width / height\n    if (key === 'width') {\n        property.get = function () {\n            const v = this[computedKey]\n            if (v == null) {\n                const t = this as ILeafData, naturalWidth = t.__naturalWidth, leaf = t.__leaf\n                if (!defaultValue || leaf.pathInputed) return leaf.boxBounds.width\n                if (naturalWidth) return (t as IObject)._height && t.__useNaturalRatio ? (t as IObject)._height * naturalWidth / t.__naturalHeight : naturalWidth\n                return (isBox && leaf.children.length) ? leaf.boxBounds.width : defaultValue // 返回 Box / Group / Text 等的实际宽度\n            } else return v\n        }\n    } else if (key === 'height') {\n        property.get = function () {\n            const v = this[computedKey]\n            if (v == null) {\n                const t = this as ILeafData, naturalHeight = t.__naturalHeight, leaf = t.__leaf\n                if (!defaultValue || leaf.pathInputed) return leaf.boxBounds.height\n                if (naturalHeight) return (t as IObject)._width && t.__useNaturalRatio ? (t as IObject)._width * naturalHeight / t.__naturalWidth : naturalHeight\n                return (isBox && leaf.children.length) ? leaf.boxBounds.height : defaultValue // 返回 Box / Group / Text 等的实际高度\n            } else return v\n        }\n    }\n\n    // find parent proto\n    let descriptor, find = data\n    while (!descriptor && find) {\n        descriptor = getDescriptor(find, key)\n        find = find.__proto__\n    }\n\n    if (descriptor && descriptor.set) property.set = descriptor.set // use exist set\n\n    if (data[setMethodName]) {\n        property.set = data[setMethodName] // first use custom setKey(value)\n        delete data[setMethodName]\n    }\n\n    defineKey(data, key, property)\n\n}\n\n","import { IObject, IFunction } from '@leafer/interface'\nimport { Debug } from '@leafer/debug'\nimport { getDescriptor, getNames } from './object'\n\ninterface IRewriteItem {\n    name: string\n    run: IFunction\n}\n\nconst debug = new Debug('rewrite')\n\nconst list: IRewriteItem[] = []\nconst excludeNames = ['destroy', 'constructor']\n\n\n// method\n\nexport function rewrite(method: IFunction) {\n    return (target: IObject, key: string) => {\n        list.push({ name: target.constructor.name + '.' + key, run: () => { target[key] = method } })\n    }\n}\n\nexport function rewriteAble() {\n    return (_target: IObject) => {\n        doRewrite()\n    }\n}\n\nfunction doRewrite(error?: boolean): void {\n    if (list.length) {\n        list.forEach(item => {\n            if (error) debug.error(item.name, '需在Class上装饰@rewriteAble()')\n            item.run()\n        })\n        list.length = 0\n    }\n}\n\nsetTimeout(() => doRewrite(true))\n\n\n// class\n\nexport function useModule(module: IObject, exclude?: string[]) {\n    return (target: IObject) => {\n        const names = module.prototype ? getNames(module.prototype) : Object.keys(module)\n        names.forEach(name => {\n            if (!excludeNames.includes(name) && (!exclude || !exclude.includes(name))) {\n                if (module.prototype) {\n                    const d = getDescriptor(module.prototype, name)\n                    if (d.writable) target.prototype[name] = module.prototype[name]\n                } else {\n                    target.prototype[name] = module[name]\n                }\n            }\n        })\n    }\n}","import { IObject } from '@leafer/interface'\nimport { EventCreator, UICreator } from '@leafer/platform'\n\nexport function registerUI() {\n    return (target: IObject) => {\n        UICreator.register(target)\n    }\n}\n\nexport function registerUIEvent() {\n    return (target: IObject) => {\n        EventCreator.register(target)\n    }\n}","import { IAlign, ILeaf, IMatrixData, IPointData, IAxis, ITransition, ILeaferCanvas, IBoundsData, IMatrixWithBoundsData } from '@leafer/interface'\nimport { MathHelper, MatrixHelper, PointHelper, AroundHelper, getMatrixData, BoundsHelper } from '@leafer/math'\nimport { Platform } from '@leafer/platform'\nimport { isObject, isNumber } from '@leafer/data'\n\n\nconst { copy, toInnerPoint, toOuterPoint, scaleOfOuter, rotateOfOuter, skewOfOuter, multiplyParent, divideParent, getLayout } = MatrixHelper\nconst matrix = {} as IMatrixData, { round } = Math\n\nexport const LeafHelper = {\n\n    updateAllMatrix(leaf: ILeaf, checkAutoLayout?: boolean, waitAutoLayout?: boolean): void {\n        if (checkAutoLayout && leaf.__hasAutoLayout && leaf.__layout.matrixChanged) waitAutoLayout = true\n\n        updateMatrix(leaf, checkAutoLayout, waitAutoLayout)\n\n        if (leaf.isBranch) {\n            const { children } = leaf\n            for (let i = 0, len = children.length; i < len; i++) {\n                updateAllMatrix(children[i], checkAutoLayout, waitAutoLayout)\n            }\n        }\n    },\n\n    updateMatrix(leaf: ILeaf, checkAutoLayout?: boolean, waitAutoLayout?: boolean): void {\n        const layout = leaf.__layout\n\n        if (checkAutoLayout) {\n            if (waitAutoLayout) {\n                layout.waitAutoLayout = true\n                if (leaf.__hasAutoLayout) layout.matrixChanged = false // wait updateAutoLayout\n            }\n        } else if (layout.waitAutoLayout) {\n            layout.waitAutoLayout = false\n        }\n\n        if (layout.matrixChanged) leaf.__updateLocalMatrix()\n        if (!layout.waitAutoLayout) leaf.__updateWorldMatrix()\n    },\n\n    updateBounds(leaf: ILeaf): void {\n        const layout = leaf.__layout\n        if (layout.boundsChanged) leaf.__updateLocalBounds()\n        if (!layout.waitAutoLayout) leaf.__updateWorldBounds()\n    },\n\n    updateAllWorldOpacity(leaf: ILeaf): void {\n        leaf.__updateWorldOpacity()\n\n        if (leaf.isBranch) {\n            const { children } = leaf\n            for (let i = 0, len = children.length; i < len; i++) {\n                updateAllWorldOpacity(children[i])\n            }\n        }\n    },\n\n    updateChange(leaf: ILeaf): void {\n        const layout = leaf.__layout\n        if (layout.stateStyleChanged) leaf.updateState()\n        if (layout.opacityChanged) updateAllWorldOpacity(leaf)\n        leaf.__updateChange()\n    },\n\n    updateAllChange(leaf: ILeaf): void {\n        updateChange(leaf)\n        if (leaf.isBranch) {\n            const { children } = leaf\n            for (let i = 0, len = children.length; i < len; i++) {\n                updateAllChange(children[i])\n            }\n        }\n    },\n\n    worldHittable(t: ILeaf): boolean {\n        while (t) {\n            if (!t.__.hittable) return false\n            t = t.parent\n        }\n        return true\n    },\n\n    draggable(t: ILeaf): boolean {\n        return (t.draggable || t.editable) && t.hitSelf && !t.locked\n    },\n\n    copyCanvasByWorld(leaf: ILeaf, currentCanvas: ILeaferCanvas, fromCanvas: ILeaferCanvas, fromWorld?: IBoundsData, blendMode?: string, onlyResetTransform?: boolean): void {\n        if (!fromWorld) fromWorld = leaf.__nowWorld\n        if (leaf.__worldFlipped || Platform.fullImageShadow) currentCanvas.copyWorldByReset(fromCanvas, fromWorld, leaf.__nowWorld, blendMode, onlyResetTransform)\n        else currentCanvas.copyWorldToInner(fromCanvas, fromWorld as IMatrixWithBoundsData, leaf.__layout.renderBounds, blendMode)\n    },\n\n    // transform\n\n    moveWorld(t: ILeaf, x: number | IPointData, y = 0, isInnerPoint?: boolean, transition?: ITransition): void {\n        const local = isObject(x) ? { ...x } : { x, y }\n        isInnerPoint ? toOuterPoint(t.localTransform, local, local, true) : (t.parent && toInnerPoint(t.parent.scrollWorldTransform, local, local, true))\n        L.moveLocal(t, local.x, local.y, transition)\n    },\n\n    moveLocal(t: ILeaf, x: number | IPointData, y = 0, transition?: ITransition): void {\n        if (isObject(x)) y = x.y, x = x.x\n        x += t.x\n        y += t.y\n        if (t.leafer && t.leafer.config.pointSnap) x = round(x), y = round(y)\n        transition ? t.animate({ x, y }, transition) : (t.x = x, t.y = y)\n    },\n\n    zoomOfWorld(t: ILeaf, origin: IPointData, scaleX: number, scaleY?: number | ITransition, resize?: boolean, transition?: ITransition): void {\n        L.zoomOfLocal(t, getTempLocal(t, origin), scaleX, scaleY, resize, transition)\n    },\n\n    zoomOfLocal(t: ILeaf, origin: IPointData, scaleX: number, scaleY: number | ITransition = scaleX, resize?: boolean, transition?: ITransition): void {\n        const o = t.__localMatrix\n        if (!isNumber(scaleY)) {\n            if (scaleY) transition = scaleY\n            scaleY = scaleX\n        }\n        copy(matrix, o)\n        scaleOfOuter(matrix, origin, scaleX, scaleY)\n        if (L.hasHighPosition(t)) {\n            L.setTransform(t, matrix, resize, transition)\n        } else {\n            const x = t.x + matrix.e - o.e, y = t.y + matrix.f - o.f\n            if (transition && !resize) t.animate({ x, y, scaleX: t.scaleX * scaleX, scaleY: t.scaleY * scaleY }, transition)\n            else t.x = x, t.y = y, t.scaleResize(scaleX, scaleY, resize !== true)\n        }\n    },\n\n    rotateOfWorld(t: ILeaf, origin: IPointData, angle: number, transition?: ITransition): void {\n        L.rotateOfLocal(t, getTempLocal(t, origin), angle, transition)\n    },\n\n    rotateOfLocal(t: ILeaf, origin: IPointData, angle: number, transition?: ITransition): void {\n        const o = t.__localMatrix\n        copy(matrix, o)\n        rotateOfOuter(matrix, origin, angle)\n        if (L.hasHighPosition(t)) L.setTransform(t, matrix, false, transition)\n        else t.set({ x: t.x + matrix.e - o.e, y: t.y + matrix.f - o.f, rotation: MathHelper.formatRotation(t.rotation + angle) }, transition)\n    },\n\n    skewOfWorld(t: ILeaf, origin: IPointData, skewX: number, skewY?: number, resize?: boolean, transition?: ITransition): void {\n        L.skewOfLocal(t, getTempLocal(t, origin), skewX, skewY, resize, transition)\n    },\n\n    skewOfLocal(t: ILeaf, origin: IPointData, skewX: number, skewY: number = 0, resize?: boolean, transition?: ITransition): void {\n        copy(matrix, t.__localMatrix)\n        skewOfOuter(matrix, origin, skewX, skewY)\n        L.setTransform(t, matrix, resize, transition)\n    },\n\n    transformWorld(t: ILeaf, transform: IMatrixData, resize?: boolean, transition?: ITransition): void {\n        copy(matrix, t.worldTransform)\n        multiplyParent(matrix, transform)\n        if (t.parent) divideParent(matrix, t.parent.scrollWorldTransform)\n        L.setTransform(t, matrix, resize, transition)\n    },\n\n    transform(t: ILeaf, transform: IMatrixData, resize?: boolean, transition?: ITransition): void {\n        copy(matrix, t.localTransform)\n        multiplyParent(matrix, transform)\n        L.setTransform(t, matrix, resize, transition)\n    },\n\n    setTransform(t: ILeaf, transform: IMatrixData, resize?: boolean, transition?: ITransition): void {\n        const data = t.__, originPoint = data.origin && L.getInnerOrigin(t, data.origin)\n        const layout = getLayout(transform, originPoint, data.around && L.getInnerOrigin(t, data.around))\n\n        if (L.hasOffset(t)) {\n            layout.x -= data.offsetX\n            layout.y -= data.offsetY\n        }\n\n        if (resize) {\n            const scaleX = layout.scaleX / t.scaleX, scaleY = layout.scaleY / t.scaleY\n            delete layout.scaleX, delete layout.scaleY\n\n            if (originPoint) { // fix origin: resize 方式下 boxBounds 会变化，导致 originPoint 不准确，需偏移至正确的位置\n                BoundsHelper.scale(t.boxBounds, Math.abs(scaleX), Math.abs(scaleY))\n                const changedPoint = L.getInnerOrigin(t, data.origin)\n                PointHelper.move(layout, originPoint.x - changedPoint.x, originPoint.y - changedPoint.y)\n            }\n\n            t.set(layout)\n            t.scaleResize(scaleX, scaleY, false)\n\n        } else t.set(layout, transition)\n    },\n\n    getFlipTransform(t: ILeaf, axis: IAxis): IMatrixData {\n        const m = getMatrixData()\n        const sign = axis === 'x' ? 1 : -1\n        scaleOfOuter(m, L.getLocalOrigin(t, 'center'), -1 * sign, 1 * sign)\n        return m\n    },\n\n    getLocalOrigin(t: ILeaf, origin: IPointData | IAlign): IPointData {\n        return PointHelper.tempToOuterOf(L.getInnerOrigin(t, origin), t.localTransform)\n    },\n\n    getInnerOrigin(t: ILeaf, origin: IPointData | IAlign): IPointData {\n        const innerOrigin = {} as IPointData\n        AroundHelper.toPoint(origin, t.boxBounds, innerOrigin)\n        return innerOrigin\n    },\n\n    getRelativeWorld(t: ILeaf, relative: ILeaf, temp?: boolean): IMatrixData {\n        copy(matrix, t.worldTransform)\n        divideParent(matrix, relative.scrollWorldTransform)\n        return temp ? matrix : { ...matrix }\n    },\n\n    drop(t: ILeaf, parent: ILeaf, index?: number, resize?: boolean): void {\n        t.setTransform(L.getRelativeWorld(t, parent, true), resize)\n        parent.add(t, index)\n    },\n\n    hasHighPosition(t: ILeaf): boolean {\n        return (t.origin || t.around || L.hasOffset(t)) as unknown as boolean\n    },\n\n    hasOffset(t: ILeaf): boolean {\n        return (t.offsetX || t.offsetY) as unknown as boolean\n    },\n\n    hasParent(p: ILeaf, parent: ILeaf): boolean | void {\n        if (!parent) return false\n        while (p) {\n            if (parent === p) return true\n            p = p.parent\n        }\n    },\n\n    // 简单动画操作\n\n    animateMove(t: ILeaf, move: IPointData, speed = 0.3) {\n        if (!move.x && !move.y) return\n        if (Math.abs(move.x) < 1 && Math.abs(move.y) < 1) {\n            t.move(move)\n        } else {\n            const x = move.x * speed, y = move.y * speed\n            move.x -= x, move.y -= y\n            t.move(x, y)\n            Platform.requestRender(() => L.animateMove(t, move, speed))\n        }\n    }\n\n}\n\nconst L = LeafHelper\nconst { updateAllMatrix, updateMatrix, updateAllWorldOpacity, updateAllChange, updateChange } = L\n\nfunction getTempLocal(t: ILeaf, worldPoint: IPointData): IPointData {\n    t.updateLayout() // must\n    return t.parent ? PointHelper.tempToInnerOf(worldPoint, t.parent.scrollWorldTransform) : worldPoint\n}","import { ILeaf, IBoundsData, IRenderOptions } from '@leafer/interface'\n\n\nexport const LeafBoundsHelper = {\n\n    worldBounds(target: ILeaf): IBoundsData {\n        return target.__world\n    },\n\n    localBoxBounds(target: ILeaf): IBoundsData {\n        return target.__.eraser || target.__.visible === 0 ? null : (target.__local || target.__layout)\n    },\n\n    localStrokeBounds(target: ILeaf): IBoundsData {\n        return target.__.eraser || target.__.visible === 0 ? null : target.__layout.localStrokeBounds\n    },\n\n    localRenderBounds(target: ILeaf): IBoundsData {\n        return target.__.eraser || target.__.visible === 0 ? null : target.__layout.localRenderBounds\n    },\n\n    maskLocalBoxBounds(target: ILeaf, index: number): IBoundsData {\n        return checkMask(target, index) && target.__localBoxBounds\n    },\n\n    maskLocalStrokeBounds(target: ILeaf, index: number): IBoundsData {\n        return checkMask(target, index) && target.__layout.localStrokeBounds\n    },\n\n    maskLocalRenderBounds(target: ILeaf, index: number): IBoundsData {\n        return checkMask(target, index) && target.__layout.localRenderBounds\n    },\n\n    excludeRenderBounds(child: ILeaf, options: IRenderOptions): boolean {\n        if (options.bounds && !options.bounds.hit(child.__world, options.matrix)) return true\n        if (options.hideBounds && options.hideBounds.includes(child.__world, options.matrix)) return true\n        return false\n    }\n\n}\n\n\nlet findMask: number\n\nfunction checkMask(target: ILeaf, index: number): boolean {\n    if (!index) findMask = 0\n    if (target.__.mask) findMask = 1\n    return findMask < 0 ? null : (findMask && (findMask = -1), true) // 第一个 mask 元素之后的元素 bounds 可以忽略，返回 null\n}","import { ILeaf, ILeafLevelList, ILeafList, IMatrixWithBoundsData, IMatrixWithBoundsScaleData } from '@leafer/interface'\nimport { isUndefined } from '@leafer/data'\nimport { LeafHelper } from './LeafHelper'\n\nconst { updateBounds } = LeafHelper\n\nexport const BranchHelper = {\n\n    sort(a: ILeaf, b: ILeaf): number {\n        return (a.__.zIndex === b.__.zIndex) ? (a.__tempNumber - b.__tempNumber) : (a.__.zIndex - b.__.zIndex)\n    },\n\n    // push\n\n    pushAllChildBranch(branch: ILeaf, leafList: ILeafList | ILeafLevelList): void {\n        branch.__tempNumber = 1   // 标识需要更新子Leaf元素的WorldBounds分支 Layouter需使用\n\n        if (branch.__.__childBranchNumber) {\n            const { children } = branch\n            for (let i = 0, len = children.length; i < len; i++) {\n                branch = children[i]\n                if (branch.isBranch) {\n                    branch.__tempNumber = 1\n                    leafList.add(branch)\n                    pushAllChildBranch(branch, leafList)\n                }\n            }\n        }\n    },\n\n    pushAllParent(leaf: ILeaf, leafList: ILeafList | ILeafLevelList): void {\n        const { keys } = (leafList as ILeafList)\n        if (keys) {\n            while (leaf.parent) {\n                if (isUndefined(keys[leaf.parent.innerId])) {\n                    leafList.add(leaf.parent)\n                    leaf = leaf.parent\n                } else {\n                    break\n                }\n            }\n        } else {\n            while (leaf.parent) {\n                leafList.add(leaf.parent)\n                leaf = leaf.parent\n            }\n        }\n    },\n\n    pushAllBranchStack(branch: ILeaf, pushList: ILeaf[]): void {\n        let start = pushList.length\n        const { children } = branch\n        for (let i = 0, len = children.length; i < len; i++) {\n            if (children[i].isBranch) {\n                pushList.push(children[i])\n            }\n        }\n\n        // 找子级\n        for (let i = start, len = pushList.length; i < len; i++) {\n            pushAllBranchStack(pushList[i], pushList)\n        }\n    },\n\n    updateBounds(branch: ILeaf, exclude?: ILeaf): void {\n        const branchStack: ILeaf[] = [branch]\n        pushAllBranchStack(branch, branchStack)\n        updateBoundsByBranchStack(branchStack, exclude)\n    },\n\n    updateBoundsByBranchStack(branchStack: ILeaf[], exclude?: ILeaf): void {\n        let branch: ILeaf, children: ILeaf[]\n        for (let i = branchStack.length - 1; i > -1; i--) {\n            branch = branchStack[i]\n            children = branch.children\n            for (let j = 0, len = children.length; j < len; j++) {\n                updateBounds(children[j])\n            }\n            if (exclude && exclude === branch) continue\n            updateBounds(branch)\n        }\n    },\n\n    move(branch: ILeaf, x: number, y: number): void {\n        let w: IMatrixWithBoundsData\n        const { children } = branch\n        for (let i = 0, len = children.length; i < len; i++) {\n            branch = children[i]\n            w = branch.__world\n\n            w.e += x\n            w.f += y\n            w.x += x\n            w.y += y\n\n            if (branch.isBranch) move(branch, x, y)\n        }\n    },\n\n    scale(branch: ILeaf, x: number, y: number, scaleX: number, scaleY: number, a: number, b: number): void {\n        let w: IMatrixWithBoundsScaleData\n        const { children } = branch\n        const changeScaleX = scaleX - 1\n        const changeScaleY = scaleY - 1\n\n        for (let i = 0, len = children.length; i < len; i++) {\n            branch = children[i]\n            w = branch.__world\n\n            w.a *= scaleX\n            w.d *= scaleY\n\n            if (w.b || w.c) {\n                w.b *= scaleX\n                w.c *= scaleY\n            }\n\n            if (w.e === w.x && w.f === w.y) {\n                w.x = w.e += (w.e - a) * changeScaleX + x\n                w.y = w.f += (w.f - b) * changeScaleY + y\n            } else {\n                w.e += (w.e - a) * changeScaleX + x\n                w.f += (w.f - b) * changeScaleY + y\n\n                w.x += (w.x - a) * changeScaleX + x\n                w.y += (w.y - b) * changeScaleY + y\n            }\n\n            w.width *= scaleX\n            w.height *= scaleY\n\n            w.scaleX *= scaleX\n            w.scaleY *= scaleY\n\n            if (branch.isBranch) scale(branch, x, y, scaleX, scaleY, a, b)\n        }\n    }\n}\n\nconst { pushAllChildBranch, pushAllBranchStack, updateBoundsByBranchStack, move, scale } = BranchHelper","import { IFunction } from '@leafer/interface'\n\nexport const WaitHelper = {\n    run(wait: IFunction[]): void {\n        if (wait && wait.length) {\n            const len = wait.length\n            for (let i = 0; i < len; i++) { wait[i]() }\n            wait.length === len ? wait.length = 0 : wait.splice(0, len)\n        }\n    }\n}","import { ILeaf, ILeafLayout, ILocationType, IBoundsType, IBoundsData, IMatrixData, ILayoutBoundsData, IPointData } from '@leafer/interface'\nimport { Bounds, BoundsHelper, MatrixHelper, PointHelper } from '@leafer/math'\nimport { isUndefined } from '@leafer/data'\nimport { LeafHelper } from '@leafer/helper'\nimport { Platform } from '@leafer/platform'\n\n\nconst { getRelativeWorld, updateBounds } = LeafHelper\nconst { toOuterOf, getPoints, copy } = BoundsHelper\nconst localContent = '_localContentBounds'\nconst worldContent = '_worldContentBounds', worldBox = '_worldBoxBounds', worldStroke = '_worldStrokeBounds'\n\nexport class LeafLayout implements ILeafLayout {\n\n    public leaf: ILeaf\n\n    public proxyZoom: boolean\n\n    // inner\n\n    public get contentBounds(): IBoundsData { return this._contentBounds || this.boxBounds }\n    public set contentBounds(bounds: IBoundsData) { this._contentBounds = bounds }\n    public boxBounds: IBoundsData\n    public get strokeBounds(): IBoundsData { return this._strokeBounds || this.boxBounds }\n    public get renderBounds(): IBoundsData { return this._renderBounds || this.boxBounds }\n    public set renderBounds(bounds: IBoundsData) { this._renderBounds = bounds }\n\n    public _contentBounds: IBoundsData\n    public _strokeBounds: IBoundsData\n    public _renderBounds: IBoundsData\n\n    // local\n\n    public get localContentBounds(): IBoundsData { toOuterOf(this.contentBounds, this.leaf.__localMatrix, this[localContent] || (this[localContent] = {} as IBoundsData)); return this[localContent] }\n    // localBoxBounds: IBoundsData // use leaf.__localBoxBounds\n    public get localStrokeBounds(): IBoundsData { return this._localStrokeBounds || this }\n    public get localRenderBounds(): IBoundsData { return this._localRenderBounds || this }\n\n    protected _localContentBounds?: IBoundsData\n    protected _localStrokeBounds?: IBoundsData\n    protected _localRenderBounds?: IBoundsData\n\n    // world\n\n    public get worldContentBounds(): IBoundsData { toOuterOf(this.contentBounds, this.leaf.__world, this[worldContent] || (this[worldContent] = {} as IBoundsData)); return this[worldContent] }\n    public get worldBoxBounds(): IBoundsData { toOuterOf(this.boxBounds, this.leaf.__world, this[worldBox] || (this[worldBox] = {} as IBoundsData)); return this[worldBox] }\n    public get worldStrokeBounds(): IBoundsData { toOuterOf(this.strokeBounds, this.leaf.__world, this[worldStroke] || (this[worldStroke] = {} as IBoundsData)); return this[worldStroke] }\n    // worldRenderBounds: IBoundsData // use leaf.__world\n\n    protected _worldContentBounds: IBoundsData\n    protected _worldBoxBounds: IBoundsData\n    protected _worldStrokeBounds: IBoundsData\n\n    // state\n\n    public resized: 'scale' | 'inner' | 'local'\n    public waitAutoLayout: boolean\n\n    // matrix changed\n    public matrixChanged: boolean\n    public scaleChanged: boolean\n    public rotationChanged: boolean\n\n    // bounds\n    public boundsChanged: boolean\n\n    public boxChanged: boolean\n    public strokeChanged: boolean\n    public renderChanged: boolean\n\n    public localBoxChanged: boolean\n\n    // face\n    public surfaceChanged: boolean\n    public opacityChanged: boolean\n\n    public hitCanvasChanged: boolean\n\n    public childrenSortChanged?: boolean\n    public stateStyleChanged?: boolean\n\n    // keep state\n    public affectScaleOrRotation: boolean\n    public affectRotation: boolean\n    public affectChildrenSort?: boolean\n\n    public strokeSpread: number\n    public strokeBoxSpread: number\n    public renderSpread: number\n    public renderShapeSpread: number\n\n    // temp local\n    public get a() { return 1 }\n    public get b() { return 0 }\n    public get c() { return 0 }\n    public get d() { return 1 }\n    public get e() { return this.leaf.__.x }\n    public get f() { return this.leaf.__.y }\n    public get x() { return this.e + this.boxBounds.x }\n    public get y() { return this.f + this.boxBounds.y }\n    public get width() { return this.boxBounds.width }\n    public get height() { return this.boxBounds.height }\n\n\n    constructor(leaf: ILeaf) {\n        this.leaf = leaf\n        if (this.leaf.__local) this._localRenderBounds = this._localStrokeBounds = this.leaf.__local\n        if (leaf.__world) {\n            this.boxBounds = { x: 0, y: 0, width: 0, height: 0 }\n            this.boxChange()\n            this.matrixChange()\n        }\n    }\n\n    public createLocal(): void {\n        const local = this.leaf.__local = { a: 1, b: 0, c: 0, d: 1, e: 0, f: 0, x: 0, y: 0, width: 0, height: 0 }\n        if (!this._localStrokeBounds) this._localStrokeBounds = local\n        if (!this._localRenderBounds) this._localRenderBounds = local\n    }\n\n    public update(): void {\n        const { leaf } = this, { leafer } = leaf\n        if (leaf.isApp) return updateBounds(leaf)\n        if (leafer) {\n            if (leafer.ready) leafer.watcher.changed && leafer.layouter.layout()\n            else leafer.start()\n        } else {\n            let root = leaf\n            while (root.parent && !root.parent.leafer) { root = root.parent }\n            const r = root as any\n            if (r.__fullLayouting) return // fix: 循环\n            r.__fullLayouting = true\n            Platform.layout(r)\n            delete r.__fullLayouting\n        }\n    }\n\n    public getTransform(relative: ILocationType | ILeaf = 'world'): IMatrixData {\n        this.update()\n        const { leaf } = this\n        switch (relative) {\n            case 'world':\n                return leaf.__world\n            case 'local':\n                return leaf.__localMatrix\n            case 'inner':\n                return MatrixHelper.defaultMatrix\n            case 'page':\n                relative = leaf.zoomLayer\n            default:\n                return getRelativeWorld(leaf, relative)\n        }\n    }\n\n    public getBounds(type?: IBoundsType, relative: ILocationType | ILeaf = 'world'): IBoundsData {\n        this.update()\n        switch (relative) {\n            case 'world':\n                return this.getWorldBounds(type)\n            case 'local':\n                return this.getLocalBounds(type)\n            case 'inner':\n                return this.getInnerBounds(type)\n            case 'page':\n                relative = this.leaf.zoomLayer\n            default:\n                return new Bounds(this.getInnerBounds(type)).toOuterOf(this.getTransform(relative))\n        }\n    }\n\n    public getInnerBounds(type: IBoundsType = 'box'): IBoundsData {\n        switch (type) {\n            case 'render':\n                return this.renderBounds\n            case 'content':\n                if (this.contentBounds) return this.contentBounds\n            case 'box':\n                return this.boxBounds\n            case 'stroke':\n                return this.strokeBounds\n        }\n    }\n\n    public getLocalBounds(type: IBoundsType = 'box'): IBoundsData {\n        switch (type) {\n            case 'render':\n                return this.localRenderBounds\n            case 'stroke':\n                return this.localStrokeBounds\n            case 'content':\n                if (this.contentBounds) return this.localContentBounds\n            case 'box':\n                return this.leaf.__localBoxBounds\n        }\n    }\n\n    public getWorldBounds(type: IBoundsType = 'box'): IBoundsData {\n        switch (type) {\n            case 'render':\n                return this.leaf.__world\n            case 'stroke':\n                return this.worldStrokeBounds\n            case 'content':\n                if (this.contentBounds) return this.worldContentBounds\n            case 'box':\n                return this.worldBoxBounds\n        }\n    }\n\n    public getLayoutBounds(type?: IBoundsType, relative: ILocationType | ILeaf = 'world', unscale?: boolean): ILayoutBoundsData {\n        const { leaf } = this\n        let point: IPointData, matrix: IMatrixData, layoutBounds: ILayoutBoundsData, bounds: IBoundsData = this.getInnerBounds(type)\n\n        switch (relative) {\n            case 'world':\n                point = leaf.getWorldPoint(bounds)\n                matrix = leaf.__world\n                break\n            case 'local':\n                const { scaleX, scaleY, rotation, skewX, skewY } = leaf.__\n                layoutBounds = { scaleX, scaleY, rotation, skewX, skewY } as ILayoutBoundsData // 更精准，务必保留\n                point = leaf.getLocalPointByInner(bounds)\n                break\n            case 'inner':\n                point = bounds\n                matrix = MatrixHelper.defaultMatrix\n                break\n            case 'page':\n                relative = leaf.zoomLayer\n            default:\n                point = leaf.getWorldPoint(bounds, relative)\n                matrix = getRelativeWorld(leaf, relative, true)\n        }\n\n        if (!layoutBounds) layoutBounds = MatrixHelper.getLayout(matrix) as ILayoutBoundsData\n        copy(layoutBounds, bounds)\n        PointHelper.copy(layoutBounds, point)\n\n        if (unscale) {\n            const { scaleX, scaleY } = layoutBounds\n            const uScaleX = Math.abs(scaleX)\n            const uScaleY = Math.abs(scaleY)\n            if (uScaleX !== 1 || uScaleY !== 1) {\n                layoutBounds.scaleX /= uScaleX\n                layoutBounds.scaleY /= uScaleY\n                layoutBounds.width *= uScaleX\n                layoutBounds.height *= uScaleY\n            }\n        }\n\n        return layoutBounds\n    }\n\n    public getLayoutPoints(type?: IBoundsType, relative: ILocationType | ILeaf = 'world'): IPointData[] {\n        const { leaf } = this\n        const points = getPoints(this.getInnerBounds(type))\n        let relativeLeaf: ILeaf\n        switch (relative) {\n            case 'world':\n                relativeLeaf = null\n                break\n            case 'local':\n                relativeLeaf = leaf.parent\n                break\n            case 'inner':\n                break\n            case 'page':\n                relative = leaf.zoomLayer\n            default:\n                relativeLeaf = relative\n        }\n        if (!isUndefined(relativeLeaf)) points.forEach(point => leaf.innerToWorld(point, null, false, relativeLeaf))\n        return points\n    }\n\n    // 独立 / 引用 boxBounds\n\n    public shrinkContent(): void {\n        const { x, y, width, height } = this.boxBounds\n        this._contentBounds = { x, y, width, height }\n    }\n\n    public spreadStroke(): void {\n        const { x, y, width, height } = this.strokeBounds\n        this._strokeBounds = { x, y, width, height }\n        this._localStrokeBounds = { x, y, width, height }\n        if (!this.renderSpread) this.spreadRenderCancel()\n    }\n    public spreadRender(): void {\n        const { x, y, width, height } = this.renderBounds\n        this._renderBounds = { x, y, width, height }\n        this._localRenderBounds = { x, y, width, height }\n    }\n\n    public shrinkContentCancel(): void {\n        this._contentBounds = undefined\n    }\n\n    public spreadStrokeCancel(): void {\n        const same = this.renderBounds === this.strokeBounds\n        this._strokeBounds = this.boxBounds\n        this._localStrokeBounds = this.leaf.__localBoxBounds\n        if (same) this.spreadRenderCancel()\n    }\n    public spreadRenderCancel(): void {\n        this._renderBounds = this._strokeBounds\n        this._localRenderBounds = this._localStrokeBounds\n    }\n\n\n    // bounds\n\n    public boxChange(): void {\n        this.boxChanged = true\n        this.localBoxChanged ? (this.boundsChanged || (this.boundsChanged = true)) : this.localBoxChange() // fix: boundsChanged未更新的问题\n        this.hitCanvasChanged = true\n    }\n\n    public localBoxChange(): void {\n        this.localBoxChanged = true\n        this.boundsChanged = true\n    }\n\n    public strokeChange(): void {\n        this.strokeChanged = true\n        this.strokeSpread || (this.strokeSpread = 1)\n        this.boundsChanged = true\n        this.hitCanvasChanged = true\n    }\n\n    public renderChange(): void {\n        this.renderChanged = true\n        this.renderSpread || (this.renderSpread = 1)\n        this.boundsChanged = true\n    }\n\n\n    // matrix\n\n    public scaleChange(): void {\n        this.scaleChanged = true\n        this._scaleOrRotationChange()\n    }\n\n    public rotationChange(): void {\n        this.rotationChanged = true\n        this.affectRotation = true\n        this._scaleOrRotationChange()\n    }\n\n    protected _scaleOrRotationChange() {\n        this.affectScaleOrRotation = true\n        this.matrixChange()\n        if (!this.leaf.__local) this.createLocal()\n    }\n\n    public matrixChange(): void {\n        this.matrixChanged = true\n        this.localBoxChanged ? (this.boundsChanged || (this.boundsChanged = true)) : this.localBoxChange() // fix: boundsChanged未更新的问题\n    }\n\n\n    // face\n\n    public surfaceChange(): void {\n        this.surfaceChanged = true\n    }\n\n    public opacityChange(): void {\n        this.opacityChanged = true\n        this.surfaceChanged || this.surfaceChange()\n    }\n\n    public childrenSortChange(): void {\n        if (!this.childrenSortChanged) {\n            this.childrenSortChanged = this.affectChildrenSort = true\n            this.leaf.forceUpdate('surface')\n        }\n    }\n\n    public destroy(): void { }\n\n}","import { IEvent, IEventTarget, IObject } from '@leafer/interface'\nimport { Platform } from '@leafer/platform'\n\n\nexport class Event implements IEvent {\n\n    readonly origin: IObject\n\n    readonly type: string\n    readonly target: IEventTarget\n    readonly current: IEventTarget\n\n    readonly bubbles: boolean = false\n    readonly phase: number\n\n    public isStopDefault: boolean\n    public isStop: boolean\n    public isStopNow: boolean\n\n    constructor(type: string, target?: IEventTarget) {\n        this.type = type\n        if (target) this.target = target\n    }\n\n    public stopDefault(): void {\n        this.isStopDefault = true\n        if (this.origin) Platform.event.stopDefault(this.origin)\n    }\n\n    public stopNow(): void {\n        this.isStopNow = true\n        this.isStop = true\n        if (this.origin) Platform.event.stopNow(this.origin)\n    }\n\n    public stop(): void {\n        this.isStop = true\n        if (this.origin) Platform.event.stop(this.origin)\n    }\n}","import { IChildEvent, ILeaf } from '@leafer/interface'\n\nimport { Event } from './Event'\n\n\nexport class ChildEvent extends Event implements IChildEvent {\n\n    static ADD = 'child.add'\n    static REMOVE = 'child.remove'\n\n    static CREATED = 'created'\n    static MOUNTED = 'mounted'\n    static UNMOUNTED = 'unmounted'\n    static DESTROY = 'destroy'\n\n    readonly parent?: ILeaf\n    readonly child?: ILeaf\n\n    constructor(type: string, child?: ILeaf, parent?: ILeaf) {\n        super(type, child)\n        this.parent = parent\n        this.child = child\n    }\n\n}","import { IPropertyEvent, IEventTarget, IStringMap } from '@leafer/interface'\n\nimport { Event } from './Event'\n\n\nconst SCROLL = 'property.scroll'\n\nexport class PropertyEvent extends Event implements IPropertyEvent {\n\n    static CHANGE = 'property.change'\n    static LEAFER_CHANGE = 'property.leafer_change'\n\n    static SCROLL = SCROLL\n\n    readonly attrName: string\n    readonly oldValue: unknown\n    readonly newValue: unknown\n\n    constructor(type: string, target: IEventTarget, attrName: string, oldValue: unknown, newValue: unknown) {\n        super(type, target)\n        this.attrName = attrName\n        this.oldValue = oldValue\n        this.newValue = newValue\n    }\n\n}\n\n// 额外派发的属性事件\nexport const extraPropertyEventMap: IStringMap = {\n    scrollX: SCROLL,\n    scrollY: SCROLL\n}","import { IImageEvent, IObject, ILeaferImage } from '@leafer/interface'\n\nimport { Event } from './Event'\n\nexport class ImageEvent extends Event implements IImageEvent {\n\n    static LOAD = 'image.load'\n    static LOADED = 'image.loaded'\n    static ERROR = 'image.error'\n\n    readonly image: ILeaferImage\n    readonly error: string | IObject\n\n    readonly attrName: string\n    readonly attrValue: IObject\n\n    constructor(type: string, data: IImageEvent) {\n        super(type)\n        Object.assign(this, data)\n    }\n\n}","import { IBoundsEvent, IEventTarget, ILeaf, IObject } from '@leafer/interface'\n\nimport { Event } from './Event'\n\n\nexport class BoundsEvent extends Event implements IBoundsEvent {\n\n    static RESIZE = 'bounds.resize'\n\n    static INNER = 'bounds.inner'\n\n    static LOCAL = 'bounds.local'\n\n    static WORLD = 'bounds.world'\n\n\n    static checkHas(leaf: IEventTarget, type: string, mode: 'on' | 'off') {\n        if (mode === 'on') {\n            type === WORLD ? leaf.__hasWorldEvent = true : leaf.__hasLocalEvent = true\n        } else {\n            leaf.__hasLocalEvent = leaf.hasEvent(RESIZE) || leaf.hasEvent(INNER) || leaf.hasEvent(LOCAL)\n            leaf.__hasWorldEvent = leaf.hasEvent(WORLD)\n        }\n    }\n\n    static emitLocal(leaf: ILeaf) {\n        if (leaf.leaferIsReady) {\n            const { resized } = leaf.__layout\n            if (resized !== 'local') {\n                leaf.emit(RESIZE, leaf) //  inner / scale\n                if (resized === 'inner') leaf.emit(INNER, leaf)\n            }\n            leaf.emit(LOCAL, leaf)\n        }\n    }\n\n    static emitWorld(leaf: ILeaf) {\n        if (leaf.leaferIsReady) leaf.emit(WORLD, this)\n    }\n\n}\n\nconst { RESIZE, INNER, LOCAL, WORLD } = BoundsEvent\n\n\nexport const boundsEventMap: IObject = {};\n\n[RESIZE, INNER, LOCAL, WORLD].forEach(key => boundsEventMap[key] = 1)","import { ILeaf, INumberMap, IResizeEvent, IScreenSizeData } from '@leafer/interface'\nimport { isObject, isUndefined } from '@leafer/data'\n\nimport { Event } from './Event'\n\n\nexport class ResizeEvent extends Event implements IResizeEvent {\n\n    static RESIZE: string = 'resize'\n\n    static resizingKeys: INumberMap // resize编辑中的元素 LeafList 键表\n\n    readonly width: number\n    readonly height: number\n    readonly pixelRatio: number\n\n    public get bigger(): boolean {\n        if (!this.old) return true\n        const { width, height } = this.old\n        return this.width >= width && this.height >= height\n    }\n\n    public get smaller(): boolean {\n        return !this.bigger\n    }\n\n    public get samePixelRatio(): boolean {\n        if (!this.old) return true\n        return this.pixelRatio === this.old.pixelRatio\n    }\n\n    readonly old: IScreenSizeData\n\n    constructor(size: IScreenSizeData | string, oldSize?: IScreenSizeData) {\n        if (isObject(size)) {\n            super(ResizeEvent.RESIZE)\n            Object.assign(this, size)\n        } else {\n            super(size)\n        }\n        this.old = oldSize\n    }\n\n    static isResizing(leaf: ILeaf): boolean {\n        return this.resizingKeys && !isUndefined(this.resizingKeys[leaf.innerId])\n    }\n\n}","import { IWatchEvent, IWatchEventData } from '@leafer/interface'\n\nimport { Event } from './Event'\n\n\nexport class WatchEvent extends Event implements IWatchEvent {\n\n    static REQUEST = 'watch.request'\n    static DATA = 'watch.data'\n\n    readonly data: IWatchEventData\n\n    constructor(type: string, data?: IWatchEventData) {\n        super(type)\n        this.data = data\n    }\n\n}","import { ILayoutEvent, ILayoutBlockData } from '@leafer/interface'\n\nimport { Event } from './Event'\n\n\nexport class LayoutEvent extends Event implements ILayoutEvent {\n\n    static REQUEST = 'layout.request'\n\n    static START = 'layout.start'\n\n    static BEFORE = 'layout.before'\n    static LAYOUT = 'layout'\n    static AFTER = 'layout.after'\n\n    static AGAIN = 'layout.again'\n\n    static END = 'layout.end'\n\n    readonly data: ILayoutBlockData[]\n    readonly times: number\n\n    constructor(type: string, data?: ILayoutBlockData[], times?: number) {\n        super(type)\n        if (data) {\n            this.data = data\n            this.times = times\n        }\n\n    }\n\n}","import { IBounds, IRenderEvent, IRenderOptions } from '@leafer/interface'\n\nimport { Event } from './Event'\n\n\nexport class RenderEvent extends Event implements IRenderEvent {\n\n    static REQUEST = 'render.request'\n\n    static CHILD_START = 'render.child_start' // app 专用\n    static CHILD_END = 'render.child_end'\n\n    static START = 'render.start'\n\n    static BEFORE = 'render.before'\n    static RENDER = 'render'\n    static AFTER = 'render.after'\n\n    static AGAIN = 'render.again'\n\n    static END = 'render.end'\n\n    static NEXT = 'render.next'\n\n    readonly renderBounds: IBounds\n    readonly renderOptions: IRenderOptions\n    readonly times: number\n\n    constructor(type: string, times?: number, bounds?: IBounds, options?: IRenderOptions) {\n        super(type)\n        if (times) this.times = times\n        if (bounds) {\n            this.renderBounds = bounds\n            this.renderOptions = options\n        }\n    }\n\n}","import { ILeaferEvent, IStringMap } from '@leafer/interface'\n\nimport { Event } from './Event'\n\n\nexport class LeaferEvent extends Event implements ILeaferEvent {\n\n    static START = 'leafer.start'\n\n    static BEFORE_READY = 'leafer.before_ready'\n    static READY = 'leafer.ready'\n    static AFTER_READY = 'leafer.after_ready'\n\n    static VIEW_READY = 'leafer.view_ready'\n\n    static VIEW_COMPLETED = 'leafer.view_completed'\n\n    static STOP = 'leafer.stop'\n    static RESTART = 'leafer.restart'\n\n    static END = 'leafer.end'\n\n    static UPDATE_MODE = 'leafer.update_mode'\n\n    // 变换操作\n    static TRANSFORM = 'leafer.transform'\n    static MOVE = 'leafer.move'\n    static SCALE = 'leafer.scale'\n    static ROTATE = 'leafer.rotate'\n    static SKEW = 'leafer.skew'\n}\n\n\nconst { MOVE, SCALE, ROTATE, SKEW } = LeaferEvent\n\nexport const leaferTransformAttrMap: IStringMap = {\n    x: MOVE,\n    y: MOVE,\n    scaleX: SCALE,\n    scaleY: SCALE,\n    rotation: ROTATE,\n    skewX: SKEW,\n    skewY: SKEW\n}","import { IEventListener, IEventListenerMap, IEventListenerItem, IEventListenerId, IEvent, IObject, IEventTarget, IEventOption, IEventer, IEventParamsMap, InnerId, IEventParams, IFunction } from '@leafer/interface'\nimport { EventCreator } from '@leafer/platform'\nimport { isArray, isObject, isString, isUndefined } from '@leafer/data'\n\nimport { BoundsEvent, boundsEventMap } from './BoundsEvent'\n\n\nconst empty = {}\n\n\nexport class Eventer implements IEventer {\n\n    public readonly innerId: InnerId\n\n    public __captureMap?: IEventListenerMap\n\n    public __bubbleMap?: IEventListenerMap\n\n    public __hasLocalEvent?: boolean\n    public __hasWorldEvent?: boolean\n\n    public syncEventer?: IEventer // 同步触发一样事件的元素\n\n    public set event(map: IEventParamsMap) { this.on(map) }\n\n\n    public on(type: string | string[] | IEventParams[] | IEventParamsMap, listener?: IEventListener, options?: IEventOption): void {\n\n        if (!listener) {\n            let event: IFunction | [IFunction, IEventOption]\n            if (isArray(type)) (type as IEventParams[]).forEach(item => this.on(item[0], item[1], item[2]))\n            else for (let key in type as IEventParamsMap) isArray(event = (type as IEventParamsMap)[key]) ? this.on(key, event[0], event[1]) : this.on(key, event)\n            return\n        }\n\n        let capture: boolean, once: boolean\n        if (options) {\n            if (options === 'once') {\n                once = true\n            } else if (typeof options === 'boolean') {\n                capture = options\n            } else {\n                capture = options.capture\n                once = options.once\n            }\n        }\n\n        let events: IEventListenerItem[]\n        const map = __getListenerMap(this, capture, true)\n        const typeList = isString(type) ? type.split(' ') : type as string[]\n        const item = once ? { listener, once } : { listener }\n\n        typeList.forEach(type => {\n            if (type) {\n                events = map[type]\n                if (events) {\n                    if (events.findIndex(item => item.listener === listener) === -1) events.push(item)\n                } else {\n                    map[type] = [item]\n                }\n\n                if (boundsEventMap[type]) BoundsEvent.checkHas(this, type, 'on')\n            }\n        })\n    }\n\n    public off(type?: string | string[], listener?: IEventListener, options?: IEventOption): void {\n        if (type) {\n\n            const typeList = isString(type) ? type.split(' ') : type\n\n            if (listener) {\n\n                let capture: boolean\n                if (options) capture = typeof options === 'boolean' ? options : (options === 'once' ? false : options.capture)\n\n                let events: IEventListenerItem[], index: number\n                const map = __getListenerMap(this, capture)\n\n                typeList.forEach(type => {\n                    if (type) {\n                        events = map[type]\n                        if (events) {\n                            index = events.findIndex(item => item.listener === listener)\n                            if (index > -1) events.splice(index, 1)\n                            if (!events.length) delete map[type]\n                            if (boundsEventMap[type]) BoundsEvent.checkHas(this, type, 'off')\n                        }\n                    }\n                })\n\n            } else {\n\n                // off type\n                const { __bubbleMap: b, __captureMap: c } = this\n                typeList.forEach(type => {\n                    if (b) delete b[type]\n                    if (c) delete c[type]\n                })\n\n            }\n\n        } else {\n\n            this.__bubbleMap = this.__captureMap = undefined  // off all\n\n        }\n\n    }\n\n    public on_(type: string | string[] | IEventParams[], listener?: IEventListener, bind?: IObject, options?: IEventOption): IEventListenerId {\n        if (!listener) isArray(type) && (type as IEventParams[]).forEach(item => this.on(item[0], item[2] ? item[1] = item[1].bind(item[2]) : item[1], item[3]))\n        else this.on(type, bind ? listener = listener.bind(bind) : listener, options)\n        return { type, current: this as any, listener, options }\n    }\n\n    public off_(id: IEventListenerId | IEventListenerId[]): void {\n        if (!id) return\n        const list = isArray(id) ? id : [id]\n        list.forEach(item => {\n            if (item) {\n                if (!item.listener) isArray(item.type) && (item.type as IEventParams[]).forEach(v => item.current.off(v[0], v[1], v[3]))\n                else item.current.off(item.type as string | string[], item.listener, item.options)\n            }\n        })\n        list.length = 0\n    }\n\n    public once(type: string | string[] | IEventParams[], listener?: IEventListener, captureOrBind?: boolean | IObject, capture?: boolean): void {\n        if (!listener) return isArray(type) && (type as IEventParams[]).forEach(item => this.once(item[0], item[1], item[2], item[3]))\n        if (isObject(captureOrBind)) listener = listener.bind(captureOrBind)\n        else capture = captureOrBind\n        this.on(type, listener, { once: true, capture })\n    }\n\n    public emit(type: string, event?: IEvent | IObject, capture?: boolean): void {\n        if (!event && EventCreator.has(type)) event = EventCreator.get(type, { type, target: this, current: this } as IEvent)\n\n        const map = __getListenerMap(this, capture)\n        const list = map[type]\n        if (list) {\n            let item: IEventListenerItem\n            for (let i = 0, len = list.length; i < len; i++) {\n                if (item = list[i]) { // 防止 list 变化造成的空值\n                    item.listener(event)\n                    if (item.once) {\n                        this.off(type, item.listener, capture)\n                        i--, len--\n                    }\n                    if (event && event.isStopNow) break\n                }\n            }\n        }\n\n        this.syncEventer && this.syncEventer.emitEvent(event, capture)\n    }\n\n    public emitEvent(event: IEvent, capture?: boolean): void {\n        event.current = this\n        this.emit(event.type, event, capture)\n    }\n\n    public hasEvent(type: string, capture?: boolean): boolean {\n        if (this.syncEventer && this.syncEventer.hasEvent(type, capture)) return true\n\n        const { __bubbleMap: b, __captureMap: c } = this\n        const hasB = b && b[type], hasC = c && c[type]\n        return !!(isUndefined(capture) ? (hasB || hasC) : (capture ? hasC : hasB))\n    }\n\n    public destroy(): void {\n        this.__captureMap = this.__bubbleMap = this.syncEventer = null\n    }\n}\n\n\nfunction __getListenerMap(eventer: IEventTarget, capture?: boolean, create?: boolean): IEventListenerMap {\n    if (capture) {\n\n        const { __captureMap: c } = eventer\n        if (c) {\n            return c\n        } else {\n            return create ? eventer.__captureMap = {} : empty\n        }\n\n    } else {\n\n        const { __bubbleMap: b } = eventer\n        if (b) {\n            return b\n        } else {\n            return create ? eventer.__bubbleMap = {} : empty\n        }\n\n    }\n}","import { ILeafEventerModule } from '@leafer/interface'\nimport { Eventer } from '@leafer/event'\n\nconst { on, on_, off, off_, once, emit, emitEvent, hasEvent, destroy } = Eventer.prototype\n\nexport const LeafEventer: ILeafEventerModule = { on, on_, off, off_, once, emit, emitEvent, hasEvent, destroyEventer: destroy }","import { ILeafDataProxyModule, IObject, IValue } from '@leafer/interface'\nimport { PropertyEvent, extraPropertyEventMap, LeaferEvent, leaferTransformAttrMap } from '@leafer/event'\nimport { isObject, isFinite, isUndefined } from '@leafer/data'\nimport { Debug } from '@leafer/debug'\n\n\nconst debug = Debug.get('setAttr')\n\nexport const LeafDataProxy: ILeafDataProxyModule = {\n\n    __setAttr(name: string, newValue: IValue, checkFiniteNumber?: boolean): boolean {\n        if (this.leaferIsCreated) {\n\n            const oldValue = this.__.__getInput(name)\n\n            if (checkFiniteNumber && !isFinite(newValue) && !isUndefined(newValue)) { // 警告 NaN、Infinity、-Infinity、null、非有效数字\n                debug.warn(this.innerName, name, newValue)\n                newValue = undefined // must\n            }\n\n            if (isObject(newValue) || oldValue !== newValue) {\n\n                this.__realSetAttr(name, newValue)\n\n                if (this.isLeafer) {\n                    this.emitEvent(new PropertyEvent(PropertyEvent.LEAFER_CHANGE, this, name, oldValue, newValue))\n\n                    const transformEventName = leaferTransformAttrMap[name]\n                    if (transformEventName) {\n                        this.emitEvent(new LeaferEvent(transformEventName, this))\n                        this.emitEvent(new LeaferEvent(LeaferEvent.TRANSFORM, this))\n                    }\n                }\n\n                this.emitPropertyEvent(PropertyEvent.CHANGE, name, oldValue, newValue)\n\n                const extraPropertyEvent = extraPropertyEventMap[name]\n                if (extraPropertyEvent) this.emitPropertyEvent(extraPropertyEvent, name, oldValue, newValue)\n\n                return true\n            } else {\n                return false\n            }\n\n        } else {\n\n            this.__realSetAttr(name, newValue)\n\n            return true\n\n        }\n    },\n\n    emitPropertyEvent(type: string, name: string, oldValue: unknown, newValue: unknown): void {\n        const event = new PropertyEvent(type, this, name, oldValue, newValue)\n        this.isLeafer || (this.hasEvent(type) && this.emitEvent(event))\n        this.leafer.emitEvent(event)\n    },\n\n    __realSetAttr(name: string, newValue: IValue): void {\n        const data = this.__ as IObject\n        data[name] = newValue\n        if (this.__proxyData) this.setProxyAttr(name, newValue)\n        if (data.normalStyle) this.lockNormalStyle || isUndefined(data.normalStyle[name]) || (data.normalStyle[name] = newValue)\n    },\n\n\n    __getAttr(name: string): IValue {\n        if (this.__proxyData) return this.getProxyAttr(name)\n        return this.__.__get(name)\n    }\n}","import { ILeafMatrixModule, ILayoutData } from '@leafer/interface'\nimport { AroundHelper, MatrixHelper } from '@leafer/math'\n\n\nconst { setLayout, multiplyParent, translateInner, defaultWorld } = MatrixHelper\nconst { toPoint, tempPoint } = AroundHelper\n\nexport const LeafMatrix: ILeafMatrixModule = {\n\n    __updateWorldMatrix(): void {\n\n        const { parent, __layout, __world, __scrollWorld, __ } = this\n        multiplyParent(this.__local || __layout, parent ? (parent.__scrollWorld || parent.__world) : defaultWorld, __world, !!__layout.affectScaleOrRotation, __ as ILayoutData)\n\n        if (__scrollWorld) translateInner(Object.assign(__scrollWorld, __world), __.scrollX, __.scrollY)\n    },\n\n    __updateLocalMatrix(): void {\n\n        if (this.__local) {\n\n            const layout = this.__layout, local = this.__local, data = this.__\n\n            if (layout.affectScaleOrRotation) {\n\n                if ((layout.scaleChanged && (layout.resized || (layout.resized = 'scale'))) || layout.rotationChanged) {\n                    setLayout(local, data as ILayoutData, null, null, layout.affectRotation)\n                    layout.scaleChanged = layout.rotationChanged = undefined\n                }\n\n            }\n\n            local.e = data.x + data.offsetX\n            local.f = data.y + data.offsetY\n\n            if (data.around || data.origin) {\n                toPoint(data.around || data.origin, layout.boxBounds, tempPoint)\n                translateInner(local, -tempPoint.x, -tempPoint.y, !data.around)\n            }\n\n        }\n\n        this.__layout.matrixChanged = undefined\n\n    }\n\n}\n\n\n","import { ILeafBoundsModule, IBoundsData } from '@leafer/interface'\nimport { BoundsHelper } from '@leafer/math'\nimport { PathBounds } from '@leafer/path'\nimport { BranchHelper, LeafHelper } from '@leafer/helper'\nimport { BoundsEvent } from '@leafer/event'\nimport { isNumber } from '@leafer/data'\n\n\nconst { updateMatrix, updateAllMatrix } = LeafHelper\nconst { updateBounds } = BranchHelper\nconst { toOuterOf, copyAndSpread, copy } = BoundsHelper\nconst { toBounds } = PathBounds\n\nexport const LeafBounds: ILeafBoundsModule = {\n\n    __updateWorldBounds(): void {\n\n        const { __layout, __world } = this\n        toOuterOf(__layout.renderBounds, __world, __world)\n\n        if (__layout.resized) {\n            if (__layout.resized === 'inner') this.__onUpdateSize() // scale变化不用更新\n            if (this.__hasLocalEvent) BoundsEvent.emitLocal(this)\n            __layout.resized = undefined\n        }\n\n        if (this.__hasWorldEvent) BoundsEvent.emitWorld(this)\n\n    },\n\n    __updateLocalBounds(): void {\n\n        const layout = this.__layout\n\n        if (layout.boxChanged) {\n\n            if (!this.__.__pathInputed) this.__updatePath()\n            this.__updateRenderPath()\n\n            this.__updateBoxBounds()\n            layout.resized = 'inner'\n        }\n\n\n        if (layout.localBoxChanged) { // position change\n\n            if (this.__local) this.__updateLocalBoxBounds()\n            layout.localBoxChanged = undefined\n\n            if (layout.strokeSpread) layout.strokeChanged = true\n            if (layout.renderSpread) layout.renderChanged = true\n            if (this.parent) this.parent.__layout.boxChange()\n        }\n\n\n        layout.boxChanged = undefined // must after updateLocalBoxBounds()\n\n\n        if (layout.strokeChanged) {\n\n            layout.strokeSpread = this.__updateStrokeSpread()\n\n            if (layout.strokeSpread) {\n\n                if (layout.strokeBounds === layout.boxBounds) layout.spreadStroke()\n\n                this.__updateStrokeBounds()\n                this.__updateLocalStrokeBounds()\n\n            } else {\n                layout.spreadStrokeCancel()\n            }\n\n            layout.strokeChanged = undefined\n            if (layout.renderSpread || layout.strokeSpread !== layout.strokeBoxSpread) layout.renderChanged = true\n\n            if (this.parent) this.parent.__layout.strokeChange()\n            layout.resized = 'inner'\n        }\n\n\n        if (layout.renderChanged) {\n\n            layout.renderSpread = this.__updateRenderSpread()\n\n            if (layout.renderSpread) {\n\n                if (layout.renderBounds === layout.boxBounds || layout.renderBounds === layout.strokeBounds) layout.spreadRender()\n\n                this.__updateRenderBounds()\n                this.__updateLocalRenderBounds()\n\n            } else {\n                layout.spreadRenderCancel()\n            }\n\n            layout.renderChanged = undefined\n\n            if (this.parent) this.parent.__layout.renderChange()\n        }\n\n        layout.resized || (layout.resized = 'local')\n        layout.boundsChanged = undefined\n\n    },\n\n    __updateLocalBoxBounds(): void {\n        if (this.__hasMotionPath) this.__updateMotionPath()\n        if (this.__hasAutoLayout) this.__updateAutoLayout() //  origin / around / flow\n        toOuterOf(this.__layout.boxBounds, this.__local, this.__local)\n    },\n\n    __updateLocalStrokeBounds(): void {\n        toOuterOf(this.__layout.strokeBounds, this.__localMatrix, this.__layout.localStrokeBounds)\n    },\n\n    __updateLocalRenderBounds(): void {\n        toOuterOf(this.__layout.renderBounds, this.__localMatrix, this.__layout.localRenderBounds)\n    },\n\n\n    __updateBoxBounds(_secondLayout?: boolean, _bounds?: IBoundsData): void {\n        const b = this.__layout.boxBounds\n        const data = this.__\n        if (data.__usePathBox) {\n            toBounds(data.path, b)\n        } else {\n            b.x = 0\n            b.y = 0\n            b.width = data.width\n            b.height = data.height\n        }\n    },\n\n\n    __updateAutoLayout(): void {\n        this.__layout.matrixChanged = true\n        if (this.isBranch) {\n\n            this.__extraUpdate()\n\n            if (this.__.flow) {\n\n                if (this.__layout.boxChanged) this.__updateFlowLayout()\n\n                updateAllMatrix(this)\n                updateBounds(this, this)\n\n                if (this.__.__autoSide) this.__updateBoxBounds(true)\n\n            } else {\n\n                updateAllMatrix(this)\n                updateBounds(this, this)\n\n            }\n\n        } else {\n            updateMatrix(this)\n        }\n    },\n\n    __updateNaturalSize(): void {\n        const { __: data, __layout: layout } = this\n        data.__naturalWidth = layout.boxBounds.width\n        data.__naturalHeight = layout.boxBounds.height\n    },\n\n    __updateStrokeBounds(_bounds?: IBoundsData): void {\n        const layout = this.__layout\n        copyAndSpread(layout.strokeBounds, layout.boxBounds, layout.strokeBoxSpread)\n    },\n\n    __updateRenderBounds(_bounds?: IBoundsData): void {\n        const layout = this.__layout, { renderSpread } = layout\n        isNumber(renderSpread) && renderSpread <= 0 ? copy(layout.renderBounds, layout.strokeBounds) : copyAndSpread(layout.renderBounds, layout.boxBounds, renderSpread) // Box use -1\n    }\n\n}","import { ILeaferCanvas, IRenderOptions, ILeafRenderModule } from '@leafer/interface'\nimport { LeafHelper } from '@leafer/helper'\nimport { Debug } from '@leafer/debug'\n\n\nexport const LeafRender: ILeafRenderModule = {\n\n    __render(canvas: ILeaferCanvas, options: IRenderOptions): void {\n\n        if (options.shape) return this.__renderShape(canvas, options)\n        if (options.cellList && !options.cellList.has(this)) return\n\n        if (this.__worldOpacity) {\n\n            const data = this.__\n\n            if (data.bright && !options.topRendering) return options.topList.add(this)\n\n            canvas.setWorld(this.__nowWorld = this.__getNowWorld(options))\n            canvas.opacity = options.dimOpacity && !data.dimskip ? data.opacity * options.dimOpacity : data.opacity\n\n            if (this.__.__single) {\n\n                if (data.eraser === 'path') return this.__renderEraser(canvas, options)\n\n                const tempCanvas = canvas.getSameCanvas(true, true)\n                this.__draw(tempCanvas, options, canvas)\n\n                LeafHelper.copyCanvasByWorld(this, canvas, tempCanvas, this.__nowWorld, data.__blendMode, true)\n\n                tempCanvas.recycle(this.__nowWorld)\n\n            } else {\n\n                this.__draw(canvas, options)\n\n            }\n\n            if (Debug.showBounds) Debug.drawBounds(this, canvas, options)\n\n        }\n    },\n\n    __renderShape(canvas: ILeaferCanvas, options: IRenderOptions): void {\n        if (this.__worldOpacity) {\n            canvas.setWorld(this.__nowWorld = this.__getNowWorld(options))\n\n            this.__drawShape(canvas, options)\n        }\n    },\n\n    __clip(canvas: ILeaferCanvas, options: IRenderOptions): void {\n        if (this.__worldOpacity) {\n            canvas.setWorld(this.__nowWorld = this.__getNowWorld(options))\n            this.__drawRenderPath(canvas)\n            canvas.clipUI(this)\n        }\n    },\n\n    __updateWorldOpacity(): void {\n        this.__worldOpacity = this.__.visible ? (this.parent ? this.parent.__worldOpacity * this.__.opacity : this.__.opacity) : 0\n        if (this.__layout.opacityChanged) this.__layout.opacityChanged = false\n    }\n\n}","import { ILeaferCanvas, IRenderOptions, IBranchRenderModule } from '@leafer/interface'\nimport { BoundsHelper } from '@leafer/math'\nimport { LeafBoundsHelper } from '@leafer/helper'\n\n\nconst { excludeRenderBounds } = LeafBoundsHelper, { hasSize } = BoundsHelper\n\nexport const BranchRender: IBranchRenderModule = {\n\n    __updateChange(): void {\n        const { __layout: layout } = this\n        if (layout.childrenSortChanged) {\n            this.__updateSortChildren()\n            layout.childrenSortChanged = false\n        }\n\n        this.__.__checkSingle()\n    },\n\n\n    __render(canvas: ILeaferCanvas, options: IRenderOptions): void {\n\n        const nowWorld = this.__nowWorld = this.__getNowWorld(options)\n\n        if (this.__worldOpacity && hasSize(nowWorld)) { // 无宽高时渲染 mask 会有问题\n\n            const data = this.__\n\n            if (data.__useDim) {\n                if (data.dim) options.dimOpacity = data.dim === true ? 0.2 : data.dim\n                else if (data.bright && !options.topRendering) return options.topList.add(this)\n                else if (data.dimskip) options.dimOpacity && (options.dimOpacity = 0)\n            }\n\n            if (data.__single && !this.isBranchLeaf) { // Frame / Box 不能走 single 逻辑渲染组，需用 drawAfterFill 渲染成一个整体， 关联设置 BoxData.__drawAfterFill\n\n                if (data.eraser === 'path') return this.__renderEraser(canvas, options)\n\n                const tempCanvas = canvas.getSameCanvas(false, true)\n\n                this.__renderBranch(tempCanvas, options)\n\n                canvas.opacity = options.dimOpacity ? data.opacity * options.dimOpacity : data.opacity\n                canvas.copyWorldByReset(tempCanvas, nowWorld, nowWorld, data.__blendMode, true)\n\n                tempCanvas.recycle(nowWorld)\n\n            } else {\n\n                this.__renderBranch(canvas, options)\n\n            }\n\n        }\n\n    },\n\n    __renderBranch(canvas: ILeaferCanvas, options: IRenderOptions): void {\n        if (this.__hasMask) {\n\n            this.__renderMask(canvas, options)\n\n        } else {\n\n            const { children } = this\n            for (let i = 0, len = children.length; i < len; i++) {\n                excludeRenderBounds(children[i], options) || children[i].__render(canvas, options)\n            }\n\n        }\n    },\n\n\n    __clip(canvas: ILeaferCanvas, options: IRenderOptions): void {\n        if (this.__worldOpacity) {\n            const { children } = this\n            for (let i = 0, len = children.length; i < len; i++) {\n                excludeRenderBounds(children[i], options) || children[i].__clip(canvas, options)\n            }\n        }\n    }\n}","import { ILeaferBase, ILeaf, ILeafInputData, ILeafData, ILeaferCanvas, IRenderOptions, IBoundsType, ILocationType, IMatrixWithBoundsData, ILayoutBoundsData, IValue, ILeafLayout, InnerId, IHitCanvas, IRadiusPointData, IEventListenerMap, IEventListener, IEventListenerId, IEvent, IObject, IFunction, IPointData, IBoundsData, IBranch, IFindMethod, IMatrixData, IAttrDecorator, IMatrixWithBoundsScaleData, IMatrixWithScaleData, IAlign, IJSONOptions, IEventParamsMap, IEventOption, IAxis, IMotionPathData, IUnitData, IRotationPointData, ITransition, IValueFunction, IEventParams, IScaleData, IScaleFixed, IFourNumber } from '@leafer/interface'\nimport { BoundsHelper, IncrementId, MatrixHelper, PointHelper } from '@leafer/math'\nimport { LeafData, isUndefined, DataHelper } from '@leafer/data'\nimport { LeafLayout } from '@leafer/layout'\nimport { LeafDataProxy, LeafMatrix, LeafBounds, LeafEventer, LeafRender } from '@leafer/display-module'\nimport { boundsType, useModule, defineDataProcessor } from '@leafer/decorator'\nimport { LeafHelper } from '@leafer/helper'\nimport { ChildEvent } from '@leafer/event'\nimport { ImageManager } from '@leafer/image'\nimport { Plugin } from '@leafer/debug'\n\n\nconst tempScaleData = {} as IScaleData\nconst { LEAF, create } = IncrementId\nconst { stintSet } = DataHelper\nconst { toInnerPoint, toOuterPoint, multiplyParent } = MatrixHelper\nconst { toOuterOf } = BoundsHelper\nconst { copy, move } = PointHelper\nconst { moveLocal, zoomOfLocal, rotateOfLocal, skewOfLocal, moveWorld, zoomOfWorld, rotateOfWorld, skewOfWorld, transform, transformWorld, setTransform, getFlipTransform, getLocalOrigin, getRelativeWorld, drop } = LeafHelper\n\n@useModule(LeafDataProxy)\n@useModule(LeafMatrix)\n@useModule(LeafBounds)\n@useModule(LeafEventer)\n@useModule(LeafRender)\nexport class Leaf<TInputData = ILeafInputData> implements ILeaf {\n\n    public get tag(): string { return this.__tag }\n    public set tag(_value: string) { }\n\n    public get __tag(): string { return 'Leaf' }\n\n    public readonly innerId: InnerId  // 内部唯一标识\n    public get innerName(): string { return this.__.name || this.tag + this.innerId }\n\n    public get __DataProcessor() { return LeafData }\n    public get __LayoutProcessor() { return LeafLayout }\n\n    public leafer?: ILeaferBase\n    public parent?: ILeaf\n\n    public get leaferIsCreated(): boolean { return this.leafer && this.leafer.created }\n    public get leaferIsReady(): boolean { return this.leafer && this.leafer.ready }\n\n    public get isLeafer(): boolean { return false }\n    public get isBranch(): boolean { return false }\n    public get isBranchLeaf(): boolean { return false }\n\n    public syncEventer?: ILeaf // 同步触发一样事件的元素\n    public lockNormalStyle?: boolean\n\n    public __: ILeafData\n    public __layout: ILeafLayout\n\n    public __world: IMatrixWithBoundsScaleData\n    public __local?: IMatrixWithBoundsData // and localStrokeBounds? localRenderBounds?\n\n    public __nowWorld?: IMatrixWithBoundsScaleData // use __world or __cameraWorld render\n    public __cameraWorld?: IMatrixWithBoundsScaleData // use camera matrix render  \n\n    public get __localMatrix(): IMatrixData { return this.__local || this.__layout }\n    public get __localBoxBounds(): IBoundsData { return this.__local || this.__layout }\n\n    public __worldOpacity: number\n\n    // now transform\n    public get worldTransform(): IMatrixWithScaleData { return this.__layout.getTransform('world') as IMatrixWithScaleData }\n    public get localTransform(): IMatrixData { return this.__layout.getTransform('local') }\n\n    public __scrollWorld?: IMatrixWithBoundsScaleData\n    public get scrollWorldTransform(): IMatrixWithScaleData { this.updateLayout(); return this.__scrollWorld || this.__world }\n\n    // now bounds\n    public get boxBounds(): IBoundsData { return this.getBounds('box', 'inner') }\n    public get renderBounds(): IBoundsData { return this.getBounds('render', 'inner') }\n    public get worldBoxBounds(): IBoundsData { return this.getBounds('box') }\n    public get worldStrokeBounds(): IBoundsData { return this.getBounds('stroke') }\n    public get worldRenderBounds(): IBoundsData { return this.getBounds('render') }\n\n    // now opacity\n    public get worldOpacity(): number { this.updateLayout(); return this.__worldOpacity }\n\n    public __level: number // layer level  0 -> branch -> branch -> deep\n    public __tempNumber: number // temp sort\n\n    public get __worldFlipped(): boolean { return this.__world.scaleX < 0 || this.__world.scaleY < 0 }\n\n    public __hasAutoLayout?: boolean\n    public __hasMask?: boolean\n    public __hasEraser?: boolean\n    public __hitCanvas?: IHitCanvas\n\n    public get __onlyHitMask(): boolean { return this.__hasMask && !this.__.hitChildren }\n    public get __ignoreHitWorld(): boolean { return (this.__hasMask || this.__hasEraser) && this.__.hitChildren }\n    public get __inLazyBounds(): boolean { return this.leaferIsCreated && this.leafer.lazyBounds.hit(this.__world) }\n\n    public get pathInputed(): boolean { return this.__.__pathInputed as unknown as boolean }\n\n    // event\n    public set event(map: IEventParamsMap) { this.on(map) }\n\n    public __captureMap?: IEventListenerMap\n    public __bubbleMap?: IEventListenerMap\n\n    public __hasLocalEvent?: boolean\n    public __hasWorldEvent?: boolean\n\n    // branch \n    public children?: ILeaf[]\n    public topChildren?: ILeaf[]\n\n    public destroyed: boolean\n\n\n    constructor(data?: TInputData) {\n        this.innerId = create(LEAF)\n        this.reset(data)\n        if (this.__bubbleMap) this.__emitLifeEvent(ChildEvent.CREATED)\n    }\n\n\n    public reset(data?: ILeafInputData): void {\n        if (this.leafer) this.leafer.forceRender(this.__world) // fix: add old bounds rendering\n\n        if (data as any !== 0) {  // 设为 0 时可用于 text boxStyle 节省开销\n            this.__world = { a: 1, b: 0, c: 0, d: 1, e: 0, f: 0, x: 0, y: 0, width: 0, height: 0, scaleX: 1, scaleY: 1 }\n            if (data !== null) this.__local = { a: 1, b: 0, c: 0, d: 1, e: 0, f: 0, x: 0, y: 0, width: 0, height: 0 }\n        }\n\n        this.__worldOpacity = 1\n\n        this.__ = new this.__DataProcessor(this)\n        this.__layout = new this.__LayoutProcessor(this)\n\n        if (this.__level) this.resetCustom()\n        if (data) {\n            if ((data as ILeaf).__) data = (data as ILeaf).toJSON()\n            data.children ? this.set(data) : Object.assign(this, data)\n        }\n    }\n\n    public resetCustom(): void {\n        this.__hasMask = this.__hasEraser = null\n        this.forceUpdate()\n    }\n\n\n    public waitParent(item: IFunction, bind?: IObject): void {\n        if (bind) item = item.bind(bind)\n        this.parent ? item() : this.on(ChildEvent.ADD, item, 'once')\n    }\n\n    public waitLeafer(item: IFunction, bind?: IObject): void {\n        if (bind) item = item.bind(bind)\n        this.leafer ? item() : this.on(ChildEvent.MOUNTED, item, 'once')\n    }\n\n    public nextRender(item: IFunction, bind?: IObject, off?: 'off'): void {\n        this.leafer ? this.leafer.nextRender(item, bind, off) : this.waitLeafer(() => this.leafer.nextRender(item, bind, off))\n    }\n\n    public removeNextRender(item: IFunction): void {\n        this.nextRender(item, null, 'off')\n    }\n\n    public __bindLeafer(leafer: ILeaferBase | null): void {\n        if (this.isLeafer && leafer !== null) leafer = this as unknown as ILeaferBase\n\n        if (this.leafer && !leafer) this.leafer.leafs--\n\n        this.leafer = leafer\n\n        if (leafer) {\n            leafer.leafs++\n            this.__level = this.parent ? this.parent.__level + 1 : 1\n            if ((this as ILeaf).animation) this.__runAnimation('in')\n            if (this.__bubbleMap) this.__emitLifeEvent(ChildEvent.MOUNTED)\n        } else {\n            this.__emitLifeEvent(ChildEvent.UNMOUNTED)\n        }\n\n        if (this.isBranch) {\n            const { children } = this\n            for (let i = 0, len = children.length; i < len; i++) {\n                children[i].__bindLeafer(leafer)\n            }\n        }\n    }\n\n    // data\n\n    public set(_data: IObject, _isTemp?: boolean): void { }\n\n    public get<K extends keyof this>(_name?: K | K[] | ILeafInputData): ILeafInputData | this[K] { return undefined }\n\n    public setAttr(name: string, value: any): void { (this as IObject)[name] = value }\n    public getAttr(name: string): any { return (this as IObject)[name] }\n\n    public getComputedAttr(name: string): any { return (this.__ as IObject)[name] }\n\n    public toJSON(options?: IJSONOptions): IObject {\n        if (options) this.__layout.update()\n        return this.__.__getInputData(null, options)\n    }\n\n    public toString(options?: IJSONOptions): string {\n        return JSON.stringify(this.toJSON(options))\n    }\n\n    public toSVG(): string { return undefined }\n\n    public __SVG(_data: IObject): void { }\n\n    public toHTML(): string { return undefined }\n\n    // LeafDataProxy rewrite\n\n    public __setAttr(_attrName: string, _newValue: IValue): boolean { return true }\n\n    public __getAttr(_attrName: string): IValue { return undefined }\n\n    public setProxyAttr(_attrName: string, _newValue: IValue): void { }\n\n    public getProxyAttr(_attrName: string): IValue { return undefined }\n\n    // ---\n\n\n    // find\n\n    public find(_condition: number | string | IFindMethod, _options?: any): ILeaf[] { return undefined }\n\n    public findTag(_tag: string | string[]): ILeaf[] { return undefined }\n\n    public findOne(_condition: number | string | IFindMethod, _options?: any): ILeaf | undefined { return undefined }\n\n    public findId(_id: number | string): ILeaf | undefined { return undefined }\n\n    // ---\n\n\n    // @leafer-in/state rewrite\n\n    public focus(_value?: boolean): void { }\n\n    public updateState(): void { }\n\n    // ---\n\n\n    public updateLayout(): void {\n        this.__layout.update()\n    }\n\n    public forceUpdate(attrName?: string): void {\n        if (isUndefined(attrName)) attrName = 'width'\n        else if (attrName === 'surface') attrName = 'blendMode'\n        const value = this.__.__getInput(attrName);\n        (this.__ as any)[attrName] = isUndefined(value) ? null : undefined;\n        (this as any)[attrName] = value\n    }\n\n    public forceRender(_bounds?: IBoundsData, _sync?: boolean): void {\n        this.forceUpdate('surface')\n    }\n\n    public __extraUpdate(): void {\n        if (this.leaferIsReady) this.leafer.layouter.addExtra(this) // add part 额外更新元素\n    }\n\n    // LeafMatrix rewrite\n\n    public __updateWorldMatrix(): void { }\n\n    public __updateLocalMatrix(): void { }\n\n    // ---\n\n    // LeafBounds rewrite\n\n    public __updateWorldBounds(): void { }\n\n    public __updateLocalBounds(): void { }\n\n\n    public __updateLocalBoxBounds(): void { }\n\n    public __updateLocalStrokeBounds(): void { }\n\n    public __updateLocalRenderBounds(): void { }\n\n    // box\n\n    public __updateBoxBounds(_secondLayout?: boolean, _bounds?: IBoundsData): void { }\n\n    public __updateContentBounds(): void { }\n\n    public __updateStrokeBounds(_bounds?: IBoundsData): void { }\n\n    public __updateRenderBounds(_bounds?: IBoundsData): void { }\n\n\n    public __updateAutoLayout(): void { }\n\n    public __updateFlowLayout(): void { }\n\n    public __updateNaturalSize(): void { }\n\n\n    public __updateStrokeSpread(): IFourNumber { return 0 }\n\n    public __updateRenderSpread(): IFourNumber { return 0 }\n\n    public __onUpdateSize(): void { }\n\n    // ---\n\n\n    public __updateEraser(value?: boolean): void {\n        this.__hasEraser = value ? true : this.children.some(item => item.__.eraser)\n    }\n\n    public __renderEraser(canvas: ILeaferCanvas, options: IRenderOptions): void {  // path eraser\n        canvas.save()\n        this.__clip(canvas, options)\n        const { renderBounds: r } = this.__layout\n        canvas.clearRect(r.x, r.y, r.width, r.height)\n        canvas.restore()\n    }\n\n    public __updateMask(_value?: boolean): void {\n        this.__hasMask = this.children.some(item => item.__.mask && item.__.visible && item.__.opacity)\n    }\n\n    // LeafMask rewrite\n\n    public __renderMask(_canvas: ILeaferCanvas, _options: IRenderOptions): void { }\n\n\n    // ---\n\n\n    // convert\n\n    public __getNowWorld(options: IRenderOptions): IMatrixWithBoundsScaleData {\n        if (options.matrix) {\n            if (!this.__cameraWorld) this.__cameraWorld = {} as IMatrixWithBoundsScaleData\n            const cameraWorld = this.__cameraWorld, world = this.__world\n            multiplyParent(world, options.matrix, cameraWorld, undefined, world)\n            toOuterOf(this.__layout.renderBounds, cameraWorld, cameraWorld)\n            stintSet(cameraWorld, 'half', world.half)\n            stintSet(cameraWorld, 'ignorePixelSnap', world.ignorePixelSnap)\n            return cameraWorld\n        } else {\n            return this.__world\n        }\n    }\n\n    public getClampRenderScale(): number {\n        let { scaleX } = this.__nowWorld || this.__world\n        if (scaleX < 0) scaleX = -scaleX\n        return scaleX > 1 ? scaleX : 1\n    }\n\n    public getRenderScaleData(abs?: boolean, scaleFixed?: IScaleFixed): IScaleData {\n        let { scaleX, scaleY } = ImageManager.patternLocked ? this.__world : this.__nowWorld\n        if (abs) scaleX < 0 && (scaleX = -scaleX), scaleY < 0 && (scaleY = -scaleY)\n        if (scaleFixed === true || (scaleFixed === 'zoom-in' && scaleX > 1 && scaleY > 1)) scaleX = scaleY = 1\n        tempScaleData.scaleX = scaleX\n        tempScaleData.scaleY = scaleY\n        return tempScaleData\n    }\n\n    public getTransform(relative?: ILocationType | ILeaf): IMatrixData {\n        return this.__layout.getTransform(relative || 'local')\n    }\n\n\n    public getBounds(type?: IBoundsType, relative?: ILocationType | ILeaf): IBoundsData {\n        return this.__layout.getBounds(type, relative)\n    }\n\n    public getLayoutBounds(type?: IBoundsType, relative?: ILocationType | ILeaf, unscale?: boolean): ILayoutBoundsData {\n        return this.__layout.getLayoutBounds(type, relative, unscale)\n    }\n\n    public getLayoutPoints(type?: IBoundsType, relative?: ILocationType | ILeaf): IPointData[] {\n        return this.__layout.getLayoutPoints(type, relative)\n    }\n\n\n    public getWorldBounds(inner: IBoundsData, relative?: ILeaf, change?: boolean): IBoundsData {\n        const matrix = relative ? getRelativeWorld(this, relative) : this.worldTransform\n        const to = change ? inner : {} as IBoundsData\n        toOuterOf(inner, matrix, to)\n        return to\n    }\n\n\n    public worldToLocal(world: IPointData, to?: IPointData, distance?: boolean, relative?: ILeaf): void {\n        if (this.parent) {\n            this.parent.worldToInner(world, to, distance, relative)\n        } else {\n            if (to) copy(to, world)\n        }\n    }\n\n    public localToWorld(local: IPointData, to?: IPointData, distance?: boolean, relative?: ILeaf): void {\n        if (this.parent) {\n            this.parent.innerToWorld(local, to, distance, relative)\n        } else {\n            if (to) copy(to, local)\n        }\n    }\n\n    public worldToInner(world: IPointData, to?: IPointData, distance?: boolean, relative?: ILeaf): void {\n        if (relative) {\n            relative.innerToWorld(world, to, distance)\n            world = to ? to : world\n        }\n        toInnerPoint(this.scrollWorldTransform, world, to, distance)\n    }\n\n    public innerToWorld(inner: IPointData, to?: IPointData, distance?: boolean, relative?: ILeaf): void {\n        toOuterPoint(this.scrollWorldTransform, inner, to, distance)\n        if (relative) relative.worldToInner(to ? to : inner, null, distance)\n    }\n\n    // simple\n\n    public getBoxPoint(world: IPointData, relative?: ILeaf, distance?: boolean, change?: boolean): IPointData {\n        return this.getBoxPointByInner(this.getInnerPoint(world, relative, distance, change), null, null, true)\n    }\n\n    public getBoxPointByInner(inner: IPointData, _relative?: ILeaf, _distance?: boolean, change?: boolean): IPointData {\n        const point = change ? inner : { ...inner } as IPointData, { x, y } = this.boxBounds\n        move(point, -x, -y)\n        return point\n    }\n\n    public getInnerPoint(world: IPointData, relative?: ILeaf, distance?: boolean, change?: boolean): IPointData {\n        const point = change ? world : {} as IPointData\n        this.worldToInner(world, point, distance, relative)\n        return point\n    }\n\n    public getInnerPointByBox(box: IPointData, _relative?: ILeaf, _distance?: boolean, change?: boolean): IPointData {\n        const point = change ? box : { ...box } as IPointData, { x, y } = this.boxBounds\n        move(point, x, y)\n        return point\n    }\n\n    public getInnerPointByLocal(local: IPointData, _relative?: ILeaf, distance?: boolean, change?: boolean): IPointData {\n        return this.getInnerPoint(local, this.parent, distance, change)\n    }\n\n    public getLocalPoint(world: IPointData, relative?: ILeaf, distance?: boolean, change?: boolean): IPointData {\n        const point = change ? world : {} as IPointData\n        this.worldToLocal(world, point, distance, relative)\n        return point\n    }\n\n    public getLocalPointByInner(inner: IPointData, _relative?: ILeaf, distance?: boolean, change?: boolean): IPointData {\n        return this.getWorldPoint(inner, this.parent, distance, change)\n    }\n\n    public getPagePoint(world: IPointData, relative?: ILeaf, distance?: boolean, change?: boolean): IPointData {\n        const layer = this.leafer ? this.leafer.zoomLayer : this\n        return layer.getInnerPoint(world, relative, distance, change)\n    }\n\n    public getWorldPoint(inner: IPointData, relative?: ILeaf, distance?: boolean, change?: boolean): IPointData {\n        const point = change ? inner : {} as IPointData\n        this.innerToWorld(inner, point, distance, relative)\n        return point\n    }\n\n    public getWorldPointByBox(box: IPointData, relative?: ILeaf, distance?: boolean, change?: boolean): IPointData {\n        return this.getWorldPoint(this.getInnerPointByBox(box, null, null, change), relative, distance, true)\n    }\n\n    public getWorldPointByLocal(local: IPointData, relative?: ILeaf, distance?: boolean, change?: boolean): IPointData {\n        const point = change ? local : {} as IPointData\n        this.localToWorld(local, point, distance, relative)\n        return point\n    }\n\n    public getWorldPointByPage(page: IPointData, relative?: ILeaf, distance?: boolean, change?: boolean): IPointData {\n        const layer = this.leafer ? this.leafer.zoomLayer : this\n        return layer.getWorldPoint(page, relative, distance, change)\n    }\n\n\n    // transform \n\n    public setTransform(matrix: IMatrixData, resize?: boolean, transition?: ITransition): void {\n        setTransform(this, matrix, resize, transition)\n    }\n\n    public transform(matrix: IMatrixData, resize?: boolean, transition?: ITransition): void {\n        transform(this, matrix, resize, transition)\n    }\n\n    public move(x: number | IPointData, y?: number, transition?: ITransition): void {\n        moveLocal(this, x, y, transition)\n    }\n\n\n    public moveInner(x: number | IPointData, y?: number, transition?: ITransition): void {\n        moveWorld(this, x, y, true, transition)\n    }\n\n    public scaleOf(origin: IPointData | IAlign, scaleX: number, scaleY?: number | ITransition, resize?: boolean, transition?: ITransition): void {\n        zoomOfLocal(this, getLocalOrigin(this, origin), scaleX, scaleY, resize, transition)\n    }\n\n    public rotateOf(origin: IPointData | IAlign, rotation: number, transition?: ITransition): void {\n        rotateOfLocal(this, getLocalOrigin(this, origin), rotation, transition)\n    }\n\n    public skewOf(origin: IPointData | IAlign, skewX: number, skewY?: number, resize?: boolean, transition?: ITransition): void {\n        skewOfLocal(this, getLocalOrigin(this, origin), skewX, skewY, resize, transition)\n    }\n\n\n    public transformWorld(worldTransform?: IMatrixData, resize?: boolean, transition?: ITransition): void {\n        transformWorld(this, worldTransform, resize, transition)\n    }\n\n    public moveWorld(x: number | IPointData, y?: number, transition?: ITransition): void {\n        moveWorld(this, x, y, false, transition)\n    }\n\n    public scaleOfWorld(worldOrigin: IPointData, scaleX: number, scaleY?: number | ITransition, resize?: boolean, transition?: ITransition): void {\n        zoomOfWorld(this, worldOrigin, scaleX, scaleY, resize, transition)\n    }\n\n    public rotateOfWorld(worldOrigin: IPointData, rotation: number): void {\n        rotateOfWorld(this, worldOrigin, rotation)\n    }\n\n    public skewOfWorld(worldOrigin: IPointData, skewX: number, skewY?: number, resize?: boolean, transition?: ITransition): void {\n        skewOfWorld(this, worldOrigin, skewX, skewY, resize, transition)\n    }\n\n    public flip(axis: IAxis, transition?: ITransition): void {\n        transform(this, getFlipTransform(this, axis), false, transition)\n    }\n\n\n    // @leafer-in/resize rewrite\n\n    public scaleResize(scaleX: number, scaleY = scaleX, _noResize?: boolean): void {\n        (this as ILeaf).scaleX *= scaleX;\n        (this as ILeaf).scaleY *= scaleY\n    }\n\n    public __scaleResize(_scaleX: number, _scaleY: number): void { }\n\n\n    public resizeWidth(_width: number): void { }\n\n    public resizeHeight(_height: number): void { }\n\n\n    // @leafer-ui/hit LeafHit rewrite\n\n    public hit(_world: IPointData, _hitRadius?: number): boolean { return true }\n\n    public __hitWorld(_point: IRadiusPointData, _forceHitFill?: boolean): boolean { return true }\n\n    public __hit(_local: IRadiusPointData, _forceHitFill?: boolean): boolean { return true }\n\n    public __hitFill(_inner: IRadiusPointData): boolean { return true }\n\n    public __hitStroke(_inner: IRadiusPointData, _strokeWidth: number): boolean { return true }\n\n    public __hitPixel(_inner: IRadiusPointData): boolean { return true }\n\n    public __drawHitPath(_canvas: ILeaferCanvas): void { }\n\n    public __updateHitCanvas(): void { }\n\n    // ---\n\n\n    // LeafRender rewrite\n\n    public __render(_canvas: ILeaferCanvas, _options: IRenderOptions): void { }\n\n    public __drawFast(_canvas: ILeaferCanvas, _options: IRenderOptions): void { }\n\n    public __draw(_canvas: ILeaferCanvas, _options: IRenderOptions, _originCanvas?: ILeaferCanvas): void { }\n\n\n    public __clip(_canvas: ILeaferCanvas, _options: IRenderOptions): void { }\n\n    public __renderShape(_canvas: ILeaferCanvas, _options: IRenderOptions): void { }\n\n    public __drawShape(_canvas: ILeaferCanvas, _options: IRenderOptions): void { }\n\n\n    public __updateWorldOpacity(): void { }\n\n    public __updateChange(): void { }\n\n    // ---\n\n\n    // path\n\n    public __drawPath(_canvas: ILeaferCanvas): void { }\n\n    public __drawRenderPath(_canvas: ILeaferCanvas): void { }\n\n    public __updatePath(): void { }\n\n    public __updateRenderPath(): void { }\n\n    // ---\n\n\n    // @leafer-in/motion-path rewrite\n\n    public getMotionPathData(): IMotionPathData {\n        return Plugin.need('path')\n    }\n\n    public getMotionPoint(_motionDistance: number | IUnitData): IRotationPointData {\n        return Plugin.need('path')\n    }\n\n    public getMotionTotal(): number {\n        return 0\n    }\n\n    public __updateMotionPath(): void { }\n\n    // ---\n\n\n    // @leafer-in/animate rewrite\n    public __runAnimation(_type: 'in' | 'out', _complete?: IFunction): void { }\n\n\n    // Branch rewrite\n\n    public __updateSortChildren(): void { }\n\n    public add(_child: ILeaf | ILeaf[] | ILeafInputData | ILeafInputData[], _index?: number): void { }\n\n    public remove(_child?: ILeaf | number | string | IFindMethod, destroy?: boolean): void {\n        if (this.parent) this.parent.remove(this, destroy)\n    }\n\n    public dropTo(parent: ILeaf, index?: number, resize?: boolean): void {\n        drop(this, parent, index, resize)\n    }\n\n    // ---\n\n\n    // LeafEventer rewrite\n\n    public on(_type: string | string[] | IEventParams[] | IEventParamsMap, _listener?: IEventListener, _options?: IEventOption): void { }\n\n    public off(_type?: string | string[], _listener?: IEventListener, _options?: IEventOption): void { }\n\n    public on_(_type: string | string[] | IEventParams[], _listener?: IEventListener, _bind?: IObject, _options?: IEventOption): IEventListenerId { return undefined }\n\n    public off_(_id: IEventListenerId | IEventListenerId[]): void { }\n\n    public once(_type: string | string[] | IEventParams[], _listener?: IEventListener, _captureOrBind?: boolean | IObject, _capture?: boolean): void { }\n\n    public emit(_type: string, _event?: IEvent | IObject, _capture?: boolean): void { }\n\n    public emitEvent(_event?: IEvent, _capture?: boolean): void { }\n\n    public hasEvent(_type: string, _capture?: boolean): boolean { return false }\n\n    // ---\n\n    static changeAttr(attrName: string, defaultValue: IValue | IValueFunction, fn?: IAttrDecorator): void {\n        fn ? this.addAttr(attrName, defaultValue, fn) : defineDataProcessor(this.prototype, attrName, defaultValue)\n    }\n\n    static addAttr(attrName: string, defaultValue: IValue | IValueFunction, fn?: IAttrDecorator, helpValue?: IValue): void {\n        if (!fn) fn = boundsType\n        fn(defaultValue, helpValue)(this.prototype, attrName)\n    }\n\n\n    public __emitLifeEvent(type: string): void {\n        if (this.hasEvent(type)) this.emitEvent(new ChildEvent(type, this, this.parent))\n    }\n\n\n    public destroy(): void {\n        if (!this.destroyed) {\n            if (this.parent) this.remove()\n            if (this.children) (this as unknown as IBranch).clear()\n\n            this.__emitLifeEvent(ChildEvent.DESTROY)\n\n            this.__.destroy()\n            this.__layout.destroy();\n\n            (this as ILeaf).destroyEventer()\n            this.destroyed = true\n        }\n    }\n\n}\n","import { IBoundsData, IFourNumber, ILeaf } from '@leafer/interface'\nimport { ChildEvent } from '@leafer/event'\nimport { BoundsHelper } from '@leafer/math'\nimport { BranchHelper, LeafBoundsHelper } from '@leafer/helper'\nimport { useModule } from '@leafer/decorator'\nimport { BranchRender } from '@leafer/display-module'\nimport { UICreator } from '@leafer/platform'\nimport { isArray, isUndefined } from '@leafer/data'\nimport { Debug } from '@leafer/debug'\n\nimport { Leaf } from './Leaf'\n\n\nconst { setListWithFn } = BoundsHelper\nconst { sort } = BranchHelper\nconst { localBoxBounds, localStrokeBounds, localRenderBounds, maskLocalBoxBounds, maskLocalStrokeBounds, maskLocalRenderBounds } = LeafBoundsHelper\nconst debug = new Debug('Branch')\n\n@useModule(BranchRender)\nexport class Branch extends Leaf { // tip: rewrited Group\n\n    // overwrite\n\n    public __updateStrokeSpread(): IFourNumber {\n        const { children } = this\n        for (let i = 0, len = children.length; i < len; i++) {\n            if (children[i].__layout.strokeSpread) return 1\n        }\n        return 0\n    }\n\n    public __updateRenderSpread(): IFourNumber {\n        const { children } = this\n        for (let i = 0, len = children.length; i < len; i++) {\n            if (children[i].__layout.renderSpread) return 1\n        }\n        return 0\n    }\n\n    public __updateBoxBounds(_secondLayout?: boolean, bounds?: IBoundsData): void {\n        setListWithFn(bounds || this.__layout.boxBounds, this.children, this.__hasMask ? maskLocalBoxBounds : localBoxBounds)\n    }\n\n    public __updateStrokeBounds(bounds?: IBoundsData): void {\n        setListWithFn(bounds || this.__layout.strokeBounds, this.children, this.__hasMask ? maskLocalStrokeBounds : localStrokeBounds)\n    }\n\n    public __updateRenderBounds(bounds?: IBoundsData): void {\n        setListWithFn(bounds || this.__layout.renderBounds, this.children, this.__hasMask ? maskLocalRenderBounds : localRenderBounds)\n    }\n\n\n    // own\n\n    public __updateSortChildren(): void {\n        let affectSort: boolean\n        const { children } = this\n        if (children.length > 1) {\n            for (let i = 0, len = children.length; i < len; i++) {\n                children[i].__tempNumber = i\n                if (children[i].__.zIndex) affectSort = true\n            }\n            children.sort(sort)\n            this.__layout.affectChildrenSort = affectSort\n        }\n    }\n\n    public add(child: ILeaf, index?: number): void {\n        if (child === this || child.destroyed) return debug.warn('add self or destroyed')\n\n        const noIndex = isUndefined(index)\n        if (!child.__) {\n            if (isArray(child)) return child.forEach(item => { this.add(item, index); noIndex || index++ }) // add []\n            else child = UICreator.get(child.tag, child) // add JSON\n        }\n\n        if (child.parent) child.parent.remove(child)\n        child.parent = this\n\n        noIndex ? this.children.push(child) : this.children.splice(index, 0, child)\n        if (child.isBranch) this.__.__childBranchNumber = (this.__.__childBranchNumber || 0) + 1\n\n        const childLayout = child.__layout\n        childLayout.boxChanged || childLayout.boxChange() // layouted(removed), need update\n        childLayout.matrixChanged || childLayout.matrixChange() // layouted(removed), need update\n\n        if (child.__bubbleMap) child.__emitLifeEvent(ChildEvent.ADD)\n\n        if (this.leafer) {\n            child.__bindLeafer(this.leafer)\n            if (this.leafer.created) this.__emitChildEvent(ChildEvent.ADD, child)\n        }\n\n        this.__layout.affectChildrenSort && this.__layout.childrenSortChange()\n    }\n\n    public addMany(...children: ILeaf[]): void { this.add(children as any) }\n\n    public remove(child?: ILeaf, destroy?: boolean): void {\n        if (child) {\n\n            if (child.__) {\n\n                if ((child as ILeaf).animationOut) child.__runAnimation('out', () => this.__remove(child, destroy))\n                else this.__remove(child, destroy)\n\n            } else this.find(child as any).forEach(item => this.remove(item, destroy)) // \n\n        } else if (isUndefined(child)) {\n            super.remove(null, destroy)\n        }\n    }\n\n    public removeAll(destroy?: boolean): void {\n        const { children } = this\n        if (children.length) {\n            this.children = []\n            this.__preRemove()\n            this.__.__childBranchNumber = 0\n            children.forEach(child => {\n                this.__realRemoveChild(child)\n                if (destroy) child.destroy()\n            })\n        }\n    }\n\n    public clear(): void {\n        this.removeAll(true)\n    }\n\n    protected __remove(child?: ILeaf, destroy?: boolean): void {\n        const index = this.children.indexOf(child)\n        if (index > -1) {\n            this.children.splice(index, 1)\n            if (child.isBranch) this.__.__childBranchNumber = (this.__.__childBranchNumber || 1) - 1\n            this.__preRemove()\n            this.__realRemoveChild(child)\n            if (destroy) child.destroy()\n        }\n    }\n\n    protected __preRemove(): void {\n        if (this.__hasMask) this.__updateMask()\n        if (this.__hasEraser) this.__updateEraser()\n        this.__layout.boxChange()\n        this.__layout.affectChildrenSort && this.__layout.childrenSortChange()\n    }\n\n    protected __realRemoveChild(child: ILeaf): void {\n        child.__emitLifeEvent(ChildEvent.REMOVE)\n        child.parent = null\n        if (this.leafer) {\n            child.__bindLeafer(null)\n            if (this.leafer.created) {\n                this.__emitChildEvent(ChildEvent.REMOVE, child)\n                if (this.leafer.hitCanvasManager) this.leafer.hitCanvasManager.clear()\n            }\n        }\n    }\n\n    protected __emitChildEvent(type: string, child: ILeaf): void {\n        const event = new ChildEvent(type, child, this)\n        if (this.hasEvent(type) && !this.isLeafer) this.emitEvent(event)\n        this.leafer.emitEvent(event)\n    }\n\n}","import { ILeaf, ILeafList, ILeafListItemCallback, INumberMap } from '@leafer/interface'\nimport { isArray, isUndefined } from '@leafer/data'\n\nexport class LeafList implements ILeafList {\n\n    public list: ILeaf[]\n    public keys: INumberMap\n\n    public get length(): number { return this.list.length }\n\n    constructor(item?: ILeaf | ILeaf[]) {\n        this.reset()\n        if (item) isArray(item) ? this.addList(item) : this.add(item)\n    }\n\n    public has(leaf: ILeaf): boolean {\n        return leaf && !isUndefined(this.keys[leaf.innerId])\n    }\n\n    public indexAt(index: number): ILeaf {\n        return this.list[index]\n    }\n\n    public indexOf(leaf: ILeaf): number {\n        const index = this.keys[leaf.innerId]\n        return isUndefined(index) ? -1 : index\n    }\n\n\n    public add(leaf: ILeaf): void {\n        const { list, keys } = this\n        if (isUndefined(keys[leaf.innerId])) {\n            list.push(leaf)\n            keys[leaf.innerId] = list.length - 1\n        }\n    }\n\n    public addAt(leaf: ILeaf, index = 0): void {\n        const { keys } = this\n        if (isUndefined(keys[leaf.innerId])) {\n            const { list } = this\n            for (let i = index, len = list.length; i < len; i++)  keys[list[i].innerId]++\n            if (index === 0) {\n                list.unshift(leaf)\n            } else {\n                if (index > list.length) index = list.length\n                list.splice(index, 0, leaf)\n            }\n            keys[leaf.innerId] = index\n        }\n    }\n\n    public addList(list: ILeaf[]): void {\n        for (let i = 0; i < list.length; i++) this.add(list[i])\n    }\n\n\n    public remove(leaf: ILeaf): void {\n        const { list } = this\n        let findIndex: number\n        for (let i = 0, len = list.length; i < len; i++) {\n            if (!isUndefined(findIndex)) {\n                this.keys[list[i].innerId] = i - 1 // update rest keys\n            } else if (list[i].innerId === leaf.innerId) {\n                findIndex = i\n                delete this.keys[leaf.innerId]\n            }\n        }\n\n        if (!isUndefined(findIndex)) list.splice(findIndex, 1)\n    }\n\n\n    public sort(reverse?: boolean): void {\n        const { list } = this\n        if (reverse) {\n            list.sort((a, b) => b.__level - a.__level) // 倒序\n        } else {\n            list.sort((a, b) => a.__level - b.__level) // 顺序\n        }\n    }\n\n    public forEach(itemCallback: ILeafListItemCallback): void {\n        this.list.forEach(itemCallback)\n    }\n\n    public clone(): ILeafList {\n        const list = new LeafList()\n        list.list = [...this.list]\n        list.keys = { ...this.keys }\n        return list\n    }\n\n\n    public update(): void {\n        this.keys = {}\n        const { list, keys } = this\n        for (let i = 0, len = list.length; i < len; i++)    keys[list[i].innerId] = i\n    }\n\n    public reset(): void {\n        this.list = []\n        this.keys = {}\n    }\n\n    public destroy(): void {\n        this.reset()\n    }\n}\n","import { ILeaf, ILeafArrayMap, ILeafLevelList, ILeafListItemCallback, INumberMap } from '@leafer/interface'\nimport { isArray, isUndefined } from '@leafer/data'\n\nexport class LeafLevelList implements ILeafLevelList {\n\n    public levelMap: ILeafArrayMap\n    public keys: INumberMap\n    public levels: number[]\n\n    public get length(): number { return this._length }\n    private _length = 0\n\n    constructor(item?: ILeaf | ILeaf[]) {\n        this.reset()\n        if (item) isArray(item) ? this.addList(item) : this.add(item)\n    }\n\n    public has(leaf: ILeaf): boolean {\n        return !isUndefined(this.keys[leaf.innerId])\n    }\n\n    public without(leaf: ILeaf): boolean {\n        return isUndefined(this.keys[leaf.innerId])\n    }\n\n    public sort(reverse?: boolean): void {\n        const { levels } = this\n        if (reverse) {\n            levels.sort((a, b) => b - a) // 倒序\n        } else {\n            levels.sort((a, b) => a - b) // 顺序\n        }\n    }\n\n    public addList(list: ILeaf[]): void {\n        list.forEach(leaf => { this.add(leaf) })\n    }\n\n    public add(leaf: ILeaf): void {\n        const { keys, levelMap } = this\n        if (!keys[leaf.innerId]) {\n            keys[leaf.innerId] = 1\n            if (!levelMap[leaf.__level]) {\n                levelMap[leaf.__level] = [leaf]\n                this.levels.push(leaf.__level)\n            } else {\n                levelMap[leaf.__level].push(leaf)\n            }\n            this._length++\n        }\n    }\n\n    public forEach(itemCallback: ILeafListItemCallback): void {\n        let list: ILeaf[]\n        this.levels.forEach(level => {\n            list = this.levelMap[level]\n            for (let i = 0, len = list.length; i < len; i++) {\n                itemCallback(list[i])\n            }\n        })\n    }\n\n    public reset(): void {\n        this.levelMap = {}\n        this.keys = {}\n        this.levels = []\n        this._length = 0\n    }\n\n    public destroy(): void {\n        this.levelMap = null\n    }\n\n}","export * from '@leafer/canvas'\nexport * from '@leafer/image'\n\nexport * from '@leafer/data'\nexport * from '@leafer/debug'\nexport * from '@leafer/decorator'\nexport * from '@leafer/display'\nexport * from '@leafer/display-module'\n\nexport * from '@leafer/event'\n\nexport * from '@leafer/file'\nexport * from '@leafer/helper'\nexport * from '@leafer/layout'\nexport * from '@leafer/list'\nexport * from '@leafer/math'\n\nexport * from '@leafer/path'\nexport * from '@leafer/platform'\n\nexport * from '@leafer/task'\n\nexport const version = \"2.0.0\""],"names":["Answer","emptyData","isUndefined","value","undefined","isNull","isString","isFinite","Number","isNumber","numberReg","tryToNumber","test","isArray","Array","isObject","isData","isEmptyData","JSON","stringify","DataHelper","default","t","defaultData","assign","merge","exclude","Object","keys","forEach","key","constructor","_a","_b","copyAttrs","from","include","clone","data","parse","toMap","list","map","i","len","length","stintSet","attrName","LeafData","__useNaturalRatio","__isLinePath","path","this","__usePathBox","__pathInputed","__blendMode","eraser","blendMode","leaf","__leaf","__get","name","__input","__getData","tag","inputValue","__setInput","__getInput","__removeInput","__getInputData","names","options","matrix","a","b","c","d","e","f","__localMatrix","__setMiddle","__middle","__getMiddle","__checkSingle","opacity","isBranch","__hasMultiPaint","__hasEraser","filter","__single","__removeNaturalSize","__naturalWidth","__naturalHeight","destroy","IncrementId","RUNTIME","LEAF","TASK","CNAVAS","IMAGE","types","create","typeName","I","tempA","tempB","tempTo","max","Math","tempFour","FourNumberHelper","zero","set","to","top","right","bottom","left","setTemp","toTempAB","change","get","num","maxValue","other","add","swapAndScale","scaleX","scaleY","round","pow","floor","PI","MathHelper","within","min","fourNumber","formatRotation","rotation","unsign","float","getGapRotation","addRotation","gap","oldRotation","r","abs","maxLength","sign","getScaleData","scale","size","originSize","scaleData","width","height","assignScale","x","y","getFloorScale","randInt","randColor","random","OneRadian","PI2","PI_2","getPointData","getBoundsData","getMatrixData","sin","cos","acos","sqrt","tempPoint","getWorld","skewX","skewY","MatrixHelper","defaultMatrix","defaultWorld","tempMatrix","copy","translate","translateInner","hasOrigin","pixelScale","pixelRatio","scaleOfOuter","origin","M","toInnerPoint","scaleOfInner","rotate","cosR","sinR","rotateOfOuter","rotateOfInner","skew","skewOfOuter","skewOfInner","multiply","child","multiplyParent","parent","abcdChanged","childScaleData","divide","tempInvert","divideParent","invert","s","toOuterPoint","inner","distance","outer","setLayout","layout","around","bcChanged","sx","sy","getLayout","firstSkewY","withScale","world","reset","atan2","PointHelper","defaultPoint","tempRadiusPoint","setRadius","radiusX","radiusY","point","copyFrom","halfPixel","move","scaleOf","P","rx","ry","tempToInnerOf","temp","tempToOuterOf","tempToInnerRadiusPointOf","toInnerRadiusPointOf","copyRadiusPoint","toInnerOf","toOuterOf","getCenter","getCenterX","x1","x2","getCenterY","y1","y2","getDistance","getDistanceFrom","getMinDistanceFrom","x3","y3","getAngle","getAtan2","getRotation","toOrigin","getRadianFrom","fromX","fromY","originX","originY","toX","toY","toOriginX","toOriginY","getDistancePoint","changeTo","fromTo","toNumberPoints","originPoints","points","p","push","isSame","Point","rotateOf","Matrix","setWith","dataWithScale","scaleWith","angle","invertWith","TwoPointBoundsHelper","tempPointBounds","setPoint","minX","minY","maxX","maxY","addPoint","addBounds","pb","addPointBounds","toBounds","setBounds","Direction4","Direction9","directionData","item","type","AroundHelper","toPoint","box","onlyBoxSize","content","onlyContentSize","getPoint","AlignHelper","align","TB","ceil","boundsRight","boundsBottom","tempBounds","BoundsHelper","bounds","copyAndSpread","spread","isShrink","side","four","B","scroll","scrollX","scrollY","getByMove","toOffsetOutBounds","offsetBounds","offsetX","offsetY","onlySize","getOuterOf","getFitMatrix","put","baseScale","getFitScale","isCoverMode","sw","sh","putScale","changeSize","getSpread","n","shrink","isPoint","addList","setListWithFn","setList","addMode","addListWithFn","boundsDataFn","first","setPoints","index","getPoints","hitRadiusPoint","pointMatrix","hitPoint","hit","otherMatrix","includes","getIntersectData","intersect","isEmpty","hasSize","Bounds","boundsList","boundsMatrix","getIntersect","AutoBounds","autoSize","getBoundsFrom","UnitConvertHelper","number","percentRefer","StringNumberMap","E","Platform","toURL","text","fileType","url","encodeURIComponent","image","hitCanvasSize","maxCacheSize","maxPatternSize","crossOrigin","isLarge","largeSize","isSuperLarge","getRealURL","prefix","suffix","startsWith","resize","view","xGap","yGap","clip","smooth","_filters","interlace","realWidth","realHeight","interlaceX","interlaceY","interlaceOffset","offset","canvas","createCanvas","ctx","getContext","globalAlpha","imageSmoothingEnabled","canUse","setTransform","drawImage","__closed","setPatternTransform","pattern","transform","paint","Debug","repeatMap","filterList","getNameList","excludeList","drawRepaint","color","fillWorld","replace","strokeWorld","drawBounds","_options","showHit","showBounds","w","__nowWorld","setWorld","__drawHitPath","fillStyle","fill","resetTransform","setStroke","stroke","log","messages","D","enable","every","some","console","tip","warn","showWarn","repeat","error","Error","debug","Run","currentId","currentName","idMap","nameMap","nameToIdMap","start","microsecond","id","R","performance","now","Date","end","time","duration","endOfName","check","Plugin","needPlugins","has","rs","need","setTimeout","Creator","editor","UICreator","register","UI","__tag","prototype","ui","EventCreator","nameList","Event","changeName","oldName","newName","constName","find","params","CanvasManager","manager","old","recycled","isSameSize","recycle","clearRecycled","clear","__decorate","decorators","target","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__awaiter","thisArg","_arguments","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","contextAttr","realName","property","context","SuppressedError","contextMethodNameList","contextMethod","_target","emptyArray","Canvas","globalCompositeOperation","dashPattern","setLineDash","getLineDash","__bindContext","method","bind","textBaseline","_c","_d","_e","_f","getTransform","save","restore","_x","_y","_angle","_path2d","_rule","fillRect","_width","_height","strokeRect","clearRect","dx","dy","dw","dh","beginPath","moveTo","lineTo","bezierCurveTo","_cp1x","_cp1y","_cp2x","_cp2y","quadraticCurveTo","_cpx","_cpy","closePath","arc","_radius","_startAngle","_endAngle","_anticlockwise","arcTo","_x1","_y1","_x2","_y2","ellipse","_radiusX","_radiusY","_rotation","rect","roundRect","createConicGradient","createLinearGradient","_x0","_y0","createPattern","_image","_repetition","createRadialGradient","_r0","_r1","fillText","_text","_maxWidth","measureText","strokeText","tempPixelBounds","tempPixelBounds2","minSize","canvasSizeAttrs","LeaferCanvasBase","pixelWidth","pixelHeight","pixelSnap","config","allowBackgroundColor","parentView","super","worldTransform","innerId","autoLayout","devicePixelRatio","init","__createContext","contextSettings","_filename","toBlob","_type","_quality","toDataURL","saveAs","safeResize","takeCanvas","unreal","getSameCanvas","copyWorld","updateViewSize","updateClientBounds","clearWorld","getClientBounds","update","clientBounds","startAutoLayout","_autoBounds","_listener","stopAutoLayout","setCursor","_cursor","parentMatrix","ignorePixelSnap","half","useWorldTransform","strokeWidth","childOptions","strokeStyle","setStrokeOptions","strokeCap","strokeJoin","dashOffset","miterLimit","saveBlendMode","savedBlendMode","restoreBlendMode","hitFill","_point","_fillRule","hitStroke","_strokeWidth","hitPixel","_radiusPoint","_offset","_scale","setWorldShadow","blur","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","setWorldBlur","ceilPixel","setTempPixelBounds","setTempPixelBounds2","copyWorldToInner","fromWorld","toInnerBounds","copyWorldByReset","onlyResetTransform","useGrayscaleAlpha","alpha","pixel","imageData","getImageData","putImageData","useMask","maskCanvas","fromBounds","useEraser","eraserCanvas","clipWorld","clipUI","ruleData","windingRule","copyToPixelBounds","pixelBounds","useSameWorldTransform","useSameSmooth","clearBounds","updateRender","_bounds","unrealCanvas","PathHelper","creator","_pathString","_curveMode","convertToCanvasData","_old","CanvasCommandOnlyMap","N","X","G","F","O","U","PathCommandMap","m","L","l","H","h","V","v","C","S","Q","q","T","A","Z","z","PathCommandLengthMap","NeedConvertToCanvasCommandMap","NeedConvertToCurveCommandMap","PathNumberCommandMap","PathNumberCommandLengthMap","RectHelper","drawRoundRect","drawer","cornerRadius","hypot","BezierHelper","curve","close","aX","aY","bX","bY","cX","cY","c1X","c1Y","c2X","c2Y","baX","baY","ba","cb","radius","setPointBounds","setEndPoint","setStartPoint","BAx","BAy","CBx","CBy","startRadian","endRadian","lenBA","lenCB","totalRadian","anticlockwise","centerX","centerY","startAngle","endAngle","cx","cy","rotationRadian","rotationSin","rotationCos","parts","partRadian","partRadian4Sin","control","endCos","endSin","startCos","startSin","startX","startY","toTwoPointBounds","toTwoPointBoundsByQuadraticCurve","pointBounds","tList","t1","t2","sqrtV","z1","z2","o","getPointAndSet","getDerivative","fromV","v1","v2","toV","EllipseHelper","ellipticalArc","largeFlag","sweepFlag","curveMode","halfX","halfY","px","py","rxSquare","rySquare","pySquare","pxSquare","ellipseToCurve","PathCommandNodeHelper","toCommand","_nodes","toNode","_data","Command","PathConvert","current","dot","floatLength","count","command","lastCommand","str","j","pathString","needConvert","char","lastChar","convertCommand","pushData","toCanvasData","controlX","controlY","copyData","objectToCanvasData","strNum","tan","startPoint","PathCommandDataHelper","fourCorners","lastX","lastY","drawEllipse","drawArc","drawPoints","PathCreator","__path","clearPath","PathDrawer","drawPathByData","PathBounds","PathCorner","_cornerSmoothing","commandLen","secondX","secondY","pen","canvasPatch","FileHelper","alphaPixelTypes","upperCaseTypeMap","mineType","filename","split","isOpaqueImage","getExportOptions","quality","blob","toUpperCase","TaskItem","task","parallel","run","isComplete","runing","cancel","complete","isCancel","TaskProcessor","total","delayNumber","finishedIndex","parallelSuccessNumber","remain","percent","totalTime","runTime","running","empty","taskCallback","delay","timer","parallelList","pause","clearTimeout","resume","skip","stop","setParallelList","runParallelTasks","runTask","onComplete","onTask","nextTask","catch","onError","runParallelTask","fillParallelTask","onParallelError","pop","parallelWaitNumber","nextIndex","Resource","tasker","remove","loadImage","format","setImage","load","ImageManager","maxRecycled","recycledList","patternTasker","use","clearLevels","recyclePaint","force","hasAlphaPixel","isFormat","LeaferImage","completed","ready","waitComplete","setView","isSVG","onSuccess","thumbSize","loading","getLoadUrl","img","setThumbView","unload","stopEvent","isSuccess","odd","getFull","getCanvas","filters","cache","getPattern","_thumbSize","_view","getThumbSize","_lod","getMinLevel","getLevelData","_level","_checkUse","defineKey","descriptor","noConfigurable","configurable","enumerable","getDescriptor","object","createDescriptor","defaultValue","privateKey","decorateLeafAttr","descriptorFn","defineLeafAttr","attr","partDescriptor","defaultDescriptor","__getAttr","__setAttr","defineDataProcessor","dataType","positionType","checkFiniteNumber","__layout","matrixChanged","matrixChange","scrollType","__scrollWorld","autoLayoutType","__hasAutoLayout","flow","__local","createLocal","doBoundsType","scaleType","scaleChanged","scaleChange","rotationType","rotationChanged","rotationChange","boundsType","naturalBoundsType","__","boxChanged","boxChange","pathInputType","__pathForRender","pathType","affectStrokeBoundsType","useStroke","doStrokeType","__useStroke","strokeChanged","strokeChange","__useArrow","strokeType","affectRenderBoundsType","renderChanged","renderChange","surfaceType","surfaceChanged","surfaceChange","dimType","dim","bright","dimskip","opacityType","opacityChanged","opacityChange","mask","checkMask","visibleType","oldValue","visible","animationOut","__runAnimation","doVisible","animation","__hasMask","__updateMask","forceUpdate","sortType","waitParent","childrenSortChange","maskType","eraserType","__updateEraser","hitType","hitCanvasChanged","leafer","updateCursor","cursorType","dataProcessor","processor","_key","layoutProcessor","__DataProcessor","computedKey","setMethodName","charAt","slice","getSetMethodName","isBox","isBranchLeaf","naturalWidth","pathInputed","boxBounds","children","naturalHeight","__proto__","excludeNames","rewrite","rewriteAble","doRewrite","useModule","module","getOwnPropertyNames","writable","registerUI","registerUIEvent","LeafHelper","updateAllMatrix","checkAutoLayout","waitAutoLayout","updateMatrix","__updateLocalMatrix","__updateWorldMatrix","updateBounds","boundsChanged","__updateLocalBounds","__updateWorldBounds","updateAllWorldOpacity","__updateWorldOpacity","updateChange","stateStyleChanged","updateState","__updateChange","updateAllChange","worldHittable","hittable","draggable","editable","hitSelf","locked","copyCanvasByWorld","currentCanvas","fromCanvas","__worldFlipped","fullImageShadow","renderBounds","moveWorld","isInnerPoint","transition","local","localTransform","scrollWorldTransform","moveLocal","pointSnap","animate","zoomOfWorld","zoomOfLocal","getTempLocal","hasHighPosition","scaleResize","rotateOfWorld","rotateOfLocal","skewOfWorld","skewOfLocal","transformWorld","originPoint","getInnerOrigin","hasOffset","changedPoint","getFlipTransform","axis","getLocalOrigin","innerOrigin","getRelativeWorld","relative","drop","hasParent","animateMove","speed","requestRender","worldPoint","updateLayout","LeafBoundsHelper","worldBounds","__world","localBoxBounds","localStrokeBounds","localRenderBounds","maskLocalBoxBounds","__localBoxBounds","maskLocalStrokeBounds","maskLocalRenderBounds","excludeRenderBounds","hideBounds","findMask","BranchHelper","sort","zIndex","__tempNumber","pushAllChildBranch","branch","leafList","__childBranchNumber","pushAllParent","pushAllBranchStack","pushList","branchStack","updateBoundsByBranchStack","changeScaleX","changeScaleY","WaitHelper","wait","splice","localContent","worldContent","worldBox","worldStroke","LeafLayout","contentBounds","_contentBounds","strokeBounds","_strokeBounds","_renderBounds","localContentBounds","_localStrokeBounds","_localRenderBounds","worldContentBounds","worldBoxBounds","worldStrokeBounds","isApp","watcher","changed","layouter","root","__fullLayouting","zoomLayer","getBounds","getWorldBounds","getLocalBounds","getInnerBounds","getLayoutBounds","unscale","layoutBounds","getWorldPoint","getLocalPointByInner","uScaleX","uScaleY","getLayoutPoints","relativeLeaf","innerToWorld","shrinkContent","spreadStroke","renderSpread","spreadRenderCancel","spreadRender","shrinkContentCancel","spreadStrokeCancel","same","localBoxChanged","localBoxChange","strokeSpread","_scaleOrRotationChange","affectRotation","affectScaleOrRotation","childrenSortChanged","affectChildrenSort","bubbles","stopDefault","isStopDefault","event","stopNow","isStopNow","isStop","ChildEvent","ADD","REMOVE","CREATED","MOUNTED","UNMOUNTED","DESTROY","SCROLL","PropertyEvent","newValue","CHANGE","LEAFER_CHANGE","extraPropertyEventMap","ImageEvent","LOAD","LOADED","ERROR","BoundsEvent","checkHas","mode","WORLD","__hasWorldEvent","__hasLocalEvent","hasEvent","RESIZE","INNER","LOCAL","emitLocal","leaferIsReady","resized","emit","emitWorld","boundsEventMap","ResizeEvent","bigger","smaller","samePixelRatio","oldSize","isResizing","resizingKeys","WatchEvent","REQUEST","DATA","LayoutEvent","times","START","BEFORE","LAYOUT","AFTER","AGAIN","END","RenderEvent","renderOptions","CHILD_START","CHILD_END","RENDER","NEXT","LeaferEvent","BEFORE_READY","READY","AFTER_READY","VIEW_READY","VIEW_COMPLETED","STOP","RESTART","UPDATE_MODE","TRANSFORM","MOVE","SCALE","ROTATE","SKEW","leaferTransformAttrMap","Eventer","on","listener","capture","once","events","__getListenerMap","typeList","findIndex","off","__bubbleMap","__captureMap","on_","off_","captureOrBind","syncEventer","emitEvent","hasB","hasC","eventer","LeafEventer","destroyEventer","LeafDataProxy","leaferIsCreated","innerName","__realSetAttr","isLeafer","transformEventName","emitPropertyEvent","extraPropertyEvent","__proxyData","setProxyAttr","normalStyle","lockNormalStyle","getProxyAttr","LeafMatrix","LeafBounds","__onUpdateSize","__updatePath","__updateRenderPath","__updateBoxBounds","__updateLocalBoxBounds","__updateStrokeSpread","__updateStrokeBounds","__updateLocalStrokeBounds","strokeBoxSpread","__updateRenderSpread","__updateRenderBounds","__updateLocalRenderBounds","__hasMotionPath","__updateMotionPath","__updateAutoLayout","_secondLayout","__extraUpdate","__updateFlowLayout","__autoSide","__updateNaturalSize","LeafRender","__render","shape","__renderShape","cellList","__worldOpacity","topRendering","topList","__getNowWorld","dimOpacity","__renderEraser","tempCanvas","__draw","__drawShape","__clip","__drawRenderPath","BranchRender","__updateSortChildren","nowWorld","__useDim","__renderBranch","__renderMask","tempScaleData","Leaf","_value","__LayoutProcessor","created","worldRenderBounds","worldOpacity","__onlyHitMask","hitChildren","__ignoreHitWorld","__inLazyBounds","lazyBounds","__emitLifeEvent","forceRender","__level","resetCustom","toJSON","waitLeafer","nextRender","removeNextRender","__bindLeafer","leafs","_isTemp","_name","setAttr","getAttr","getComputedAttr","toString","toSVG","__SVG","toHTML","_attrName","_newValue","_condition","findTag","_tag","findOne","findId","_id","focus","_sync","addExtra","__updateContentBounds","_canvas","__cameraWorld","cameraWorld","getClampRenderScale","getRenderScaleData","scaleFixed","patternLocked","worldToLocal","worldToInner","localToWorld","getBoxPoint","getBoxPointByInner","getInnerPoint","_relative","_distance","getInnerPointByBox","getInnerPointByLocal","getLocalPoint","getPagePoint","getWorldPointByBox","getWorldPointByLocal","getWorldPointByPage","page","moveInner","skewOf","scaleOfWorld","worldOrigin","flip","_noResize","__scaleResize","_scaleX","_scaleY","resizeWidth","resizeHeight","_world","_hitRadius","__hitWorld","_forceHitFill","__hit","_local","__hitFill","_inner","__hitStroke","__hitPixel","__updateHitCanvas","__drawFast","_originCanvas","__drawPath","getMotionPathData","getMotionPoint","_motionDistance","getMotionTotal","_complete","_child","_index","dropTo","_bind","_captureOrBind","_capture","_event","changeAttr","fn","addAttr","helpValue","destroyed","Branch","affectSort","noIndex","childLayout","__emitChildEvent","addMany","__remove","removeAll","__preRemove","__realRemoveChild","indexOf","hitCanvasManager","LeafList","indexAt","addAt","unshift","reverse","itemCallback","LeafLevelList","_length","without","levels","levelMap","level","version"],"mappings":"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","x_google_ignoreList":[27]}