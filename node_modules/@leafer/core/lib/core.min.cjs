"use strict";var t;exports.Answer=void 0,(t=exports.Answer||(exports.Answer={}))[t.No=0]="No",t[t.Yes=1]="Yes",t[t.NoAndSkip=2]="NoAndSkip",t[t.YesAndSkip=3]="YesAndSkip";function e(t){return void 0===t}function s(t){return null==t}function r(t){return"string"==typeof t}const{isFinite:i}=Number;function n(t){return"number"==typeof t}const o=/^-?\d+(?:\.\d+)?$/;const{isArray:a}=Array;function h(t){return t&&"object"==typeof t}function l(t){return"{}"===JSON.stringify(t)}const d={default:(t,e)=>(c(e,t),c(t,e),t),assign(t,e,s){let r;Object.keys(e).forEach(i=>{var n,o;if(r=e[i],(null==r?void 0:r.constructor)===Object&&(null===(n=t[i])||void 0===n?void 0:n.constructor)===Object)return c(t[i],e[i],s&&s[i]);s&&i in s?(null===(o=s[i])||void 0===o?void 0:o.constructor)===Object&&c(t[i]={},e[i],s[i]):t[i]=e[i]})},copyAttrs:(t,s,r)=>(r.forEach(r=>{e(s[r])||(t[r]=s[r])}),t),clone:t=>JSON.parse(JSON.stringify(t)),toMap(t){const e={};for(let s=0,r=t.length;s<r;s++)e[t[s]]=!0;return e},stintSet(t,e,s){s||(s=void 0),t[e]!==s&&(t[e]=s)}},{assign:c}=d;class u{get __useNaturalRatio(){return!0}get __isLinePath(){const{path:t}=this;return t&&6===t.length&&1===t[0]}get __usePathBox(){return this.__pathInputed}get __blendMode(){if(this.eraser&&"path"!==this.eraser)return"destination-out";const{blendMode:t}=this;return"pass-through"===t?null:t}constructor(t){this.__leaf=t}__get(t){if(this.__input){const s=this.__input[t];if(!e(s))return s}return this[t]}__getData(){const t={tag:this.__leaf.tag},{__input:s}=this;let r;for(let i in this)"_"!==i[0]&&(r=s?s[i]:void 0,t[i]=e(r)?this[i]:r);return t}__setInput(t,e){this.__input||(this.__input={}),this.__input[t]=e}__getInput(t){if(this.__input){const s=this.__input[t];if(!e(s))return s}if("path"!==t||this.__pathInputed)return this["_"+t]}__removeInput(t){this.__input&&!e(this.__input[t])&&(this.__input[t]=void 0)}__getInputData(t,s){const r={};if(t)if(a(t))for(let e of t)r[e]=this.__getInput(e);else for(let e in t)r[e]=this.__getInput(e);else{let t,s,{__input:i}=this;r.tag=this.__leaf.tag;for(let n in this)if("_"!==n[0]&&(t=this["_"+n],!e(t))){if("path"===n&&!this.__pathInputed)continue;s=i?i[n]:void 0,r[n]=e(s)?t:s}}if(s&&s.matrix){const{a:t,b:e,c:s,d:i,e:n,f:o}=this.__leaf.__localMatrix;r.matrix={a:t,b:e,c:s,d:i,e:n,f:o}}return r}__setMiddle(t,e){this.__middle||(this.__middle={}),this.__middle[t]=e}__getMiddle(t){return this.__middle&&this.__middle[t]}__checkSingle(){const t=this;if("pass-through"===t.blendMode){const e=this.__leaf;t.opacity<1&&(e.isBranch||t.__hasMultiPaint)||e.__hasEraser||t.eraser||t.filter?t.__single=!0:t.__single&&(t.__single=!1)}else t.__single=!0}__removeNaturalSize(){this.__naturalWidth=this.__naturalHeight=void 0}destroy(){this.__input=this.__middle=null}}const p={RUNTIME:"runtime",LEAF:"leaf",TASK:"task",CNAVAS:"canvas",IMAGE:"image",types:{},create(t){const{types:e}=_;return e[t]?e[t]++:(e[t]=1,0)}},_=p;let f,g,y;const{max:x}=Math,m=[0,0,0,0],w={zero:[...m],tempFour:m,set:(t,e,s,r,i)=>(void 0===s&&(s=r=i=e),t[0]=e,t[1]=s,t[2]=r,t[3]=i,t),setTemp:(t,e,s,r)=>b(m,t,e,s,r),toTempAB(t,e,s){y=s?n(t)?e:t:[],n(t)?(f=v(t),g=e):n(e)?(f=t,g=v(e)):(f=t,g=e),4!==f.length&&(f=B(f)),4!==g.length&&(g=B(g))},get(t,s){let r;if(!n(t))switch(t.length){case 4:r=e(s)?t:[...t];break;case 2:r=[t[0],t[1],t[0],t[1]];break;case 3:r=[t[0],t[1],t[2],t[1]];break;case 1:t=t[0];break;default:t=0}if(r||(r=[t,t,t,t]),!e(s))for(let t=0;t<4;t++)r[t]>s&&(r[t]=s);return r},max:(t,e,s)=>n(t)&&n(e)?x(t,e):(C(t,e,s),b(y,x(f[0],g[0]),x(f[1],g[1]),x(f[2],g[2]),x(f[3],g[3]))),add:(t,e,s)=>n(t)&&n(e)?t+e:(C(t,e,s),b(y,f[0]+g[0],f[1]+g[1],f[2]+g[2],f[3]+g[3])),swapAndScale(t,e,s,r){if(n(t))return e===s?t*e:[t*s,t*e];const i=r?t:[],[o,a,h,l]=4===t.length?t:B(t);return b(i,h*s,l*e,o*s,a*e)}},{set:b,get:B,setTemp:v,toTempAB:C}=w,{round:k,pow:T,max:P,floor:O,PI:L}=Math,S={within:(t,s,r)=>(h(s)&&(r=s.max,s=s.min),!e(s)&&t<s&&(t=s),!e(r)&&t>r&&(t=r),t),fourNumber:w.get,formatRotation:(t,e)=>(t%=360,e?t<0&&(t+=360):(t>180&&(t-=360),t<-180&&(t+=360)),S.float(t)),getGapRotation(t,e,s=0){let r=t+s;if(e>1){const t=Math.abs(r%e);(t<1||t>e-1)&&(r=Math.round(r/e)*e)}return r-s},float(t,s){const r=e(s)?1e12:T(10,s);return-0===(t=k(t*r)/r)?0:t},sign:t=>t<0?-1:1,getScaleData(t,e,s,r){if(r||(r={}),e){const t=(n(e)?e:e.width||0)/s.width,i=(n(e)?e:e.height||0)/s.height;r.scaleX=t||i||1,r.scaleY=i||t||1}else t&&S.assignScale(r,t);return r},assignScale(t,e){n(e)?t.scaleX=t.scaleY=e:(t.scaleX=e.x,t.scaleY=e.y)},getFloorScale:(t,e=1)=>P(O(t),e)/t,randInt:R,randColor:t=>`rgba(${R(255)},${R(255)},${R(255)},${t||1})`};function R(t){return Math.round(Math.random()*t)}const E=L/180,I=2*L,M=L/2;function A(){return{x:0,y:0}}function W(){return{x:0,y:0,width:0,height:0}}function D(){return{a:1,b:0,c:0,d:1,e:0,f:0}}const{sin:N,cos:Y,acos:X,sqrt:z}=Math,{float:F}=S,U={};function H(){return Object.assign(Object.assign(Object.assign({},{a:1,b:0,c:0,d:1,e:0,f:0}),{x:0,y:0,width:0,height:0}),{scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0})}const j={defaultMatrix:{a:1,b:0,c:0,d:1,e:0,f:0},defaultWorld:H(),tempMatrix:{},set(t,e=1,s=0,r=0,i=1,n=0,o=0){t.a=e,t.b=s,t.c=r,t.d=i,t.e=n,t.f=o},get:D,getWorld:H,copy(t,e){t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f},translate(t,e,s){t.e+=e,t.f+=s},translateInner(t,e,s,r){t.e+=t.a*e+t.c*s,t.f+=t.b*e+t.d*s,r&&(t.e-=e,t.f-=s)},scale(t,e,s=e){t.a*=e,t.b*=e,t.c*=s,t.d*=s},pixelScale(t,e,s){s||(s=t),s.a=t.a*e,s.b=t.b*e,s.c=t.c*e,s.d=t.d*e,s.e=t.e*e,s.f=t.f*e},scaleOfOuter(t,e,s,r){V.toInnerPoint(t,e,U),V.scaleOfInner(t,U,s,r)},scaleOfInner(t,e,s,r=s){V.translateInner(t,e.x,e.y),V.scale(t,s,r),V.translateInner(t,-e.x,-e.y)},rotate(t,e){const{a:s,b:r,c:i,d:n}=t,o=Y(e*=E),a=N(e);t.a=s*o-r*a,t.b=s*a+r*o,t.c=i*o-n*a,t.d=i*a+n*o},rotateOfOuter(t,e,s){V.toInnerPoint(t,e,U),V.rotateOfInner(t,U,s)},rotateOfInner(t,e,s){V.translateInner(t,e.x,e.y),V.rotate(t,s),V.translateInner(t,-e.x,-e.y)},skew(t,e,s){const{a:r,b:i,c:n,d:o}=t;s&&(s*=E,t.a=r+n*s,t.b=i+o*s),e&&(e*=E,t.c=n+r*e,t.d=o+i*e)},skewOfOuter(t,e,s,r){V.toInnerPoint(t,e,U),V.skewOfInner(t,U,s,r)},skewOfInner(t,e,s,r=0){V.translateInner(t,e.x,e.y),V.skew(t,s,r),V.translateInner(t,-e.x,-e.y)},multiply(t,e){const{a:s,b:r,c:i,d:n,e:o,f:a}=t;t.a=e.a*s+e.b*i,t.b=e.a*r+e.b*n,t.c=e.c*s+e.d*i,t.d=e.c*r+e.d*n,t.e=e.e*s+e.f*i+o,t.f=e.e*r+e.f*n+a},multiplyParent(t,s,r,i,n){const{e:o,f:a}=t;if(r||(r=t),e(i)&&(i=1!==t.a||t.b||t.c||1!==t.d),i){const{a:e,b:i,c:o,d:a}=t;r.a=e*s.a+i*s.c,r.b=e*s.b+i*s.d,r.c=o*s.a+a*s.c,r.d=o*s.b+a*s.d,n&&(r.scaleX=s.scaleX*n.scaleX,r.scaleY=s.scaleY*n.scaleY)}else r.a=s.a,r.b=s.b,r.c=s.c,r.d=s.d,n&&(r.scaleX=s.scaleX,r.scaleY=s.scaleY);r.e=o*s.a+a*s.c+s.e,r.f=o*s.b+a*s.d+s.f},divide(t,e){V.multiply(t,V.tempInvert(e))},divideParent(t,e){V.multiplyParent(t,V.tempInvert(e))},tempInvert(t){const{tempMatrix:e}=V;return V.copy(e,t),V.invert(e),e},invert(t){const{a:e,b:s,c:r,d:i,e:n,f:o}=t;if(s||r){const a=1/(e*i-s*r);t.a=i*a,t.b=-s*a,t.c=-r*a,t.d=e*a,t.e=-(n*i-o*r)*a,t.f=-(o*e-n*s)*a}else if(1===e&&1===i)t.e=-n,t.f=-o;else{const s=1/(e*i);t.a=i*s,t.d=e*s,t.e=-n*i*s,t.f=-o*e*s}},toOuterPoint(t,e,s,r){const{x:i,y:n}=e;s||(s=e),s.x=i*t.a+n*t.c,s.y=i*t.b+n*t.d,r||(s.x+=t.e,s.y+=t.f)},toInnerPoint(t,e,s,r){const{a:i,b:n,c:o,d:a}=t,h=1/(i*a-n*o),{x:l,y:d}=e;if(s||(s=e),s.x=(l*a-d*o)*h,s.y=(d*i-l*n)*h,!r){const{e:e,f:r}=t;s.x-=(e*a-r*o)*h,s.y-=(r*i-e*n)*h}},setLayout(t,s,r,i,n){const{x:o,y:a,scaleX:h,scaleY:l}=s;if(e(n)&&(n=s.rotation||s.skewX||s.skewY),n){const{rotation:e,skewX:r,skewY:i}=s,n=e*E,o=Y(n),a=N(n);if(r||i){const e=r*E,s=i*E;t.a=(o+s*-a)*h,t.b=(a+s*o)*h,t.c=(e*o-a)*l,t.d=(o+e*a)*l}else t.a=o*h,t.b=a*h,t.c=-a*l,t.d=o*l}else t.a=h,t.b=0,t.c=0,t.d=l;t.e=o,t.f=a,(r=r||i)&&V.translateInner(t,-r.x,-r.y,!i)},getLayout(t,e,s,r){const{a:i,b:n,c:o,d:a,e:h,f:l}=t;let d,c,u,p,_,f=h,g=l;if(n||o){const t=i*a-n*o;if(o&&!r){d=z(i*i+n*n),c=t/d;const e=i/d;u=n>0?X(e):-X(e)}else{c=z(o*o+a*a),d=t/c;const e=o/c;u=M-(a>0?X(-e):-X(e))}const e=F(Y(u)),s=N(u);d=F(d),c=F(c),p=e?F((o/c+s)/e/E,9):0,_=e?F((n/d-s)/e/E,9):0,u=F(u/E)}else d=i,c=a,u=p=_=0;return(e=s||e)&&(f+=e.x*i+e.y*o,g+=e.x*n+e.y*a,s||(f-=e.x,g-=e.y)),{x:f,y:g,scaleX:d,scaleY:c,rotation:u,skewX:p,skewY:_}},withScale(t,e,s=e){const r=t;if(!e||!s){const{a:r,b:i,c:n,d:o}=t;i||n?s=(r*o-i*n)/(e=z(r*r+i*i)):(e=r,s=o)}return r.scaleX=e,r.scaleY=s,r},reset(t){V.set(t)}},V=j,{float:G}=S,{toInnerPoint:q,toOuterPoint:Q}=j,{sin:J,cos:Z,abs:$,sqrt:K,atan2:tt,min:et,round:st}=Math,rt={defaultPoint:{x:0,y:0},tempPoint:{},tempRadiusPoint:{},set(t,e=0,s=0){t.x=e,t.y=s},setRadius(t,s,r){t.radiusX=s,t.radiusY=e(r)?s:r},copy(t,e){t.x=e.x,t.y=e.y},copyFrom(t,e,s){t.x=e,t.y=s},round(t,e){t.x=e?st(t.x-.5)+.5:st(t.x),t.y=e?st(t.y-.5)+.5:st(t.y)},move(t,e,s){h(e)?(t.x+=e.x,t.y+=e.y):(t.x+=e,t.y+=s)},scale(t,e,s=e){t.x&&(t.x*=e),t.y&&(t.y*=s)},scaleOf(t,e,s,r=s){t.x+=(t.x-e.x)*(s-1),t.y+=(t.y-e.y)*(r-1)},rotate(t,e,s){s||(s=it.defaultPoint);const r=Z(e*=E),i=J(e),n=t.x-s.x,o=t.y-s.y;t.x=s.x+n*r-o*i,t.y=s.y+n*i+o*r},tempToInnerOf(t,e){const{tempPoint:s}=it;return ot(s,t),q(e,s,s),s},tempToOuterOf(t,e){const{tempPoint:s}=it;return ot(s,t),Q(e,s,s),s},tempToInnerRadiusPointOf(t,e){const{tempRadiusPoint:s}=it;return ot(s,t),it.toInnerRadiusPointOf(t,e,s),s},copyRadiusPoint:(t,e,s,r)=>(ot(t,e),at(t,s,r),t),toInnerRadiusPointOf(t,e,s){s||(s=t),q(e,t,s),s.radiusX=Math.abs(t.radiusX/e.scaleX),s.radiusY=Math.abs(t.radiusY/e.scaleY)},toInnerOf(t,e,s){q(e,t,s)},toOuterOf(t,e,s){Q(e,t,s)},getCenter:(t,e)=>({x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}),getCenterX:(t,e)=>t+(e-t)/2,getCenterY:(t,e)=>t+(e-t)/2,getDistance:(t,e)=>nt(t.x,t.y,e.x,e.y),getDistanceFrom(t,e,s,r){const i=$(s-t),n=$(r-e);return K(i*i+n*n)},getMinDistanceFrom:(t,e,s,r,i,n)=>et(nt(t,e,s,r),nt(s,r,i,n)),getAngle:(t,e)=>ht(t,e)/E,getRotation:(t,e,s,r)=>(r||(r=e),it.getRadianFrom(t.x,t.y,e.x,e.y,s.x,s.y,r.x,r.y)/E),getRadianFrom(t,s,r,i,n,o,a,h){e(a)&&(a=r,h=i);const l=t-r,d=s-i,c=n-a,u=o-h;return Math.atan2(l*u-d*c,l*c+d*u)},getAtan2:(t,e)=>tt(e.y-t.y,e.x-t.x),getDistancePoint(t,e,s,r,i){const n=ht(t,e);return i&&(t=e),r||(e={}),e.x=t.x+Z(n)*s,e.y=t.y+J(n)*s,e},toNumberPoints(t){let e=t;return h(t[0])&&(e=[],t.forEach(t=>e.push(t.x,t.y))),e},isSame:(t,e)=>G(t.x)===G(e.x)&&G(t.y)===G(e.y),reset(t){it.reset(t)}},it=rt,{getDistanceFrom:nt,copy:ot,setRadius:at,getAtan2:ht}=it;class lt{constructor(t,e){this.set(t,e)}set(t,e){return h(t)?rt.copy(this,t):rt.set(this,t,e),this}get(){const{x:t,y:e}=this;return{x:t,y:e}}clone(){return new lt(this)}move(t,e){return rt.move(this,t,e),this}scale(t,e){return rt.scale(this,t,e),this}scaleOf(t,e,s){return rt.scaleOf(this,t,e,s),this}rotate(t,e){return rt.rotate(this,t,e),this}rotateOf(t,e){return rt.rotate(this,e,t),this}getRotation(t,e,s){return rt.getRotation(this,t,e,s)}toInnerOf(t,e){return rt.toInnerOf(this,t,e),this}toOuterOf(t,e){return rt.toOuterOf(this,t,e),this}getCenter(t){return new lt(rt.getCenter(this,t))}getDistance(t){return rt.getDistance(this,t)}getDistancePoint(t,e,s,r){return new lt(rt.getDistancePoint(this,t,e,s,r))}getAngle(t){return rt.getAngle(this,t)}getAtan2(t){return rt.getAtan2(this,t)}isSame(t){return rt.isSame(this,t)}reset(){return rt.reset(this),this}}const dt=new lt;class ct{constructor(t,e,s,r,i,n){this.set(t,e,s,r,i,n)}set(t,e,s,r,i,n){return h(t)?j.copy(this,t):j.set(this,t,e,s,r,i,n),this}setWith(t){return j.copy(this,t),this.scaleX=t.scaleX,this.scaleY=t.scaleY,this}get(){const{a:t,b:e,c:s,d:r,e:i,f:n}=this;return{a:t,b:e,c:s,d:r,e:i,f:n}}clone(){return new ct(this)}translate(t,e){return j.translate(this,t,e),this}translateInner(t,e){return j.translateInner(this,t,e),this}scale(t,e){return j.scale(this,t,e),this}scaleWith(t,e){return j.scale(this,t,e),this.scaleX*=t,this.scaleY*=e||t,this}pixelScale(t){return j.pixelScale(this,t),this}scaleOfOuter(t,e,s){return j.scaleOfOuter(this,t,e,s),this}scaleOfInner(t,e,s){return j.scaleOfInner(this,t,e,s),this}rotate(t){return j.rotate(this,t),this}rotateOfOuter(t,e){return j.rotateOfOuter(this,t,e),this}rotateOfInner(t,e){return j.rotateOfInner(this,t,e),this}skew(t,e){return j.skew(this,t,e),this}skewOfOuter(t,e,s){return j.skewOfOuter(this,t,e,s),this}skewOfInner(t,e,s){return j.skewOfInner(this,t,e,s),this}multiply(t){return j.multiply(this,t),this}multiplyParent(t){return j.multiplyParent(this,t),this}divide(t){return j.divide(this,t),this}divideParent(t){return j.divideParent(this,t),this}invert(){return j.invert(this),this}invertWith(){return j.invert(this),this.scaleX=1/this.scaleX,this.scaleY=1/this.scaleY,this}toOuterPoint(t,e,s){j.toOuterPoint(this,t,e,s)}toInnerPoint(t,e,s){j.toInnerPoint(this,t,e,s)}setLayout(t,e,s){return j.setLayout(this,t,e,s),this}getLayout(t,e,s){return j.getLayout(this,t,e,s)}withScale(t,e){return j.withScale(this,t,e)}reset(){j.reset(this)}}const ut=new ct,pt={tempPointBounds:{},setPoint(t,e,s){t.minX=t.maxX=e,t.minY=t.maxY=s},addPoint(t,e,s){t.minX=e<t.minX?e:t.minX,t.minY=s<t.minY?s:t.minY,t.maxX=e>t.maxX?e:t.maxX,t.maxY=s>t.maxY?s:t.maxY},addBounds(t,e,s,r,i){_t(t,e,s),_t(t,e+r,s+i)},copy(t,e){t.minX=e.minX,t.minY=e.minY,t.maxX=e.maxX,t.maxY=e.maxY},addPointBounds(t,e){t.minX=e.minX<t.minX?e.minX:t.minX,t.minY=e.minY<t.minY?e.minY:t.minY,t.maxX=e.maxX>t.maxX?e.maxX:t.maxX,t.maxY=e.maxY>t.maxY?e.maxY:t.maxY},toBounds(t,e){e.x=t.minX,e.y=t.minY,e.width=t.maxX-t.minX,e.height=t.maxY-t.minY}},{addPoint:_t}=pt;var ft,gt;exports.Direction4=void 0,(ft=exports.Direction4||(exports.Direction4={}))[ft.top=0]="top",ft[ft.right=1]="right",ft[ft.bottom=2]="bottom",ft[ft.left=3]="left",exports.Direction9=void 0,(gt=exports.Direction9||(exports.Direction9={}))[gt.topLeft=0]="topLeft",gt[gt.top=1]="top",gt[gt.topRight=2]="topRight",gt[gt.right=3]="right",gt[gt.bottomRight=4]="bottomRight",gt[gt.bottom=5]="bottom",gt[gt.bottomLeft=6]="bottomLeft",gt[gt.left=7]="left",gt[gt.center=8]="center",gt[gt["top-left"]=0]="top-left",gt[gt["top-right"]=2]="top-right",gt[gt["bottom-right"]=4]="bottom-right",gt[gt["bottom-left"]=6]="bottom-left";const yt=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:1,y:.5},{x:1,y:1},{x:.5,y:1},{x:0,y:1},{x:0,y:.5},{x:.5,y:.5}];yt.forEach(t=>t.type="percent");const xt={directionData:yt,tempPoint:{},get:mt,toPoint(t,e,s,r,i,n){const o=mt(t);s.x=o.x,s.y=o.y,"percent"===o.type&&(s.x*=e.width,s.y*=e.height,i&&(n||(s.x-=i.x,s.y-=i.y),o.x&&(s.x-=1===o.x?i.width:.5===o.x?o.x*i.width:0),o.y&&(s.y-=1===o.y?i.height:.5===o.y?o.y*i.height:0))),r||(s.x+=e.x,s.y+=e.y)},getPoint:(t,e,s)=>(s||(s={}),xt.toPoint(t,e,s,!0),s)};function mt(t){return r(t)?yt[exports.Direction9[t]]:t}const{toPoint:wt}=xt,bt={toPoint(t,e,s,r,i,n){wt(t,s,r,i,e,n)}},{tempPointBounds:Bt,setPoint:vt,addPoint:Ct,toBounds:kt}=pt,{toOuterPoint:Tt}=j,{float:Pt,fourNumber:Ot}=S,{floor:Lt,ceil:St}=Math;let Rt,Et,It,Mt;const At={},Wt={},Dt={},Nt={tempBounds:Dt,set(t,e=0,s=0,r=0,i=0){t.x=e,t.y=s,t.width=r,t.height=i},copy(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},copyAndSpread(t,e,s,r,i){const{x:n,y:o,width:h,height:l}=e;if(a(s)){const e=Ot(s);r?Yt.set(t,n+e[3],o+e[0],h-e[1]-e[3],l-e[2]-e[0]):Yt.set(t,n-e[3],o-e[0],h+e[1]+e[3],l+e[2]+e[0])}else r&&(s=-s),Yt.set(t,n-s,o-s,h+2*s,l+2*s);i&&("width"===i?(t.y=o,t.height=l):(t.x=n,t.width=h))},minX:t=>t.width>0?t.x:t.x+t.width,minY:t=>t.height>0?t.y:t.y+t.height,maxX:t=>t.width>0?t.x+t.width:t.x,maxY:t=>t.height>0?t.y+t.height:t.y,move(t,e,s){t.x+=e,t.y+=s},scroll(t,e){t.x+=e.scrollX,t.y+=e.scrollY},getByMove:(t,e,s)=>(t=Object.assign({},t),Yt.move(t,e,s),t),toOffsetOutBounds(t,e,s){e?zt(e,t):e=t,s||(s=t),e.offsetX=Yt.maxX(s),e.offsetY=Yt.maxY(s),Yt.move(e,-e.offsetX,-e.offsetY)},scale(t,e,s=e,r){r||rt.scale(t,e,s),t.width*=e,t.height*=s},scaleOf(t,e,s,r=s){rt.scaleOf(t,e,s,r),t.width*=s,t.height*=r},tempToOuterOf:(t,e)=>(Yt.copy(Dt,t),Yt.toOuterOf(Dt,e),Dt),getOuterOf:(t,e)=>(t=Object.assign({},t),Yt.toOuterOf(t,e),t),toOuterOf(t,e,s){if(s||(s=t),0===e.b&&0===e.c){const{a:r,d:i,e:n,f:o}=e;r>0?(s.width=t.width*r,s.x=n+t.x*r):(s.width=t.width*-r,s.x=n+t.x*r-s.width),i>0?(s.height=t.height*i,s.y=o+t.y*i):(s.height=t.height*-i,s.y=o+t.y*i-s.height)}else At.x=t.x,At.y=t.y,Tt(e,At,Wt),vt(Bt,Wt.x,Wt.y),At.x=t.x+t.width,Tt(e,At,Wt),Ct(Bt,Wt.x,Wt.y),At.y=t.y+t.height,Tt(e,At,Wt),Ct(Bt,Wt.x,Wt.y),At.x=t.x,Tt(e,At,Wt),Ct(Bt,Wt.x,Wt.y),kt(Bt,s)},toInnerOf(t,e,s){s||(s=t),Yt.move(s,-e.e,-e.f),Yt.scale(s,1/e.a,1/e.d)},getFitMatrix(t,e,s=1){const r=Math.min(s,Yt.getFitScale(t,e));return new ct(r,0,0,r,-e.x*r,-e.y*r)},getFitScale(t,e,s){const r=t.width/e.width,i=t.height/e.height;return s?Math.max(r,i):Math.min(r,i)},put(t,e,s="center",i=1,n=!0,o){o||(o=e),r(i)&&(i=Yt.getFitScale(t,e,"cover"===i)),Dt.width=n?e.width*=i:e.width*i,Dt.height=n?e.height*=i:e.height*i,bt.toPoint(s,Dt,t,o,!0,!0)},getSpread(t,e,s){const r={};return Yt.copyAndSpread(r,t,e,!1,s),r},spread(t,e,s){Yt.copyAndSpread(t,t,e,!1,s)},shrink(t,e,s){Yt.copyAndSpread(t,t,e,!0,s)},ceil(t){const{x:e,y:s}=t;t.x=Lt(t.x),t.y=Lt(t.y),t.width=e>t.x?St(t.width+e-t.x):St(t.width),t.height=s>t.y?St(t.height+s-t.y):St(t.height)},unsign(t){t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height)},float(t,e){t.x=Pt(t.x,e),t.y=Pt(t.y,e),t.width=Pt(t.width,e),t.height=Pt(t.height,e)},add(t,e,s){Rt=t.x+t.width,Et=t.y+t.height,It=e.x,Mt=e.y,s||(It+=e.width,Mt+=e.height),Rt=Rt>It?Rt:It,Et=Et>Mt?Et:Mt,t.x=t.x<e.x?t.x:e.x,t.y=t.y<e.y?t.y:e.y,t.width=Rt-t.x,t.height=Et-t.y},addList(t,e){Yt.setListWithFn(t,e,void 0,!0)},setList(t,e,s=!1){Yt.setListWithFn(t,e,void 0,s)},addListWithFn(t,e,s){Yt.setListWithFn(t,e,s,!0)},setListWithFn(t,e,s,r=!1){let i,n=!0;for(let o=0,a=e.length;o<a;o++)i=s?s(e[o],o):e[o],i&&(i.width||i.height)&&(n?(n=!1,r||zt(t,i)):Xt(t,i));n&&Yt.reset(t)},setPoints(t,e){e.forEach((t,e)=>0===e?vt(Bt,t.x,t.y):Ct(Bt,t.x,t.y)),kt(Bt,t)},setPoint(t,e){Yt.set(t,e.x,e.y)},addPoint(t,e){Xt(t,e,!0)},getPoints(t){const{x:e,y:s,width:r,height:i}=t;return[{x:e,y:s},{x:e+r,y:s},{x:e+r,y:s+i},{x:e,y:s+i}]},hitRadiusPoint:(t,e,s)=>(s&&(e=rt.tempToInnerRadiusPointOf(e,s)),e.x>=t.x-e.radiusX&&e.x<=t.x+t.width+e.radiusX&&e.y>=t.y-e.radiusY&&e.y<=t.y+t.height+e.radiusY),hitPoint:(t,e,s)=>(s&&(e=rt.tempToInnerOf(e,s)),e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height),hit:(t,e,s)=>(s&&(e=Yt.tempToOuterOf(e,s)),!(t.y+t.height<e.y||e.y+e.height<t.y||t.x+t.width<e.x||e.x+e.width<t.x)),includes:(t,e,s)=>(s&&(e=Yt.tempToOuterOf(e,s)),t.x<=e.x&&t.y<=e.y&&t.x+t.width>=e.x+e.width&&t.y+t.height>=e.y+e.height),getIntersectData(t,e,s){if(s&&(e=Yt.tempToOuterOf(e,s)),!Yt.hit(t,e))return{x:0,y:0,width:0,height:0};let{x:r,y:i,width:n,height:o}=e;return Rt=r+n,Et=i+o,It=t.x+t.width,Mt=t.y+t.height,r=r>t.x?r:t.x,i=i>t.y?i:t.y,Rt=Rt<It?Rt:It,Et=Et<Mt?Et:Mt,n=Rt-r,o=Et-i,{x:r,y:i,width:n,height:o}},intersect(t,e,s){Yt.copy(t,Yt.getIntersectData(t,e,s))},isSame:(t,e)=>t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height,isEmpty:t=>0===t.x&&0===t.y&&0===t.width&&0===t.height,hasSize:t=>t.width&&t.height,reset(t){Yt.set(t)}},Yt=Nt,{add:Xt,copy:zt}=Yt;class Ft{get minX(){return Nt.minX(this)}get minY(){return Nt.minY(this)}get maxX(){return Nt.maxX(this)}get maxY(){return Nt.maxY(this)}constructor(t,e,s,r){this.set(t,e,s,r)}set(t,e,s,r){return h(t)?Nt.copy(this,t):Nt.set(this,t,e,s,r),this}get(){const{x:t,y:e,width:s,height:r}=this;return{x:t,y:e,width:s,height:r}}clone(){return new Ft(this)}move(t,e){return Nt.move(this,t,e),this}scale(t,e,s){return Nt.scale(this,t,e,s),this}scaleOf(t,e,s){return Nt.scaleOf(this,t,e,s),this}toOuterOf(t,e){return Nt.toOuterOf(this,t,e),this}toInnerOf(t,e){return Nt.toInnerOf(this,t,e),this}getFitMatrix(t,e){return Nt.getFitMatrix(this,t,e)}put(t,e,s){Nt.put(this,t,e,s)}spread(t,e){return Nt.spread(this,t,e),this}shrink(t,e){return Nt.shrink(this,t,e),this}ceil(){return Nt.ceil(this),this}unsign(){return Nt.unsign(this),this}float(t){return Nt.float(this,t),this}add(t){return Nt.add(this,t),this}addList(t){return Nt.setList(this,t,!0),this}setList(t){return Nt.setList(this,t),this}addListWithFn(t,e){return Nt.setListWithFn(this,t,e,!0),this}setListWithFn(t,e){return Nt.setListWithFn(this,t,e),this}setPoint(t){return Nt.setPoint(this,t),this}setPoints(t){return Nt.setPoints(this,t),this}addPoint(t){return Nt.addPoint(this,t),this}getPoints(){return Nt.getPoints(this)}hitPoint(t,e){return Nt.hitPoint(this,t,e)}hitRadiusPoint(t,e){return Nt.hitRadiusPoint(this,t,e)}hit(t,e){return Nt.hit(this,t,e)}includes(t,e){return Nt.includes(this,t,e)}intersect(t,e){return Nt.intersect(this,t,e),this}getIntersect(t,e){return new Ft(Nt.getIntersectData(this,t,e))}isSame(t){return Nt.isSame(this,t)}isEmpty(){return Nt.isEmpty(this)}reset(){Nt.reset(this)}}const Ut=new Ft;const Ht={number:(t,e)=>h(t)?"percent"===t.type?t.value*e:t.value:t},jt={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,".":1,e:1,E:1},{floor:Vt,max:Gt}=Math,qt={toURL(t,e){let s=encodeURIComponent(t);return"text"===e?s="data:text/plain;charset=utf-8,"+s:"svg"===e&&(s="data:image/svg+xml,"+s),s},image:{hitCanvasSize:100,maxCacheSize:4096e3,maxPatternSize:8847360,crossOrigin:"anonymous",isLarge:(t,e,s,r)=>t.width*t.height*(e?e*s:1)>(r||Qt.maxCacheSize),isSuperLarge:(t,e,s)=>Qt.isLarge(t,e,s,Qt.maxPatternSize),getRealURL(t){const{prefix:e,suffix:s}=Qt;return!s||t.startsWith("data:")||t.startsWith("blob:")||(t+=(t.includes("?")?"&":"?")+s),e&&"/"===t[0]&&(t=e+t),t},resize(t,e,s,r,i,n,o,a,h,l){const d=Gt(Vt(e+(r||0)),1),c=Gt(Vt(s+(i||0)),1);let u,p,_;l&&(_=Ht.number(l.offset,(u="x"===l.type)?e:s))&&(u||(p=!0));const f=qt.origin.createCanvas(p?2*d:d,u?2*c:c),g=f.getContext("2d");if(a&&(g.globalAlpha=a),g.imageSmoothingEnabled=!1!==o,Qt.canUse(t)){if(n){const r=e/n.width,i=s/n.height;g.setTransform(r,0,0,i,-n.x*r,-n.y*i),g.drawImage(t,0,0,t.width,t.height)}else g.drawImage(t,0,0,e,s);_&&(g.drawImage(f,0,0,d,c,u?_-d:d,u?c:_-c,d,c),g.drawImage(f,0,0,d,c,u?_:d,u?c:_,d,c))}return f},canUse:t=>t&&t.width&&!t.__closed,setPatternTransform(t,e,s){try{e&&t.setTransform&&(t.setTransform(e),e=void 0)}catch(t){}s&&d.stintSet(s,"transform",e)}}},{image:Qt}=qt,{randColor:Jt}=S;class Zt{constructor(t){this.repeatMap={},this.name=t}static get(t){return new Zt(t)}static set filter(t){this.filterList=$t(t)}static set exclude(t){this.excludeList=$t(t)}static drawRepaint(t,e){const s=Jt();t.fillWorld(e,s.replace("1)",".1)")),t.strokeWorld(e,s)}static drawBounds(t,e,s){const r="hit"===Zt.showBounds,i=t.__nowWorld,n=Jt();r&&(e.setWorld(i),t.__drawHitPath(e),e.fillStyle=n.replace("1)",".2)"),e.fill()),e.resetTransform(),e.setStroke(n,2),r?e.stroke():e.strokeWorld(i,n)}log(...t){if(Kt.enable){if(Kt.filterList.length&&Kt.filterList.every(t=>t!==this.name))return;if(Kt.excludeList.length&&Kt.excludeList.some(t=>t===this.name))return;console.log("%c"+this.name,"color:#21ae62",...t)}}tip(...t){Kt.enable&&this.warn(...t)}warn(...t){Kt.showWarn&&console.warn(this.name,...t)}repeat(t,...e){this.repeatMap[t]||(this.warn("repeat:"+t,...e),this.repeatMap[t]=!0)}error(...t){try{throw new Error}catch(e){console.error(this.name,...t,e)}}}function $t(t){return t?r(t)&&(t=[t]):t=[],t}Zt.filterList=[],Zt.excludeList=[],Zt.showWarn=!0;const Kt=Zt,te=Zt.get("RunTime"),ee={currentId:0,currentName:"",idMap:{},nameMap:{},nameToIdMap:{},start(t,e){const s=p.create(p.RUNTIME);return se.currentId=se.idMap[s]=e?performance.now():Date.now(),se.currentName=se.nameMap[s]=t,se.nameToIdMap[t]=s,s},end(t,e){const s=se.idMap[t],r=se.nameMap[t],i=e?(performance.now()-s)/1e3:Date.now()-s;se.idMap[t]=se.nameMap[t]=se.nameToIdMap[r]=void 0,te.log(r,i,"ms")},endOfName(t,s){const r=se.nameToIdMap[t];e(r)||se.end(r,s)}},se=ee,re=[],ie={list:{},add(t,...e){this.list[t]=!0,re.push(...e)},has(t,e){const s=this.list[t];return!s&&e&&this.need(t),s},need(t){console.error("please install and import plugin: "+(t.includes("-x")?"":"@leafer-in/")+t)}};setTimeout(()=>re.forEach(t=>ie.has(t,!0)));const ne={editor:t=>ie.need("editor")},oe=Zt.get("UICreator"),ae={list:{},register(t){const{__tag:e}=t.prototype;he[e]&&oe.repeat(e),he[e]=t},get(t,s,r,i,n,o){he[t]||oe.error("not register "+t);const a=new he[t](s);return e(r)||(a.x=r,i&&(a.y=i),n&&(a.width=n),o&&(a.height=o)),a}},{list:he}=ae,le=Zt.get("EventCreator"),de={nameList:{},register(t){let e;Object.keys(t).forEach(s=>{e=t[s],r(e)&&(ce[e]&&le.repeat(e),ce[e]=t)})},changeName(t,e){const s=ce[t];if(s){const r=Object.keys(s).find(e=>s[e]===t);r&&(s[r]=e,ce[e]=s)}},has(t){return!!this.nameList[t]},get:(t,...e)=>new ce[t](...e)},{nameList:ce}=de;function ue(t,e,s,r){var i,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(n<3?i(o):n>3?i(e,s,o):i(e,s))||o);return n>3&&o&&Object.defineProperty(e,s,o),o}function pe(t,e,s,r){return new(s||(s=Promise))(function(i,n){function o(t){try{h(r.next(t))}catch(t){n(t)}}function a(t){try{h(r.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(o,a)}h((r=r.apply(t,e||[])).next())})}function _e(t){return(e,s)=>{t||(t=s);const r={get(){return this.context[t]},set(e){this.context[t]=e}};"strokeCap"===s&&(r.set=function(e){this.context[t]="none"===e?"butt":e}),Object.defineProperty(e,s,r)}}"function"==typeof SuppressedError&&SuppressedError;const fe=[];function ge(){return(t,e)=>{fe.push(e)}}const ye=[];class xe{set blendMode(t){"normal"===t&&(t="source-over"),this.context.globalCompositeOperation=t}get blendMode(){return this.context.globalCompositeOperation}set dashPattern(t){this.context.setLineDash(t||ye)}get dashPattern(){return this.context.getLineDash()}__bindContext(){let t;fe.forEach(e=>{t=this.context[e],t&&(this[e]=t.bind(this.context))}),this.textBaseline="alphabetic"}setTransform(t,e,s,r,i,n){}resetTransform(){}getTransform(){}save(){}restore(){}transform(t,e,s,r,i,n){h(t)?this.context.transform(t.a,t.b,t.c,t.d,t.e,t.f):this.context.transform(t,e,s,r,i,n)}translate(t,e){}scale(t,e){}rotate(t){}fill(t,e){}stroke(t){}clip(t,e){}fillRect(t,e,s,r){}strokeRect(t,e,s,r){}clearRect(t,e,s,r){}drawImage(t,e,s,r,i,n,o,a,h){switch(arguments.length){case 9:if(e<0){const t=-e/r*a;r+=e,e=0,n+=t,a-=t}if(s<0){const t=-s/i*h;i+=s,s=0,o+=t,h-=t}this.context.drawImage(t,e,s,r,i,n,o,a,h);break;case 5:this.context.drawImage(t,e,s,r,i);break;case 3:this.context.drawImage(t,e,s)}}beginPath(){}moveTo(t,e){}lineTo(t,e){}bezierCurveTo(t,e,s,r,i,n){}quadraticCurveTo(t,e,s,r){}closePath(){}arc(t,e,s,r,i,n){}arcTo(t,e,s,r,i){}ellipse(t,e,s,r,i,n,o,a){}rect(t,e,s,r){}roundRect(t,e,s,r,i){}createConicGradient(t,e,s){}createLinearGradient(t,e,s,r){}createPattern(t,e){}createRadialGradient(t,e,s,r,i,n){}fillText(t,e,s,r){}measureText(t){}strokeText(t,e,s,r){}destroy(){this.context=null}}ue([_e("imageSmoothingEnabled")],xe.prototype,"smooth",void 0),ue([_e("imageSmoothingQuality")],xe.prototype,"smoothLevel",void 0),ue([_e("globalAlpha")],xe.prototype,"opacity",void 0),ue([_e()],xe.prototype,"fillStyle",void 0),ue([_e()],xe.prototype,"strokeStyle",void 0),ue([_e("lineWidth")],xe.prototype,"strokeWidth",void 0),ue([_e("lineCap")],xe.prototype,"strokeCap",void 0),ue([_e("lineJoin")],xe.prototype,"strokeJoin",void 0),ue([_e("lineDashOffset")],xe.prototype,"dashOffset",void 0),ue([_e()],xe.prototype,"miterLimit",void 0),ue([_e()],xe.prototype,"shadowBlur",void 0),ue([_e()],xe.prototype,"shadowColor",void 0),ue([_e()],xe.prototype,"shadowOffsetX",void 0),ue([_e()],xe.prototype,"shadowOffsetY",void 0),ue([_e()],xe.prototype,"filter",void 0),ue([_e()],xe.prototype,"font",void 0),ue([_e()],xe.prototype,"fontKerning",void 0),ue([_e()],xe.prototype,"fontStretch",void 0),ue([_e()],xe.prototype,"fontVariantCaps",void 0),ue([_e()],xe.prototype,"textAlign",void 0),ue([_e()],xe.prototype,"textBaseline",void 0),ue([_e()],xe.prototype,"textRendering",void 0),ue([_e()],xe.prototype,"wordSpacing",void 0),ue([_e()],xe.prototype,"letterSpacing",void 0),ue([_e()],xe.prototype,"direction",void 0),ue([ge()],xe.prototype,"setTransform",null),ue([ge()],xe.prototype,"resetTransform",null),ue([ge()],xe.prototype,"getTransform",null),ue([ge()],xe.prototype,"save",null),ue([ge()],xe.prototype,"restore",null),ue([ge()],xe.prototype,"translate",null),ue([ge()],xe.prototype,"scale",null),ue([ge()],xe.prototype,"rotate",null),ue([ge()],xe.prototype,"fill",null),ue([ge()],xe.prototype,"stroke",null),ue([ge()],xe.prototype,"clip",null),ue([ge()],xe.prototype,"fillRect",null),ue([ge()],xe.prototype,"strokeRect",null),ue([ge()],xe.prototype,"clearRect",null),ue([ge()],xe.prototype,"beginPath",null),ue([ge()],xe.prototype,"moveTo",null),ue([ge()],xe.prototype,"lineTo",null),ue([ge()],xe.prototype,"bezierCurveTo",null),ue([ge()],xe.prototype,"quadraticCurveTo",null),ue([ge()],xe.prototype,"closePath",null),ue([ge()],xe.prototype,"arc",null),ue([ge()],xe.prototype,"arcTo",null),ue([ge()],xe.prototype,"ellipse",null),ue([ge()],xe.prototype,"rect",null),ue([ge()],xe.prototype,"roundRect",null),ue([ge()],xe.prototype,"createConicGradient",null),ue([ge()],xe.prototype,"createLinearGradient",null),ue([ge()],xe.prototype,"createPattern",null),ue([ge()],xe.prototype,"createRadialGradient",null),ue([ge()],xe.prototype,"fillText",null),ue([ge()],xe.prototype,"measureText",null),ue([ge()],xe.prototype,"strokeText",null);const{copy:me,multiplyParent:we,pixelScale:be}=j,{round:Be}=Math,ve=new Ft,Ce=new Ft,ke={width:1,height:1,pixelRatio:1},Te=["width","height","pixelRatio"];const Pe={creator:{},parse(t,e){},convertToCanvasData(t,e){}},Oe={N:21,D:22,X:23,G:24,F:25,O:26,P:27,U:28},Le=Object.assign({M:1,m:10,L:2,l:20,H:3,h:30,V:4,v:40,C:5,c:50,S:6,s:60,Q:7,q:70,T:8,t:80,A:9,a:90,Z:11,z:11,R:12},Oe),Se={M:3,m:3,L:3,l:3,H:2,h:2,V:2,v:2,C:7,c:7,S:5,s:5,Q:5,q:5,T:3,t:3,A:8,a:8,Z:1,z:1,N:5,D:9,X:6,G:9,F:5,O:7,P:4,U:6},Re={m:10,l:20,H:3,h:30,V:4,v:40,c:50,S:6,s:60,q:70,T:8,t:80,A:9,a:90},Ee=Object.assign(Object.assign({},Re),Oe),Ie=Le,Me={};for(let t in Ie)Me[Ie[t]]=t;const Ae={};for(let t in Ie)Ae[Ie[t]]=Se[t];const We={drawRoundRect(t,e,s,r,i,n){const o=S.fourNumber(n,Math.min(r/2,i/2)),a=e+r,h=s+i;o[0]?t.moveTo(e+o[0],s):t.moveTo(e,s),o[1]?t.arcTo(a,s,a,h,o[1]):t.lineTo(a,s),o[2]?t.arcTo(a,h,e,h,o[2]):t.lineTo(a,h),o[3]?t.arcTo(e,h,e,s,o[3]):t.lineTo(e,h),o[0]?t.arcTo(e,s,a,s,o[0]):t.lineTo(e,s)}},{sin:De,cos:Ne,hypot:Ye,atan2:Xe,ceil:ze,abs:Fe,PI:Ue,sqrt:He,pow:je}=Math,{setPoint:Ve,addPoint:Ge}=pt,{set:qe,toNumberPoints:Qe}=rt,{M:Je,L:Ze,C:$e,Q:Ke,Z:ts}=Le,es={},ss={points(t,e,s,r){let i=Qe(e);if(t.push(Je,i[0],i[1]),s&&i.length>5){let e,n,o,a,h,l,d,c,u,p,_,f,g,y,x,m=i.length;const w=!0===s?.5:s;r&&(i=[i[m-2],i[m-1],...i,i[0],i[1],i[2],i[3]],m=i.length);for(let s=2;s<m-2;s+=2)e=i[s-2],n=i[s-1],o=i[s],a=i[s+1],h=i[s+2],l=i[s+3],_=o-e,f=a-n,g=He(je(_,2)+je(f,2)),y=He(je(h-o,2)+je(l-a,2)),(g||y)&&(x=g+y,g=w*g/x,y=w*y/x,h-=e,l-=n,d=o-g*h,c=a-g*l,2===s?r||t.push(Ke,d,c,o,a):(_||f)&&t.push($e,u,p,d,c,o,a),u=o+y*h,p=a+y*l);r||t.push(Ke,u,p,i[m-2],i[m-1])}else for(let e=2,s=i.length;e<s;e+=2)t.push(Ze,i[e],i[e+1]);r&&t.push(ts)},rect(t,e,s,r,i){Pe.creator.path=t,Pe.creator.moveTo(e,s).lineTo(e+r,s).lineTo(e+r,s+i).lineTo(e,s+i).lineTo(e,s)},roundRect(t,e,s,r,i,n){Pe.creator.path=[],We.drawRoundRect(Pe.creator,e,s,r,i,n),t.push(...Pe.convertToCanvasData(Pe.creator.path,!0))},arcTo(t,e,s,r,i,n,o,a,h,l,d){const c=r-e,u=i-s,p=n-r,_=o-i;let f=Xe(u,c),g=Xe(_,p);const y=Ye(c,u),x=Ye(p,_);let m=g-f;if(m<0&&(m+=I),y<1e-12||x<1e-12||m<1e-12||Fe(m-Ue)<1e-12)return t&&t.push(Ze,r,i),h&&(Ve(h,e,s),Ge(h,r,i)),d&&qe(d,e,s),void(l&&qe(l,r,i));const w=c*_-p*u<0,b=w?-1:1,B=a/Ne(m/2),v=r+B*Ne(f+m/2+M*b),C=i+B*De(f+m/2+M*b);return f-=M*b,g-=M*b,ns(t,v,C,a,a,0,f/E,g/E,w,h,l,d)},arc:(t,e,s,r,i,n,o,a,h,l)=>ns(t,e,s,r,r,0,i,n,o,a,h,l),ellipse(t,e,s,r,i,n,o,a,h,l,d,c){const u=n*E,p=De(u),_=Ne(u);let f=o*E,g=a*E;f>Ue&&(f-=I),g<0&&(g+=I);let y=g-f;y<0?y+=I:y>I&&(y-=I),h&&(y-=I);const x=ze(Fe(y/M)),m=y/x,w=De(m/4),b=8/3*w*w/De(m/2);g=f+m;let B,v,C,k,T,P,O,L,S=Ne(f),R=De(f),A=C=_*r*S-p*i*R,W=k=p*r*S+_*i*R,D=e+C,N=s+k;t&&t.push(t.length?Ze:Je,D,N),l&&Ve(l,D,N),c&&qe(c,D,N);for(let n=0;n<x;n++)B=Ne(g),v=De(g),C=_*r*B-p*i*v,k=p*r*B+_*i*v,T=e+A-b*(_*r*R+p*i*S),P=s+W-b*(p*r*R-_*i*S),O=e+C+b*(_*r*v+p*i*B),L=s+k+b*(p*r*v-_*i*B),t&&t.push($e,T,P,O,L,e+C,s+k),l&&is(e+A,s+W,T,P,O,L,e+C,s+k,l,!0),A=C,W=k,S=B,R=v,f=g,g+=m;d&&qe(d,e+C,s+k)},quadraticCurveTo(t,e,s,r,i,n,o){t.push($e,(e+2*r)/3,(s+2*i)/3,(n+2*r)/3,(o+2*i)/3,n,o)},toTwoPointBoundsByQuadraticCurve(t,e,s,r,i,n,o,a){is(t,e,(t+2*s)/3,(e+2*r)/3,(i+2*s)/3,(n+2*r)/3,i,n,o,a)},toTwoPointBounds(t,e,s,r,i,n,o,a,h,l){const d=[];let c,u,p,_,f,g,y,x,m=t,w=s,b=i,B=o;for(let t=0;t<2;++t)if(1==t&&(m=e,w=r,b=n,B=a),c=-3*m+9*w-9*b+3*B,u=6*m-12*w+6*b,p=3*w-3*m,Math.abs(c)<1e-12){if(Math.abs(u)<1e-12)continue;_=-p/u,0<_&&_<1&&d.push(_)}else y=u*u-4*p*c,x=Math.sqrt(y),y<0||(f=(-u+x)/(2*c),0<f&&f<1&&d.push(f),g=(-u-x)/(2*c),0<g&&g<1&&d.push(g));l?Ge(h,t,e):Ve(h,t,e),Ge(h,o,a);for(let l=0,c=d.length;l<c;l++)rs(d[l],t,e,s,r,i,n,o,a,es),Ge(h,es.x,es.y)},getPointAndSet(t,e,s,r,i,n,o,a,h,l){const d=1-t,c=d*d*d,u=3*d*d*t,p=3*d*t*t,_=t*t*t;l.x=c*e+u*r+p*n+_*a,l.y=c*s+u*i+p*o+_*h},getPoint(t,e,s,r,i,n,o,a,h){const l={};return rs(t,e,s,r,i,n,o,a,h,l),l},getDerivative(t,e,s,r,i){const n=1-t;return 3*n*n*(s-e)+6*n*t*(r-s)+3*t*t*(i-r)}},{getPointAndSet:rs,toTwoPointBounds:is,ellipse:ns}=ss,{sin:os,cos:as,sqrt:hs,atan2:ls}=Math,{ellipse:ds}=ss,cs={ellipticalArc(t,e,s,r,i,n,o,a,h,l,d){const c=(h-e)/2,u=(l-s)/2,p=n*E,_=os(p),f=as(p),g=-f*c-_*u,y=-f*u+_*c,x=r*r,m=i*i,w=y*y,b=g*g,B=x*m-x*w-m*b;let v=0;if(B<0){const t=hs(1-B/(x*m));r*=t,i*=t}else v=(o===a?-1:1)*hs(B/(x*w+m*b));const C=v*r*y/i,k=-v*i*g/r,T=ls((y-k)/i,(g-C)/r),P=ls((-y-k)/i,(-g-C)/r);let O=P-T;0===a&&O>0?O-=I:1===a&&O<0&&(O+=I);const L=e+c+f*C-_*k,S=s+u+_*C+f*k,R=O<0?1:0;d||qt.ellipseToCurve?ds(t,L,S,r,i,n,T/E,P/E,R):r!==i||n?t.push(Le.G,L,S,r,i,n,T/E,P/E,R):t.push(Le.O,L,S,r,T/E,P/E,R)}},us={toCommand:t=>[],toNode:t=>[]},{M:ps,m:_s,L:fs,l:gs,H:ys,h:xs,V:ms,v:ws,C:bs,c:Bs,S:vs,s:Cs,Q:ks,q:Ts,T:Ps,t:Os,A:Ls,a:Ss,Z:Rs,z:Es,N:Is,D:Ms,X:As,G:Ws,F:Ds,O:Ns,P:Ys,U:Xs}=Le,{rect:zs,roundRect:Fs,arcTo:Us,arc:Hs,ellipse:js,quadraticCurveTo:Vs}=ss,{ellipticalArc:Gs}=cs,qs=Zt.get("PathConvert"),Qs={},Js={current:{dot:0},stringify(t,e){let s,r,i,n=0,o=t.length,a="";for(;n<o;){r=t[n],s=Ae[r],a+=r===i?" ":Me[r];for(let r=1;r<s;r++)a+=S.float(t[n+r],e),r===s-1||(a+=" ");i=r,n+=s}return a},parse(t,e){let s,r,i,n="";const o=[],a=e?Ee:Re;for(let e=0,h=t.length;e<h;e++)r=t[e],jt[r]?("."===r&&(Zs.dot&&($s(o,n),n=""),Zs.dot++),"0"===n&&"."!==r&&($s(o,n),n=""),n+=r):Le[r]?(n&&($s(o,n),n=""),Zs.name=Le[r],Zs.length=Se[r],Zs.index=0,$s(o,Zs.name),!s&&a[r]&&(s=!0)):"-"===r||"+"===r?"e"===i||"E"===i?n+=r:(n&&$s(o,n),n=r):n&&($s(o,n),n=""),i=r;return n&&$s(o,n),s?Js.toCanvasData(o,e):o},toCanvasData(t,e){let s,r,i,n,o,a=0,h=0,l=0,d=0,c=0,u=t.length;const p=[];for(;c<u;){switch(i=t[c],i){case _s:t[c+1]+=a,t[c+2]+=h;case ps:a=t[c+1],h=t[c+2],p.push(ps,a,h),c+=3;break;case xs:t[c+1]+=a;case ys:a=t[c+1],p.push(fs,a,h),c+=2;break;case ws:t[c+1]+=h;case ms:h=t[c+1],p.push(fs,a,h),c+=2;break;case gs:t[c+1]+=a,t[c+2]+=h;case fs:a=t[c+1],h=t[c+2],p.push(fs,a,h),c+=3;break;case Cs:t[c+1]+=a,t[c+2]+=h,t[c+3]+=a,t[c+4]+=h,i=vs;case vs:o=n===bs||n===vs,l=o?2*a-s:t[c+1],d=o?2*h-r:t[c+2],s=t[c+1],r=t[c+2],a=t[c+3],h=t[c+4],p.push(bs,l,d,s,r,a,h),c+=5;break;case Bs:t[c+1]+=a,t[c+2]+=h,t[c+3]+=a,t[c+4]+=h,t[c+5]+=a,t[c+6]+=h,i=bs;case bs:s=t[c+3],r=t[c+4],a=t[c+5],h=t[c+6],p.push(bs,t[c+1],t[c+2],s,r,a,h),c+=7;break;case Os:t[c+1]+=a,t[c+2]+=h,i=Ps;case Ps:o=n===ks||n===Ps,s=o?2*a-s:t[c+1],r=o?2*h-r:t[c+2],e?Vs(p,a,h,s,r,t[c+1],t[c+2]):p.push(ks,s,r,t[c+1],t[c+2]),a=t[c+1],h=t[c+2],c+=3;break;case Ts:t[c+1]+=a,t[c+2]+=h,t[c+3]+=a,t[c+4]+=h,i=ks;case ks:s=t[c+1],r=t[c+2],e?Vs(p,a,h,s,r,t[c+3],t[c+4]):p.push(ks,s,r,t[c+3],t[c+4]),a=t[c+3],h=t[c+4],c+=5;break;case Ss:t[c+6]+=a,t[c+7]+=h;case Ls:Gs(p,a,h,t[c+1],t[c+2],t[c+3],t[c+4],t[c+5],t[c+6],t[c+7],e),a=t[c+6],h=t[c+7],c+=8;break;case Es:case Rs:p.push(Rs),c++;break;case Is:a=t[c+1],h=t[c+2],e?zs(p,a,h,t[c+3],t[c+4]):Ks(p,t,c,5),c+=5;break;case Ms:a=t[c+1],h=t[c+2],e?Fs(p,a,h,t[c+3],t[c+4],[t[c+5],t[c+6],t[c+7],t[c+8]]):Ks(p,t,c,9),c+=9;break;case As:a=t[c+1],h=t[c+2],e?Fs(p,a,h,t[c+3],t[c+4],t[c+5]):Ks(p,t,c,6),c+=6;break;case Ws:js(e?p:Ks(p,t,c,9),t[c+1],t[c+2],t[c+3],t[c+4],t[c+5],t[c+6],t[c+7],t[c+8],null,Qs),a=Qs.x,h=Qs.y,c+=9;break;case Ds:e?js(p,t[c+1],t[c+2],t[c+3],t[c+4],0,0,360,!1):Ks(p,t,c,5),a=t[c+1]+t[c+3],h=t[c+2],c+=5;break;case Ns:Hs(e?p:Ks(p,t,c,7),t[c+1],t[c+2],t[c+3],t[c+4],t[c+5],t[c+6],null,Qs),a=Qs.x,h=Qs.y,c+=7;break;case Ys:e?Hs(p,t[c+1],t[c+2],t[c+3],0,360,!1):Ks(p,t,c,4),a=t[c+1]+t[c+3],h=t[c+2],c+=4;break;case Xs:Us(e?p:Ks(p,t,c,6),a,h,t[c+1],t[c+2],t[c+3],t[c+4],t[c+5],null,Qs),a=Qs.x,h=Qs.y,c+=6;break;default:return qs.error(`command: ${i} [index:${c}]`,t),p}n=i}return p},objectToCanvasData(t){if(t[0].name.length>1)return us.toCommand(t);{const e=[];return t.forEach(t=>{switch(t.name){case"M":e.push(ps,t.x,t.y);break;case"L":e.push(fs,t.x,t.y);break;case"C":e.push(bs,t.x1,t.y1,t.x2,t.y2,t.x,t.y);break;case"Q":e.push(ks,t.x1,t.y1,t.x,t.y);break;case"Z":e.push(Rs)}}),e}},copyData(t,e,s,r){for(let i=s,n=s+r;i<n;i++)t.push(e[i])},pushData(t,e){Zs.index===Zs.length&&(Zs.index=1,t.push(Zs.name)),t.push(Number(e)),Zs.index++,Zs.dot=0}},{current:Zs,pushData:$s,copyData:Ks}=Js,{M:tr,L:er,C:sr,Q:rr,Z:ir,N:nr,D:or,X:ar,G:hr,F:lr,O:dr,P:cr,U:ur}=Le,{getMinDistanceFrom:pr,getRadianFrom:_r}=rt,{tan:fr,min:gr,abs:yr}=Math,xr={},mr={beginPath(t){t.length=0},moveTo(t,e,s){t.push(tr,e,s)},lineTo(t,e,s){t.push(er,e,s)},bezierCurveTo(t,e,s,r,i,n,o){t.push(sr,e,s,r,i,n,o)},quadraticCurveTo(t,e,s,r,i){t.push(rr,e,s,r,i)},closePath(t){t.push(ir)},rect(t,e,s,r,i){t.push(nr,e,s,r,i)},roundRect(t,e,s,r,i,o){if(n(o))t.push(ar,e,s,r,i,o);else{const n=S.fourNumber(o);n?t.push(or,e,s,r,i,...n):t.push(nr,e,s,r,i)}},ellipse(t,e,r,i,n,o,a,h,l){if(i===n)return br(t,e,r,i,a,h,l);s(o)?t.push(lr,e,r,i,n):(s(a)&&(a=0),s(h)&&(h=360),t.push(hr,e,r,i,n,o,a,h,l?1:0))},arc(t,e,r,i,n,o,a){s(n)?t.push(cr,e,r,i):(s(n)&&(n=0),s(o)&&(o=360),t.push(dr,e,r,i,n,o,a?1:0))},arcTo(t,s,r,i,n,o,a,h){if(!e(a)){const t=pr(a,h,s,r,i,n);o=gr(o,gr(t/2,t/2*yr(fr(_r(a,h,s,r,i,n)/2))))}t.push(ur,s,r,i,n,o)},drawEllipse(t,e,r,i,n,o,a,h,l){ss.ellipse(null,e,r,i,n,s(o)?0:o,s(a)?0:a,s(h)?360:h,l,null,null,xr),t.push(tr,xr.x,xr.y),wr(t,e,r,i,n,o,a,h,l)},drawArc(t,e,r,i,n,o,a){ss.arc(null,e,r,i,s(n)?0:n,s(o)?360:o,a,null,null,xr),t.push(tr,xr.x,xr.y),br(t,e,r,i,n,o,a)},drawPoints(t,e,s,r){ss.points(t,e,s,r)}},{ellipse:wr,arc:br}=mr,{moveTo:Br,lineTo:vr,quadraticCurveTo:Cr,bezierCurveTo:kr,closePath:Tr,beginPath:Pr,rect:Or,roundRect:Lr,ellipse:Sr,arc:Rr,arcTo:Er,drawEllipse:Ir,drawArc:Mr,drawPoints:Ar}=mr;class Wr{set path(t){this.__path=t}get path(){return this.__path}constructor(t){this.set(t)}set(t){return this.__path=t?r(t)?Pe.parse(t):t:[],this}beginPath(){return Pr(this.__path),this.paint(),this}moveTo(t,e){return Br(this.__path,t,e),this.paint(),this}lineTo(t,e){return vr(this.__path,t,e),this.paint(),this}bezierCurveTo(t,e,s,r,i,n){return kr(this.__path,t,e,s,r,i,n),this.paint(),this}quadraticCurveTo(t,e,s,r){return Cr(this.__path,t,e,s,r),this.paint(),this}closePath(){return Tr(this.__path),this.paint(),this}rect(t,e,s,r){return Or(this.__path,t,e,s,r),this.paint(),this}roundRect(t,e,s,r,i){return Lr(this.__path,t,e,s,r,i),this.paint(),this}ellipse(t,e,s,r,i,n,o,a){return Sr(this.__path,t,e,s,r,i,n,o,a),this.paint(),this}arc(t,e,s,r,i,n){return Rr(this.__path,t,e,s,r,i,n),this.paint(),this}arcTo(t,e,s,r,i){return Er(this.__path,t,e,s,r,i),this.paint(),this}drawEllipse(t,e,s,r,i,n,o,a){return Ir(this.__path,t,e,s,r,i,n,o,a),this.paint(),this}drawArc(t,e,s,r,i,n){return Mr(this.__path,t,e,s,r,i,n),this.paint(),this}drawPoints(t,e,s){return Ar(this.__path,t,e,s),this.paint(),this}clearPath(){return this.beginPath()}paint(){}}const{M:Dr,L:Nr,C:Yr,Q:Xr,Z:zr,N:Fr,D:Ur,X:Hr,G:jr,F:Vr,O:Gr,P:qr,U:Qr}=Le,Jr=Zt.get("PathDrawer"),Zr={drawPathByData(t,e){if(!e)return;let s,r=0,i=e.length;for(;r<i;)switch(s=e[r],s){case Dr:t.moveTo(e[r+1],e[r+2]),r+=3;break;case Nr:t.lineTo(e[r+1],e[r+2]),r+=3;break;case Yr:t.bezierCurveTo(e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6]),r+=7;break;case Xr:t.quadraticCurveTo(e[r+1],e[r+2],e[r+3],e[r+4]),r+=5;break;case zr:t.closePath(),r+=1;break;case Fr:t.rect(e[r+1],e[r+2],e[r+3],e[r+4]),r+=5;break;case Ur:t.roundRect(e[r+1],e[r+2],e[r+3],e[r+4],[e[r+5],e[r+6],e[r+7],e[r+8]]),r+=9;break;case Hr:t.roundRect(e[r+1],e[r+2],e[r+3],e[r+4],e[r+5]),r+=6;break;case jr:t.ellipse(e[r+1],e[r+2],e[r+3],e[r+4],e[r+5]*E,e[r+6]*E,e[r+7]*E,e[r+8]),r+=9;break;case Vr:t.ellipse(e[r+1],e[r+2],e[r+3],e[r+4],0,0,I,!1),r+=5;break;case Gr:t.arc(e[r+1],e[r+2],e[r+3],e[r+4]*E,e[r+5]*E,e[r+6]),r+=7;break;case qr:t.arc(e[r+1],e[r+2],e[r+3],0,I,!1),r+=4;break;case Qr:t.arcTo(e[r+1],e[r+2],e[r+3],e[r+4],e[r+5]),r+=6;break;default:return void Jr.error(`command: ${s} [index:${r}]`,e)}}},{M:$r,L:Kr,C:ti,Q:ei,Z:si,N:ri,D:ii,X:ni,G:oi,F:ai,O:hi,P:li,U:di}=Le,{toTwoPointBounds:ci,toTwoPointBoundsByQuadraticCurve:ui,arcTo:pi,arc:_i,ellipse:fi}=ss,{addPointBounds:gi,copy:yi,addPoint:xi,setPoint:mi,addBounds:wi,toBounds:bi}=pt,Bi=Zt.get("PathBounds");let vi,Ci,ki;const Ti={},Pi={},Oi={},Li={toBounds(t,e){Li.toTwoPointBounds(t,Pi),bi(Pi,e)},toTwoPointBounds(t,e){if(!t||!t.length)return mi(e,0,0);let s,r,i,n,o,a=0,h=0,l=0;const d=t.length;for(;a<d;)switch(o=t[a],0===a&&(o===si||o===ti||o===ei?mi(e,h,l):mi(e,t[a+1],t[a+2])),o){case $r:case Kr:h=t[a+1],l=t[a+2],xi(e,h,l),a+=3;break;case ti:i=t[a+5],n=t[a+6],ci(h,l,t[a+1],t[a+2],t[a+3],t[a+4],i,n,Ti),gi(e,Ti),h=i,l=n,a+=7;break;case ei:s=t[a+1],r=t[a+2],i=t[a+3],n=t[a+4],ui(h,l,s,r,i,n,Ti),gi(e,Ti),h=i,l=n,a+=5;break;case si:a+=1;break;case ri:h=t[a+1],l=t[a+2],wi(e,h,l,t[a+3],t[a+4]),a+=5;break;case ii:case ni:h=t[a+1],l=t[a+2],wi(e,h,l,t[a+3],t[a+4]),a+=o===ii?9:6;break;case oi:fi(null,t[a+1],t[a+2],t[a+3],t[a+4],t[a+5],t[a+6],t[a+7],t[a+8],Ti,Oi),0===a?yi(e,Ti):gi(e,Ti),h=Oi.x,l=Oi.y,a+=9;break;case ai:h=t[a+1],l=t[a+2],Ci=t[a+3],ki=t[a+4],wi(e,h-Ci,l-ki,2*Ci,2*ki),h+=Ci,a+=5;break;case hi:_i(null,t[a+1],t[a+2],t[a+3],t[a+4],t[a+5],t[a+6],Ti,Oi),0===a?yi(e,Ti):gi(e,Ti),h=Oi.x,l=Oi.y,a+=7;break;case li:h=t[a+1],l=t[a+2],vi=t[a+3],wi(e,h-vi,l-vi,2*vi,2*vi),h+=vi,a+=4;break;case di:pi(null,h,l,t[a+1],t[a+2],t[a+3],t[a+4],t[a+5],Ti,Oi),0===a?yi(e,Ti):gi(e,Ti),h=Oi.x,l=Oi.y,a+=6;break;default:return void Bi.error(`command: ${o} [index:${a}]`,t)}}},{M:Si,L:Ri,Z:Ei}=Le,{getCenterX:Ii,getCenterY:Mi}=rt,{arcTo:Ai}=mr,Wi={smooth(t,e,s){let r,i,n,o=0,h=0,l=0,d=0,c=0,u=0,p=0,_=0,f=0;a(e)&&(e=e[0]||0);const g=t.length,y=[];for(;o<g;){switch(r=t[o],r){case Si:d=_=t[o+1],c=f=t[o+2],o+=3,t[o]===Ri?(u=t[o+1],p=t[o+2],y.push(Si,Ii(d,u),Mi(c,p))):y.push(Si,d,c);break;case Ri:switch(h=t[o+1],l=t[o+2],o+=3,t[o]){case Ri:Ai(y,h,l,t[o+1],t[o+2],e,_,f);break;case Ei:Ai(y,h,l,d,c,e,_,f);break;default:y.push(Ri,h,l)}_=h,f=l;break;case Ei:i!==Ei&&(Ai(y,d,c,u,p,e,_,f),y.push(Ei)),o+=1;break;default:n=Ae[r];for(let e=0;e<n;e++)y.push(t[o+e]);o+=n}i=r}return r!==Ei&&(y[1]=d,y[2]=c),y}};function Di(t){return new Wr(t)}const Ni=Di();Pe.creator=Di(),Pe.parse=Js.parse,Pe.convertToCanvasData=Js.toCanvasData;const{drawRoundRect:Yi}=We;const Xi={alphaPixelTypes:["png","webp","svg"],upperCaseTypeMap:{},mineType:t=>!t||t.startsWith("image")?t:("jpg"===t&&(t="jpeg"),"image/"+t),fileType(t){const e=t.split(".");return e[e.length-1]},isOpaqueImage(t){const e=zi.fileType(t);return["jpg","jpeg"].some(t=>t===e)},getExportOptions(t){switch(typeof t){case"object":return t;case"number":return{quality:t};case"boolean":return{blob:t};default:return{}}}},zi=Xi;zi.alphaPixelTypes.forEach(t=>zi.upperCaseTypeMap[t]=t.toUpperCase());const Fi=Zt.get("TaskProcessor");class Ui{constructor(t){this.parallel=!0,this.time=1,this.id=p.create(p.TASK),this.task=t}run(){return pe(this,void 0,void 0,function*(){try{if(this.isComplete||this.runing)return;if(this.runing=!0,this.canUse&&!this.canUse())return this.cancel();this.task&&(yield this.task())}catch(t){Fi.error(t)}})}complete(){this.isComplete=!0,this.parent=this.task=this.canUse=null}cancel(){this.isCancel=!0,this.complete()}}class Hi{get total(){return this.list.length+this.delayNumber}get finishedIndex(){return this.isComplete?0:this.index+this.parallelSuccessNumber}get remain(){return this.isComplete?this.total:this.total-this.finishedIndex}get percent(){const{total:t}=this;let e=0,s=0;for(let r=0;r<t;r++)r<=this.finishedIndex?(s+=this.list[r].time,r===this.finishedIndex&&(e=s)):e+=this.list[r].time;return this.isComplete?1:s/e}constructor(t){this.config={parallel:6},this.list=[],this.running=!1,this.isComplete=!0,this.index=0,this.delayNumber=0,t&&d.assign(this.config,t),this.empty()}add(t,s,r){let i,o,a,h;const l=new Ui(t);return l.parent=this,n(s)?h=s:s&&(o=s.parallel,i=s.start,a=s.time,h=s.delay,r||(r=s.canUse)),a&&(l.time=a),!1===o&&(l.parallel=!1),r&&(l.canUse=r),e(h)?this.push(l,i):(this.delayNumber++,setTimeout(()=>{this.delayNumber&&(this.delayNumber--,this.push(l,i))},h)),this.isComplete=!1,l}push(t,e){this.list.push(t),!1===e||this.timer||(this.timer=setTimeout(()=>this.start()))}empty(){this.index=0,this.parallelSuccessNumber=0,this.list=[],this.parallelList=[],this.delayNumber=0}start(){this.running||(this.running=!0,this.isComplete=!1,this.run())}pause(){clearTimeout(this.timer),this.timer=null,this.running=!1}resume(){this.start()}skip(){this.index++,this.resume()}stop(){this.isComplete=!0,this.list.forEach(t=>{t.isComplete||t.run()}),this.pause(),this.empty()}run(){this.running&&(this.setParallelList(),this.parallelList.length>1?this.runParallelTasks():this.remain?this.runTask():this.onComplete())}runTask(){const t=this.list[this.index];t?t.run().then(()=>{this.onTask(t),this.index++,t.isCancel?this.runTask():this.nextTask()}).catch(t=>{this.onError(t)}):this.timer=setTimeout(()=>this.nextTask())}runParallelTasks(){this.parallelList.forEach(t=>this.runParallelTask(t))}runParallelTask(t){t.run().then(()=>{this.onTask(t),this.fillParallelTask()}).catch(t=>{this.onParallelError(t)})}nextTask(){this.total===this.finishedIndex?this.onComplete():this.timer=setTimeout(()=>this.run())}setParallelList(){let t;const{config:e,list:s,index:r}=this;this.parallelList=[],this.parallelSuccessNumber=0;let i=r+e.parallel;if(i>s.length&&(i=s.length),e.parallel>1)for(let e=r;e<i&&(t=s[e],t.parallel);e++)this.parallelList.push(t)}fillParallelTask(){let t;const e=this.parallelList;this.parallelSuccessNumber++,e.pop();const s=e.length,r=this.finishedIndex+s;if(e.length){if(!this.running)return;r<this.total&&(t=this.list[r],t&&t.parallel&&(e.push(t),this.runParallelTask(t)))}else this.index+=this.parallelSuccessNumber,this.parallelSuccessNumber=0,this.nextTask()}onComplete(){this.stop(),this.config.onComplete&&this.config.onComplete()}onTask(t){t.complete(),this.config.onTask&&this.config.onTask()}onParallelError(t){this.parallelList.forEach(t=>{t.parallel=!1}),this.parallelList.length=0,this.parallelSuccessNumber=0,this.onError(t)}onError(t){this.pause(),this.config.onError&&this.config.onError(t)}destroy(){this.stop()}}const ji=Zt.get("Resource"),Vi={tasker:new Hi,map:{},get isComplete(){return Gi.tasker.isComplete},set(t,e){Gi.map[t]&&ji.repeat(t),Gi.map[t]=e},get:t=>Gi.map[t],remove(t){const e=Gi.map[t];e&&(e.destroy&&e.destroy(),delete Gi.map[t])},loadImage(t,e){return new Promise((s,r)=>{const i=this.setImage(t,t,e);i.load(()=>s(i),t=>r(t))})},setImage(t,e,s){let i;return r(e)?i={url:e}:e.url||(i={url:t,view:e}),i&&(s&&(i.format=s),e=ne.image(i)),Gi.set(t,e),e},destroy(){Gi.map={}}},Gi=Vi,qi={maxRecycled:10,recycledList:[],patternTasker:new Hi({parallel:1}),get(t){let e=Vi.get(t.url);return e||Vi.set(t.url,e=ne.image(t)),e.use++,e},recycle(t){t.use--,setTimeout(()=>{t.use||(qt.image.isLarge(t)?t.url&&Vi.remove(t.url):(t.clearLevels(),Qi.recycledList.push(t)))})},recyclePaint(t){Qi.recycle(t.image)},clearRecycled(t){const e=Qi.recycledList;(e.length>Qi.maxRecycled||t)&&(e.forEach(e=>(!e.use||t)&&e.url&&Vi.remove(e.url)),e.length=0)},clearLevels(){},hasAlphaPixel:t=>Xi.alphaPixelTypes.some(e=>Qi.isFormat(e,t)),isFormat(t,e){if(e.format)return e.format===t;const{url:s}=e;if(s.startsWith("data:")){if(s.startsWith("data:"+Xi.mineType(t)))return!0}else{if(s.includes("."+t)||s.includes("."+Xi.upperCaseTypeMap[t]))return!0;if("png"===t&&!s.includes("."))return!0}return!1},destroy(){this.clearRecycled(!0)}},Qi=qi,{IMAGE:Ji,create:Zi}=p;function $i(t,e,s,r){r||(s.configurable=s.enumerable=!0),Object.defineProperty(t,e,s)}function Ki(t,e){return Object.getOwnPropertyDescriptor(t,e)}function tn(t,e){const s="_"+t;return{get(){const t=this[s];return null==t?e:t},set(t){this[s]=t}}}function en(t,e){return(s,r)=>rn(s,r,t,e&&e(r))}function sn(t){return t}function rn(t,e,s,r){const i={get(){return this.__getAttr(e)},set(t){this.__setAttr(e,t)}};$i(t,e,Object.assign(i,r||{})),pn(t,e,s)}function nn(t,e){return en(t,t=>({set(s){this.__setAttr(t,s,e)&&on(this)}}))}function on(t){t.__layout.boxChanged||t.__layout.boxChange(),t.__hasAutoLayout&&(t.__layout.matrixChanged||t.__layout.matrixChange())}const an=nn;function hn(t,e){return en(t,t=>({set(s){this.__setAttr(t,s)&&(ln(this),e&&(this.__.__useStroke=!0))}}))}function ln(t){t.__layout.strokeChanged||t.__layout.strokeChange(),t.__.__useArrow&&on(t)}const dn=hn;function cn(t){const{parent:e}=t;if(e){const{__hasMask:t}=e;e.__updateMask(),t!==e.__hasMask&&e.forceUpdate()}}function un(t,e,s,r){t.__setAttr(e,s)&&(t.__layout.opacityChanged||t.__layout.opacityChange(),0!==r&&0!==s||on(t))}function pn(t,s,r){const i=t.__DataProcessor.prototype,n="_"+s,o=function(t){return"set"+t.charAt(0).toUpperCase()+t.slice(1)}(s),a=tn(s,r);if(e(r))a.get=function(){return this[n]};else if("function"==typeof r)a.get=function(){const t=this[n];return null==t?r(this.__leaf):t};else if(h(r)){const t=l(r);a.get=function(){const e=this[n];return null==e?this[n]=t?{}:d.clone(r):e}}const c=t.isBranchLeaf;"width"===s?a.get=function(){const t=this[n];if(null==t){const t=this,e=t.__naturalWidth,s=t.__leaf;return!r||s.pathInputed?s.boxBounds.width:e?t._height&&t.__useNaturalRatio?t._height*e/t.__naturalHeight:e:c&&s.children.length?s.boxBounds.width:r}return t}:"height"===s&&(a.get=function(){const t=this[n];if(null==t){const t=this,e=t.__naturalHeight,s=t.__leaf;return!r||s.pathInputed?s.boxBounds.height:e?t._width&&t.__useNaturalRatio?t._width*e/t.__naturalWidth:e:c&&s.children.length?s.boxBounds.height:r}return t});let u,p=i;for(;!u&&p;)u=Ki(p,s),p=p.__proto__;u&&u.set&&(a.set=u.set),i[o]&&(a.set=i[o],delete i[o]),$i(i,s,a)}const _n=new Zt("rewrite"),fn=[],gn=["destroy","constructor"];function yn(t){fn.length&&(fn.forEach(e=>{t&&_n.error(e.name,"Class@rewriteAble()"),e.run()}),fn.length=0)}function xn(t,e){return s=>{var r;(t.prototype?(r=t.prototype,Object.getOwnPropertyNames(r)):Object.keys(t)).forEach(r=>{if(!(gn.includes(r)||e&&e.includes(r)))if(t.prototype){Ki(t.prototype,r).writable&&(s.prototype[r]=t.prototype[r])}else s.prototype[r]=t[r]})}}setTimeout(()=>yn(!0));const{copy:mn,toInnerPoint:wn,toOuterPoint:bn,scaleOfOuter:Bn,rotateOfOuter:vn,skewOfOuter:Cn,multiplyParent:kn,divideParent:Tn,getLayout:Pn}=j,On={},{round:Ln}=Math,Sn={updateAllMatrix(t,e,s){if(e&&t.__hasAutoLayout&&t.__layout.matrixChanged&&(s=!0),In(t,e,s),t.isBranch){const{children:r}=t;for(let t=0,i=r.length;t<i;t++)En(r[t],e,s)}},updateMatrix(t,e,s){const r=t.__layout;e?s&&(r.waitAutoLayout=!0,t.__hasAutoLayout&&(r.matrixChanged=!1)):r.waitAutoLayout&&(r.waitAutoLayout=!1),r.matrixChanged&&t.__updateLocalMatrix(),r.waitAutoLayout||t.__updateWorldMatrix()},updateBounds(t){const e=t.__layout;e.boundsChanged&&t.__updateLocalBounds(),e.waitAutoLayout||t.__updateWorldBounds()},updateAllWorldOpacity(t){if(t.__updateWorldOpacity(),t.isBranch){const{children:e}=t;for(let t=0,s=e.length;t<s;t++)Mn(e[t])}},updateChange(t){const e=t.__layout;e.stateStyleChanged&&t.updateState(),e.opacityChanged&&Mn(t),t.__updateChange()},updateAllChange(t){if(Wn(t),t.isBranch){const{children:e}=t;for(let t=0,s=e.length;t<s;t++)An(e[t])}},worldHittable(t){for(;t;){if(!t.__.hittable)return!1;t=t.parent}return!0},draggable:t=>(t.draggable||t.editable)&&t.hitSelf&&!t.locked,copyCanvasByWorld(t,e,s,r,i,n){r||(r=t.__nowWorld),t.__worldFlipped||qt.fullImageShadow?e.copyWorldByReset(s,r,t.__nowWorld,i,n):e.copyWorldToInner(s,r,t.__layout.renderBounds,i)},moveWorld(t,e,s=0,r,i){const n=h(e)?Object.assign({},e):{x:e,y:s};r?bn(t.localTransform,n,n,!0):t.parent&&wn(t.parent.scrollWorldTransform,n,n,!0),Rn.moveLocal(t,n.x,n.y,i)},moveLocal(t,e,s=0,r){h(e)&&(s=e.y,e=e.x),e+=t.x,s+=t.y,t.leafer&&t.leafer.config.pointSnap&&(e=Ln(e),s=Ln(s)),r?t.animate({x:e,y:s},r):(t.x=e,t.y=s)},zoomOfWorld(t,e,s,r,i,n){Rn.zoomOfLocal(t,Dn(t,e),s,r,i,n)},zoomOfLocal(t,e,s,r=s,i,o){const a=t.__localMatrix;if(n(r)||(r&&(o=r),r=s),mn(On,a),Bn(On,e,s,r),Rn.hasHighPosition(t))Rn.setTransform(t,On,i,o);else{const e=t.x+On.e-a.e,n=t.y+On.f-a.f;o&&!i?t.animate({x:e,y:n,scaleX:t.scaleX*s,scaleY:t.scaleY*r},o):(t.x=e,t.y=n,t.scaleResize(s,r,!0!==i))}},rotateOfWorld(t,e,s,r){Rn.rotateOfLocal(t,Dn(t,e),s,r)},rotateOfLocal(t,e,s,r){const i=t.__localMatrix;mn(On,i),vn(On,e,s),Rn.hasHighPosition(t)?Rn.setTransform(t,On,!1,r):t.set({x:t.x+On.e-i.e,y:t.y+On.f-i.f,rotation:S.formatRotation(t.rotation+s)},r)},skewOfWorld(t,e,s,r,i,n){Rn.skewOfLocal(t,Dn(t,e),s,r,i,n)},skewOfLocal(t,e,s,r=0,i,n){mn(On,t.__localMatrix),Cn(On,e,s,r),Rn.setTransform(t,On,i,n)},transformWorld(t,e,s,r){mn(On,t.worldTransform),kn(On,e),t.parent&&Tn(On,t.parent.scrollWorldTransform),Rn.setTransform(t,On,s,r)},transform(t,e,s,r){mn(On,t.localTransform),kn(On,e),Rn.setTransform(t,On,s,r)},setTransform(t,e,s,r){const i=t.__,n=i.origin&&Rn.getInnerOrigin(t,i.origin),o=Pn(e,n,i.around&&Rn.getInnerOrigin(t,i.around));if(Rn.hasOffset(t)&&(o.x-=i.offsetX,o.y-=i.offsetY),s){const e=o.scaleX/t.scaleX,s=o.scaleY/t.scaleY;if(delete o.scaleX,delete o.scaleY,n){Nt.scale(t.boxBounds,Math.abs(e),Math.abs(s));const r=Rn.getInnerOrigin(t,i.origin);rt.move(o,n.x-r.x,n.y-r.y)}t.set(o),t.scaleResize(e,s,!1)}else t.set(o,r)},getFlipTransform(t,e){const s={a:1,b:0,c:0,d:1,e:0,f:0},r="x"===e?1:-1;return Bn(s,Rn.getLocalOrigin(t,"center"),-1*r,1*r),s},getLocalOrigin:(t,e)=>rt.tempToOuterOf(Rn.getInnerOrigin(t,e),t.localTransform),getInnerOrigin(t,e){const s={};return xt.toPoint(e,t.boxBounds,s),s},getRelativeWorld:(t,e,s)=>(mn(On,t.worldTransform),Tn(On,e.scrollWorldTransform),s?On:Object.assign({},On)),drop(t,e,s,r){t.setTransform(Rn.getRelativeWorld(t,e,!0),r),e.add(t,s)},hasHighPosition:t=>t.origin||t.around||Rn.hasOffset(t),hasOffset:t=>t.offsetX||t.offsetY,hasParent(t,e){if(!e)return!1;for(;t;){if(e===t)return!0;t=t.parent}},animateMove(t,e,s=.3){if(e.x||e.y)if(Math.abs(e.x)<1&&Math.abs(e.y)<1)t.move(e);else{const r=e.x*s,i=e.y*s;e.x-=r,e.y-=i,t.move(r,i),qt.requestRender(()=>Rn.animateMove(t,e,s))}}},Rn=Sn,{updateAllMatrix:En,updateMatrix:In,updateAllWorldOpacity:Mn,updateAllChange:An,updateChange:Wn}=Rn;function Dn(t,e){return t.updateLayout(),t.parent?rt.tempToInnerOf(e,t.parent.scrollWorldTransform):e}const Nn={worldBounds:t=>t.__world,localBoxBounds:t=>t.__.eraser||0===t.__.visible?null:t.__local||t.__layout,localStrokeBounds:t=>t.__.eraser||0===t.__.visible?null:t.__layout.localStrokeBounds,localRenderBounds:t=>t.__.eraser||0===t.__.visible?null:t.__layout.localRenderBounds,maskLocalBoxBounds:(t,e)=>Xn(t,e)&&t.__localBoxBounds,maskLocalStrokeBounds:(t,e)=>Xn(t,e)&&t.__layout.localStrokeBounds,maskLocalRenderBounds:(t,e)=>Xn(t,e)&&t.__layout.localRenderBounds,excludeRenderBounds:(t,e)=>!(!e.bounds||e.bounds.hit(t.__world,e.matrix))||!(!e.hideBounds||!e.hideBounds.includes(t.__world,e.matrix))};let Yn;function Xn(t,e){return e||(Yn=0),t.__.mask&&(Yn=1),Yn<0?null:(Yn&&(Yn=-1),!0)}const{updateBounds:zn}=Sn,Fn={sort:(t,e)=>t.__.zIndex===e.__.zIndex?t.__tempNumber-e.__tempNumber:t.__.zIndex-e.__.zIndex,pushAllChildBranch(t,e){if(t.__tempNumber=1,t.__.__childBranchNumber){const{children:s}=t;for(let r=0,i=s.length;r<i;r++)(t=s[r]).isBranch&&(t.__tempNumber=1,e.add(t),Un(t,e))}},pushAllParent(t,s){const{keys:r}=s;if(r)for(;t.parent&&e(r[t.parent.innerId]);)s.add(t.parent),t=t.parent;else for(;t.parent;)s.add(t.parent),t=t.parent},pushAllBranchStack(t,e){let s=e.length;const{children:r}=t;for(let t=0,s=r.length;t<s;t++)r[t].isBranch&&e.push(r[t]);for(let t=s,r=e.length;t<r;t++)Hn(e[t],e)},updateBounds(t,e){const s=[t];Hn(t,s),jn(s,e)},updateBoundsByBranchStack(t,e){let s,r;for(let i=t.length-1;i>-1;i--){s=t[i],r=s.children;for(let t=0,e=r.length;t<e;t++)zn(r[t]);e&&e===s||zn(s)}},move(t,e,s){let r;const{children:i}=t;for(let n=0,o=i.length;n<o;n++)r=(t=i[n]).__world,r.e+=e,r.f+=s,r.x+=e,r.y+=s,t.isBranch&&Vn(t,e,s)},scale(t,e,s,r,i,n,o){let a;const{children:h}=t,l=r-1,d=i-1;for(let c=0,u=h.length;c<u;c++)a=(t=h[c]).__world,a.a*=r,a.d*=i,(a.b||a.c)&&(a.b*=r,a.c*=i),a.e===a.x&&a.f===a.y?(a.x=a.e+=(a.e-n)*l+e,a.y=a.f+=(a.f-o)*d+s):(a.e+=(a.e-n)*l+e,a.f+=(a.f-o)*d+s,a.x+=(a.x-n)*l+e,a.y+=(a.y-o)*d+s),a.width*=r,a.height*=i,a.scaleX*=r,a.scaleY*=i,t.isBranch&&Gn(t,e,s,r,i,n,o)}},{pushAllChildBranch:Un,pushAllBranchStack:Hn,updateBoundsByBranchStack:jn,move:Vn,scale:Gn}=Fn,qn={run(t){if(t&&t.length){const e=t.length;for(let s=0;s<e;s++)t[s]();t.length===e?t.length=0:t.splice(0,e)}}},{getRelativeWorld:Qn,updateBounds:Jn}=Sn,{toOuterOf:Zn,getPoints:$n,copy:Kn}=Nt,to="_localContentBounds",eo="_worldContentBounds",so="_worldBoxBounds",ro="_worldStrokeBounds";class io{get contentBounds(){return this._contentBounds||this.boxBounds}set contentBounds(t){this._contentBounds=t}get strokeBounds(){return this._strokeBounds||this.boxBounds}get renderBounds(){return this._renderBounds||this.boxBounds}set renderBounds(t){this._renderBounds=t}get localContentBounds(){return Zn(this.contentBounds,this.leaf.__localMatrix,this[to]||(this[to]={})),this[to]}get localStrokeBounds(){return this._localStrokeBounds||this}get localRenderBounds(){return this._localRenderBounds||this}get worldContentBounds(){return Zn(this.contentBounds,this.leaf.__world,this[eo]||(this[eo]={})),this[eo]}get worldBoxBounds(){return Zn(this.boxBounds,this.leaf.__world,this[so]||(this[so]={})),this[so]}get worldStrokeBounds(){return Zn(this.strokeBounds,this.leaf.__world,this[ro]||(this[ro]={})),this[ro]}get a(){return 1}get b(){return 0}get c(){return 0}get d(){return 1}get e(){return this.leaf.__.x}get f(){return this.leaf.__.y}get x(){return this.e+this.boxBounds.x}get y(){return this.f+this.boxBounds.y}get width(){return this.boxBounds.width}get height(){return this.boxBounds.height}constructor(t){this.leaf=t,this.leaf.__local&&(this._localRenderBounds=this._localStrokeBounds=this.leaf.__local),t.__world&&(this.boxBounds={x:0,y:0,width:0,height:0},this.boxChange(),this.matrixChange())}createLocal(){const t=this.leaf.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0};this._localStrokeBounds||(this._localStrokeBounds=t),this._localRenderBounds||(this._localRenderBounds=t)}update(){const{leaf:t}=this,{leafer:e}=t;if(t.isApp)return Jn(t);if(e)e.ready?e.watcher.changed&&e.layouter.layout():e.start();else{let e=t;for(;e.parent&&!e.parent.leafer;)e=e.parent;const s=e;if(s.__fullLayouting)return;s.__fullLayouting=!0,qt.layout(s),delete s.__fullLayouting}}getTransform(t="world"){this.update();const{leaf:e}=this;switch(t){case"world":return e.__world;case"local":return e.__localMatrix;case"inner":return j.defaultMatrix;case"page":t=e.zoomLayer;default:return Qn(e,t)}}getBounds(t,e="world"){switch(this.update(),e){case"world":return this.getWorldBounds(t);case"local":return this.getLocalBounds(t);case"inner":return this.getInnerBounds(t);case"page":e=this.leaf.zoomLayer;default:return new Ft(this.getInnerBounds(t)).toOuterOf(this.getTransform(e))}}getInnerBounds(t="box"){switch(t){case"render":return this.renderBounds;case"content":if(this.contentBounds)return this.contentBounds;case"box":return this.boxBounds;case"stroke":return this.strokeBounds}}getLocalBounds(t="box"){switch(t){case"render":return this.localRenderBounds;case"stroke":return this.localStrokeBounds;case"content":if(this.contentBounds)return this.localContentBounds;case"box":return this.leaf.__localBoxBounds}}getWorldBounds(t="box"){switch(t){case"render":return this.leaf.__world;case"stroke":return this.worldStrokeBounds;case"content":if(this.contentBounds)return this.worldContentBounds;case"box":return this.worldBoxBounds}}getLayoutBounds(t,e="world",s){const{leaf:r}=this;let i,n,o,a=this.getInnerBounds(t);switch(e){case"world":i=r.getWorldPoint(a),n=r.__world;break;case"local":const{scaleX:t,scaleY:s,rotation:h,skewX:l,skewY:d}=r.__;o={scaleX:t,scaleY:s,rotation:h,skewX:l,skewY:d},i=r.getLocalPointByInner(a);break;case"inner":i=a,n=j.defaultMatrix;break;case"page":e=r.zoomLayer;default:i=r.getWorldPoint(a,e),n=Qn(r,e,!0)}if(o||(o=j.getLayout(n)),Kn(o,a),rt.copy(o,i),s){const{scaleX:t,scaleY:e}=o,s=Math.abs(t),r=Math.abs(e);1===s&&1===r||(o.scaleX/=s,o.scaleY/=r,o.width*=s,o.height*=r)}return o}getLayoutPoints(t,s="world"){const{leaf:r}=this,i=$n(this.getInnerBounds(t));let n;switch(s){case"world":n=null;break;case"local":n=r.parent;break;case"inner":break;case"page":s=r.zoomLayer;default:n=s}return e(n)||i.forEach(t=>r.innerToWorld(t,null,!1,n)),i}shrinkContent(){const{x:t,y:e,width:s,height:r}=this.boxBounds;this._contentBounds={x:t,y:e,width:s,height:r}}spreadStroke(){const{x:t,y:e,width:s,height:r}=this.strokeBounds;this._strokeBounds={x:t,y:e,width:s,height:r},this._localStrokeBounds={x:t,y:e,width:s,height:r},this.renderSpread||this.spreadRenderCancel()}spreadRender(){const{x:t,y:e,width:s,height:r}=this.renderBounds;this._renderBounds={x:t,y:e,width:s,height:r},this._localRenderBounds={x:t,y:e,width:s,height:r}}shrinkContentCancel(){this._contentBounds=void 0}spreadStrokeCancel(){const t=this.renderBounds===this.strokeBounds;this._strokeBounds=this.boxBounds,this._localStrokeBounds=this.leaf.__localBoxBounds,t&&this.spreadRenderCancel()}spreadRenderCancel(){this._renderBounds=this._strokeBounds,this._localRenderBounds=this._localStrokeBounds}boxChange(){this.boxChanged=!0,this.localBoxChanged?this.boundsChanged||(this.boundsChanged=!0):this.localBoxChange(),this.hitCanvasChanged=!0}localBoxChange(){this.localBoxChanged=!0,this.boundsChanged=!0}strokeChange(){this.strokeChanged=!0,this.strokeSpread||(this.strokeSpread=1),this.boundsChanged=!0,this.hitCanvasChanged=!0}renderChange(){this.renderChanged=!0,this.renderSpread||(this.renderSpread=1),this.boundsChanged=!0}scaleChange(){this.scaleChanged=!0,this._scaleOrRotationChange()}rotationChange(){this.rotationChanged=!0,this.affectRotation=!0,this._scaleOrRotationChange()}_scaleOrRotationChange(){this.affectScaleOrRotation=!0,this.matrixChange(),this.leaf.__local||this.createLocal()}matrixChange(){this.matrixChanged=!0,this.localBoxChanged?this.boundsChanged||(this.boundsChanged=!0):this.localBoxChange()}surfaceChange(){this.surfaceChanged=!0}opacityChange(){this.opacityChanged=!0,this.surfaceChanged||this.surfaceChange()}childrenSortChange(){this.childrenSortChanged||(this.childrenSortChanged=this.affectChildrenSort=!0,this.leaf.forceUpdate("surface"))}destroy(){}}class no{constructor(t,e){this.bubbles=!1,this.type=t,e&&(this.target=e)}stopDefault(){this.isStopDefault=!0,this.origin&&qt.event.stopDefault(this.origin)}stopNow(){this.isStopNow=!0,this.isStop=!0,this.origin&&qt.event.stopNow(this.origin)}stop(){this.isStop=!0,this.origin&&qt.event.stop(this.origin)}}class oo extends no{constructor(t,e,s){super(t,e),this.parent=s,this.child=e}}oo.ADD="child.add",oo.REMOVE="child.remove",oo.CREATED="created",oo.MOUNTED="mounted",oo.UNMOUNTED="unmounted",oo.DESTROY="destroy";const ao="property.scroll";class ho extends no{constructor(t,e,s,r,i){super(t,e),this.attrName=s,this.oldValue=r,this.newValue=i}}ho.CHANGE="property.change",ho.LEAFER_CHANGE="property.leafer_change",ho.SCROLL=ao;const lo={scrollX:ao,scrollY:ao};class co extends no{constructor(t,e){super(t),Object.assign(this,e)}}co.LOAD="image.load",co.LOADED="image.loaded",co.ERROR="image.error";class uo extends no{static checkHas(t,e,s){"on"===s?e===go?t.__hasWorldEvent=!0:t.__hasLocalEvent=!0:(t.__hasLocalEvent=t.hasEvent(po)||t.hasEvent(_o)||t.hasEvent(fo),t.__hasWorldEvent=t.hasEvent(go))}static emitLocal(t){if(t.leaferIsReady){const{resized:e}=t.__layout;"local"!==e&&(t.emit(po,t),"inner"===e&&t.emit(_o,t)),t.emit(fo,t)}}static emitWorld(t){t.leaferIsReady&&t.emit(go,this)}}uo.RESIZE="bounds.resize",uo.INNER="bounds.inner",uo.LOCAL="bounds.local",uo.WORLD="bounds.world";const{RESIZE:po,INNER:_o,LOCAL:fo,WORLD:go}=uo,yo={};[po,_o,fo,go].forEach(t=>yo[t]=1);class xo extends no{get bigger(){if(!this.old)return!0;const{width:t,height:e}=this.old;return this.width>=t&&this.height>=e}get smaller(){return!this.bigger}get samePixelRatio(){return!this.old||this.pixelRatio===this.old.pixelRatio}constructor(t,e){h(t)?(super(xo.RESIZE),Object.assign(this,t)):super(t),this.old=e}static isResizing(t){return this.resizingKeys&&!e(this.resizingKeys[t.innerId])}}xo.RESIZE="resize";class mo extends no{constructor(t,e){super(t),this.data=e}}mo.REQUEST="watch.request",mo.DATA="watch.data";class wo extends no{constructor(t,e,s){super(t),e&&(this.data=e,this.times=s)}}wo.REQUEST="layout.request",wo.START="layout.start",wo.BEFORE="layout.before",wo.LAYOUT="layout",wo.AFTER="layout.after",wo.AGAIN="layout.again",wo.END="layout.end";class bo extends no{constructor(t,e,s,r){super(t),e&&(this.times=e),s&&(this.renderBounds=s,this.renderOptions=r)}}bo.REQUEST="render.request",bo.CHILD_START="render.child_start",bo.CHILD_END="render.child_end",bo.START="render.start",bo.BEFORE="render.before",bo.RENDER="render",bo.AFTER="render.after",bo.AGAIN="render.again",bo.END="render.end",bo.NEXT="render.next";class Bo extends no{}Bo.START="leafer.start",Bo.BEFORE_READY="leafer.before_ready",Bo.READY="leafer.ready",Bo.AFTER_READY="leafer.after_ready",Bo.VIEW_READY="leafer.view_ready",Bo.VIEW_COMPLETED="leafer.view_completed",Bo.STOP="leafer.stop",Bo.RESTART="leafer.restart",Bo.END="leafer.end",Bo.UPDATE_MODE="leafer.update_mode",Bo.TRANSFORM="leafer.transform",Bo.MOVE="leafer.move",Bo.SCALE="leafer.scale",Bo.ROTATE="leafer.rotate",Bo.SKEW="leafer.skew";const{MOVE:vo,SCALE:Co,ROTATE:ko,SKEW:To}=Bo,Po={x:vo,y:vo,scaleX:Co,scaleY:Co,rotation:ko,skewX:To,skewY:To},Oo={};class Lo{set event(t){this.on(t)}on(t,e,s){if(!e){let e;if(a(t))t.forEach(t=>this.on(t[0],t[1],t[2]));else for(let s in t)a(e=t[s])?this.on(s,e[0],e[1]):this.on(s,e);return}let i,n,o;s&&("once"===s?n=!0:"boolean"==typeof s?i=s:(i=s.capture,n=s.once));const h=So(this,i,!0),l=r(t)?t.split(" "):t,d=n?{listener:e,once:n}:{listener:e};l.forEach(t=>{t&&(o=h[t],o?-1===o.findIndex(t=>t.listener===e)&&o.push(d):h[t]=[d],yo[t]&&uo.checkHas(this,t,"on"))})}off(t,e,s){if(t){const i=r(t)?t.split(" "):t;if(e){let t,r,n;s&&(t="boolean"==typeof s?s:"once"!==s&&s.capture);const o=So(this,t);i.forEach(t=>{t&&(r=o[t],r&&(n=r.findIndex(t=>t.listener===e),n>-1&&r.splice(n,1),r.length||delete o[t],yo[t]&&uo.checkHas(this,t,"off")))})}else{const{__bubbleMap:t,__captureMap:e}=this;i.forEach(s=>{t&&delete t[s],e&&delete e[s]})}}else this.__bubbleMap=this.__captureMap=void 0}on_(t,e,s,r){return e?this.on(t,s?e=e.bind(s):e,r):a(t)&&t.forEach(t=>this.on(t[0],t[2]?t[1]=t[1].bind(t[2]):t[1],t[3])),{type:t,current:this,listener:e,options:r}}off_(t){if(!t)return;const e=a(t)?t:[t];e.forEach(t=>{t&&(t.listener?t.current.off(t.type,t.listener,t.options):a(t.type)&&t.type.forEach(e=>t.current.off(e[0],e[1],e[3])))}),e.length=0}once(t,e,s,r){if(!e)return a(t)&&t.forEach(t=>this.once(t[0],t[1],t[2],t[3]));h(s)?e=e.bind(s):r=s,this.on(t,e,{once:!0,capture:r})}emit(t,e,s){!e&&de.has(t)&&(e=de.get(t,{type:t,target:this,current:this}));const r=So(this,s)[t];if(r){let i;for(let n=0,o=r.length;n<o&&!((i=r[n])&&(i.listener(e),i.once&&(this.off(t,i.listener,s),n--,o--),e&&e.isStopNow));n++);}this.syncEventer&&this.syncEventer.emitEvent(e,s)}emitEvent(t,e){t.current=this,this.emit(t.type,t,e)}hasEvent(t,s){if(this.syncEventer&&this.syncEventer.hasEvent(t,s))return!0;const{__bubbleMap:r,__captureMap:i}=this,n=r&&r[t],o=i&&i[t];return!!(e(s)?n||o:s?o:n)}destroy(){this.__captureMap=this.__bubbleMap=this.syncEventer=null}}function So(t,e,s){if(e){const{__captureMap:e}=t;return e||(s?t.__captureMap={}:Oo)}{const{__bubbleMap:e}=t;return e||(s?t.__bubbleMap={}:Oo)}}const{on:Ro,on_:Eo,off:Io,off_:Mo,once:Ao,emit:Wo,emitEvent:Do,hasEvent:No,destroy:Yo}=Lo.prototype,Xo={on:Ro,on_:Eo,off:Io,off_:Mo,once:Ao,emit:Wo,emitEvent:Do,hasEvent:No,destroyEventer:Yo},zo=Zt.get("setAttr"),Fo={__setAttr(t,s,r){if(this.leaferIsCreated){const n=this.__.__getInput(t);if(!r||i(s)||e(s)||(zo.warn(this.innerName,t,s),s=void 0),h(s)||n!==s){if(this.__realSetAttr(t,s),this.isLeafer){this.emitEvent(new ho(ho.LEAFER_CHANGE,this,t,n,s));const e=Po[t];e&&(this.emitEvent(new Bo(e,this)),this.emitEvent(new Bo(Bo.TRANSFORM,this)))}this.emitPropertyEvent(ho.CHANGE,t,n,s);const e=lo[t];return e&&this.emitPropertyEvent(e,t,n,s),!0}return!1}return this.__realSetAttr(t,s),!0},emitPropertyEvent(t,e,s,r){const i=new ho(t,this,e,s,r);this.isLeafer||this.hasEvent(t)&&this.emitEvent(i),this.leafer.emitEvent(i)},__realSetAttr(t,s){const r=this.__;r[t]=s,this.__proxyData&&this.setProxyAttr(t,s),r.normalStyle&&(this.lockNormalStyle||e(r.normalStyle[t])||(r.normalStyle[t]=s))},__getAttr(t){return this.__proxyData?this.getProxyAttr(t):this.__.__get(t)}},{setLayout:Uo,multiplyParent:Ho,translateInner:jo,defaultWorld:Vo}=j,{toPoint:Go,tempPoint:qo}=xt,Qo={__updateWorldMatrix(){const{parent:t,__layout:e,__world:s,__scrollWorld:r,__:i}=this;Ho(this.__local||e,t?t.__scrollWorld||t.__world:Vo,s,!!e.affectScaleOrRotation,i),r&&jo(Object.assign(r,s),i.scrollX,i.scrollY)},__updateLocalMatrix(){if(this.__local){const t=this.__layout,e=this.__local,s=this.__;t.affectScaleOrRotation&&(t.scaleChanged&&(t.resized||(t.resized="scale"))||t.rotationChanged)&&(Uo(e,s,null,null,t.affectRotation),t.scaleChanged=t.rotationChanged=void 0),e.e=s.x+s.offsetX,e.f=s.y+s.offsetY,(s.around||s.origin)&&(Go(s.around||s.origin,t.boxBounds,qo),jo(e,-qo.x,-qo.y,!s.around))}this.__layout.matrixChanged=void 0}},{updateMatrix:Jo,updateAllMatrix:Zo}=Sn,{updateBounds:$o}=Fn,{toOuterOf:Ko,copyAndSpread:ta,copy:ea}=Nt,{toBounds:sa}=Li,ra={__updateWorldBounds(){const{__layout:t,__world:e}=this;Ko(t.renderBounds,e,e),t.resized&&("inner"===t.resized&&this.__onUpdateSize(),this.__hasLocalEvent&&uo.emitLocal(this),t.resized=void 0),this.__hasWorldEvent&&uo.emitWorld(this)},__updateLocalBounds(){const t=this.__layout;t.boxChanged&&(this.__.__pathInputed||this.__updatePath(),this.__updateRenderPath(),this.__updateBoxBounds(),t.resized="inner"),t.localBoxChanged&&(this.__local&&this.__updateLocalBoxBounds(),t.localBoxChanged=void 0,t.strokeSpread&&(t.strokeChanged=!0),t.renderSpread&&(t.renderChanged=!0),this.parent&&this.parent.__layout.boxChange()),t.boxChanged=void 0,t.strokeChanged&&(t.strokeSpread=this.__updateStrokeSpread(),t.strokeSpread?(t.strokeBounds===t.boxBounds&&t.spreadStroke(),this.__updateStrokeBounds(),this.__updateLocalStrokeBounds()):t.spreadStrokeCancel(),t.strokeChanged=void 0,(t.renderSpread||t.strokeSpread!==t.strokeBoxSpread)&&(t.renderChanged=!0),this.parent&&this.parent.__layout.strokeChange(),t.resized="inner"),t.renderChanged&&(t.renderSpread=this.__updateRenderSpread(),t.renderSpread?(t.renderBounds!==t.boxBounds&&t.renderBounds!==t.strokeBounds||t.spreadRender(),this.__updateRenderBounds(),this.__updateLocalRenderBounds()):t.spreadRenderCancel(),t.renderChanged=void 0,this.parent&&this.parent.__layout.renderChange()),t.resized||(t.resized="local"),t.boundsChanged=void 0},__updateLocalBoxBounds(){this.__hasMotionPath&&this.__updateMotionPath(),this.__hasAutoLayout&&this.__updateAutoLayout(),Ko(this.__layout.boxBounds,this.__local,this.__local)},__updateLocalStrokeBounds(){Ko(this.__layout.strokeBounds,this.__localMatrix,this.__layout.localStrokeBounds)},__updateLocalRenderBounds(){Ko(this.__layout.renderBounds,this.__localMatrix,this.__layout.localRenderBounds)},__updateBoxBounds(t,e){const s=this.__layout.boxBounds,r=this.__;r.__usePathBox?sa(r.path,s):(s.x=0,s.y=0,s.width=r.width,s.height=r.height)},__updateAutoLayout(){this.__layout.matrixChanged=!0,this.isBranch?(this.__extraUpdate(),this.__.flow?(this.__layout.boxChanged&&this.__updateFlowLayout(),Zo(this),$o(this,this),this.__.__autoSide&&this.__updateBoxBounds(!0)):(Zo(this),$o(this,this))):Jo(this)},__updateNaturalSize(){const{__:t,__layout:e}=this;t.__naturalWidth=e.boxBounds.width,t.__naturalHeight=e.boxBounds.height},__updateStrokeBounds(t){const e=this.__layout;ta(e.strokeBounds,e.boxBounds,e.strokeBoxSpread)},__updateRenderBounds(t){const e=this.__layout,{renderSpread:s}=e;n(s)&&s<=0?ea(e.renderBounds,e.strokeBounds):ta(e.renderBounds,e.boxBounds,s)}},ia={__render(t,e){if(e.shape)return this.__renderShape(t,e);if((!e.cellList||e.cellList.has(this))&&this.__worldOpacity){const s=this.__;if(s.bright&&!e.topRendering)return e.topList.add(this);if(t.setWorld(this.__nowWorld=this.__getNowWorld(e)),t.opacity=e.dimOpacity&&!s.dimskip?s.opacity*e.dimOpacity:s.opacity,this.__.__single){if("path"===s.eraser)return this.__renderEraser(t,e);const r=t.getSameCanvas(!0,!0);this.__draw(r,e,t),Sn.copyCanvasByWorld(this,t,r,this.__nowWorld,s.__blendMode,!0),r.recycle(this.__nowWorld)}else this.__draw(t,e);Zt.showBounds&&Zt.drawBounds(this,t,e)}},__renderShape(t,e){this.__worldOpacity&&(t.setWorld(this.__nowWorld=this.__getNowWorld(e)),this.__drawShape(t,e))},__clip(t,e){this.__worldOpacity&&(t.setWorld(this.__nowWorld=this.__getNowWorld(e)),this.__drawRenderPath(t),t.clipUI(this))},__updateWorldOpacity(){this.__worldOpacity=this.__.visible?this.parent?this.parent.__worldOpacity*this.__.opacity:this.__.opacity:0,this.__layout.opacityChanged&&(this.__layout.opacityChanged=!1)}},{excludeRenderBounds:na}=Nn,{hasSize:oa}=Nt,aa={__updateChange(){const{__layout:t}=this;t.childrenSortChanged&&(this.__updateSortChildren(),t.childrenSortChanged=!1),this.__.__checkSingle()},__render(t,e){const s=this.__nowWorld=this.__getNowWorld(e);if(this.__worldOpacity&&oa(s)){const r=this.__;if(r.__useDim)if(r.dim)e.dimOpacity=!0===r.dim?.2:r.dim;else{if(r.bright&&!e.topRendering)return e.topList.add(this);r.dimskip&&e.dimOpacity&&(e.dimOpacity=0)}if(r.__single&&!this.isBranchLeaf){if("path"===r.eraser)return this.__renderEraser(t,e);const i=t.getSameCanvas(!1,!0);this.__renderBranch(i,e),t.opacity=e.dimOpacity?r.opacity*e.dimOpacity:r.opacity,t.copyWorldByReset(i,s,s,r.__blendMode,!0),i.recycle(s)}else this.__renderBranch(t,e)}},__renderBranch(t,e){if(this.__hasMask)this.__renderMask(t,e);else{const{children:s}=this;for(let r=0,i=s.length;r<i;r++)na(s[r],e)||s[r].__render(t,e)}},__clip(t,e){if(this.__worldOpacity){const{children:s}=this;for(let r=0,i=s.length;r<i;r++)na(s[r],e)||s[r].__clip(t,e)}}},ha={},{LEAF:la,create:da}=p,{stintSet:ca}=d,{toInnerPoint:ua,toOuterPoint:pa,multiplyParent:_a}=j,{toOuterOf:fa}=Nt,{copy:ga,move:ya}=rt,{moveLocal:xa,zoomOfLocal:ma,rotateOfLocal:wa,skewOfLocal:ba,moveWorld:Ba,zoomOfWorld:va,rotateOfWorld:Ca,skewOfWorld:ka,transform:Ta,transformWorld:Pa,setTransform:Oa,getFlipTransform:La,getLocalOrigin:Sa,getRelativeWorld:Ra,drop:Ea}=Sn;exports.Leaf=class{get tag(){return this.__tag}set tag(t){}get __tag(){return"Leaf"}get innerName(){return this.__.name||this.tag+this.innerId}get __DataProcessor(){return u}get __LayoutProcessor(){return io}get leaferIsCreated(){return this.leafer&&this.leafer.created}get leaferIsReady(){return this.leafer&&this.leafer.ready}get isLeafer(){return!1}get isBranch(){return!1}get isBranchLeaf(){return!1}get __localMatrix(){return this.__local||this.__layout}get __localBoxBounds(){return this.__local||this.__layout}get worldTransform(){return this.__layout.getTransform("world")}get localTransform(){return this.__layout.getTransform("local")}get scrollWorldTransform(){return this.updateLayout(),this.__scrollWorld||this.__world}get boxBounds(){return this.getBounds("box","inner")}get renderBounds(){return this.getBounds("render","inner")}get worldBoxBounds(){return this.getBounds("box")}get worldStrokeBounds(){return this.getBounds("stroke")}get worldRenderBounds(){return this.getBounds("render")}get worldOpacity(){return this.updateLayout(),this.__worldOpacity}get __worldFlipped(){return this.__world.scaleX<0||this.__world.scaleY<0}get __onlyHitMask(){return this.__hasMask&&!this.__.hitChildren}get __ignoreHitWorld(){return(this.__hasMask||this.__hasEraser)&&this.__.hitChildren}get __inLazyBounds(){return this.leaferIsCreated&&this.leafer.lazyBounds.hit(this.__world)}get pathInputed(){return this.__.__pathInputed}set event(t){this.on(t)}constructor(t){this.innerId=da(la),this.reset(t),this.__bubbleMap&&this.__emitLifeEvent(oo.CREATED)}reset(t){this.leafer&&this.leafer.forceRender(this.__world),0!==t&&(this.__world={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0,scaleX:1,scaleY:1},null!==t&&(this.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0})),this.__worldOpacity=1,this.__=new this.__DataProcessor(this),this.__layout=new this.__LayoutProcessor(this),this.__level&&this.resetCustom(),t&&(t.__&&(t=t.toJSON()),t.children?this.set(t):Object.assign(this,t))}resetCustom(){this.__hasMask=this.__hasEraser=null,this.forceUpdate()}waitParent(t,e){e&&(t=t.bind(e)),this.parent?t():this.on(oo.ADD,t,"once")}waitLeafer(t,e){e&&(t=t.bind(e)),this.leafer?t():this.on(oo.MOUNTED,t,"once")}nextRender(t,e,s){this.leafer?this.leafer.nextRender(t,e,s):this.waitLeafer(()=>this.leafer.nextRender(t,e,s))}removeNextRender(t){this.nextRender(t,null,"off")}__bindLeafer(t){if(this.isLeafer&&null!==t&&(t=this),this.leafer&&!t&&this.leafer.leafs--,this.leafer=t,t?(t.leafs++,this.__level=this.parent?this.parent.__level+1:1,this.animation&&this.__runAnimation("in"),this.__bubbleMap&&this.__emitLifeEvent(oo.MOUNTED)):this.__emitLifeEvent(oo.UNMOUNTED),this.isBranch){const{children:e}=this;for(let s=0,r=e.length;s<r;s++)e[s].__bindLeafer(t)}}set(t,e){}get(t){}setAttr(t,e){this[t]=e}getAttr(t){return this[t]}getComputedAttr(t){return this.__[t]}toJSON(t){return t&&this.__layout.update(),this.__.__getInputData(null,t)}toString(t){return JSON.stringify(this.toJSON(t))}toSVG(){}__SVG(t){}toHTML(){}__setAttr(t,e){return!0}__getAttr(t){}setProxyAttr(t,e){}getProxyAttr(t){}find(t,e){}findTag(t){}findOne(t,e){}findId(t){}focus(t){}updateState(){}updateLayout(){this.__layout.update()}forceUpdate(t){e(t)?t="width":"surface"===t&&(t="blendMode");const s=this.__.__getInput(t);this.__[t]=e(s)?null:void 0,this[t]=s}forceRender(t,e){this.forceUpdate("surface")}__extraUpdate(){this.leaferIsReady&&this.leafer.layouter.addExtra(this)}__updateWorldMatrix(){}__updateLocalMatrix(){}__updateWorldBounds(){}__updateLocalBounds(){}__updateLocalBoxBounds(){}__updateLocalStrokeBounds(){}__updateLocalRenderBounds(){}__updateBoxBounds(t,e){}__updateContentBounds(){}__updateStrokeBounds(t){}__updateRenderBounds(t){}__updateAutoLayout(){}__updateFlowLayout(){}__updateNaturalSize(){}__updateStrokeSpread(){return 0}__updateRenderSpread(){return 0}__onUpdateSize(){}__updateEraser(t){this.__hasEraser=!!t||this.children.some(t=>t.__.eraser)}__renderEraser(t,e){t.save(),this.__clip(t,e);const{renderBounds:s}=this.__layout;t.clearRect(s.x,s.y,s.width,s.height),t.restore()}__updateMask(t){this.__hasMask=this.children.some(t=>t.__.mask&&t.__.visible&&t.__.opacity)}__renderMask(t,e){}__getNowWorld(t){if(t.matrix){this.__cameraWorld||(this.__cameraWorld={});const e=this.__cameraWorld,s=this.__world;return _a(s,t.matrix,e,void 0,s),fa(this.__layout.renderBounds,e,e),ca(e,"half",s.half),ca(e,"ignorePixelSnap",s.ignorePixelSnap),e}return this.__world}getClampRenderScale(){let{scaleX:t}=this.__nowWorld||this.__world;return t<0&&(t=-t),t>1?t:1}getRenderScaleData(t,e){let{scaleX:s,scaleY:r}=qi.patternLocked?this.__world:this.__nowWorld;return t&&(s<0&&(s=-s),r<0&&(r=-r)),(!0===e||"zoom-in"===e&&s>1&&r>1)&&(s=r=1),ha.scaleX=s,ha.scaleY=r,ha}getTransform(t){return this.__layout.getTransform(t||"local")}getBounds(t,e){return this.__layout.getBounds(t,e)}getLayoutBounds(t,e,s){return this.__layout.getLayoutBounds(t,e,s)}getLayoutPoints(t,e){return this.__layout.getLayoutPoints(t,e)}getWorldBounds(t,e,s){const r=e?Ra(this,e):this.worldTransform,i=s?t:{};return fa(t,r,i),i}worldToLocal(t,e,s,r){this.parent?this.parent.worldToInner(t,e,s,r):e&&ga(e,t)}localToWorld(t,e,s,r){this.parent?this.parent.innerToWorld(t,e,s,r):e&&ga(e,t)}worldToInner(t,e,s,r){r&&(r.innerToWorld(t,e,s),t=e||t),ua(this.scrollWorldTransform,t,e,s)}innerToWorld(t,e,s,r){pa(this.scrollWorldTransform,t,e,s),r&&r.worldToInner(e||t,null,s)}getBoxPoint(t,e,s,r){return this.getBoxPointByInner(this.getInnerPoint(t,e,s,r),null,null,!0)}getBoxPointByInner(t,e,s,r){const i=r?t:Object.assign({},t),{x:n,y:o}=this.boxBounds;return ya(i,-n,-o),i}getInnerPoint(t,e,s,r){const i=r?t:{};return this.worldToInner(t,i,s,e),i}getInnerPointByBox(t,e,s,r){const i=r?t:Object.assign({},t),{x:n,y:o}=this.boxBounds;return ya(i,n,o),i}getInnerPointByLocal(t,e,s,r){return this.getInnerPoint(t,this.parent,s,r)}getLocalPoint(t,e,s,r){const i=r?t:{};return this.worldToLocal(t,i,s,e),i}getLocalPointByInner(t,e,s,r){return this.getWorldPoint(t,this.parent,s,r)}getPagePoint(t,e,s,r){return(this.leafer?this.leafer.zoomLayer:this).getInnerPoint(t,e,s,r)}getWorldPoint(t,e,s,r){const i=r?t:{};return this.innerToWorld(t,i,s,e),i}getWorldPointByBox(t,e,s,r){return this.getWorldPoint(this.getInnerPointByBox(t,null,null,r),e,s,!0)}getWorldPointByLocal(t,e,s,r){const i=r?t:{};return this.localToWorld(t,i,s,e),i}getWorldPointByPage(t,e,s,r){return(this.leafer?this.leafer.zoomLayer:this).getWorldPoint(t,e,s,r)}setTransform(t,e,s){Oa(this,t,e,s)}transform(t,e,s){Ta(this,t,e,s)}move(t,e,s){xa(this,t,e,s)}moveInner(t,e,s){Ba(this,t,e,!0,s)}scaleOf(t,e,s,r,i){ma(this,Sa(this,t),e,s,r,i)}rotateOf(t,e,s){wa(this,Sa(this,t),e,s)}skewOf(t,e,s,r,i){ba(this,Sa(this,t),e,s,r,i)}transformWorld(t,e,s){Pa(this,t,e,s)}moveWorld(t,e,s){Ba(this,t,e,!1,s)}scaleOfWorld(t,e,s,r,i){va(this,t,e,s,r,i)}rotateOfWorld(t,e){Ca(this,t,e)}skewOfWorld(t,e,s,r,i){ka(this,t,e,s,r,i)}flip(t,e){Ta(this,La(this,t),!1,e)}scaleResize(t,e=t,s){this.scaleX*=t,this.scaleY*=e}__scaleResize(t,e){}resizeWidth(t){}resizeHeight(t){}hit(t,e){return!0}__hitWorld(t,e){return!0}__hit(t,e){return!0}__hitFill(t){return!0}__hitStroke(t,e){return!0}__hitPixel(t){return!0}__drawHitPath(t){}__updateHitCanvas(){}__render(t,e){}__drawFast(t,e){}__draw(t,e,s){}__clip(t,e){}__renderShape(t,e){}__drawShape(t,e){}__updateWorldOpacity(){}__updateChange(){}__drawPath(t){}__drawRenderPath(t){}__updatePath(){}__updateRenderPath(){}getMotionPathData(){return ie.need("path")}getMotionPoint(t){return ie.need("path")}getMotionTotal(){return 0}__updateMotionPath(){}__runAnimation(t,e){}__updateSortChildren(){}add(t,e){}remove(t,e){this.parent&&this.parent.remove(this,e)}dropTo(t,e,s){Ea(this,t,e,s)}on(t,e,s){}off(t,e,s){}on_(t,e,s,r){}off_(t){}once(t,e,s,r){}emit(t,e,s){}emitEvent(t,e){}hasEvent(t,e){return!1}static changeAttr(t,e,s){s?this.addAttr(t,e,s):pn(this.prototype,t,e)}static addAttr(t,e,s,r){s||(s=nn),s(e,r)(this.prototype,t)}__emitLifeEvent(t){this.hasEvent(t)&&this.emitEvent(new oo(t,this,this.parent))}destroy(){this.destroyed||(this.parent&&this.remove(),this.children&&this.clear(),this.__emitLifeEvent(oo.DESTROY),this.__.destroy(),this.__layout.destroy(),this.destroyEventer(),this.destroyed=!0)}},exports.Leaf=ue([xn(Fo),xn(Qo),xn(ra),xn(Xo),xn(ia)],exports.Leaf);const{setListWithFn:Ia}=Nt,{sort:Ma}=Fn,{localBoxBounds:Aa,localStrokeBounds:Wa,localRenderBounds:Da,maskLocalBoxBounds:Na,maskLocalStrokeBounds:Ya,maskLocalRenderBounds:Xa}=Nn,za=new Zt("Branch");exports.Branch=class extends exports.Leaf{__updateStrokeSpread(){const{children:t}=this;for(let e=0,s=t.length;e<s;e++)if(t[e].__layout.strokeSpread)return 1;return 0}__updateRenderSpread(){const{children:t}=this;for(let e=0,s=t.length;e<s;e++)if(t[e].__layout.renderSpread)return 1;return 0}__updateBoxBounds(t,e){Ia(e||this.__layout.boxBounds,this.children,this.__hasMask?Na:Aa)}__updateStrokeBounds(t){Ia(t||this.__layout.strokeBounds,this.children,this.__hasMask?Ya:Wa)}__updateRenderBounds(t){Ia(t||this.__layout.renderBounds,this.children,this.__hasMask?Xa:Da)}__updateSortChildren(){let t;const{children:e}=this;if(e.length>1){for(let s=0,r=e.length;s<r;s++)e[s].__tempNumber=s,e[s].__.zIndex&&(t=!0);e.sort(Ma),this.__layout.affectChildrenSort=t}}add(t,s){if(t===this||t.destroyed)return za.warn("add self or destroyed");const r=e(s);if(!t.__){if(a(t))return t.forEach(t=>{this.add(t,s),r||s++});t=ae.get(t.tag,t)}t.parent&&t.parent.remove(t),t.parent=this,r?this.children.push(t):this.children.splice(s,0,t),t.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||0)+1);const i=t.__layout;i.boxChanged||i.boxChange(),i.matrixChanged||i.matrixChange(),t.__bubbleMap&&t.__emitLifeEvent(oo.ADD),this.leafer&&(t.__bindLeafer(this.leafer),this.leafer.created&&this.__emitChildEvent(oo.ADD,t)),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}addMany(...t){this.add(t)}remove(t,s){t?t.__?t.animationOut?t.__runAnimation("out",()=>this.__remove(t,s)):this.__remove(t,s):this.find(t).forEach(t=>this.remove(t,s)):e(t)&&super.remove(null,s)}removeAll(t){const{children:e}=this;e.length&&(this.children=[],this.__preRemove(),this.__.__childBranchNumber=0,e.forEach(e=>{this.__realRemoveChild(e),t&&e.destroy()}))}clear(){this.removeAll(!0)}__remove(t,e){const s=this.children.indexOf(t);s>-1&&(this.children.splice(s,1),t.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||1)-1),this.__preRemove(),this.__realRemoveChild(t),e&&t.destroy())}__preRemove(){this.__hasMask&&this.__updateMask(),this.__hasEraser&&this.__updateEraser(),this.__layout.boxChange(),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}__realRemoveChild(t){t.__emitLifeEvent(oo.REMOVE),t.parent=null,this.leafer&&(t.__bindLeafer(null),this.leafer.created&&(this.__emitChildEvent(oo.REMOVE,t),this.leafer.hitCanvasManager&&this.leafer.hitCanvasManager.clear()))}__emitChildEvent(t,e){const s=new oo(t,e,this);this.hasEvent(t)&&!this.isLeafer&&this.emitEvent(s),this.leafer.emitEvent(s)}},exports.Branch=ue([xn(aa)],exports.Branch);class Fa{get length(){return this.list.length}constructor(t){this.reset(),t&&(a(t)?this.addList(t):this.add(t))}has(t){return t&&!e(this.keys[t.innerId])}indexAt(t){return this.list[t]}indexOf(t){const s=this.keys[t.innerId];return e(s)?-1:s}add(t){const{list:s,keys:r}=this;e(r[t.innerId])&&(s.push(t),r[t.innerId]=s.length-1)}addAt(t,s=0){const{keys:r}=this;if(e(r[t.innerId])){const{list:e}=this;for(let t=s,i=e.length;t<i;t++)r[e[t].innerId]++;0===s?e.unshift(t):(s>e.length&&(s=e.length),e.splice(s,0,t)),r[t.innerId]=s}}addList(t){for(let e=0;e<t.length;e++)this.add(t[e])}remove(t){const{list:s}=this;let r;for(let i=0,n=s.length;i<n;i++)e(r)?s[i].innerId===t.innerId&&(r=i,delete this.keys[t.innerId]):this.keys[s[i].innerId]=i-1;e(r)||s.splice(r,1)}sort(t){const{list:e}=this;t?e.sort((t,e)=>e.__level-t.__level):e.sort((t,e)=>t.__level-e.__level)}forEach(t){this.list.forEach(t)}clone(){const t=new Fa;return t.list=[...this.list],t.keys=Object.assign({},this.keys),t}update(){this.keys={};const{list:t,keys:e}=this;for(let s=0,r=t.length;s<r;s++)e[t[s].innerId]=s}reset(){this.list=[],this.keys={}}destroy(){this.reset()}}exports.AlignHelper=bt,exports.AroundHelper=xt,exports.AutoBounds=class{constructor(t,e,s,r,i,n){h(t)?this.copy(t):this.set(t,e,s,r,i,n)}set(t=0,e=0,s=0,r=0,i=0,n=0){this.top=t,this.right=e,this.bottom=s,this.left=r,this.width=i,this.height=n}copy(t){const{top:e,right:s,bottom:r,left:i,width:n,height:o}=t;this.set(e,s,r,i,n,o)}getBoundsFrom(t){const{top:e,right:s,bottom:r,left:i,width:n,height:o}=this;return new Ft(i,e,n||t.width-i-s,o||t.height-e-r)}},exports.BezierHelper=ss,exports.Bounds=Ft,exports.BoundsEvent=uo,exports.BoundsHelper=Nt,exports.BranchHelper=Fn,exports.BranchRender=aa,exports.CanvasManager=class{constructor(){this.list=[]}add(t){t.manager=this,this.list.push(t)}get(t){let e;const{list:s}=this;for(let r=0,i=s.length;r<i;r++)if(e=s[r],e.recycled&&e.isSameSize(t))return e.recycled=!1,e.manager||(e.manager=this),e;const r=ne.canvas(t);return this.add(r),r}recycle(t){t.recycled=!0}clearRecycled(){let t;const e=[];for(let s=0,r=this.list.length;s<r;s++)t=this.list[s],t.recycled?t.destroy():e.push(t);this.list=e}clear(){this.list.forEach(t=>{t.destroy()}),this.list.length=0}destroy(){this.clear()}},exports.ChildEvent=oo,exports.Creator=ne,exports.DataHelper=d,exports.Debug=Zt,exports.EllipseHelper=cs,exports.Event=no,exports.EventCreator=de,exports.Eventer=Lo,exports.FileHelper=Xi,exports.FourNumberHelper=w,exports.ImageEvent=co,exports.ImageManager=qi,exports.IncrementId=p,exports.LayoutEvent=wo,exports.LeafBounds=ra,exports.LeafBoundsHelper=Nn,exports.LeafData=u,exports.LeafDataProxy=Fo,exports.LeafEventer=Xo,exports.LeafHelper=Sn,exports.LeafLayout=io,exports.LeafLevelList=class{get length(){return this._length}constructor(t){this._length=0,this.reset(),t&&(a(t)?this.addList(t):this.add(t))}has(t){return!e(this.keys[t.innerId])}without(t){return e(this.keys[t.innerId])}sort(t){const{levels:e}=this;t?e.sort((t,e)=>e-t):e.sort((t,e)=>t-e)}addList(t){t.forEach(t=>{this.add(t)})}add(t){const{keys:e,levelMap:s}=this;e[t.innerId]||(e[t.innerId]=1,s[t.__level]?s[t.__level].push(t):(s[t.__level]=[t],this.levels.push(t.__level)),this._length++)}forEach(t){let e;this.levels.forEach(s=>{e=this.levelMap[s];for(let s=0,r=e.length;s<r;s++)t(e[s])})}reset(){this.levelMap={},this.keys={},this.levels=[],this._length=0}destroy(){this.levelMap=null}},exports.LeafList=Fa,exports.LeafMatrix=Qo,exports.LeafRender=ia,exports.LeaferCanvasBase=class extends xe{get width(){return this.size.width}get height(){return this.size.height}get pixelRatio(){return this.size.pixelRatio}get pixelWidth(){return this.width*this.pixelRatio||0}get pixelHeight(){return this.height*this.pixelRatio||0}get pixelSnap(){return this.config.pixelSnap}set pixelSnap(t){this.config.pixelSnap=t}get allowBackgroundColor(){return this.view&&this.parentView}constructor(t,e){super(),this.size={},this.worldTransform={},t||(t=ke),this.manager=e,this.innerId=p.create(p.CNAVAS);const{width:s,height:r,pixelRatio:i}=t;this.autoLayout=!s||!r,this.size.pixelRatio=i||qt.devicePixelRatio,this.config=t,this.init()}init(){}__createContext(){const{view:t}=this,{contextSettings:e}=this.config;this.context=e?t.getContext("2d",e):t.getContext("2d"),this.__bindContext()}export(t,e){}toBlob(t,e){}toDataURL(t,e){}saveAs(t,e){}resize(t,e=!0){if(this.isSameSize(t))return;let s;this.context&&!this.unreal&&e&&this.width&&(s=this.getSameCanvas(),s.copyWorld(this));const r=this.size;d.copyAttrs(r,t,Te),Te.forEach(t=>r[t]||(r[t]=1)),this.bounds=new Ft(0,0,this.width,this.height),this.updateViewSize(),this.updateClientBounds(),this.context&&(this.smooth=this.config.smooth,!this.unreal&&s&&(this.clearWorld(s.bounds),this.copyWorld(s),s.recycle()))}updateViewSize(){}updateClientBounds(){}getClientBounds(t){return t&&this.updateClientBounds(),this.clientBounds||this.bounds}startAutoLayout(t,e){}stopAutoLayout(){}setCursor(t){}setWorld(t,e){const{pixelRatio:s,pixelSnap:r}=this,i=this.worldTransform;e&&we(t,e,i),be(t,s,i),r&&!t.ignorePixelSnap&&(t.half&&t.half*s%2?(i.e=Be(i.e-.5)+.5,i.f=Be(i.f-.5)+.5):(i.e=Be(i.e),i.f=Be(i.f))),this.setTransform(i.a,i.b,i.c,i.d,i.e,i.f)}useWorldTransform(t){t&&(this.worldTransform=t);const e=this.worldTransform;e&&this.setTransform(e.a,e.b,e.c,e.d,e.e,e.f)}setStroke(t,e,s,r){e&&(this.strokeWidth=e),t&&(this.strokeStyle=t),s&&this.setStrokeOptions(s,r)}setStrokeOptions(t,s){let{strokeCap:r,strokeJoin:i,dashPattern:n,dashOffset:o,miterLimit:a}=t;s&&(s.strokeCap&&(r=s.strokeCap),s.strokeJoin&&(i=s.strokeJoin),e(s.dashPattern)||(n=s.dashPattern),e(s.dashOffset)||(o=s.dashOffset),s.miterLimit&&(a=s.miterLimit)),this.strokeCap=r,this.strokeJoin=i,this.dashPattern=n,this.dashOffset=o,this.miterLimit=a}saveBlendMode(t){this.savedBlendMode=this.blendMode,this.blendMode=t}restoreBlendMode(){this.blendMode=this.savedBlendMode}hitFill(t,e){return!0}hitStroke(t,e){return!0}hitPixel(t,e,s=1){return!0}setWorldShadow(t,e,s,r){const{pixelRatio:i}=this;this.shadowOffsetX=t*i,this.shadowOffsetY=e*i,this.shadowBlur=s*i,this.shadowColor=r||"black"}setWorldBlur(t){const{pixelRatio:e}=this;this.filter=`blur(${t*e}px)`}copyWorld(t,e,s,r,i){r&&(this.blendMode=r),e?(this.setTempPixelBounds(e,i),s?(this.setTempPixelBounds2(s,i),s=Ce):s=ve,this.drawImage(t.view,ve.x,ve.y,ve.width,ve.height,s.x,s.y,s.width,s.height)):this.drawImage(t.view,0,0),r&&(this.blendMode="source-over")}copyWorldToInner(t,e,s,r,i){e.b||e.c?(this.save(),this.resetTransform(),this.copyWorld(t,e,Nt.tempToOuterOf(s,e),r,i),this.restore()):(r&&(this.blendMode=r),this.setTempPixelBounds(e,i),this.drawImage(t.view,ve.x,ve.y,ve.width,ve.height,s.x,s.y,s.width,s.height),r&&(this.blendMode="source-over"))}copyWorldByReset(t,e,s,r,i,n){this.resetTransform(),this.copyWorld(t,e,s,r,n),i||this.useWorldTransform()}useGrayscaleAlpha(t){let e,s;this.setTempPixelBounds(t,!0,!0);const{context:r}=this,i=r.getImageData(ve.x,ve.y,ve.width,ve.height),{data:n}=i;for(let t=0,r=n.length;t<r;t+=4)s=.299*n[t]+.587*n[t+1]+.114*n[t+2],(e=n[t+3])&&(n[t+3]=255===e?s:e*(s/255));r.putImageData(i,ve.x,ve.y)}useMask(t,e,s){this.copyWorld(t,e,s,"destination-in")}useEraser(t,e,s){this.copyWorld(t,e,s,"destination-out")}fillWorld(t,e,s,r){s&&(this.blendMode=s),this.fillStyle=e,this.setTempPixelBounds(t,r),this.fillRect(ve.x,ve.y,ve.width,ve.height),s&&(this.blendMode="source-over")}strokeWorld(t,e,s,r){s&&(this.blendMode=s),this.strokeStyle=e,this.setTempPixelBounds(t,r),this.strokeRect(ve.x,ve.y,ve.width,ve.height),s&&(this.blendMode="source-over")}clipWorld(t,e=!0){this.beginPath(),this.setTempPixelBounds(t,e),this.rect(ve.x,ve.y,ve.width,ve.height),this.clip()}clipUI(t){t.windingRule?this.clip(t.windingRule):this.clip()}clearWorld(t,e=!0){this.setTempPixelBounds(t,e),this.clearRect(ve.x,ve.y,ve.width,ve.height)}clear(){const{pixelRatio:t}=this;this.clearRect(0,0,this.width*t+2,this.height*t+2)}setTempPixelBounds(t,e,s){this.copyToPixelBounds(ve,t,e,s)}setTempPixelBounds2(t,e,s){this.copyToPixelBounds(Ce,t,e,s)}copyToPixelBounds(t,e,s,r){t.set(e),r&&t.intersect(this.bounds),t.scale(this.pixelRatio),s&&t.ceil()}isSameSize(t){return this.width===t.width&&this.height===t.height&&(!t.pixelRatio||this.pixelRatio===t.pixelRatio)}getSameCanvas(t,e){const{size:s,pixelSnap:r}=this,i=this.manager?this.manager.get(s):ne.canvas(Object.assign({},s));return i.save(),t&&(me(i.worldTransform,this.worldTransform),i.useWorldTransform()),e&&(i.smooth=this.smooth),i.pixelSnap!==r&&(i.pixelSnap=r),i}recycle(t){this.recycled||(this.restore(),t?this.clearWorld(t):this.clear(),this.manager?this.manager.recycle(this):this.destroy())}updateRender(t){}unrealCanvas(){}destroy(){this.manager=this.view=this.parentView=null}},exports.LeaferEvent=Bo,exports.LeaferImage=class{get url(){return this.config.url}get crossOrigin(){const{crossOrigin:t}=this.config;return e(t)?qt.image.crossOrigin:t}get completed(){return this.ready||!!this.error}constructor(t){if(this.use=0,this.waitComplete=[],this.innerId=Zi(Ji),this.config=t||(t={url:""}),t.view){const{view:e}=t;this.setView(e.config?e.view:e)}qi.isFormat("svg",t)&&(this.isSVG=!0),qi.hasAlphaPixel(t)&&(this.hasAlphaPixel=!0)}load(t,e,s){return this.loading||(this.loading=!0,Vi.tasker.add(()=>pe(this,void 0,void 0,function*(){return yield qt.origin.loadImage(this.getLoadUrl(s),this.crossOrigin,this).then(t=>{s&&this.setThumbView(t),this.setView(t)}).catch(t=>{this.error=t,this.onComplete(!1)})}))),this.waitComplete.push(t,e),this.waitComplete.length-2}unload(t,e){const s=this.waitComplete;if(e){const e=s[t+1];e&&e({type:"stop"})}s[t]=s[t+1]=void 0}setView(t){this.ready=!0,this.width||(this.width=t.width,this.height=t.height,this.view=t),this.onComplete(!0)}onComplete(t){let e;this.waitComplete.forEach((s,r)=>{e=r%2,s&&(t?e||s(this):e&&s(this.error))}),this.waitComplete.length=0,this.loading=!1}getFull(t){return this.view}getCanvas(t,e,s,r,i,n,o,a){if(t||(t=this.width),e||(e=this.height),this.cache){let{params:t,data:e}=this.cache;for(let s in t)if(t[s]!==arguments[s]){e=null;break}if(e)return e}const h=qt.image.resize(this.view,t,e,i,n,void 0,o,s,r,a);return this.cache=this.use>1?{data:h,params:arguments}:null,h}getPattern(t,e,s,r){const i=qt.canvas.createPattern(t,e);return qt.image.setPatternTransform(i,s,r),i}getLoadUrl(t){return this.url}setThumbView(t){}getThumbSize(t){}getMinLevel(){}getLevelData(t,e,s){}clearLevels(t){}destroy(){this.clearLevels();const{view:t}=this;t&&t.close&&t.close(),this.config={url:""},this.cache=this.view=null,this.waitComplete.length=0}},exports.MathHelper=S,exports.Matrix=ct,exports.MatrixHelper=j,exports.NeedConvertToCanvasCommandMap=Re,exports.OneRadian=E,exports.PI2=I,exports.PI_2=M,exports.PathBounds=Li,exports.PathCommandDataHelper=mr,exports.PathCommandMap=Le,exports.PathCommandNodeHelper=us,exports.PathConvert=Js,exports.PathCorner=Wi,exports.PathCreator=Wr,exports.PathDrawer=Zr,exports.PathHelper=Pe,exports.PathNumberCommandLengthMap=Ae,exports.PathNumberCommandMap=Me,exports.Platform=qt,exports.Plugin=ie,exports.Point=lt,exports.PointHelper=rt,exports.PropertyEvent=ho,exports.RectHelper=We,exports.RenderEvent=bo,exports.ResizeEvent=xo,exports.Resource=Vi,exports.Run=ee,exports.StringNumberMap=jt,exports.TaskItem=Ui,exports.TaskProcessor=Hi,exports.TwoPointBoundsHelper=pt,exports.UICreator=ae,exports.UnitConvertHelper=Ht,exports.WaitHelper=qn,exports.WatchEvent=mo,exports.affectRenderBoundsType=function(t){return en(t,t=>({set(e){this.__setAttr(t,e),this.__layout.renderChanged||this.__layout.renderChange()}}))},exports.affectStrokeBoundsType=hn,exports.attr=sn,exports.autoLayoutType=function(t){return en(t,t=>({set(e){this.__setAttr(t,e)&&(this.__hasAutoLayout=!!(this.origin||this.around||this.flow),this.__local||this.__layout.createLocal(),on(this))}}))},exports.boundsType=nn,exports.canvasPatch=function(t){!function(t){t&&!t.roundRect&&(t.roundRect=function(t,e,s,r,i){Yi(this,t,e,s,r,i)})}(t)},exports.canvasSizeAttrs=Te,exports.createDescriptor=tn,exports.cursorType=function(t){return en(t,t=>({set(e){this.__setAttr(t,e),this.leafer&&this.leafer.updateCursor()}}))},exports.dataProcessor=function(t){return(e,s)=>{$i(e,"__DataProcessor",{get:()=>t})}},exports.dataType=function(t){return en(t)},exports.decorateLeafAttr=en,exports.defineDataProcessor=pn,exports.defineKey=$i,exports.defineLeafAttr=rn,exports.dimType=function(t){return en(t,t=>({set(e){if(this.__setAttr(t,e)){const t=this.__;d.stintSet(t,"__useDim",t.dim||t.bright||t.dimskip),this.__layout.surfaceChange()}}}))},exports.doBoundsType=on,exports.doStrokeType=ln,exports.emptyData={},exports.eraserType=function(t){return en(t,t=>({set(e){this.__setAttr(t,e)&&this.waitParent(()=>{this.parent.__updateEraser(e)})}}))},exports.extraPropertyEventMap=lo,exports.getBoundsData=W,exports.getDescriptor=Ki,exports.getMatrixData=D,exports.getPointData=A,exports.hitType=function(t){return en(t,t=>({set(e){this.__setAttr(t,e)&&(this.__layout.hitCanvasChanged=!0,"hit"===Zt.showBounds&&this.__layout.surfaceChange(),this.leafer&&this.leafer.updateCursor())}}))},exports.isArray=a,exports.isData=function(t){return h(t)&&!a(t)},exports.isEmptyData=l,exports.isFinite=i,exports.isNull=s,exports.isNumber=n,exports.isObject=h,exports.isString=r,exports.isUndefined=e,exports.layoutProcessor=function(t){return(e,s)=>{$i(e,"__LayoutProcessor",{get:()=>t})}},exports.leaferTransformAttrMap=Po,exports.maskType=function(t){return en(t,t=>({set(e){this.__setAttr(t,e)&&(this.__layout.boxChanged||this.__layout.boxChange(),this.waitParent(()=>{this.parent.__updateMask(e)}))}}))},exports.naturalBoundsType=function(t){return en(t,t=>({set(e){this.__setAttr(t,e)&&(on(this),this.__.__removeNaturalSize())}}))},exports.opacityType=function(t){return en(t,t=>({set(e){this.__setAttr(t,e)&&(this.__layout.opacityChanged||this.__layout.opacityChange()),this.mask&&cn(this)}}))},exports.path=Di,exports.pathInputType=function(t){return en(t,t=>({set(e){const s=this.__;2!==s.__pathInputed&&(s.__pathInputed=e?1:0),e||(s.__pathForRender=void 0),this.__setAttr(t,e),on(this)}}))},exports.pathType=an,exports.pen=Ni,exports.positionType=function(t,e){return en(t,t=>({set(s){this.__setAttr(t,s,e)&&(this.__layout.matrixChanged||this.__layout.matrixChange())}}))},exports.registerUI=function(){return t=>{ae.register(t)}},exports.registerUIEvent=function(){return t=>{de.register(t)}},exports.rewrite=function(t){return(e,s)=>{fn.push({name:e.constructor.name+"."+s,run:()=>{e[s]=t}})}},exports.rewriteAble=function(){return t=>{yn()}},exports.rotationType=function(t,e){return en(t,t=>({set(s){this.__setAttr(t,s,e)&&(this.__layout.rotationChanged||this.__layout.rotationChange())}}))},exports.scaleType=function(t,e){return en(t,t=>({set(s){this.__setAttr(t,s,e)&&(this.__layout.scaleChanged||this.__layout.scaleChange())}}))},exports.scrollType=function(t,e){return en(t,t=>({set(s){this.__setAttr(t,s,e)&&(this.__layout.matrixChanged||this.__layout.matrixChange(),this.__scrollWorld||(this.__scrollWorld={}))}}))},exports.sortType=function(t){return en(t,t=>({set(e){this.__setAttr(t,e)&&(this.__layout.surfaceChange(),this.waitParent(()=>{this.parent.__layout.childrenSortChange()}))}}))},exports.strokeType=dn,exports.surfaceType=function(t){return en(t,t=>({set(e){this.__setAttr(t,e)&&(this.__layout.surfaceChanged||this.__layout.surfaceChange())}}))},exports.tempBounds=Ut,exports.tempMatrix=ut,exports.tempPoint=dt,exports.tryToNumber=function(t){return"string"==typeof t&&o.test(t)?+t:t},exports.useModule=xn,exports.version="2.0.0",exports.visibleType=function(t){return en(t,t=>({set(e){const s=this.visible;if(!0===s&&0===e){if(this.animationOut)return this.__runAnimation("out",()=>un(this,t,e,s))}else 0===s&&!0===e&&this.animation&&this.__runAnimation("in");un(this,t,e,s),this.mask&&cn(this)}}))};
//# sourceMappingURL=core.min.cjs.map
