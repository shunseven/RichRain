{"version":3,"file":"core.esm.min.js","sources":["../../../../../../node_modules/.pnpm/@rollup+plugin-typescript@11.1.6_rollup@4.44.2_tslib@2.8.1_typescript@5.8.3/node_modules/tslib/tslib.es6.js","../../../../../../../src/ui/packages/app/src/App.ts","../../../../../../../src/ui/packages/event/src/Keyboard.ts","../../../../../../../src/ui/packages/event/src/PointerButton.ts","../../../../../../../src/ui/packages/event/src/UIEvent.ts","../../../../../../../src/ui/packages/event/src/DragBoundsHelper.ts","../../../../../../../src/ui/packages/event/src/PointerEvent.ts","../../../../../../../src/ui/packages/event/src/DragEvent.ts","../../../../../../../src/ui/packages/event/src/DropEvent.ts","../../../../../../../src/ui/packages/event/src/MoveEvent.ts","../../../../../../../src/ui/packages/event/src/TouchEvent.ts","../../../../../../../src/ui/packages/event/src/RotateEvent.ts","../../../../../../../src/ui/packages/event/src/SwipeEvent.ts","../../../../../../../src/ui/packages/event/src/ZoomEvent.ts","../../../../../../../src/ui/packages/event/src/KeyEvent.ts","../../../../../../../src/ui/packages/interaction/interaction/src/InteractionHelper.ts","../../../../../../../src/ui/packages/interaction/interaction/src/Dragger.ts","../../../../../../../src/ui/packages/interaction/interaction/src/emit.ts","../../../../../../../src/ui/packages/interaction/interaction/src/config.ts","../../../../../../../src/ui/packages/interaction/interaction/src/Interaction.ts","../../../../../../../src/ui/packages/interaction/interaction/src/Cursor.ts","../../../../../../../src/ui/packages/hit/src/HitCanvasManager.ts","../../../../../../../src/ui/packages/hit/src/selector.ts","../../../../../../../src/ui/packages/hit/src/LeafHit.ts","../../../../../../../src/ui/packages/hit/src/UIHit.ts","../../../../../../../src/ui/packages/hit/src/RectHit.ts","../../../../../../../src/ui/packages/hit/src/TextHit.ts","../../../../../../../src/ui/packages/hit/src/pick.ts","../../../../../../../src/ui/packages/hit/src/canvas.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","import { ILeaferConfig, IResizeEvent, ILeaferCanvas, IRenderOptions, ILeaferBase, IBoundsData } from '@leafer/interface'\nimport { Creator, DataHelper, LayoutEvent, RenderEvent, canvasSizeAttrs, registerUI, isUndefined } from '@leafer/core'\n\nimport { IApp, IAppConfig, IAppForEachFunction, IAppInputData, ILeafer } from '@leafer-ui/interface'\n\nimport { Leafer } from '@leafer-ui/draw'\n\n\n@registerUI()\nexport class App extends Leafer implements IApp {\n\n    public get __tag() { return 'App' }\n\n    public get isApp(): boolean { return true }\n\n    declare public children: ILeafer[]\n\n    public realCanvas: boolean\n\n    public ground: ILeafer\n    public tree: ILeafer\n    public sky: ILeafer\n\n    constructor(userConfig?: IAppConfig, data?: IAppInputData) {\n        super(userConfig, data)\n    }\n\n    override init(userConfig?: IAppConfig, parentApp?: IApp): void {\n        super.init(userConfig, parentApp)\n        if (userConfig) {\n            const { ground, tree, sky, editor } = userConfig\n            if (ground) this.ground = this.addLeafer(ground)\n            if (tree || editor) this.tree = this.addLeafer(tree || { type: userConfig.type || 'design' })\n            if (sky || editor) this.sky = this.addLeafer(sky)\n            if (editor) Creator.editor(editor, this)\n        }\n    }\n\n    protected __setApp(): void {\n        const { canvas } = this\n        const { realCanvas, view } = this.config\n        if (realCanvas || view === this.canvas.view || !canvas.parentView) this.realCanvas = true\n        else canvas.unrealCanvas()\n\n        this.leafer = this\n        this.watcher.disable()\n        this.layouter.disable()\n    }\n\n    override __updateLocalBounds(): void {\n        this.forEach(leafer => leafer.updateLayout())\n        super.__updateLocalBounds()\n    }\n\n    override start(): void {\n        super.start()\n        this.forEach(leafer => leafer.start())\n    }\n\n    override stop(): void {\n        this.forEach(leafer => leafer.stop())\n        super.stop()\n    }\n\n    override unlockLayout(): void {\n        super.unlockLayout()\n        this.forEach(leafer => leafer.unlockLayout())\n    }\n\n    override lockLayout(): void {\n        super.lockLayout()\n        this.forEach(leafer => leafer.lockLayout())\n    }\n\n    override forceRender(bounds?: IBoundsData, sync?: boolean): void {\n        this.forEach(leafer => leafer.forceRender(bounds, sync))\n    }\n\n    public addLeafer(merge?: ILeaferConfig): Leafer {\n        const leafer = new Leafer(merge)\n        this.add(leafer)\n        return leafer\n    }\n\n    override add(leafer: ILeafer, index?: number): void {\n        if (!leafer.view) {\n            if (this.realCanvas && !this.canvas.bounds) { // wait miniapp select canvas\n                setTimeout(() => this.add(leafer, index), 10)\n                return\n            }\n            leafer.init(this.__getChildConfig(leafer.userConfig), this)\n        }\n\n        super.add(leafer, index)\n        if (!isUndefined(index)) leafer.canvas.childIndex = index\n        this.__listenChildEvents(leafer)\n    }\n\n    public forEach(fn: IAppForEachFunction): void {\n        this.children.forEach(fn)\n    }\n\n    protected __onCreated(): void {\n        this.created = this.children.every(child => child.created)\n    }\n\n    protected __onReady(): void {\n        if (this.children.every(child => child.ready)) super.__onReady()\n    }\n\n    protected __onViewReady(): void {\n        if (this.children.every(child => child.viewReady)) super.__onViewReady()\n    }\n\n    protected __onChildRenderEnd(e: RenderEvent): void {\n        this.renderer.addBlock(e.renderBounds)\n        if (this.viewReady) this.renderer.update()\n    }\n\n    override __render(canvas: ILeaferCanvas, options: IRenderOptions): void {\n        if (canvas.context) this.forEach(leafer => options.matrix ? leafer.__render(canvas, options) : canvas.copyWorld(leafer.canvas, options.bounds))\n    }\n\n    public __onResize(event: IResizeEvent): void {\n        this.forEach(leafer => leafer.resize(event))\n        super.__onResize(event)\n    }\n\n    public updateLayout(): void {\n        this.forEach(leafer => leafer.updateLayout())\n    }\n\n    protected __getChildConfig(userConfig?: ILeaferConfig): ILeaferConfig {\n        const config = { ...this.config }\n        config.hittable = config.realCanvas = undefined\n        if (userConfig) DataHelper.assign(config, userConfig)\n\n        // reset\n        if (this.autoLayout) DataHelper.copyAttrs(config, this, canvasSizeAttrs)\n        config.view = this.realCanvas ? undefined : this.view\n        config.fill = undefined\n        return config\n    }\n\n    protected __listenChildEvents(leafer: ILeaferBase): void {\n        leafer.once([\n            [LayoutEvent.END, this.__onReady, this],\n            [RenderEvent.START, this.__onCreated, this],\n            [RenderEvent.END, this.__onViewReady, this]\n        ])\n        if (this.realCanvas) this.__eventIds.push(leafer.on_(RenderEvent.END, this.__onChildRenderEnd, this))\n    }\n\n}","import { IBooleanMap, IShortcutKeyCodes, IShortcutKeys, IShortcutKeysCheck, IUIEvent } from '@leafer/interface'\n\n\nconst downKeyMap: IBooleanMap = {}\n\nexport const Keyboard = {\n\n    isHoldSpaceKey(): boolean {\n        return Keyboard.isHold('Space')\n    },\n\n    isHold(code: IShortcutKeyCodes): boolean {\n        return downKeyMap[code]\n    },\n\n    // 是否按住快捷键，可扩展语义化快捷键组合 ctrl + F || shift + F\n    isHoldKeys(shortcutKeys: IShortcutKeysCheck | IShortcutKeys, e?: IUIEvent): boolean {\n        return e ? (shortcutKeys as IShortcutKeysCheck)(e) : undefined\n    },\n\n    setDownCode(code: string): void {\n        if (!downKeyMap[code]) downKeyMap[code] = true\n    },\n\n    setUpCode(code: string): void {\n        downKeyMap[code] = false\n    }\n\n}","import { IUIEvent } from '@leafer/interface'\n\n\nexport const PointerButton = {\n\n    LEFT: 1,\n\n    RIGHT: 2,\n\n    MIDDLE: 4,\n\n    defaultLeft(event: IUIEvent): void { if (!event.buttons) event.buttons = 1 },\n\n    left(event: IUIEvent): boolean { return event.buttons === 1 },\n\n    right(event: IUIEvent): boolean { return event.buttons === 2 },\n\n    middle(event: IUIEvent): boolean { return event.buttons === 4 }\n\n}","import { ILeaf, ILeafList, IPointData, IUIEvent, IShortcutKeys, IShortcutKeysCheck } from '@leafer/interface'\nimport { Event, EventCreator } from '@leafer/core'\n\nimport { Keyboard } from './Keyboard'\nimport { PointerButton as B } from './PointerButton'\n\n\nexport class UIEvent extends Event implements IUIEvent {\n\n    readonly x: number\n    readonly y: number\n\n    readonly path: ILeafList\n    readonly throughPath?: ILeafList\n\n    readonly altKey: boolean\n    readonly ctrlKey: boolean\n    readonly shiftKey: boolean\n    readonly metaKey: boolean\n    public get spaceKey(): boolean { return Keyboard.isHoldSpaceKey() }\n\n    public get left(): boolean { return B.left(this) }\n    public get right(): boolean { return B.right(this) }\n    public get middle(): boolean { return B.middle(this) }\n    readonly buttons: number\n\n    declare readonly target: ILeaf\n    declare readonly current: ILeaf\n    readonly bubbles: boolean = true\n\n    readonly time: number\n\n    constructor(params: IUIEvent) {\n        super(params.type)\n        Object.assign(this, params)\n    }\n\n\n    public isHoldKeys(shortcutKeys?: IShortcutKeysCheck | IShortcutKeys): boolean {\n        return Keyboard.isHoldKeys(shortcutKeys, this)\n    }\n\n    public getBoxPoint(relative?: ILeaf): IPointData {\n        return (relative || this.current).getBoxPoint(this)\n    }\n\n    public getInnerPoint(relative?: ILeaf): IPointData {\n        return (relative || this.current).getInnerPoint(this)\n    }\n\n    public getLocalPoint(relative?: ILeaf): IPointData {\n        return (relative || this.current).getLocalPoint(this)\n    }\n\n    public getPagePoint(): IPointData {\n        return this.current.getPagePoint(this)\n    }\n\n    // 兼容代码，未来可移除\n    public getInner(relative?: ILeaf): IPointData { return this.getInnerPoint(relative) }\n    public getLocal(relative?: ILeaf): IPointData { return this.getLocalPoint(relative) }\n    public getPage(): IPointData { return this.getPagePoint() }\n    // ---\n\n    static changeName(oldName: string, newName: string): void {\n        EventCreator.changeName(oldName, newName)\n    }\n\n}","import { IPointData, IBoundsData, IDragBoundsType, ILeaf, ISide } from '@leafer/interface'\nimport { Bounds, BoundsHelper, MathHelper, isFinite } from '@leafer/core'\n\n\nconst { min, max, abs } = Math, { float, sign } = MathHelper, { minX, maxX, minY, maxY } = BoundsHelper\nconst tempContent = new Bounds(), tempDragBounds = new Bounds()\n\nexport const DragBoundsHelper = {\n\n    // 拖拽区域内移动\n    limitMove(leaf: ILeaf, move: IPointData): void {\n        const { dragBounds, dragBoundsType } = leaf\n        if (dragBounds) D.getValidMove(leaf.__localBoxBounds, D.getDragBounds(leaf), dragBoundsType, move, true)\n        D.axisMove(leaf, move)\n    },\n\n    // 拖拽区域内缩放\n    limitScaleOf(leaf: ILeaf, origin: IPointData, scale: IPointData, lockRatio?: boolean): void {\n        const { dragBounds, dragBoundsType } = leaf\n        if (dragBounds) D.getValidScaleOf(leaf.__localBoxBounds, D.getDragBounds(leaf), dragBoundsType, leaf.getLocalPointByInner(leaf.getInnerPointByBox(origin)), scale, lockRatio, true)\n    },\n\n    // 按轴移动\n    axisMove(leaf: ILeaf, move: IPointData) {\n        const { draggable } = leaf\n        if (draggable === 'x') move.y = 0\n        if (draggable === 'y') move.x = 0\n    },\n\n    getDragBounds(leaf: ILeaf): IBoundsData {\n        const { dragBounds } = leaf\n        return dragBounds === 'parent' ? leaf.parent.boxBounds : dragBounds\n    },\n\n    isInnerMode(content: IBoundsData, dragBounds: IBoundsData, dragBoundsType: IDragBoundsType, sideType: ISide): boolean {\n        return dragBoundsType === 'inner' || (dragBoundsType === 'auto' && content[sideType] > dragBounds[sideType])\n    },\n\n    getValidMove(content: IBoundsData, dragBounds: IBoundsData, dragBoundsType: IDragBoundsType, move: IPointData, change?: boolean): IPointData {\n        const x = content.x + move.x, y = content.y + move.y, right = x + content.width, bottom = y + content.height\n        const boundsRight = dragBounds.x + dragBounds.width, boundsBottom = dragBounds.y + dragBounds.height\n\n        if (!change) move = { ...move }\n\n        if (D.isInnerMode(content, dragBounds, dragBoundsType, 'width')) {  // inner 模式\n            if (x > dragBounds.x) move.x += dragBounds.x - x\n            else if (right < boundsRight) move.x += boundsRight - right\n        } else { // outer 模式\n            if (x < dragBounds.x) move.x += dragBounds.x - x\n            else if (right > boundsRight) move.x += boundsRight - right\n        }\n\n        if (D.isInnerMode(content, dragBounds, dragBoundsType, 'height')) { // inner 模式\n            if (y > dragBounds.y) move.y += dragBounds.y - y\n            else if (bottom < boundsBottom) move.y += boundsBottom - bottom\n        } else { // outer 模式\n            if (y < dragBounds.y) move.y += dragBounds.y - y\n            else if (bottom > boundsBottom) move.y += boundsBottom - bottom\n        }\n\n        // 避免出现为0的抖动小数\n        move.x = float(move.x)\n        move.y = float(move.y)\n\n        return move\n    },\n\n    getValidScaleOf(content: IBoundsData, dragBounds: IBoundsData, dragBoundsType: IDragBoundsType, origin: IPointData, scale: IPointData, lockRatio?: boolean, change?: boolean): IPointData {\n        if (!change) scale = { ...scale }\n\n        tempDragBounds.set(dragBounds)\n        tempContent.set(content).scaleOf(origin, scale.x, scale.y)\n\n        const originLeftScale = (origin.x - content.x) / content.width, originRightScale = 1 - originLeftScale\n        const originTopScale = (origin.y - content.y) / content.height, originBottomScale = 1 - originTopScale\n\n        let correctScaleX = 1, correctScaleY = 1, aScale: number, bScale: number, aSize: number, bSize: number\n\n        if (D.isInnerMode(content, dragBounds, dragBoundsType, 'width')) {  // inner 模式\n\n            if (scale.x < 0) tempContent.scaleOf(origin, correctScaleX = 1 / scale.x, 1) // 阻止镜像\n\n            aSize = float(tempContent.minX - tempDragBounds.minX)\n            bSize = float(tempDragBounds.maxX - tempContent.maxX)\n\n            aScale = originLeftScale && aSize > 0 ? 1 + aSize / (originLeftScale * tempContent.width) : 1\n            bScale = originRightScale && bSize > 0 ? 1 + bSize / (originRightScale * tempContent.width) : 1\n            correctScaleX *= max(aScale, bScale)\n\n        } else { // outer 模式\n\n            if (scale.x < 0) {\n                if (float(minX(content) - minX(dragBounds)) <= 0 || float(maxX(dragBounds) - maxX(content)) <= 0) tempContent.scaleOf(origin, correctScaleX = 1 / scale.x, 1) // 到达边界时阻止镜像\n                tempContent.unsign()\n            }\n\n            aSize = float(tempDragBounds.minX - tempContent.minX)\n            bSize = float(tempContent.maxX - tempDragBounds.maxX)\n\n            aScale = originLeftScale && aSize > 0 ? 1 - aSize / (originLeftScale * tempContent.width) : 1\n            bScale = originRightScale && bSize > 0 ? 1 - bSize / (originRightScale * tempContent.width) : 1\n            correctScaleX *= min(aScale, bScale)\n\n        }\n\n        if (D.isInnerMode(content, dragBounds, dragBoundsType, 'height')) { // inner 模式\n\n            if (scale.y < 0) tempContent.scaleOf(origin, 1, correctScaleY = 1 / scale.y) // 阻止镜像\n\n            aSize = float(tempContent.minY - tempDragBounds.minY)\n            bSize = float(tempDragBounds.maxY - tempContent.maxY)\n\n            aScale = originTopScale && aSize > 0 ? 1 + aSize / (originTopScale * tempContent.height) : 1\n            bScale = originBottomScale && bSize > 0 ? 1 + bSize / (originBottomScale * tempContent.height) : 1\n\n            correctScaleY *= max(aScale, bScale)\n\n            if (lockRatio) {\n                aScale = max(abs(correctScaleX), abs(correctScaleY))\n                correctScaleX = sign(correctScaleX) * aScale\n                correctScaleY = sign(correctScaleY) * aScale\n            }\n\n        } else { // outer 模式\n\n            if (scale.y < 0) {\n                if (float(minY(content) - minY(dragBounds)) <= 0 || float(maxY(dragBounds) - maxY(content)) <= 0) tempContent.scaleOf(origin, 1, correctScaleY = 1 / scale.y) // 到达边界时阻止镜像\n                tempContent.unsign()\n            }\n\n            aSize = float(tempDragBounds.minY - tempContent.minY)\n            bSize = float(tempContent.maxY - tempDragBounds.maxY)\n\n            aScale = originTopScale && aSize > 0 ? 1 - aSize / (originTopScale * tempContent.height) : 1\n            bScale = originBottomScale && bSize > 0 ? 1 - bSize / (originBottomScale * tempContent.height) : 1\n            correctScaleY *= min(aScale, bScale)\n\n        }\n\n        scale.x *= isFinite(correctScaleX) ? correctScaleX : 1\n        scale.y *= isFinite(correctScaleY) ? correctScaleY : 1\n\n        return scale\n    }\n}\n\nconst D = DragBoundsHelper","import { IPointerEvent, PointerType } from '@leafer/interface'\nimport { registerUIEvent } from '@leafer/core'\n\nimport { UIEvent } from './UIEvent'\n\n\n@registerUIEvent()\nexport class PointerEvent extends UIEvent implements IPointerEvent {\n\n    static POINTER = 'pointer'\n\n    static BEFORE_DOWN = 'pointer.before_down'\n    static BEFORE_MOVE = 'pointer.before_move'\n    static BEFORE_UP = 'pointer.before_up'\n\n    static DOWN = 'pointer.down'\n    static MOVE = 'pointer.move'\n    static UP = 'pointer.up'\n\n    static OVER = 'pointer.over'\n    static OUT = 'pointer.out'\n\n    static ENTER = 'pointer.enter'\n    static LEAVE = 'pointer.leave'\n\n    static TAP = 'tap'\n    static DOUBLE_TAP = 'double_tap'\n\n    static CLICK = 'click'\n    static DOUBLE_CLICK = 'double_click'\n\n    static LONG_PRESS = 'long_press'\n    static LONG_TAP = 'long_tap'\n\n    static MENU = 'pointer.menu'\n    static MENU_TAP = 'pointer.menu_tap'\n\n    public readonly width: number\n    public readonly height: number\n    public readonly pointerType: PointerType\n    public readonly moving?: boolean // 是否处于平移视图状态\n    public readonly dragging?: boolean // 是否处于拖拽状态\n    public readonly multiTouch?: boolean\n    public readonly pressure: number\n    public readonly tangentialPressure?: number\n    public readonly tiltX?: number\n    public readonly tiltY?: number\n    public readonly twist?: number\n\n}\n\nexport const MyPointerEvent = PointerEvent","import { IDragEvent, IPointData, ILeaf, ILeafList, IObject, IBoundsData } from '@leafer/interface'\nimport { registerUIEvent, LeafList, BoundsHelper, PointHelper } from '@leafer/core'\n\nimport { DragBoundsHelper } from './DragBoundsHelper'\nimport { PointerEvent } from './PointerEvent'\n\n\nconst tempMove = {} as IPointData\n\n@registerUIEvent()\nexport class DragEvent extends PointerEvent implements IDragEvent {\n\n    static BEFORE_DRAG = 'drag.before_drag'\n\n    static START = 'drag.start'\n    static DRAG = 'drag'\n    static END = 'drag.end'\n\n    static OVER = 'drag.over'\n    static OUT = 'drag.out'\n\n    static ENTER = 'drag.enter'\n    static LEAVE = 'drag.leave'\n\n    readonly moveX: number\n    readonly moveY: number\n    readonly totalX: number\n    readonly totalY: number\n\n    static list: ILeafList\n    static data: IObject\n\n    static setList(data: ILeaf | ILeaf[] | ILeafList): void {\n        this.list = data instanceof LeafList ? data : new LeafList(data as ILeaf[])\n    }\n\n    static setData(data: IObject): void {\n        this.data = data\n    }\n\n    static getValidMove(leaf: ILeaf, localStart: IPointData, worldTotal: IPointData, checkLimit = true): IPointData {\n        const move = leaf.getLocalPoint(worldTotal, null, true)\n        PointHelper.move(move, localStart.x - leaf.x, localStart.y - leaf.y)\n        if (checkLimit) this.limitMove(leaf, move)\n        DragBoundsHelper.axisMove(leaf, move)\n        return move\n    }\n\n    static limitMove(leaf: ILeaf, move: IPointData): void {\n        DragBoundsHelper.limitMove(leaf, move)\n    }\n\n    public getPageMove(total?: boolean): IPointData {\n        this.assignMove(total)\n        return this.current.getPagePoint(tempMove, null, true)\n    }\n\n    public getInnerMove(relative?: ILeaf, total?: boolean): IPointData {\n        if (!relative) relative = this.current\n        this.assignMove(total)\n        return relative.getInnerPoint(tempMove, null, true)\n    }\n\n    public getLocalMove(relative?: ILeaf, total?: boolean): IPointData {\n        if (!relative) relative = this.current\n        this.assignMove(total)\n        return relative.getLocalPoint(tempMove, null, true)\n    }\n\n    public getPageTotal(): IPointData {\n        return this.getPageMove(true)\n    }\n\n    public getInnerTotal(relative?: ILeaf): IPointData {\n        return this.getInnerMove(relative, true)\n    }\n\n    public getLocalTotal(relative?: ILeaf): IPointData {\n        return this.getLocalMove(relative, true)\n    }\n\n    public getPageBounds(): IBoundsData {\n        const total = this.getPageTotal(), start = this.getPagePoint(), bounds = {} as IBoundsData\n        BoundsHelper.set(bounds, start.x - total.x, start.y - total.y, total.x, total.y)\n        BoundsHelper.unsign(bounds)\n        return bounds\n    }\n\n    protected assignMove(total: boolean): void {\n        tempMove.x = total ? this.totalX : this.moveX\n        tempMove.y = total ? this.totalY : this.moveY\n    }\n\n}\n\nexport const MyDragEvent = DragEvent","import { IDropEvent, ILeaf, ILeafList, IObject } from '@leafer/interface'\nimport { registerUIEvent } from '@leafer/core'\n\nimport { PointerEvent } from './PointerEvent'\nimport { DragEvent } from './DragEvent'\n\n\n@registerUIEvent()\nexport class DropEvent extends PointerEvent implements IDropEvent {\n\n    static DROP = 'drop'\n\n    readonly list: ILeafList\n    readonly data: IObject\n\n    static setList(data: ILeaf | ILeaf[] | ILeafList): void {\n        DragEvent.setList(data)\n    }\n\n    static setData(data: IObject): void {\n        DragEvent.setData(data)\n    }\n\n}","import { IMoveEvent } from '@leafer/interface'\nimport { registerUIEvent } from '@leafer/core'\n\nimport { DragEvent } from './DragEvent'\n\n@registerUIEvent()\nexport class MoveEvent extends DragEvent implements IMoveEvent {\n\n    static BEFORE_MOVE = 'move.before_move'\n\n    static START = 'move.start'\n    static MOVE = 'move'\n    static DRAG_ANIMATE = 'move.drag_animate'\n    static END = 'move.end'\n\n    static PULL_DOWN = 'move.pull_down'\n    static REACH_BOTTOM = 'move.reach_bottom'\n\n    readonly moveType: 'drag' | 'move'\n}","import { ITouchEvent } from '@leafer/interface'\nimport { registerUIEvent } from '@leafer/core'\n\nimport { UIEvent } from './UIEvent'\n\n\n@registerUIEvent()\nexport class TouchEvent extends UIEvent implements ITouchEvent {\n\n}\n\nexport const MyTouchEvent = TouchEvent","import { IRotateEvent } from '@leafer/interface'\nimport { registerUIEvent } from '@leafer/core'\n\nimport { PointerEvent } from './PointerEvent'\n\n\n@registerUIEvent()\nexport class RotateEvent extends PointerEvent implements IRotateEvent {\n\n    static BEFORE_ROTATE = 'rotate.before_rotate'\n\n    static START = 'rotate.start'\n    static ROTATE = 'rotate'\n    static END = 'rotate.end'\n\n    readonly rotation: number\n    readonly totalRotation: number\n\n}","import { ISwipeEvent } from '@leafer/interface'\nimport { registerUIEvent } from '@leafer/core'\n\nimport { DragEvent } from './DragEvent'\n\n\n@registerUIEvent()\nexport class SwipeEvent extends DragEvent implements ISwipeEvent {\n\n    static SWIPE = 'swipe'\n\n    static LEFT = 'swipe.left'\n    static RIGHT = 'swipe.right'\n    static UP = 'swipe.up'\n    static DOWN = 'swipe.down'\n\n    readonly speed: number\n    readonly direction: string\n\n}","import { IZoomEvent } from '@leafer/interface'\nimport { registerUIEvent } from '@leafer/core'\n\nimport { PointerEvent } from './PointerEvent'\n\n@registerUIEvent()\nexport class ZoomEvent extends PointerEvent implements IZoomEvent {\n\n    static BEFORE_ZOOM = 'zoom.before_zoom'\n\n    static START = 'zoom.start'\n    static ZOOM = 'zoom'\n    static END = 'zoom.end'\n\n    readonly scale: number\n    readonly totalScale: number\n\n}","import { IKeyCodes, IKeyEvent } from '@leafer/interface'\nimport { registerUIEvent } from '@leafer/core'\n\nimport { UIEvent } from './UIEvent'\n\n\n@registerUIEvent()\nexport class KeyEvent extends UIEvent implements IKeyEvent {\n\n    static BEFORE_DOWN = 'key.before_down'\n    static BEFORE_UP = 'key.before_up'\n\n    static DOWN = 'key.down'\n    static HOLD = 'key.hold'\n    static UP = 'key.up'\n\n    public readonly code: IKeyCodes\n    public readonly key: string\n\n}","import { IPointerEvent, IDragEvent, ISwipeEvent, IUIEvent, IPointData, ILeafList, IDropEvent, IObject } from '@leafer/interface'\nimport { PointHelper, LeafList, isUndefined, LeafHelper } from '@leafer/core'\n\nimport { SwipeEvent, DragEvent } from '@leafer-ui/event'\n\n\nexport const InteractionHelper = {\n\n    getDragEventData(startPoint: IPointData, lastPoint: IPointData, event: IPointerEvent): IDragEvent {\n        return {\n            ...event,\n            x: event.x,\n            y: event.y,\n            moveX: event.x - lastPoint.x,\n            moveY: event.y - lastPoint.y,\n            totalX: event.x - startPoint.x,\n            totalY: event.y - startPoint.y,\n        } as IDragEvent\n    },\n\n    getDropEventData(event: IPointerEvent, list: ILeafList, data: IObject): IDropEvent {\n        return {\n            ...event,\n            list,\n            data\n        }\n    },\n\n    getSwipeDirection(angle: number): string {\n        if (angle < -45 && angle > -135) return SwipeEvent.UP\n        else if (angle > 45 && angle < 135) return SwipeEvent.DOWN\n        else if (angle <= 45 && angle >= -45) return SwipeEvent.RIGHT\n        else return SwipeEvent.LEFT\n    },\n\n    getSwipeEventData(startPoint: IPointData, lastDragData: IDragEvent, event: IPointerEvent): ISwipeEvent {\n        return {\n            ...event,\n            moveX: lastDragData.moveX,\n            moveY: lastDragData.moveY,\n            totalX: event.x - startPoint.x,\n            totalY: event.y - startPoint.y,\n            type: I.getSwipeDirection(PointHelper.getAngle(startPoint, event)),\n        }\n    },\n\n\n    getBase(e: IObject): IUIEvent {\n        const pointerUpButtons = e.button === 1 ? 4 : e.button // 0: left, 1: middle, 2: right\n        return {\n            altKey: e.altKey,\n            ctrlKey: e.ctrlKey,\n            shiftKey: e.shiftKey,\n            metaKey: e.metaKey,\n            time: Date.now(),\n            buttons: isUndefined(e.buttons) ? 1 : (e.buttons === 0 ? pointerUpButtons : e.buttons), // touchEvent no button and buttons, set default\n            origin: e\n        } as IUIEvent\n    },\n\n    pathHasEventType(path: ILeafList, type: string): boolean {\n        const { list } = path\n        for (let i = 0, len = list.length; i < len; i++) {\n            if (list[i].hasEvent(type)) return true\n        }\n        return false\n    },\n\n    filterPathByEventType(path: ILeafList, type: string): ILeafList {\n        const find = new LeafList()\n        const { list } = path\n        for (let i = 0, len = list.length; i < len; i++) {\n            if (list[i].hasEvent(type)) find.add(list[i])\n        }\n        return find\n    },\n\n    pathCanDrag(path: ILeafList): boolean {\n        return path && path.list.some(item => LeafHelper.draggable(item) || (!item.isLeafer && item.hasEvent(DragEvent.DRAG)))\n    },\n\n    pathHasOutside(path: ILeafList): boolean { // 滚动条元素\n        return path && path.list.some(item => item.isOutside)\n    },\n}\n\nconst I = InteractionHelper","import { IPointerEvent, IDragEvent, ILeaf, ILeafList, ITimer, IFunction, IPointDataMap, IMoveEvent } from '@leafer/interface'\nimport { PointHelper, LeafList, LeafHelper, isNumber, isString } from '@leafer/core'\n\nimport { MoveEvent, DragEvent, DropEvent, PointerButton } from '@leafer-ui/event'\n\nimport { InteractionHelper } from './InteractionHelper'\nimport { InteractionBase } from './Interaction'\n\n\nconst emptyList = new LeafList()\nconst { getDragEventData, getDropEventData, getSwipeEventData } = InteractionHelper\n\nexport class Dragger {\n\n    public interaction: InteractionBase\n\n    public moving: boolean\n    public dragging: boolean\n\n    public dragData: IDragEvent\n    public downData: IPointerEvent\n\n    public dragDataList: IDragEvent[] = [] // 记录列表备用\n\n    public draggableList: ILeafList\n    public realDraggableList: ILeafList\n    protected dragOverPath: ILeafList\n    protected dragEnterPath: ILeafList\n\n    public dragStartPoints: IPointDataMap\n    public autoMoveTimer: ITimer\n\n    public canAnimate: boolean\n    public canDragOut: boolean\n    public animateWait: IFunction\n\n    constructor(interaction: InteractionBase) {\n        this.interaction = interaction\n    }\n\n    public setDragData(data: IPointerEvent): void { // pointer down\n        if (this.animateWait) this.dragEndReal()\n        this.downData = this.interaction.downData\n        this.dragData = getDragEventData(data, data, data)\n        this.canAnimate = this.canDragOut = true\n    }\n\n    public getList(realDraggable?: boolean, hover?: boolean): ILeafList {\n        const { proxy } = this.interaction.selector\n        const hasProxyList = proxy && proxy.list.length, dragList = DragEvent.list || this.draggableList || emptyList\n        return this.dragging && (hasProxyList ? (realDraggable ? emptyList : new LeafList(hover ? [...proxy.list, ...proxy.dragHoverExclude] : proxy.list)) : dragList) // realDraggable 需排除代理选择器，它有自身的拖拽逻辑\n    }\n\n    public checkDrag(data: IPointerEvent, canDrag: boolean): void {\n        const { interaction } = this\n\n        if (this.moving && data.buttons < 1) {\n            this.canAnimate = false // 防止dragEnd动画\n            interaction.pointerCancel() // 按住中键/右键拖出页面后的up事件接收不到\n            return\n        }\n\n        if (!this.moving && canDrag) {\n            if (this.moving = interaction.canMove(this.downData) || interaction.isHoldRightKey || interaction.isMobileDragEmpty) {\n                (this.dragData as IMoveEvent).moveType = 'drag'\n                interaction.emit(MoveEvent.START, this.dragData)\n            }\n        }\n\n        if (!this.moving) this.dragStart(data, canDrag)\n\n        this.drag(data)\n    }\n\n    public dragStart(data: IPointerEvent, canDrag: boolean): void {\n        if (!this.dragging) {\n            this.dragging = canDrag && PointerButton.left(data)\n            if (this.dragging) {\n                this.interaction.emit(DragEvent.START, this.dragData)\n                this.getDraggableList(this.dragData.path)\n                this.setDragStartPoints(this.realDraggableList = this.getList(true))\n            }\n        }\n    }\n\n    protected setDragStartPoints(list: ILeafList | ILeaf[]): void {\n        this.dragStartPoints = {}\n        list.forEach(leaf => this.dragStartPoints[leaf.innerId] = { x: leaf.x, y: leaf.y })\n    }\n\n    protected getDraggableList(path: ILeafList): void {\n        let leaf: ILeaf\n        for (let i = 0, len = path.length; i < len; i++) {\n            leaf = path.list[i]\n            if (LeafHelper.draggable(leaf)) {\n                this.draggableList = new LeafList(leaf)\n                break\n            }\n        }\n    }\n\n    public drag(data: IPointerEvent): void {\n        const { interaction, dragData, downData } = this\n        const { path, throughPath } = downData\n        this.dragData = getDragEventData(downData, dragData, data)\n        if (throughPath) this.dragData.throughPath = throughPath\n        this.dragData.path = path\n\n        this.dragDataList.push(this.dragData)\n\n        if (this.moving) {\n            data.moving = true;\n            (this.dragData as IMoveEvent).moveType = 'drag'\n            interaction.emit(MoveEvent.BEFORE_MOVE, this.dragData)\n            interaction.emit(MoveEvent.MOVE, this.dragData)\n        } else if (this.dragging) {\n            data.dragging = true\n            this.dragReal()\n            interaction.emit(DragEvent.BEFORE_DRAG, this.dragData)\n            interaction.emit(DragEvent.DRAG, this.dragData)\n        }\n    }\n\n    protected dragReal(isDragEnd?: boolean): void {\n        const { interaction } = this, { running } = interaction\n        const list = this.realDraggableList\n        if (list.length && running) {\n            const { totalX, totalY } = this.dragData, { dragLimitAnimate } = interaction.p\n            const checkLimitMove = !dragLimitAnimate || !!isDragEnd\n            list.forEach(leaf => {\n                if (leaf.draggable) {\n                    const axisDrag = isString(leaf.draggable)\n                    const move = DragEvent.getValidMove(leaf, this.dragStartPoints[leaf.innerId], { x: totalX, y: totalY }, checkLimitMove || axisDrag)\n                    if (dragLimitAnimate && !axisDrag && isDragEnd) LeafHelper.animateMove(leaf, move, isNumber(dragLimitAnimate) ? dragLimitAnimate : 0.3)\n                    else leaf.move(move)\n                }\n            })\n        }\n    }\n\n    public dragOverOrOut(data: IPointerEvent): void {\n        const { interaction } = this\n        const { dragOverPath } = this\n        const { path } = data\n        this.dragOverPath = path\n\n        if (dragOverPath) {\n            if (path.indexAt(0) !== dragOverPath.indexAt(0)) {\n                interaction.emit(DragEvent.OUT, data, dragOverPath)\n                interaction.emit(DragEvent.OVER, data, path)\n            }\n        } else interaction.emit(DragEvent.OVER, data, path)\n    }\n\n    public dragEnterOrLeave(data: IPointerEvent): void {\n        const { interaction } = this\n        const { dragEnterPath } = this\n        const { path } = data\n\n        interaction.emit(DragEvent.LEAVE, data, dragEnterPath, path)\n        interaction.emit(DragEvent.ENTER, data, path, dragEnterPath)\n        this.dragEnterPath = path\n    }\n\n    public dragEnd(data: IPointerEvent): void {\n        if (!this.dragging && !this.moving) return\n        if (this.checkDragEndAnimate(data)) return\n        this.dragEndReal(data)\n    }\n\n    public dragEndReal(data?: IPointerEvent): void {\n        const { interaction, downData, dragData } = this\n        if (!data) data = dragData\n        const { path, throughPath } = downData\n        const endDragData = getDragEventData(downData, data, data)\n        if (throughPath) endDragData.throughPath = throughPath\n        endDragData.path = path\n\n        if (this.moving) {\n            this.moving = false;\n            (endDragData as IMoveEvent).moveType = 'drag'\n            interaction.emit(MoveEvent.END, endDragData)\n        }\n\n        if (this.dragging) {\n            const dropList = this.getList()\n\n            this.dragging = false\n            if (interaction.p.dragLimitAnimate) this.dragReal(true)\n            interaction.emit(DragEvent.END, endDragData)\n\n            this.swipe(data, downData, dragData, endDragData)\n            this.drop(data, dropList, this.dragEnterPath)\n        }\n\n        this.autoMoveCancel()\n        this.dragReset()\n        this.animate(null, 'off')\n    }\n\n\n    protected swipe(data: IPointerEvent, downData: IPointerEvent, dragData: IDragEvent, endDragData: IDragEvent): void {\n        const { interaction } = this\n        if (PointHelper.getDistance(downData, data) > interaction.config.pointer.swipeDistance) {\n            const swipeData = getSwipeEventData(downData, dragData, endDragData)\n            this.interaction.emit(swipeData.type, swipeData)\n        }\n    }\n\n    protected drop(data: IPointerEvent, dropList: ILeafList, dragEnterPath: ILeafList): void {\n        const dropData = getDropEventData(data, dropList, DragEvent.data)\n        dropData.path = dragEnterPath\n        this.interaction.emit(DropEvent.DROP, dropData)\n        this.interaction.emit(DragEvent.LEAVE, data, dragEnterPath)\n    }\n\n    protected dragReset(): void {\n        DragEvent.list = DragEvent.data = this.draggableList = this.dragData = this.downData = this.dragOverPath = this.dragEnterPath = null\n        this.dragDataList = []\n    }\n\n\n    // @leafer-in/viewport will rewrite\n\n    public checkDragEndAnimate(_data: IPointerEvent, _speed?: number): boolean | number { return false }\n\n    public animate(_func?: IFunction, _off?: 'off'): void { }  // dragEnd animation\n\n    public stopAnimate(): void { }\n\n    public checkDragOut(_data: IPointerEvent): void { }\n\n    public autoMoveOnDragOut(_data: IPointerEvent): void { }\n\n    public autoMoveCancel(): void { }\n\n    // ---\n\n    public destroy(): void {\n        this.dragReset()\n    }\n}","import { IUIEvent, ILeaf, ILeafList } from '@leafer/interface'\nimport { EventCreator, Debug } from '@leafer/core'\nimport { State } from '@leafer-ui/draw'\n\n\nconst debug = Debug.get('emit')\n\nexport function emit(type: string, data: IUIEvent, path?: ILeafList, excludePath?: ILeafList): void {\n    if (!path && !data.path) return\n\n    let leaf: ILeaf\n    data.type = type\n\n    if (path) data = { ...data, path }\n    else path = data.path\n\n    data.target = path.indexAt(0)\n\n    try {\n\n        // capture\n        for (let i = path.length - 1; i > -1; i--) {\n            leaf = path.list[i]\n            if (emitEvent(leaf, type, data, true, excludePath)) return\n            if (leaf.isApp) emitAppChildren(leaf, type, data, true, excludePath) //  other leafer\n        }\n\n        // bubble\n        for (let i = 0, len = path.length; i < len; i++) {\n            leaf = path.list[i]\n            if (leaf.isApp) emitAppChildren(leaf, type, data, false, excludePath) //  other leafer\n            if (emitEvent(leaf, type, data, false, excludePath)) return\n        }\n\n    } catch (e) {\n        debug.error(e)\n    }\n}\n\nconst allowTypes = ['move', 'zoom', 'rotate', 'key']\nfunction emitAppChildren(leaf: ILeaf, type: string, data: IUIEvent, capture?: boolean, excludePath?: ILeafList): void {\n    if (allowTypes.some(name => type.startsWith(name)) && leaf.__.hitChildren && !exclude(leaf, excludePath)) {\n        let child: ILeaf\n        for (let i = 0, len = leaf.children.length; i < len; i++) {\n            child = leaf.children[i]\n            if (!data.path.has(child) && child.__.hittable) emitEvent(child, type, data, capture, excludePath) //  other leafer\n        }\n    }\n}\n\nfunction emitEvent(leaf: ILeaf, type: string, data: IUIEvent, capture?: boolean, excludePath?: ILeafList): boolean {\n    if (leaf.destroyed) return false\n    if (leaf.__.hitSelf && !exclude(leaf, excludePath)) {\n\n        if (State.updateEventStyle && !capture) State.updateEventStyle(leaf, type) // hoverStyle / pressStyle\n\n        if (leaf.hasEvent(type, capture)) {\n            data.phase = capture ? 1 : ((leaf === data.target) ? 2 : 3)\n            const event = EventCreator.get(type, data)\n            leaf.emitEvent(event, capture)\n            if (event.isStop) return true\n        }\n    }\n    return false\n}\n\nfunction exclude(leaf: ILeaf, excludePath?: ILeafList): boolean {\n    return excludePath && excludePath.has(leaf)\n}","import { IInteractionConfig } from '@leafer/interface'\n\nexport const config: IInteractionConfig = {\n    wheel: {\n        zoomSpeed: 0.5,\n        moveSpeed: 0.5,\n        rotateSpeed: 0.5,\n        delta: { x: 80 / 4, y: 8.0 }, // 基准速度（会影响zoomSpeed)，可根据不同系统、浏览器细化定制\n    },\n    pointer: {\n        type: 'pointer',\n        snap: true,\n        hitRadius: 5,\n        tapTime: 120,\n        longPressTime: 800,\n        transformTime: 500,\n        hover: true,\n        dragHover: true,\n        dragDistance: 2,\n        swipeDistance: 20,\n    },\n    touch: {\n        preventDefault: 'auto'\n    },\n    multiTouch: {},\n    move: { autoDistance: 2 },\n    zoom: {},\n    cursor: true,\n    keyEvent: true\n}","import { IUIEvent, IPointerEvent, ILeaf, IInteraction, IInteractionConfig, ITransformer, ILeafList, IMoveEvent, IZoomEvent, IRotateEvent, IWheelEvent, ISelector, IBounds, IEventListenerId, IInteractionCanvas, ITimer, IKeepTouchData, IKeyEvent, IPickOptions, ICursorType, IBooleanMap, IPickBottom, IClientPointData, IPointData, ILeaferConfig, IMoveConfig, IPointerConfig } from '@leafer/interface'\nimport { LeaferEvent, ResizeEvent, LeafList, Bounds, PointHelper, DataHelper, Platform, isNumber } from '@leafer/core'\n\nimport { IApp } from '@leafer-ui/interface'\nimport { PointerEvent, DropEvent, KeyEvent, PointerButton, Keyboard } from '@leafer-ui/event'\n\nimport { Dragger } from './Dragger'\nimport { emit } from './emit'\nimport { InteractionHelper } from './InteractionHelper'\nimport { config } from './config'\n\n\nconst { pathHasEventType, pathCanDrag, pathHasOutside } = InteractionHelper\nexport class InteractionBase implements IInteraction {\n\n    public target: ILeaf\n    public canvas: IInteractionCanvas\n    public selector: ISelector\n\n    public running: boolean\n\n    public get dragging(): boolean { return this.dragger.dragging }\n    public get transforming(): boolean { return this.transformer.transforming }\n\n    public get moveMode(): boolean { return this.m.drag === true || this.isHoldSpaceKey || this.isHoldMiddleKey || (this.isHoldRightKey && this.dragger.moving) || this.isDragEmpty }\n    public get canHover(): boolean { return this.p.hover && !(this.config as ILeaferConfig).mobile }\n\n    public get isDragEmpty(): boolean { return this.m.dragEmpty && this.isRootPath(this.hoverData) && (!this.downData || this.isRootPath(this.downData)) }\n    public get isMobileDragEmpty(): boolean { return this.m.dragEmpty && !this.canHover && this.downData && this.isTreePath(this.downData) }\n    public get isHoldMiddleKey(): boolean { return this.m.holdMiddleKey && this.downData && PointerButton.middle(this.downData) }\n    public get isHoldRightKey(): boolean { return this.m.holdRightKey && this.downData && PointerButton.right(this.downData) }\n    public get isHoldSpaceKey(): boolean { return this.m.holdSpaceKey && Keyboard.isHoldSpaceKey() }\n\n    public config: IInteractionConfig = DataHelper.clone(config)\n    public get m(): IMoveConfig { return this.config.move }\n    public get p(): IPointerConfig { return this.config.pointer }\n\n    public cursor: ICursorType | ICursorType[]\n    public get hitRadius(): number { return this.p.hitRadius }\n\n    public bottomList?: IPickBottom[]\n\n    public shrinkCanvasBounds: IBounds\n\n    public downData: IPointerEvent\n    public hoverData: IPointerEvent\n    public focusData: ILeaf\n\n    public downTime: number\n\n    protected overPath: LeafList\n    protected enterPath: LeafList\n\n    protected waitMenuTap: boolean\n    protected waitRightTap: boolean\n    protected waitTap: boolean\n    protected longPressTimer: ITimer\n    protected longPressed: boolean\n    protected tapCount = 0\n    protected tapTimer: ITimer\n\n    public dragger: Dragger\n    public transformer: ITransformer\n\n    protected __eventIds: IEventListenerId[]\n    protected defaultPath: ILeafList\n\n    protected downKeyMap: IBooleanMap = {}\n\n    constructor(target: ILeaf, canvas: IInteractionCanvas, selector: ISelector, userConfig?: IInteractionConfig) {\n        this.target = target\n        this.canvas = canvas\n        this.selector = selector\n        this.defaultPath = new LeafList(target)\n\n        this.createTransformer()\n        this.dragger = new Dragger(this)\n\n        if (userConfig) this.config = DataHelper.default(userConfig, this.config)\n        this.__listenEvents()\n    }\n\n\n    public start(): void {\n        this.running = true\n    }\n\n    public stop(): void {\n        this.running = false\n    }\n\n\n    public receive(_event: any): void { }\n\n\n    public pointerDown(data?: IPointerEvent, useDefaultPath?: boolean): void {\n        if (!data) data = this.hoverData\n        if (!data) return\n\n        PointerButton.defaultLeft(data)\n        this.updateDownData(data)\n        this.checkPath(data, useDefaultPath)\n\n        this.downTime = Date.now()\n\n        this.emit(PointerEvent.BEFORE_DOWN, data) // downData maybe changed\n        this.emit(PointerEvent.DOWN, data)\n\n        if (PointerButton.left(data)) {\n            this.tapWait()\n            this.longPressWait(data)\n        }\n\n        this.waitRightTap = PointerButton.right(data)\n\n        this.dragger.setDragData(data) // must after down event\n        if (!this.isHoldRightKey) this.updateCursor(data)\n    }\n\n    public pointerMove(data?: IPointerEvent): void {\n        if (!data) data = this.hoverData\n        if (!data) return\n\n        const { downData } = this\n        if (downData) PointerButton.defaultLeft(data)\n\n        const hit = this.canvas.bounds.hitPoint(data)\n        if (hit || downData) {\n            this.pointerMoveReal(data)\n            if (downData) this.dragger.checkDragOut(data)\n        }\n    }\n\n    public pointerMoveReal(data: IPointerEvent): void {\n        this.emit(PointerEvent.BEFORE_MOVE, data, this.defaultPath)\n\n        if (this.downData) {\n            const canDrag = PointHelper.getDistance(this.downData, data) > this.p.dragDistance\n            if (canDrag) {\n                this.pointerWaitCancel()\n                this.waitRightTap = false\n            }\n\n            this.dragger.checkDrag(data, canDrag)\n        }\n\n        if (!this.dragger.moving) {\n            this.updateHoverData(data)\n            this.checkPath(data)\n\n            this.emit(PointerEvent.MOVE, data)\n\n            this.pointerHover(data)\n\n            if (this.dragging) {\n                this.dragger.dragOverOrOut(data)\n                this.dragger.dragEnterOrLeave(data)\n            }\n        }\n\n        this.updateCursor(this.downData || data)\n    }\n\n    public pointerUp(data?: IPointerEvent): void {\n        const { downData } = this\n        if (!data) data = downData\n        if (!downData) return\n\n        PointerButton.defaultLeft(data)\n        data.multiTouch = downData.multiTouch\n\n        this.findPath(data)\n        const upData = { ...data, path: data.path.clone() }\n\n        data.path.addList(downData.path.list)  // downPath必须触发\n\n        this.checkPath(data)\n\n        this.downData = null // must before pointer.up event\n        this.emit(PointerEvent.BEFORE_UP, data)\n        this.emit(PointerEvent.UP, data)\n\n        this.touchLeave(data)\n\n        if (!data.isCancel) {\n            this.tap(data)\n            this.menuTap(data)\n        }\n\n        this.dragger.dragEnd(data)\n\n        this.updateCursor(upData)\n    }\n\n    public pointerCancel(): void {\n        const data = { ...this.dragger.dragData }\n        data.isCancel = true\n        this.pointerUp(data)\n    }\n\n\n    // context menu\n    public menu(data: IPointerEvent): void {\n        this.findPath(data)\n        this.emit(PointerEvent.MENU, data)\n        this.waitMenuTap = true\n        if (!this.downData && this.waitRightTap) this.menuTap(data) // fix: Windows 触摸屏双击右键菜单事件会在pointer.up之后触发\n    }\n\n    public menuTap(data: IPointerEvent): void {\n        if (this.waitRightTap && this.waitMenuTap) {\n            this.emit(PointerEvent.MENU_TAP, data)\n            this.waitRightTap = this.waitMenuTap = false\n        }\n    }\n\n    // @leafer-in/viewport will rewrite:  transform viewport\n\n    public createTransformer(): void { }\n\n    public move(_data: IMoveEvent): void { }\n\n    public zoom(_data: IZoomEvent): void { }\n\n    public rotate(_data: IRotateEvent): void { }\n\n    public transformEnd(): void { }\n\n    public wheel(_data: IWheelEvent): void { }\n\n    public multiTouch(_data: IUIEvent, _list: IKeepTouchData[]): void { }\n\n    // ---\n\n    // key\n\n    public keyDown(data: IKeyEvent): void {\n        if (!this.config.keyEvent) return\n\n        this.emit(KeyEvent.BEFORE_DOWN, data, this.defaultPath) // 键盘按下前出发，还没有setDownCode\n\n        const { code } = data\n        if (!this.downKeyMap[code]) {\n            this.downKeyMap[code] = true\n            Keyboard.setDownCode(code)\n\n            this.emit(KeyEvent.HOLD, data, this.defaultPath)\n            if (this.moveMode) {\n                this.cancelHover()\n                this.updateCursor()\n            }\n        }\n        this.emit(KeyEvent.DOWN, data, this.defaultPath)\n    }\n\n    public keyUp(data: IKeyEvent): void {\n        if (!this.config.keyEvent) return\n\n        this.emit(KeyEvent.BEFORE_UP, data, this.defaultPath) // 键盘弹起前出发，还没有setUpCode\n\n        const { code } = data\n        this.downKeyMap[code] = false\n        Keyboard.setUpCode(code)\n\n        this.emit(KeyEvent.UP, data, this.defaultPath)\n        if (this.cursor === 'grab') this.updateCursor()\n    }\n\n\n    // helper\n    protected pointerHover(data: IPointerEvent): void {\n        if (this.canHover && !(this.dragging && !this.p.dragHover)) {\n            data.path || (data.path = new LeafList()) // 离开画布的情况\n            this.pointerOverOrOut(data)\n            this.pointerEnterOrLeave(data)\n        }\n    }\n\n    protected pointerOverOrOut(data: IPointerEvent): void {\n        const { path } = data\n        const { overPath } = this\n        this.overPath = path\n\n        if (overPath) {\n            if (path.indexAt(0) !== overPath.indexAt(0)) {\n                this.emit(PointerEvent.OUT, data, overPath)\n                this.emit(PointerEvent.OVER, data, path)\n            }\n        } else {\n            this.emit(PointerEvent.OVER, data, path)\n        }\n    }\n\n    protected pointerEnterOrLeave(data: IPointerEvent): void {\n        let { path } = data\n\n        if (this.downData && !this.moveMode) {\n            path = path.clone()\n            this.downData.path.forEach(leaf => path.add(leaf))\n        }\n\n        const { enterPath } = this\n        this.enterPath = path\n\n        this.emit(PointerEvent.LEAVE, data, enterPath, path)\n        this.emit(PointerEvent.ENTER, data, path, enterPath)\n    }\n\n    protected touchLeave(data: IPointerEvent): void {\n        if (data.pointerType === 'touch') {\n            if (this.enterPath) {\n                this.emit(PointerEvent.LEAVE, data)\n                if (this.dragger.dragging) this.emit(DropEvent.LEAVE, data)\n            }\n        }\n    }\n\n    protected tap(data: IPointerEvent): void {\n        const { pointer } = this.config\n\n        const hasLong = this.longTap(data)\n        if (!pointer.tapMore && hasLong) return // long_press / long_tap\n\n        if (!this.waitTap) return\n        if (pointer.tapMore) this.emitTap(data)\n\n        const useTime = Date.now() - this.downTime\n\n        const hasDouble = [PointerEvent.DOUBLE_TAP, PointerEvent.DOUBLE_CLICK].some(type => pathHasEventType(data.path, type))\n\n        if (useTime < pointer.tapTime + 50 && hasDouble) {\n\n            this.tapCount++\n            if (this.tapCount === 2) {\n                this.tapWaitCancel()\n                this.emitDoubleTap(data)\n            } else {\n                clearTimeout(this.tapTimer)\n                this.tapTimer = setTimeout(() => {\n                    if (!pointer.tapMore) {\n                        this.tapWaitCancel()\n                        this.emitTap(data)\n                    }\n                }, pointer.tapTime)\n            }\n\n        } else {\n\n            if (!pointer.tapMore) {\n                this.tapWaitCancel()\n                this.emitTap(data)\n            }\n        }\n    }\n\n\n    // update\n    public findPath(data: IPointerEvent, options?: IPickOptions): ILeafList {\n        const { hitRadius, through } = this.p\n        const { bottomList, target } = this\n        if (!Platform.backgrounder && !data.origin) target && target.updateLayout() // 模拟交互\n        const find = this.selector.getByPoint(data, hitRadius, { bottomList, name: data.type, ...(options || { through }) })\n        if (find.throughPath) data.throughPath = find.throughPath\n        data.path = find.path\n        return find.path\n    }\n\n    public isRootPath(data: IPointerEvent): boolean {\n        return data && (data.path.list[0] as ILeaf).isLeafer\n    }\n\n    public isTreePath(data: IPointerEvent): boolean {\n        const app = this.target.app as IApp\n        if (!app || !app.isApp) return false\n        return app.editor && (!data.path.has(app.editor) && data.path.has(app.tree) && !(data.target as ILeaf).syncEventer) // 当dragEmpty为true时，在手机端(pointer.hover为false)可以拖动tree层（编辑器选中的元素除外）\n    }\n\n    protected checkPath(data: IPointerEvent, useDefaultPath?: boolean): void {\n        if (useDefaultPath || (this.moveMode && !pathHasOutside(data.path))) data.path = this.defaultPath\n    }\n\n    public canMove(data: IPointerEvent): boolean { // moveMode and path can move\n        return data && (this.moveMode || (this.m.drag === 'auto' && !pathCanDrag(data.path))) && !pathHasOutside(data.path)\n    }\n\n\n    public isDrag(leaf: ILeaf): boolean {\n        return this.dragger.getList().has(leaf)\n    }\n\n    public isPress(leaf: ILeaf): boolean {\n        return this.downData && this.downData.path.has(leaf)\n    }\n\n    public isHover(leaf: ILeaf): boolean {\n        return this.enterPath && this.enterPath.has(leaf)\n    }\n\n    public isFocus(leaf: ILeaf): boolean {\n        return this.focusData === leaf\n    }\n\n\n    public cancelHover(): void {\n        const { hoverData } = this\n        if (hoverData) {\n            hoverData.path = this.defaultPath\n            this.pointerHover(hoverData)\n        }\n    }\n\n    public stopDragAnimate(): void {\n        this.dragger.stopAnimate()\n    }\n\n\n    public updateDownData(data?: IPointerEvent, options?: IPickOptions, merge?: boolean): void {\n        const { downData } = this\n        if (!data && downData) data = downData\n        if (!data) return\n        this.findPath(data, options)\n        if (merge && downData) data.path.addList(downData.path.list)\n        this.downData = data\n    }\n\n    public updateHoverData(data?: IPointerEvent): void {\n        if (!data) data = this.hoverData\n        if (!data) return\n        this.findPath(data, { exclude: this.dragger.getList(false, true), name: PointerEvent.MOVE })\n        this.hoverData = data\n    }\n\n    public updateCursor(data?: IPointerEvent): void {\n        if (!this.config.cursor || !this.canHover) return\n\n        if (!data) {\n            this.updateHoverData()\n            data = this.downData || this.hoverData\n        }\n\n        if (this.dragger.moving) {\n            return this.setCursor('grabbing')\n        } else if (this.canMove(data)) {\n            return this.setCursor(this.downData ? 'grabbing' : 'grab')\n        } else if (!data) return\n\n        let leaf: ILeaf, cursor: ICursorType | ICursorType[]\n\n        const { path } = data\n        for (let i = 0, len = path.length; i < len; i++) {\n            leaf = path.list[i]\n            cursor = (leaf.syncEventer && leaf.syncEventer.cursor) || leaf.cursor\n            if (cursor) break\n        }\n\n        this.setCursor(cursor)\n    }\n\n    public setCursor(cursor: ICursorType | ICursorType[]): void {\n        this.cursor = cursor\n    }\n\n    public getLocal(clientPoint: IClientPointData, updateClient?: boolean): IPointData {\n        const clientBounds = this.canvas.getClientBounds(updateClient)\n        const point = { x: clientPoint.clientX - clientBounds.x, y: clientPoint.clientY - clientBounds.y }\n\n        // 兼容clientBounds进行了transform的情况\n        const { bounds } = this.canvas\n        point.x *= bounds.width / clientBounds.width\n        point.y *= bounds.height / clientBounds.height\n\n        if (this.p.snap) PointHelper.round(point)\n        return point\n    }\n\n\n    protected emitTap(data: IPointerEvent) {\n        this.emit(PointerEvent.TAP, data)\n        this.emit(PointerEvent.CLICK, data)\n    }\n\n    protected emitDoubleTap(data: IPointerEvent) {\n        this.emit(PointerEvent.DOUBLE_TAP, data)\n        this.emit(PointerEvent.DOUBLE_CLICK, data)\n    }\n\n    public pointerWaitCancel(): void {\n        this.tapWaitCancel()\n        this.longPressWaitCancel()\n    }\n\n    protected tapWait(): void {\n        clearTimeout(this.tapTimer)\n        this.waitTap = true\n    }\n\n    protected tapWaitCancel(): void {\n        if (this.waitTap) {\n            clearTimeout(this.tapTimer)\n            this.waitTap = false\n            this.tapCount = 0\n        }\n    }\n\n    protected longPressWait(data: IPointerEvent): void {\n        clearTimeout(this.longPressTimer)\n        this.longPressTimer = setTimeout(() => {\n            this.longPressed = true\n            this.emit(PointerEvent.LONG_PRESS, data)\n        }, this.p.longPressTime)\n    }\n\n    protected longTap(data: IPointerEvent): boolean {\n        let hasLong\n        if (this.longPressed) {\n            this.emit(PointerEvent.LONG_TAP, data)\n            if (pathHasEventType(data.path, PointerEvent.LONG_TAP) || pathHasEventType(data.path, PointerEvent.LONG_PRESS)) hasLong = true\n        }\n        this.longPressWaitCancel()\n        return hasLong\n    }\n\n    protected longPressWaitCancel(): void {\n        if (this.longPressTimer) {\n            clearTimeout(this.longPressTimer)\n            this.longPressed = false\n        }\n    }\n\n    protected __onResize(): void {\n        const { dragOut } = this.m\n        this.shrinkCanvasBounds = new Bounds(this.canvas.bounds)\n        this.shrinkCanvasBounds.spread(-(isNumber(dragOut) ? dragOut : 2))\n    }\n\n    protected __listenEvents(): void {\n        const { target } = this\n        this.__eventIds = [target.on_(ResizeEvent.RESIZE, this.__onResize, this)]\n        target.once(LeaferEvent.READY, () => this.__onResize())\n    }\n\n    protected __removeListenEvents(): void {\n        this.target.off_(this.__eventIds)\n        this.__eventIds.length = 0\n    }\n\n\n    public emit(type: string, data: IUIEvent, path?: ILeafList, excludePath?: ILeafList): void {\n        if (this.running) emit(type, data, path, excludePath)\n    }\n\n\n    public destroy(): void {\n        if (this.__eventIds.length) {\n            this.stop()\n            this.__removeListenEvents()\n            this.dragger.destroy()\n            if (this.transformer) this.transformer.destroy()\n            this.downData = this.overPath = this.enterPath = null\n        }\n    }\n\n}","import { ICursorTypeMap, ICursorType } from '@leafer/interface'\n\n\nexport class Cursor {\n\n    static custom: ICursorTypeMap = {}\n\n    static set(name: string, value: ICursorType | ICursorType[]): void {\n        this.custom[name] = value\n    }\n\n    static get(name: string): ICursorType | ICursorType[] {\n        return this.custom[name]\n    }\n\n}","import { IHitCanvasManager, ILeaf, IHitCanvas, ILeafList, ILeaferCanvasConfig } from '@leafer/interface'\nimport { CanvasManager, LeafList, Creator } from '@leafer/core'\n\n\nexport class HitCanvasManager extends CanvasManager implements IHitCanvasManager {\n\n    public maxTotal = 1000 // 最多缓存多少张画布\n\n    protected pathList: ILeafList = new LeafList()\n    protected pixelList: ILeafList = new LeafList()\n\n    public getPixelType(leaf: ILeaf, config?: ILeaferCanvasConfig): IHitCanvas {\n        this.__autoClear()\n        this.pixelList.add(leaf)\n        return Creator.hitCanvas(config)\n    }\n\n    public getPathType(leaf: ILeaf): IHitCanvas {\n        this.__autoClear()\n        this.pathList.add(leaf)\n        return Creator.hitCanvas()\n    }\n\n    public clearImageType(): void {\n        this.__clearLeafList(this.pixelList)\n    }\n\n    public clearPathType(): void {\n        this.__clearLeafList(this.pathList)\n    }\n\n    protected __clearLeafList(leafList: ILeafList): void {\n        if (leafList.length) {\n            leafList.forEach(leaf => {\n                if (leaf.__hitCanvas) {\n                    leaf.__hitCanvas.destroy()\n                    leaf.__hitCanvas = null\n                }\n            })\n            leafList.reset()\n        }\n    }\n\n    protected __autoClear(): void {\n        if (this.pathList.length + this.pixelList.length > this.maxTotal) this.clear()\n    }\n\n    public clear(): void {\n        this.clearPathType()\n        this.clearImageType()\n    }\n\n}","import { Platform, Creator } from '@leafer/core'\n\nimport { ISelector, ILeaf } from '@leafer-ui/interface'\n\n\nPlatform.getSelector = function (leaf: ILeaf): ISelector {\n    return leaf.leafer ? leaf.leafer.selector : (Platform.selector || (Platform.selector = Creator.selector()))\n}","import { IRadiusPointData, ILeaferCanvas, IPointData, IBranch } from '@leafer/interface'\nimport { Leaf, PointHelper, BoundsHelper, Platform } from '@leafer/core'\n\n\nconst { toInnerRadiusPointOf, copyRadiusPoint } = PointHelper\nconst { hitRadiusPoint, hitPoint } = BoundsHelper\nconst inner = {} as IRadiusPointData, worldRadiusPoint = {} as IRadiusPointData\n\nconst leaf = Leaf.prototype\n\nleaf.hit = function (worldPoint: IPointData, hitRadius: number = 0): boolean {\n    this.updateLayout()\n\n    copyRadiusPoint(worldRadiusPoint, worldPoint, hitRadius)\n\n    const world = this.__world\n    if (hitRadius ? !hitRadiusPoint(world, worldRadiusPoint) : !hitPoint(world, worldRadiusPoint)) return false\n\n    return this.isBranch ? Platform.getSelector(this).hitPoint({ ...worldRadiusPoint }, hitRadius, { target: this as unknown as IBranch }) : this.__hitWorld(worldRadiusPoint)\n}\n\nleaf.__hitWorld = function (point: IRadiusPointData, forceHitFill?: boolean): boolean {\n    const data = this.__\n    if (!data.hitSelf) return false\n\n    const world = this.__world, layout = this.__layout\n    const isSmall = world.width < 10 && world.height < 10\n\n    if (data.hitRadius) {\n        copyRadiusPoint(inner, point, data.hitRadius)\n        point = inner\n    }\n\n    toInnerRadiusPointOf(point, world, inner)\n\n    if (data.hitBox || isSmall) {\n        if (BoundsHelper.hitRadiusPoint(layout.boxBounds, inner)) return true\n        if (isSmall) return false\n    }\n\n    if (layout.hitCanvasChanged || !this.__hitCanvas) {\n        this.__updateHitCanvas()\n        if (!layout.boundsChanged) layout.hitCanvasChanged = false\n    }\n\n    return this.__hit(inner, forceHitFill)\n}\n\nleaf.__hitFill = function (inner: IRadiusPointData): boolean { const h = this.__hitCanvas; return h && h.hitFill(inner, this.__.windingRule) }\n\nleaf.__hitStroke = function (inner: IRadiusPointData, strokeWidth: number): boolean { const h = this.__hitCanvas; return h && h.hitStroke(inner, strokeWidth) }\n\nleaf.__hitPixel = function (inner: IRadiusPointData): boolean { const h = this.__hitCanvas; return h && h.hitPixel(inner, this.__layout.renderBounds, h.hitScale) }\n\nleaf.__drawHitPath = function (canvas: ILeaferCanvas): void { canvas && this.__drawRenderPath(canvas) }","import { IRadiusPointData } from '@leafer/interface'\nimport { Platform, Matrix, ImageManager, tempBounds } from '@leafer/core'\nimport { UI } from '@leafer-ui/draw'\n\n\nconst matrix = new Matrix()\nconst ui = UI.prototype\n\nui.__updateHitCanvas = function (): void {\n\n    if (this.__box) this.__box.__updateHitCanvas()\n\n    const { hitCanvasManager } = this.leafer || (this.parent && this.parent.leafer) || {}// 兼容 boxStyle\n    if (!hitCanvasManager) return\n\n    const data = this.__\n    const isHitPixelFill = (data.__isAlphaPixelFill || data.__isCanvas) && data.hitFill === 'pixel'\n    const isHitPixelStroke = data.__isAlphaPixelStroke && data.hitStroke === 'pixel'\n    const isHitPixel = isHitPixelFill || isHitPixelStroke\n\n    if (!this.__hitCanvas) this.__hitCanvas = isHitPixel ? hitCanvasManager.getPixelType(this, { contextSettings: { willReadFrequently: true } }) : hitCanvasManager.getPathType(this)\n\n    const h = this.__hitCanvas\n\n    if (isHitPixel) {\n        const { renderBounds } = this.__layout\n        const size = Platform.image.hitCanvasSize\n        const scale = h.hitScale = tempBounds.set(0, 0, size, size).getFitMatrix(renderBounds).a\n        const { x, y, width, height } = tempBounds.set(renderBounds).scale(scale)\n        h.resize({ width, height, pixelRatio: 1 })\n        h.clear()\n\n        ImageManager.patternLocked = true\n        this.__renderShape(h, { matrix: matrix.setWith(this.__world).scaleWith(1 / scale).invertWith().translate(-x, -y), snapshot: true, ignoreFill: !isHitPixelFill, ignoreStroke: !isHitPixelStroke }) // 矩阵\n        ImageManager.patternLocked = false\n        h.resetTransform()\n\n        data.__isHitPixel = true\n    } else {\n        data.__isHitPixel && (data.__isHitPixel = false)\n    }\n\n    this.__drawHitPath(h)\n    h.setStrokeOptions(data)\n\n}\n\nui.__hit = function (inner: IRadiusPointData, forceHitFill?: boolean): boolean {\n\n    if (this.__box && this.__box.__hit(inner)) return true\n\n    // hit pixel\n    const data = this.__\n    if (data.__isHitPixel && this.__hitPixel(inner)) return true\n\n    // hit path\n    const { hitFill } = data\n    const needHitFillPath = ((data.fill || data.__isCanvas) && (hitFill === 'path' || (hitFill === 'pixel' && !(data.__isAlphaPixelFill || data.__isCanvas)))) || hitFill === 'all' || forceHitFill\n    if (needHitFillPath && this.__hitFill(inner)) return true\n\n    const { hitStroke, __maxStrokeWidth: strokeWidth } = data\n    const needHitStrokePath = (data.stroke && (hitStroke === 'path' || (hitStroke === 'pixel' && !data.__isAlphaPixelStroke))) || hitStroke === 'all'\n    if (!needHitFillPath && !needHitStrokePath) return false\n\n    const radiusWidth = inner.radiusX * 2\n    let hitWidth = radiusWidth\n\n    if (needHitStrokePath) {\n        switch (data.strokeAlign) {\n            case 'inside':\n                hitWidth += strokeWidth * 2\n                if (!needHitFillPath && this.__hitFill(inner) && this.__hitStroke(inner, hitWidth)) return true\n                hitWidth = radiusWidth\n                break\n            case 'center':\n                hitWidth += strokeWidth\n                break\n            case 'outside':\n                hitWidth += strokeWidth * 2\n                if (!needHitFillPath) {\n                    if (!this.__hitFill(inner) && this.__hitStroke(inner, hitWidth)) return true\n                    hitWidth = radiusWidth\n                }\n                break\n        }\n    }\n\n    return hitWidth ? this.__hitStroke(inner, hitWidth) : false\n}","import { IRadiusPointData } from '@leafer/interface'\nimport { BoundsHelper } from '@leafer/core'\nimport { UI, Rect, Box } from '@leafer-ui/draw'\n\n\nconst ui = UI.prototype, rect = Rect.prototype, box = Box.prototype\n\n// hit \n\nrect.__updateHitCanvas = box.__updateHitCanvas = function () {\n    if (this.stroke || this.cornerRadius || ((this.fill || this.__.__isCanvas) && this.hitFill === 'pixel') || this.hitStroke === 'all') ui.__updateHitCanvas.call(this)\n    else if (this.__hitCanvas) this.__hitCanvas = null\n}\n\nrect.__hitFill = box.__hitFill = function (inner: IRadiusPointData): boolean {\n    return this.__hitCanvas ? ui.__hitFill.call(this, inner) : BoundsHelper.hitRadiusPoint(this.__layout.boxBounds, inner)\n}","import { ILeaferCanvas } from '@leafer/interface'\nimport { Text } from '@leafer-ui/draw'\n\n\nText.prototype.__drawHitPath = function (canvas: ILeaferCanvas): void {\n    const { __lineHeight, fontSize, __baseLine, __letterSpacing, __textDrawData: data } = this.__\n\n    canvas.beginPath()\n\n    if (__letterSpacing < 0) this.__drawPathByBox(canvas)\n    else data.rows.forEach(row => canvas.rect(row.x, row.y - __baseLine, row.width, __lineHeight < fontSize ? fontSize : __lineHeight))\n}\n\n","import { Platform } from '@leafer/core'\n\nimport { IPointData, IPickOptions, IPickResult } from '@leafer-ui/interface'\nimport { Group, emptyData } from '@leafer-ui/draw'\n\n\nGroup.prototype.pick = function (hitPoint: IPointData, options?: IPickOptions): IPickResult {\n    options || (options = emptyData)\n    this.updateLayout()\n    return Platform.getSelector(this).getByPoint(hitPoint, options.hitRadius || 0, { ...options, target: this })\n}","\nimport { IPointData, IRadiusPointData, IWindingRule } from '@leafer/interface'\nimport { LeaferCanvasBase, tempBounds } from '@leafer/core'\n\n\nconst canvas = LeaferCanvasBase.prototype\n\ncanvas.hitFill = function (point: IPointData, fillRule?: IWindingRule): boolean {\n    return fillRule ? this.context.isPointInPath(point.x, point.y, fillRule) : this.context.isPointInPath(point.x, point.y)\n}\n\ncanvas.hitStroke = function (point: IPointData, strokeWidth?: number): boolean {\n    this.strokeWidth = strokeWidth\n    return this.context.isPointInStroke(point.x, point.y)\n}\n\ncanvas.hitPixel = function (radiusPoint: IRadiusPointData, offset?: IPointData, scale = 1): boolean { // 画布必须有alpha通道\n    let { x, y, radiusX, radiusY } = radiusPoint\n    if (offset) x -= offset.x, y -= offset.y\n    tempBounds.set(x - radiusX, y - radiusY, radiusX * 2, radiusY * 2).scale(scale).ceil()\n    const { data } = this.context.getImageData(tempBounds.x, tempBounds.y, tempBounds.width || 1, tempBounds.height || 1)\n    for (let i = 0, len = data.length; i < len; i += 4) { if (data[i + 3] > 0) return true }\n    return data[3] > 0\n}"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","SuppressedError","App","Leafer","__tag","isApp","constructor","userConfig","data","super","init","parentApp","ground","tree","sky","editor","this","addLeafer","type","Creator","__setApp","canvas","realCanvas","view","config","parentView","unrealCanvas","leafer","watcher","disable","layouter","__updateLocalBounds","forEach","updateLayout","start","stop","unlockLayout","lockLayout","forceRender","bounds","sync","merge","add","index","setTimeout","__getChildConfig","isUndefined","childIndex","__listenChildEvents","fn","children","__onCreated","created","every","child","__onReady","ready","__onViewReady","viewReady","__onChildRenderEnd","e","renderer","addBlock","renderBounds","update","__render","options","context","matrix","copyWorld","__onResize","event","resize","assign","hittable","undefined","DataHelper","autoLayout","copyAttrs","canvasSizeAttrs","fill","once","LayoutEvent","END","RenderEvent","START","__eventIds","push","on_","registerUI","downKeyMap","Keyboard","isHoldSpaceKey","isHold","code","isHoldKeys","shortcutKeys","setDownCode","setUpCode","PointerButton","LEFT","RIGHT","MIDDLE","defaultLeft","buttons","left","right","middle","UIEvent","Event","spaceKey","B","params","bubbles","getBoxPoint","relative","current","getInnerPoint","getLocalPoint","getPagePoint","getInner","getLocal","getPage","changeName","oldName","newName","EventCreator","min","max","abs","Math","float","sign","MathHelper","minX","maxX","minY","maxY","BoundsHelper","tempContent","Bounds","tempDragBounds","DragBoundsHelper","limitMove","leaf","move","dragBounds","dragBoundsType","D","getValidMove","__localBoxBounds","getDragBounds","axisMove","limitScaleOf","origin","scale","lockRatio","getValidScaleOf","getLocalPointByInner","getInnerPointByBox","draggable","y","x","parent","boxBounds","isInnerMode","content","sideType","change","width","bottom","height","boundsRight","boundsBottom","set","scaleOf","originLeftScale","originRightScale","originTopScale","originBottomScale","aScale","bScale","aSize","bSize","correctScaleX","correctScaleY","unsign","isFinite","PointerEvent","POINTER","BEFORE_DOWN","BEFORE_MOVE","BEFORE_UP","DOWN","MOVE","UP","OVER","OUT","ENTER","LEAVE","TAP","DOUBLE_TAP","CLICK","DOUBLE_CLICK","LONG_PRESS","LONG_TAP","MENU","MENU_TAP","registerUIEvent","MyPointerEvent","tempMove","DragEvent","setList","list","LeafList","setData","localStart","worldTotal","checkLimit","PointHelper","getPageMove","total","assignMove","getInnerMove","getLocalMove","getPageTotal","getInnerTotal","getLocalTotal","getPageBounds","totalX","moveX","totalY","moveY","BEFORE_DRAG","DRAG","MyDragEvent","DropEvent","DROP","MoveEvent","DRAG_ANIMATE","PULL_DOWN","REACH_BOTTOM","TouchEvent","MyTouchEvent","RotateEvent","BEFORE_ROTATE","ROTATE","SwipeEvent","SWIPE","ZoomEvent","BEFORE_ZOOM","ZOOM","KeyEvent","HOLD","InteractionHelper","getDragEventData","startPoint","lastPoint","getDropEventData","getSwipeDirection","angle","getSwipeEventData","lastDragData","I","getAngle","getBase","pointerUpButtons","button","altKey","ctrlKey","shiftKey","metaKey","time","Date","now","pathHasEventType","path","len","hasEvent","filterPathByEventType","find","pathCanDrag","some","item","LeafHelper","isLeafer","pathHasOutside","isOutside","emptyList","Dragger","interaction","dragDataList","setDragData","animateWait","dragEndReal","downData","dragData","canAnimate","canDragOut","getList","realDraggable","hover","proxy","selector","hasProxyList","dragList","draggableList","dragging","dragHoverExclude","checkDrag","canDrag","moving","pointerCancel","canMove","isHoldRightKey","isMobileDragEmpty","moveType","emit","dragStart","drag","getDraggableList","setDragStartPoints","realDraggableList","dragStartPoints","innerId","throughPath","dragReal","isDragEnd","running","dragLimitAnimate","p","checkLimitMove","axisDrag","isString","animateMove","isNumber","dragOverOrOut","dragOverPath","indexAt","dragEnterOrLeave","dragEnterPath","dragEnd","checkDragEndAnimate","endDragData","dropList","swipe","drop","autoMoveCancel","dragReset","animate","getDistance","pointer","swipeDistance","swipeData","dropData","_data","_speed","_func","_off","stopAnimate","checkDragOut","autoMoveOnDragOut","destroy","debug","Debug","get","allowTypes","emitAppChildren","capture","excludePath","name","startsWith","__","hitChildren","exclude","has","emitEvent","destroyed","hitSelf","State","updateEventStyle","phase","isStop","wheel","zoomSpeed","moveSpeed","rotateSpeed","delta","snap","hitRadius","tapTime","longPressTime","transformTime","dragHover","dragDistance","touch","preventDefault","multiTouch","autoDistance","zoom","cursor","keyEvent","InteractionBase","dragger","transforming","transformer","moveMode","m","isHoldMiddleKey","isDragEmpty","canHover","mobile","dragEmpty","isRootPath","hoverData","isTreePath","holdMiddleKey","holdRightKey","holdSpaceKey","clone","tapCount","defaultPath","createTransformer","default","__listenEvents","receive","_event","pointerDown","useDefaultPath","updateDownData","checkPath","downTime","tapWait","longPressWait","waitRightTap","updateCursor","pointerMove","hitPoint","pointerMoveReal","pointerWaitCancel","updateHoverData","pointerHover","pointerUp","findPath","upData","addList","touchLeave","isCancel","tap","menuTap","menu","waitMenuTap","rotate","transformEnd","_list","keyDown","cancelHover","keyUp","pointerOverOrOut","pointerEnterOrLeave","overPath","enterPath","pointerType","hasLong","longTap","tapMore","waitTap","emitTap","useTime","hasDouble","tapWaitCancel","emitDoubleTap","clearTimeout","tapTimer","through","bottomList","Platform","backgrounder","getByPoint","app","syncEventer","isDrag","isPress","isHover","isFocus","focusData","stopDragAnimate","setCursor","clientPoint","updateClient","clientBounds","getClientBounds","point","clientX","clientY","round","longPressWaitCancel","longPressTimer","longPressed","dragOut","shrinkCanvasBounds","spread","ResizeEvent","RESIZE","LeaferEvent","READY","__removeListenEvents","off_","error","Cursor","value","custom","HitCanvasManager","CanvasManager","maxTotal","pathList","pixelList","getPixelType","__autoClear","hitCanvas","getPathType","clearImageType","__clearLeafList","clearPathType","leafList","__hitCanvas","reset","clear","getSelector","toInnerRadiusPointOf","copyRadiusPoint","hitRadiusPoint","inner","worldRadiusPoint","Leaf","prototype","hit","worldPoint","world","__world","isBranch","__hitWorld","forceHitFill","layout","__layout","isSmall","hitBox","hitCanvasChanged","__updateHitCanvas","boundsChanged","__hit","__hitFill","h","hitFill","windingRule","__hitStroke","strokeWidth","hitStroke","__hitPixel","hitPixel","hitScale","__drawHitPath","__drawRenderPath","Matrix","ui","UI","__box","hitCanvasManager","isHitPixelFill","__isAlphaPixelFill","__isCanvas","isHitPixelStroke","__isAlphaPixelStroke","isHitPixel","contextSettings","willReadFrequently","size","image","hitCanvasSize","tempBounds","getFitMatrix","a","pixelRatio","ImageManager","patternLocked","__renderShape","setWith","scaleWith","invertWith","translate","snapshot","ignoreFill","ignoreStroke","resetTransform","__isHitPixel","setStrokeOptions","needHitFillPath","__maxStrokeWidth","needHitStrokePath","stroke","radiusWidth","radiusX","hitWidth","strokeAlign","rect","Rect","box","Box","cornerRadius","call","Text","__lineHeight","fontSize","__baseLine","__letterSpacing","__textDrawData","beginPath","__drawPathByBox","rows","row","Group","pick","emptyData","LeaferCanvasBase","fillRule","isPointInPath","isPointInStroke","radiusPoint","offset","radiusY","ceil","getImageData"],"mappings":"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","x_google_ignoreList":[0]}